<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Industrial Light and Magic</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Discussing the move to Linux on ILM's renderfarm, with speed&#10;    and stability comes responsibility.&#10;    "><meta name="keywords" content="graphics, special, effects, film, Maya"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2620580.0x2717ab0"></a>Industrial Light and Magic</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #99, July 2002</div></div><div><p>
    Discussing the move to Linux on ILM's renderfarm, with speed
    and stability comes responsibility.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2620580.0x27184a8"></a></h2></div></div><p><span   class="emphasis"><em>Star Wars, Episode II: Attack
of the Clones</em></span>, released in May 2002, is Industrial Light
&amp; Magic's (ILM) first movie produced after converting its
workstations and renderfarm to Linux last year. Located north of
San Francisco in San Rafael, California, ILM was founded in 1975 to
produce the visual effects for <span   class="emphasis"><em>Star Wars</em></span>.
Although owned by George Lucas, ILM produces visual effects for
more than Lucasfilm productions, such as the <span   class="emphasis"><em>Star
Wars</em></span> and <span   class="emphasis"><em>Indiana Jones</em></span> films. Many
other studios seeking that bit of something extra on the cutting
edge of special effects use ILM. ILM has received 14 Academy
Awards, including ones for its work on <span   class="emphasis"><em>Forrest
Gump</em></span>, <span   class="emphasis"><em>Jurassic Park</em></span>,
<span   class="emphasis"><em>Terminator 2</em></span>, <span   class="emphasis"><em>Who Framed Roger
Rabbit?</em></span> and <span   class="emphasis"><em>E.T.</em></span>
<div       class="mediaobject"><a href="6011f1.large.jpg"><img src="6011f1.jpg"></a><div class="caption"><p>
A scene in <span  class="emphasis"><em>Star Wars</em></span> being edited in ILM's
proprietary compositing package CompTime. ILM created its own
compositor rather than using a commercial package such as Shake or
RAYZ.
</p></div></div>

</p><p>&ldquo;Linux is increasing the quality of our work, not the
quantity&rdquo;, says Andy Hendrickson, director of research and
development. Large amounts of processing power enable more user
control. He explains,</p><div class="blockquote"><blockquote class="blockquote"><p>We often go into a show knowing what we want but
are forced to scale back realism with shortcuts because of a lack
of processing power. Using Linux we can add more realism. We direct
effects. It isn't enough to have a cloud that is an NOAA-accurate
model. Artistic staff directs the effects with, &ldquo;Make that cloud
more fluffy&rdquo;. Or, if we simulate an entire ocean, as in
<span   class="emphasis"><em>Perfect Storm</em></span>, &ldquo;Make that wave
larger&rdquo;.</p></blockquote></div><p>ILM made a bold move to undertake their Linux conversion in
the midst of a major movie production, switching while work was
underway on <span   class="emphasis"><em>Episode II</em></span>. &ldquo;We thought
converting to Linux would be a lot harder than it was&rdquo;, says
Hendrickson. &ldquo;Linux is so like what we had before. We pushed
forward deployment in November 2001 and will finish conversion
after <span   class="emphasis"><em>Episode II</em></span>.&rdquo; During the changeover, ILM
is supporting existing SGI IRIX machines and Linux PCs to avoid
overwhelming users with too much change.
</p><p>Sequence supervisor Robert Weaver is a technical director on
<span   class="emphasis"><em>Episode II</em></span>. Weaver's desk has a Linux PC on
the left side and an SGI O2 on the right. Because the Linux desktop
is configured to look like the SGI O2, it isn't immediately
apparent which screen is which, until Weaver demonstrates the
difference in speed. He says,</p><div class="blockquote"><blockquote class="blockquote"><p>The old system is so slow that the clones firing
lasers appear to be throwing javelins. We've seen about a five
times speed improvement with Linux, which is appreciated! I'd say
Linux is one of the most successful efforts we've had. I can't say
enough good things about it. It is intuitive, incredibly stable,
and we can get stuff fixed at a moment's notice. Our renderer
hasn't been ported yet but will be by the summer. That's all that's
keeping me on the O2.</p></blockquote></div><p>All ILM 3-D particle simulations are done in Alias|Wavefront
Maya. &ldquo;We have, I'd say, 90% of our Maya users on Linux&rdquo;, says
Weaver. &ldquo;It seems incredibly stable on Linux. I haven't had Maya
crash on me in months. I'm evaluating that the correct cycles have
been put in. I do that in wireframe mode.&rdquo; To extend the
functionality of Maya, Weaver writes plugins. &ldquo;Maya makes writing
plugins fairly easy. I add stuff to the shelf.&rdquo; The shelf is a set
of plugin tabs visible across the top in Maya. The ocean in
<span   class="emphasis"><em>Perfect Storm</em></span> is an example of the effects ILM
achieves with Maya plugins.
</p><p>&ldquo;Our compositing software, CompTime, has been ported to
Linux&rdquo;, notes Weaver. ILM created its own compositor with a plugin
architecture for doing motion picture editing rather than choosing
a commercial package. Weaver writes compositor plugins, too. &ldquo;The
compositor plugins are in Python&rdquo;, he notes. &ldquo;We're a big Python
shop...and MEL.&rdquo; MEL is the Maya scripting language.</p><p>Maya is considered by ILM a tool best for TDs (technical
directors); animators at ILM use SOFTIMAGE. The conversion to Linux
triggered a company-wide upgrade from version 3.8 of SOFTIMAGE (on
IRIX) to the 4.0 version that recently became available for
Linux.</p><p>In the years since the first <span   class="emphasis"><em>Star Wars</em></span>
trilogy, animation software has become capable of greater facial
expression. ILM created their own caricature facial animation
application that reads and writes SOFTIMAGE scenes directly, not as
a plugin. Senior Digital Model Supervisor Geoff Campbell used this
software to set up facial expressions for animation in
<span   class="emphasis"><em>Episode II</em></span>.</p><div       class="mediaobject"><img src="6011f2.jpg"><div class="caption"><p>
ILM Model Supervisor Geoff Campbell and Animation Director Rob
Coleman working on the character animation of Yoda for a scene in
<span  class="emphasis"><em>Star Wars</em></span>.
</p></div></div><p>&ldquo;There are 11 muscles in the face that are key to giving a
performance&rdquo;, says Campbell. &ldquo;I can stretch a face in SOFTIMAGE
as much as I want. When I like what I've done, I'll save it as a
new shape. At my desk I have a little camera and a mirror I use to
view my real facial expressions. You invest a little bit of
yourself in each character.&rdquo; Campbell says an important detail in
a character's performance is &ldquo;eye darts&rdquo;, the little telling
looks that performers give each other when interacting. In
<span   class="emphasis"><em>Episode II</em></span> Yoda had eye darts even with his
eyes closed. &ldquo;Linda Bell developed an animation of the eyes while
sleeping, that is, the eyes moving in REM sleep under closed
eyelids.&rdquo;</p><p>&ldquo;I wanted Yoda to look better than the puppet, to have the
lip movements better match the words&rdquo;, says Campbell. She explains
that</p><div class="blockquote"><blockquote class="blockquote"><p>The interesting thing with Yoda is George didn't
want us to go light years ahead of the puppet's limitations. When
Yoda is speaking in <span   class="emphasis"><em>Episode II</em></span>, and he has a
lot of lines, he uses phonemes in a very simplistic way. A lot of
the shapes we are trying to mimic are the puppet shapes that Frank
Oz created moving his hand in rubber.</p></blockquote></div><p>The later CG Yoda matches the character in other movies in
the series, but he has more exact lip phonemes, with the lips
curling to make an &ldquo;M&rdquo; or &ldquo;B&rdquo; sound, than the puppet could
create.
<div       class="mediaobject"><a href="6011f4.large.jpg"><img src="6011f4.jpg"></a><div class="caption"><p>
For Yoda in <span  class="emphasis"><em>Star Wars</em></span>, ILM used their
proprietary facial caricature animation software designed to be
file-compatible with SOFTIMAGE. ILM's approach to in-house
development includes both proprietary applications such as this and
CompTime, and custom plugins for use with commercial pacakges like
Maya and SOFTIMAGE.
</p></div></div>

</p><p>The hair on Yoda is another character feature manipulated
with ILM's facial animation software. Because moving individual
hairs would be too cumbersome, there are single control hairs that
influence the hairs around them. To style Yoda's hair
interactively, speed is important. When running ILM's facial
animation software on the SGI O2, it took seconds to redraw the
screen after each change, and the delay made work difficult. &ldquo;With
Linux we manipulate high-res models in real time in a way we
couldn't with our SGI system&rdquo;, says Campbell.</p><p>ILM still builds some physical models but mostly for
backgrounds or for organic-looking things that can be created
easier than with CG. Although ILM doesn't construct many spaceship
models anymore, their computerized motion control cameras are still
shooting background plates nonstop.</p><p>R&amp;D Principal Engineer Phil Peterson reports that ILM is
about 80% finished with its Linux software conversion. He says, &ldquo;A
team of three people ported over a million lines of code to
Linux.&rdquo;</p><p>&ldquo;The biggest issue we had in porting was the compiler and
other tools&rdquo;, says Peterson. &ldquo;Newer C++ code is fairly dependent
on STL.&rdquo; The gcc 2.96 compiler included with Red Hat didn't
support the C++ Standard Template Library (STL), so ILM uses gcc
3.01 instead. Their multiplatform build environment is customized
based on Python cooperating with GNU make.</p><p>ILM had to accommodate some CPU differences, such as
floating-point implementation and number precision. &ldquo;In some cases
we hand-optimized in-line assembly to get the most out of Linux&rdquo;,
says Peterson. One issue is how to track memory access per thread
in Linux, which handles thread IDs differently from IRIX. Another
annoyance is that a floating-point exception isn't allowed to throw
a C++ exception (because FP exceptions are asynchronous).</p><p>In integrating legacy Motif applications, ILM had to overcome
some issues with widget differences. &ldquo;We were using Motif
mostly&rdquo;, says Peterson, &ldquo;but use FLTK in our latest
applications&rdquo;. ILM made their SGI-based apps look similar on
Linux, including the fonts and colors. ILM software projects may
incorporate 80 or 90 libraries. For sound ILM uses OSS, but
Peterson says they may switch to ALSA. SGI provides the dMedia
libraries, but on Linux ILM had to create some of their own media
libraries to fill in missing functionality. To play back movies,
which at 2k by 1k are more than 27 times larger than typical 320
&times; 240 PC video, ILM created their own QuickTime-compatible
library used in their flipbook player.</p><div       class="mediaobject"><a href="6011f3.large.jpg"><img src="6011f3.jpg"></a><div class="caption"><p>
For the ocean in <span  class="emphasis"><em>Perfect Storm</em></span>, ILM created a
Maya plugin with the capability of directing the intensity of
particular waves. A key feature of ILM-developed software is user
control.
</p></div></div><p>&ldquo;With Linux the increase in speed is what everyone is
noticing&rdquo;, Hendrickson says. He says the speed increase is</p><div class="blockquote"><blockquote class="blockquote"><p>...not just 20% or 30%, but five times faster. We
have an incredible appetite here for computation. It is the
limiting factor. If an artist can get more iterations, the result
will be that much better. We have lots of Jedi knights, lots of
robes to model. Without the speeds coming out of hardware, we would
not be able to do it. Before we had to hand-animate approximations.
<span   class="emphasis"><em>Episode II</em></span> uses digital stunt double work,
blending seamlessly between the live and the CGI performer. We are
using CGI to replace rubber prosthetics on actors. We're doing more
simulation, more rigid body dynamics. As droids get sliced and
diced with light sabers, pieces fly off in realistic ways.</p></blockquote></div><p>George Lucas, who used 400 shots in the original
<span   class="emphasis"><em>Star Wars</em></span>, used 2,000 in <span   class="emphasis"><em>Episode
II</em></span>. Creating that required three visual effects
supervisors, as if doing three shows. &ldquo;Expect a jump in what we're
able to do after <span   class="emphasis"><em>Episode II</em></span>&rdquo;, says
Hendrickson.
</p><p>Thanks, in part, to Linux.</p><p><a href="6011s1.html" target="_self">The Computers of ILM</a></p><p><a href="6011s2.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p><span   class="bold"><b>Robin Rowe</b></span>
      (<a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>)
      is a partner in the motion picture technology company
      MovieEditor.com. He has led video R&amp;D at a Fortune 500 IT
      company, taught C++ at two universities and was an NBC-TV technical
      director. He leads two users' groups: LinuxMovies.org and
      OpenSourceProgrammers.org.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../099/toc099.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>