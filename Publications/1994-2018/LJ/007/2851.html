<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>CD-ROM and Linux</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    A CD-ROM drive is one of the most popular hardware upgrades&#10;    for personal computers and is becoming a standard peripheral&#10;    for new systems. In the article, Jeff looks at support for&#10;    CD-ROM under Linux.&#10;    "><meta name="keywords" content="CD-ROM"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1156580.0x124dab0"></a>CD-ROM and Linux</h1></div><div><div class="author"><h3 class="author">Jeff Tranter</h3></div><div class="issuemoyr">Issue #7, November 1994</div></div><div><p>
    A CD-ROM drive is one of the most popular hardware upgrades
    for personal computers and is becoming a standard peripheral
    for new systems. In the article, Jeff looks at support for
    CD-ROM under Linux.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124e2f0"></a></h2></div></div><p>CD-ROM stands for Compact Disc Read-Only
Memory, a storage medium utilizing an optical laser to read
microscopic pits on the aluminized layer of a polycarbonate disc.
The same format is used for audio compact discs.
</p><p>The storage capacity of a CD-ROM is approximately 650MB,
equivalent to over 500 high density 3.5" floppy disks or roughly
250,000 typed pages.</p><p>First-generation drives (known as single speed), provide a
transfer rate of approximately 150KB (kilobytes) per second.
Double-speed drives are commonly available, and triple- and
quad-speed drives have recently been introduced.</p><p>Most CD-ROM drives use either the Small Computer Systems
Interface (SCSI) or a vendor-proprietary interface (which is often
provided on a sound card). They also typically support playing
audio CDs via an external headphone jack, line-level output, or
speakers. A third type of CD-ROM interface, based on an extension
of the IDE hard disk interface, has also recently become
available.</p><p>CD-ROMs are usually formatted with an ISO-9660 (formerly
called High Sierra) file system. This format restricts filenames to
the MS-DOS style (8+3 characters). The Rock Ridge Extensions use
undefined fields in the ISO-9660 standard to support longer
filenames and additional Unix-style information (e.g., file
ownership, device files, symbolic links, etc.).</p><p>Photo-CD is a standard developed by Kodak for storing
photographic images as digital data on a CD-ROM. Photographic film
can be transferred to a Photo-CD and, with appropriate software,
you can view the images on a computer, perform further image
processing, or send them to a printer. Up to 100 photographs can be
stored on a CD with an image quality that is typically much higher
than can be obtained using other methods, such as scanners.</p><p>CD recorders have recently become available. They use a
different media and specialized equipment for recording, but the
resulting disc can be read by any CD-ROM drive. (This is the same
&ldquo;write once&rdquo; technology used for Photo-CD.)</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124e608"></a>The Advantages of CD-ROM</h2></div></div><p>The primary advantages of CD-ROM over other mass- storage
media are its high storage capacity, high reliability, and low
cost.</p><p>The drawbacks are that it is read-only, slower-than-hard-disk
media, and the discs can be damaged if mishandled.</p><p>Linux provides good support for CD-ROM. The dynamic buffer
cache used for the hard disk subsystem is also used for CD-ROM
access, improving performance. Depending on the type, multiple
drives can be supported. (The Panasonic driver, for example,
supports up to 16 drives.)</p><p>Linux fully supports the Rock Ridge Extensions to the
ISO-9660 file system, making all of the features of the hard disk
file systems available, including long filenames, file permissions,
links, and device files. PhotoCD is also supported by some of the
CD-ROM drivers.</p><p>Many vendors (I know of at least ten) are now offering CDs of
Linux source code, binaries, and documentation at reasonable
prices. Many of these feature easy to use menu-driven installation
programs. A single CD-ROM can hold a full Linux distribution, as
well as all of the files from the two major Internet archive sites,
with room to spare. By comparison, a recent Linux distribution can
fill as many as 50-3.5 inch floppies.</p><p>Finally, most CD-ROM drives support playing audio CDs, so you
can listen to music while waiting for the latest Linux kernel to
compile.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124e8c8"></a>Supported Hardware</h2></div></div><p>Linux supports virtually all SCSI CD-ROM drives, provided
that a supported SCSI host adaptor is used.</p><p>Many of the popular proprietary drives are supported,
including models produced by Sony, Mitsumi, and
Panasonic/Matsushita.</p><p>CD-ROMs based on the enhanced IDE standard are not yet
officially supported by Linux, although at the time of this
writing, at least one driver is in alpha testing.</p><p>By the time you read this, more devices will likely be
supported, either as part of the standard Linux kernel or as
patches. See the CD-ROM HOWTO document for a detailed list of the
latest supported hardware.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124ead8"></a>Configuring Linux for CD-ROM</h2></div></div><p>Setting up Linux to use a CD-ROM involves four steps:</p><div class="orderedlist"><ol type="1"><li><p>Installing the hardware</p></li><li><p>Configuring the Linux kernel</p></li><li><p>Creating the necessary device files</p></li><li><p>Mounting the media</p></li></ol></div><p>I will cover them briefly here; see the Linux CD-ROM HOWTO
for more details.</p><p>The first step, installation, is dependent on the type of
drive. Follow the instructions provided by the manufacturer or have
the installation performed by your dealer. There are no special
installation requirements for Linux.</p><p>Next, the Linux kernel must be configured. In some cases, you
may be able to use a pre-compiled kernel that has the necessary
drivers, but I recommend compiling it yourself; it will do you
good! For SCSI drives you need to configure in SCSI CD-ROM support
and the driver for the SCSI host adaptor being used.</p><p>For the proprietary CD-ROM interfaces, select the appropriate
driver (e.g., Sony CDU31A).</p><p>In order to mount CD-ROMs, you must also configure in support
for the ISO-9660 file system. If you have a sound card, now would
be a good time to configure the kernel sound driver as well.</p><p>The third step is to create the appropriate device files. If
you are running a standard Linux distribution you may have already
done this during system installation. It's a good idea to verify
these; the CD-ROM HOWTO lists the device file types, which are
drive dependent.</p><p>You should now be ready to compile and boot the newly
configured kernel. Verify that the CD-ROM was detected by looking
at the kernel boot messages; here is the output on my
system:</p><pre     class="programlisting">
SBPCD version 2.5 Eberhard Moenkeberg &lt;emoenke@gwdg.de&gt;
 SBPCD: Looking for a SoundBlaster/Matsushita CD-ROM drive
 SBPCD: Trying to detect a SoundBlaster CD-ROM drive at 0x230.
 SBPCD: - Drive 0: CR-562-x (0.76)
 SBPCD: 1 SoundBlaster CD-ROM drive(s) at 0x0230.
 SBPCD: init done.
</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124f1b8"></a>Using a CD-ROM</h2></div></div><p>To mount a CD-ROM, insert it in the drive and use the mount
command (as root). A typical command line is the following:</p><pre     class="programlisting">
% mount -t iso9660 -r /dev/cdrom /mnt
</pre><p>The example above assumes that the CD-ROM device file is
<b  >/dev/cdrom</b> and the disc is ISO-9660 formatted
(this is almost always the case). The <b  >-r</b> option
indicates that the disc is to be mounted read-only. If successful,
the CD can now be accessed under the directory
<b  >/mnt</b>.
</p><p>For a more permanent setup, you may wish to mount the CD
under a more meaningful name such as <b  >/cdrom</b>. By
adding an entry to the <b  >/etc/fstab</b> file you can
have a CD-ROM automatically mounted when Linux boots; see the
fstab(5) man page for details.</p><p>When finished with the CD, it can be unmounted using the
<b  >umount</b> command (again, run this as root):</p><pre     class="programlisting">
% umount /mnt
</pre><p>If you want to allow non-root users to mount and unmount
CD-ROMs, you can use the &ldquo;user&rdquo; option provided by some mount
commands. If you make an entry such as the following in
<b  >/etc/fstab</b>:</p><pre     class="programlisting">
/dev/sbpcd  /cdrom   iso9660
user,noauto,ro
</pre><p>then an ordinary user will be permitted to mount and unmount the
drive using these commands:</p><pre     class="programlisting">
% mount /cdrom
% umount /cdrom
</pre><p>The disc will be mounted with some options that help ensure
security (e.g., programs on the CD cannot be executed and device
files are ignored). Another method is to obtain or write a program
such as usermount which runs setuid to root and allows restricted
mounting of specific devices (e.g., CD-ROM and floppies) for
non-root users.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x124f898"></a>PhotoCD</h2></div></div><p>PhotoCDs use an ISO-9660 file system to store image files in
a proprietary format, at several different resolutions. Not all
CD-ROM drives support reading PhotoCDs. If yours does, you can
mount it and use a program such as <b  >hpcdtoppm</b> to
convert the files to a format that can be displayed using graphics
file viewers such as <b  >xloadimage</b> or
<b  >xv</b>.</p><p>The <b  >hpcdtoppm</b> program is part of the PBM
(portable bit map) utilities, available on many Internet archive
sites (look for <b  >pbm</b> or
<b  >netpbm</b>).</p><p>The program <b  >xpcd</b> is an X11-based utility
for manipulating PhotoCD images. You can select the images with a
mouse, preview them in a small window, and load the image with any
of the five possible resolutions. You can also mark a part of the
image and load only the selected part. This program can be found at
<b  >ftp.cs.tu-berlin.de</b> in the file
<b  >/pub/linux/Local/misc/ xpcd-0.2.tar.gz</b>.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x1647fb8"></a>Playing Audio CDs</h2></div></div><p>Several programs are available that allow playing audio CDs,
either through a headphone jack or an attached sound card. workman,
supplied with many Linux distributions, is one such program. It
sports a graphical user interface that resembles the controls
provided on audio CD players. Simple command-line CD player
programs also exist. Note that to play an audio CD you should not
try to mount it.</p><p>The CD player programs simply route the analog output of the
drive to an external device. Some CD-ROM drives also support
reading the digital sound data contained on audio CDs. Using a
program such as cdda2wav you can save audio tracks from a CD-ROM as
a sound file (e.g., in .wav format).</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x1648118"></a>Inheriting File System</h2></div></div><p>The Inheriting File System (IFS) is a kernel driver that
allows mounting multiple file systems at the same point. By
mounting a hard disk directory over a CD-ROM file system, you can
effectively obtain a writable CD-ROM file system.</p><p>At the time of this writing, an experimental version of IFS,
written by Werner Almesberger for the 0.99 Linux kernel, is
available as a kernel patch.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x1648278"></a>Creating CD-ROMs</h2></div></div><p>If you want to create your own CD-ROM, either by using a
writable CD drive or sending a tape to a vendor to be mastered,
there are some tools available under Linux that you can use.</p><p>The <b  >mkisofs</b> package allows creating an
ISO-9660 file system on a disk partition. This can be used to
assist in creating and testing CD-ROM file systems before mastering
discs.</p><p>There are also some utilities available for verifying the
format of ISO-9660 file systems; these can be useful for checking
suspect CD-ROMs.</p><p><a href="2851s1.html" target="_self">Getting the CD-ROM
HOWTO</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x1648538"></a>Common Problems</h2></div></div><p>If you encounter problems setting up CD-ROM support under
Linux, here is a list of things to check for. (See the CD-ROM HOWTO
for more information.)</p><div class="itemizedlist"><ul type="disc"><li><p>Are the appropriate CD-ROM driver(s) compiled in
the kernel? Try the command <b  >cat/proc/devices</b> to
see which drivers are installed.</p></li><li><p>Are you running the newly configured kernel? Use
<b  >uname -a</b> and check the time-stamp to see.</p></li><li><p>Is the drive recognized at boot time? The
<b  >dmesg</b> command should redisplay the boot messages
if they scroll by too quickly to read.</p></li><li><p>Did you create the proper device files and set
protections? The <b  >/dev/MAKEDEV</b> script is one way
to do this.</p></li><li><p>Is the ISO-9660 file system compiled in the kernel?
Try <b  >cat /proc/filesystems</b> and look for
iso9660.</p></li><li><p>Is there a known good CD-ROM (not audio CD) in the
drive?</p></li><li><p>Did you use the correct options to mount? You need
to specify <b  >-t iso9660, -r</b> (read-only), the
CD-ROM device file, and an empty directory. You should run this as
user &ldquo;root&rdquo;.</p></li><li><p>Can you read data from the drive? Try using the dd
command and checking for disk activity (e.g., <b  >dd
if=/dev/cdrom of=/dev/null bs=2048</b>).</p></li></ul></div><p>For some drives, if they are located at a non-standard I/O
address, you may need to edit the appropriate kernel driver header
file.</p><p><a href="2851s2.html" target="_self">Getting IFS</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1156580.0x1648f88"></a>For More Information</h2></div></div><p>Here are a number of additional useful sources of information
related to CD-ROM under Linux.</p><p>The Linux CD-ROM, SCSI, and Distribution HOWTO documents are
freely available from major Linux archive sites, including
sunsite.unc.edu in the directory
<b  >/pub/Linux/docs/HOWTO</b>. For those without network
access, printed copies of the Linux HOWTOs are also published by a
number of vendors, or you may be able to find them on a local
computer bulletin board system.</p><p>The latest and most complete information on the
Panasonic/SoundBlaster CD-ROM kernel driver can be found in the
file <b  >README.sbpcd</b>, usually found in the
directory <b  >/usr/src/linux/drivers/block</b>.</p><p>Additional information on commands such as mount and umount
can be found in the corresponding Linux man pages.</p><p>For those with access to Usenet, the following news groups
discuss information related to CD-ROM:</p><div class="itemizedlist"><ul type="disc"><li><p>comp.publish.cdrom.hardware</p></li><li><p>comp.publish.cdrom.multimedia</p></li><li><p>comp.publish.cdrom.software</p></li><li><p>comp.sys.ibm.pc.hardware.cd-rom</p></li><li><p>alt.cd-rom</p></li><li><p>alt.cd-rom.reviews</p></li></ul></div><p>A Frequently Asked Questions (FAQ) document for the
<b  >alt.cd-rom</b> newsgroup is also available; it is
archived on many Internet sites including
<b  >rtfm.mit.edu</b>.</p><p>The Internet site ftp.cdrom.com has a large archive of CD-ROM
information and software; look in the directory
<b  >/pub/cdrom</b>.</p><p>The Linux Documentation Project has produced several books on
Linux; the most useful for new users is <span   class="emphasis"><em>Linux
Installation and Getting Started</em></span>. These are freely
available by anonymous FTP from major Linux archive sites or can be
purchased in hard-copy format.</p><p>The Linux Software Map (LSM) is an invaluable reference for
locating Linux software, including the programs mentioned in this
article. The LSM can be found on various anonymous FTP sites,
including
<b  >sunsite.unc.edu:/pub/Linux/docs/LSM.gz</b>.</p></div></div>
<div class="authorblurb"><p>

           (<a href="mailto:Jeff.Tranter@Software.Mitel.com">Jeff.Tranter@Software.Mitel.com</a>)
           is a software designer for a telecommunications
           company in Ottawa, Canada. He has been using Linux for almost two
           years and is the author of the Linux Sound and CD-ROM HOWTO
documents.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../007/toc007.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>