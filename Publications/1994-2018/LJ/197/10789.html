<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Developing Portable Mobile Web Applications
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;What if you could write iPhone and iPad applications on Linux? And, what if&#10;those applications also ran on Android phones? Well, you can, by writing&#10;your application as a portable mobile Web application. Take advantage of&#10;HTML5 and JavaScript libraries to write rich Web applications that users&#10;can't tell from native applications.&#10;You even can have them install from iTunes and Android Market.&#10;Plus, you can write them in a fraction of the time it takes&#10;to write a native application.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xf56580.0x104dac0"></a>
Developing Portable Mobile Web Applications
</h1></div><div><div class="author"><h3 class="author">
Rick
 
Rogers
</h3></div><div class="issuemoyr">Issue #197, September 2010</div></div><div><p>
What if you could write iPhone and iPad applications on Linux? And, what if
those applications also ran on Android phones? Well, you can, by writing
your application as a portable mobile Web application. Take advantage of
HTML5 and JavaScript libraries to write rich Web applications that users
can't tell from native applications.
You even can have them install from iTunes and Android Market.
Plus, you can write them in a fraction of the time it takes
to write a native application.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x104e2a8"></a></h2></div></div><p>
Mobile applications for iPhone and Android smartphones are where the
excitement is today in application development. There are plenty of
customers (Canalys says there were almost 8 million Android phones and
more than 25 million iPhones sold in 2009), and those users regularly load
applications on their phones (AdMob says Android and iPhone users average
around nine downloads a month, and iTouch users average around 12). The demand for
mobile applications is hot.
</p><p>
How can a Linux developer tackle this
market? Native applications for
the iPhone must be developed with the Apple iPhone SDK, which runs only on
Mac OS X. Android development is supported on Linux with the Android SDK,
but ideally, you'd like to develop apps on Linux that run on both iPhone
and Android.
</p><p>
Mobile Web applications provide a solution. Web applications
use the browser as a common runtime environment across different
platforms. Applications are written in HTML, JavaScript and CSS, and run
on the platform's native browser. This idea is not new, but historically,
there have been a few issues with Web applications:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Browser security prevented the storage of local data.
</p></li><li><p>
Platform features like geolocation were not accessible from
HTML/JavaScript.
</p></li><li><p>
Users had to start the browser to use a Web app, which then didn't
match the native UI.
</p></li><li><p>
Browsers themselves were fragmented&mdash;different browsers interpreted
JavaScript in different ways.
</p></li></ul></div><p>
These problems are being addressed, and fortunately, Android and
iPhone both selected WebKit as the layout engine for their respective
browsers. HTML5 extends what a Web application can do, and creative
people have devised JavaScript libraries that minimize the look-and-feel
issues. The solution is an ongoing process, and it isn't complete.
</p><p>
HTML5 and related specifications add features like canvas, video, local
storage, Web workers, off-line applications and geolocation to HTML, and
WebKit is rapidly integrating these into the layout engine.
</p><p>
Specialized runtimes and libraries exist to allow JavaScript access to
underlying phone functions, such as location, acceleration, sound,
contacts, battery, camera, telephony and calendar. Some of these (for
example JIL, BONDI and WAC) are industry-led, involve custom Web runtimes and aim
to provide a universal widget environment across platforms. Others (such as
PhoneGap, Titanium and Rhomobile) focus on iPhone and Android, with ties to
the native SDKs that extend the capabilities of Web apps. As HTML5
implements similar features, these libraries generally conform their APIs
to the HTML5 APIs.
</p><p>
JavaScript libraries have been developed to address the look-and-feel
problem, including:
</p><div class="itemizedlist"><ul type="disc"><li><p>
iUi: a small extensible library that mimics the iPhone user interface.
</p></li><li><p>
iWebKit: another framework for iPhone-style applications.
</p></li><li><p>
jQTouch: a plugin for the popular jQuery JavaScript library, which
provides an iPhone style and a more general jQTouch style. jQTouch has
the advantage of using jQuery to hide browser differences.
</p></li></ul></div><p>
Android and iPhone both use WebKit as their layout engine, but there are
still differences, partly due to the selection of different WebKit
releases:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Android 1.6 (HTC G1) uses WebKit 525.20 and implements only Canvas,
Canvas Text and Geolocation.
</p></li><li><p>
Android 2.1 (Motorola Droid) uses WebKit 530.17 and adds the rest of
HTML5 (video, audio, local storage, Web Workers and off-line applications).
</p></li><li><p>
iPhone 3GS and iTouch use WebKit 528.16 and .18 and include all
features except for Web Workers (multithreading).
</p></li><li><p>
iPad uses WebKit 531.21 and includes all features.
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x104efb8"></a>
So What's the Catch?</h2></div></div><p>
Developing Web applications for smartphones is pretty straightforward,
but there are some things you need to know:
</p><div class="itemizedlist"><ul type="disc"><li><p>
It's not like C: if you're used to developing Linux applications in
C or C++ or Java or Perl, this is different. Web application development
is a little closer to the Android development environment, where screen
layouts are in XML files, and functionality is written in Java, but mostly,
it's like Web development.
</p></li><li><p>
Native apps require native SDKs: if you want users to be able to load
your application from iTunes and Android Market, you have to enable that
with the appropriate SDKs. There are workarounds that I talk about later.
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x104f278"></a>
Development Tools and Libraries</h2></div></div><p>
All you need to develop Web applications is a text editor to write
JavaScript, CSS and HTML, and a browser to test the results. The job is a
bit easier using a Web-oriented IDE, a JavaScript debugger and the Safari
browser, along with an assortment of mobile devices for testing. Safari
has a number of features that simplify development. You can select which
User Agent the browser emulates (from the Developer menu), and the Web
Inspector allows you to inspect and debug Web elements, including client-side databases. Safari isn't supported on Linux, but it runs just fine
under VirtualBox. The code for this article was developed using the
following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Ubuntu 9.10 and the gedit editor.
</p></li><li><p>
Safari browser on Windows XP on VirtualBox.
</p></li><li><p>
Apache httpd Web server.
</p></li><li><p>
GIMP for icon graphics.
</p></li><li><p>
jQTouch and jQuery libraries.
</p></li><li><p>
iPhone, iTouch, iPad and Android devices.
</p></li></ul></div><p>
Installation of the tools is well documented elsewhere. The Resources
section for
this article
gives pointers to the download URLs. To install jQTouch, just put the
JavaScript and CSS files in the directory tree of your Web application, and
point to them from your HTML &lt;head&gt; element. jQTouch comes with minimized
versions of the files and a minimized jQuery library.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x104f8a8"></a>
Example Application</h2></div></div><p>
As an example, let's look at a simple notes application that I'll call
Webnotes. With it, a user could write notes, and view, edit or delete notes
later. A note will consist of a title and an arbitrary-length string. The
notes will be stored locally on the smartphone, using HTML5 client-side
database APIs, and we'll test it running on a variety of Apple and Android
devices. When we're done, we'll compare this to a similar Android sample
application that ships with the Android SDK. Because we're using client-side
database features that are part of HTML5, we'd expect it to work fine on
the iPhone, the Droid and the iPad, and not to work on the HTC G1 (it does not
support local storage).
</p><p>
Our app has three screens:
</p><div class="itemizedlist"><ul type="disc"><li><p>
The opening screen will display a list of existing notes, listed by
title, in order by the date they were last edited. Touching a title will
select that note for edit. Touching a + button will add a new note (Figure
1).
</p></li><li><p>
An edit screen will allow viewing, editing or deletion of a note.
(Figure 2).
</p></li><li><p>
An add screen will create a new note and store it in the database (Figure
3).
</p></li></ul></div><div       class="mediaobject"><img src="10789f1.jpg"><div class="caption"><p>
Figure 1. Home Screen
</p></div></div><div       class="mediaobject"><img src="10789f2.jpg"><div class="caption"><p>
Figure 2. Edit Screen
</p></div></div><div       class="mediaobject"><img src="10789f3.jpg"><div class="caption"><p>
Figure 3. Add Screen
</p></div></div><p>
Listing 1 is the HTML file, index.html, primarily concerned with layout.
Listing 2 is a JavaScript file, webnotes.js, that has the logic we need.
Let's go through the HTML first.

</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x1448498"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 1. index.html</b></p><pre     class="programlisting">

&lt;!DOCTYPE HTML PUBLIC&gt;
 &lt;head&gt;
  &lt;title&gt;WebNotes&lt;/title&gt;
  &lt;link type="text/css" rel="stylesheet"
        media="screen" href="jqtouch/jqtouch.min.css"&gt;
  &lt;link type="text/css" rel="stylesheet"
        media="screen" href="themes/jqt/theme.min.css"&gt;
  &lt;script type="text/javascript"
          src="jqtouch/jquery.1.3.2.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"
          src="jqtouch/jqtouch.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"
           src="javascript/webnotes.js"&gt;&lt;/script&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;div id="home"&gt;
   &lt;div class="toolbar"&gt;
    &lt;h1&gt;Web Notes&lt;/h1&gt;
    &lt;a class="button add slideup"
       href="#addNote"&gt;+&lt;/a&gt;
   &lt;/div&gt;
   &lt;ul class="metal"&gt;
    &lt;li id="noteTemplate" class="arrow"
        style="display:none"&gt;
     &lt;span class="title"&gt;Title&lt;/span&gt;
    &lt;/li&gt;
   &lt;/ul&gt;
  &lt;/div&gt;

  &lt;div id="addNote"&gt;
   &lt;div class="toolbar"&gt;
    &lt;h1&gt;Add Note&lt;/h1&gt;
    &lt;a class="button cancel" href="#"&gt;Cancel&lt;/a&gt;
   &lt;/div&gt;
   &lt;form method="post"&gt;
    &lt;ul&gt;
     &lt;li&gt;&lt;input type="text" class="title" /&gt;&lt;/li&gt;
     &lt;li&gt;&lt;textarea class="note" &gt;&lt;/textarea&gt;&lt;/li&gt;
     &lt;li&gt;
      &lt;input type="submit" class="submit"
             name="action" value="Save Note" /&gt;&lt;/li&gt;
    &lt;/ul&gt;
   &lt;/form&gt;
  &lt;/div&gt;

  &lt;div id="editNote"&gt;
   &lt;div class="toolbar"&gt;
    &lt;h1&gt;Edit Note&lt;/h1&gt;
    &lt;a class="button cancel" href="#"&gt;Cancel&lt;/a&gt;
    &lt;a class="button"
       onclick="deleteNoteById()"&gt;Delete&lt;/a&gt;
   &lt;/div&gt;
   &lt;form method="post"&gt;
    &lt;ul&gt;
     &lt;li&gt;&lt;input type="text" class="title" /&gt;&lt;/li&gt;
     &lt;li&gt;&lt;textarea class="note" &gt;&lt;/textarea&gt;&lt;/li&gt;
     &lt;li&gt;
      &lt;input type="submit" class="submit"
             name="action" value="Save Note" /&gt;&lt;/li&gt;
    &lt;/ul&gt;
   &lt;/form&gt;
  &lt;/div&gt;
 &lt;/body&gt;
&lt;/html&gt;

</pre></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x14486a8"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 2. webnotes.js</b></p><pre     class="programlisting">

var jQT = $.jQTouch({
   icon: 'icon.png',
});
var db;
var currId;
$(document).ready(function(){
 $('#addNote form').submit(addNote);
 $('#editNote form').submit(replaceNoteById);
 db = openDatabase('WebNotes', '1.0', 'WebNotes',
                   524288);
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'CREATE TABLE IF NOT EXISTS notes ' +
    ' (id INTEGER NOT NULL PRIMARY KEY ' +
    '     AUTOINCREMENT, ' +
    ' date DATE NOT NULL, title TEXT NOT NULL, ' +
    ' note TEXT NOT NULL);'
   );
  }
 );
 refreshNotes();
});

function addNote(){
 var now = new Date();
 var title = $('#addNote .title').val();
 var note = $('#addNote .note').val();
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'INSERT INTO notes (date, title, note) VALUES' +
    ' (?,?,?)', [now, title, note],
    function(){
     $('#addNote .title').attr('value', "");
     $('#addNote .note').text("");
     refreshNotes();
     jQT.goBack();
    },
    errorHandler);
  }
 );
 return false;
}

function errorHandler(transaction, err){
 alert('SQL err: '+err.message+' ('+err.code+')');
 return true;
}

function refreshNotes() {
 $('#home ul li:gt(0)').remove();
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'SELECT * from notes ORDER BY date;', null,
    function(transaction, result) {
     for (var i=0; i &lt; result.rows.length; i++) {
      var row = result.rows.item(i);
      var newNote = $('#noteTemplate').clone();
      newNote.removeAttr('id');
      newNote.removeAttr('style');
      newNote.data('noteId', row.id);
      newNote.appendTo('#home ul');
      newNote.find('.title').text(row.title);
      newNote.click(function(){
       editNoteById($(this).data('noteId'));
       jQT.goTo('#editNote', 'swap');
      });
     }
    },
    errorHandler);
  }
 );
}

function replaceNoteById() {
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'UPDATE notes SET title=?, note=? WHERE id=?',
     [$('#editNote .title').val(),
      $('#editNote .note').val(),
      currId],
    function(transaction, result) {
     refreshNotes();
     jQT.goTo('#home', 'swap');
    },
    errorHandler);
  }
 );
}

function editNoteById(id) {
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'SELECT * from notes WHERE id=?;', [id],
    function(transaction, result) {
     var res = result.rows.item(0);
     currId = res.id;
     $('#editNote .title').attr('value', res.title);
     $('#editNote .note').text(res.note);
    });
  }, errorHandler);
}

function deleteNoteById() {
 db.transaction(
  function(transaction) {
   transaction.executeSql(
    'DELETE FROM notes WHERE id=?;', [currId],
    function(transaction, result) {
     alert('Note deleted');
     refreshNotes();
     jQT.goBack();
    }, errorHandler);
  }
 );
}

</pre></div><p>
After the HTML declaration, there is the &lt;head&gt; section of the document.
The &lt;title&gt; element is the HTML title for the page. The iPhone and Android
browsers display it as the window title until we make the application full
screen. The next two &lt;link&gt; elements tell the browser where to find CSS
files referenced in the application. Two styles come with jQTouch:
&ldquo;/themes/apple&rdquo; and &ldquo;themes/jqt&rdquo;. We've chosen
the latter here, to be a little
more device-independent. The next three elements are &lt;script&gt;
references&mdash;the first two for jQuery and jQTouch, and the next for webnotes.js. The order
is important&mdash;the &lt;script&gt; element for jQuery must precede the one for
jQTouch, and they must both precede any scripts that use them.
</p><p>
After the header, the &lt;body&gt; element of Listing 1 contains three
first-level &lt;div&gt; elements, one for each screen. The top levels of the three
screens are very similar. Each has a unique id attribute that we use to
refer to the screen from JavaScript. Each also includes an inner &lt;div&gt; with
<tt  >class="toolbar"</tt> that defines the bar at the top of
the screen. The &lt;h1&gt;
element in these &lt;div&gt;s is the screen title. The toolbars also each have
an anchor element of <tt  >class="button cancel"</tt>. This jQTouch class defines the
arrow-shaped cancel button, and the href says clicking on it takes us to
the &ldquo;home&rdquo; screen. The anchor also defines text
(&ldquo;Cancel&rdquo;) that appears in
the button. On the &ldquo;home&rdquo; screen, we've included a + button to add a note.
We've specified the &ldquo;slideup&rdquo; animation for that button's action, so the
&ldquo;addNote&rdquo; screen will slide into view from the bottom of the screen.
</p><p>
The &ldquo;home&rdquo; screen also contains an inner &lt;div&gt; with a list containing one
list item. That item is a template that defines the display of note titles.
You'll see how we use it below.
</p><p>
In the &ldquo;addNote&rdquo; screen, after the &ldquo;toolbar&rdquo;
&lt;div&gt; there is another &lt;div&gt;
that contains a &lt;form&gt;. This &lt;form&gt; contains a list that has three list
items:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Text input for the title of the note.
</p></li><li><p>
Text area for the contents of the note.
</p></li><li><p>
Button to submit the &lt;form&gt;.
</p></li></ul></div><p>
We've given the list items class names to make them easy to find with
jQTouch.
</p><p>
The &ldquo;editNote&rdquo; screen looks like &ldquo;addNote&rdquo;, with one addition. There's an
&lt;input&gt; of <tt  >class="button"</tt> in the toolbar to give the user a way to delete a
note. The onclick attribute for this button tells the browser to call a
JavaScript routine <tt  >deleteNoteById()</tt>, which we define in webnotes.js.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x14492b0"></a>
Client-Side Database</h2></div></div><p>
WebKit uses SQLite to implement the client-side
database APIs for HTML5.
The implementation is remarkably complete, including support for
transactions with rollback if the transaction does not succeed. Let's look
at the JavaScript in Listing 2, webnotes.js.
</p><p>
The first four lines of the file initialize jQTouch and assign an instance
to the variable jQT. The parameter &ldquo;.icon&rdquo; is one of many that can be
defined for jQTouch. It points to a 57x57 pixel icon for the application
(Figure 4).
</p><div       class="mediaobject"><img src="10789f4.jpg"><div class="caption"><p>
Figure 4. Application Icon
</p></div></div><p>
On line five, we declare a variable &ldquo;db&rdquo; for the database instance. The
block of code that starts <tt  >$(document).ready</tt> is a jQuery function that
executes when the browser has finished loading the DOM, even though the
page contents may still be loading. The anonymous function first redirects
the submit buttons from the &ldquo;addNote&rdquo; and
&ldquo;editNote&rdquo; forms, pointing them
at JavaScript functions. Then we use openDatabase() to do just that,
passing it four parameters:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Short name for the database.
</p></li><li><p>
Database version number.
</p></li><li><p>
Display name for the database.
</p></li><li><p>
Maximum size of the database.
</p></li></ul></div><p>
SQLite creates the database if it does not exist. The anonymous function
executes an SQLite transaction that creates or opens a table called
&ldquo;notes&rdquo;.
Each row of that table represents a note with the following columns:
</p><div class="itemizedlist"><ul type="disc"><li><p>
<tt  >INTEGER id KEY</tt>: unique identifier auto-incremented by SQLite.
</p></li><li><p>
<tt  >DATE lastedit</tt>: date the note was last edited.
</p></li><li><p>
<tt  >TEXT title</tt>: title of the note.
</p></li><li><p>
<tt  >TEXT note</tt>: contents of the note.
</p></li></ul></div><p>
Once the table is opened, we call a function, refreshNotes(), described below,
that will update the list displayed on the &ldquo;home&rdquo; screen.
</p><p>
We next define the &ldquo;addNote()&rdquo; function, which gets invoked when the user
touches Save Note on the &ldquo;addNote&rdquo; screen. The user already
has entered
the text for title and note, so we now want to insert a suitable record
into the &ldquo;notes&rdquo; table. We get the date from the Date() function, and use
jQuery to locate the title and note input elements. If you're not familiar
with jQuery, it uses a CSS-like syntax to identify DOM elements. In this
case, it finds the elements with classes &ldquo;title&rdquo; and
&ldquo;note&rdquo;, and the .val()
function assigns their values to JavaScript variables &ldquo;title&rdquo;
and &ldquo;note&rdquo;,
respectively. Using the client-side database API to start a transaction,
transaction.executeSql() takes four parameters:
</p><div class="itemizedlist"><ul type="disc"><li><p>
SQL string: template for the SQL to be executed.
</p></li><li><p>
Array of parameters whose values replace the ? marks in the SQL template.
</p></li><li><p>
Function that executes if the operation was successful&mdash;in this case, an
anonymous function.
</p></li><li><p>
Function that executes if there was an error&mdash;in this case, errorHandler().
</p></li></ul></div><p>
If successful, we clear out the values in the input elements (ready for the
next add), refresh the list of notes so the new one will show up and use a
jQTouch function, jQT.goBack() to return to the &ldquo;home&rdquo; screen. Since we
used &ldquo;slideup&rdquo; to show the &ldquo;addNote&rdquo; screen, jQTouch is smart enough to
slide it down to return to &ldquo;home&rdquo;. We then return
&ldquo;false&rdquo; to the browser,
as we don't need it to continue.
</p><p>
We now define the errorHandler() function, which we reuse for all database
transactions in the script. It displays an alert box with the error message
and returns.
</p><p>
Next is the refreshNotes() function. We use jQuery to find all the &lt;li&gt;
elements on the &ldquo;home&rdquo; screen and remove them. Then, we execute a database
transaction to find all the note records, and use the &ldquo;home&rdquo; screen
template to create a list item for each note and insert it into the
&ldquo;home&rdquo;
screen. We add a .click function to each list item that will take users
to the &ldquo;editNote&rdquo; screen when they click on a note title.
</p><p>
The replaceNoteById(), editNoteById() and deleteNoteById() functions are
all very similar to addNote(), with the SQL template changed appropriately.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x15d93c0"></a>
Running the App</h2></div></div><p>
The application can be run from the browser on an iPhone or Android device.
As expected from looking at HTML5 features on different phones, Webnotes
works fine on the iPhone, iTouch, iPad and Droid. It does not work on the
G1, because that phone doesn't support client-side database transactions.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x15d94c8"></a>
Packaging the App for Distribution</h2></div></div><p>
If you want to package a Web application for distribution on iTunes or
Android Market, one way is to use the appropriate SDK and write a small
wrapper application. The application creates a browser Intent (Android) or
a UIWebView (iPhone) and gives it the location of index.html. We don't have
room to go into the SDKs here, but the applications are literally a few
lines of code.
</p><p>
Or, for iTunes, you can let a package like PhoneGap do the work for you. You
still need the iPhone SDK, so you have to create the package on a Mac, but
PhoneGap makes the process simpler. Once it's created, you can upload it to
iTunes like any other iPhone app.
</p><p>
If you don't care about iTunes or Android Market, there's another
way&mdash;package your application as an HTML5 Offline Application. Listing 3 is a
manifest file, webnotes.manifest, that you put in the home directory of
your application. You also need to add an attribute to the &lt;html&gt; element
in index.html:

<pre     class="programlisting">
manifest="webnotes.manifest"
</pre>
</p><p>
One more thing&mdash;if you're serving the files from an Apache Web server,
the .htaccess file in your Web directory needs a line like:

<pre     class="programlisting">
AddType text/cache-manifest .manifest
</pre>
</p><p>
This tells Apache to serve .manifest files with the correct MIME type. When
a user first goes to the Web site, the server will download the files
listed in the manifest and keep them on the device. On subsequent visits,
the file will be reloaded if the manifest changes&mdash;even if the change is
in a comment field.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x15d97e0"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 3. webnotes.manifest</b></p><pre     class="programlisting">
CACHE MANIFEST
index.html
icon.png
jqtouch/jqtouch.min.css
themes/jqt/theme.min.css
jqtouch/jquery.1.3.2.min.js
jqtouch/jqtouch.min.js
javascript/webnotes.js
</pre></div><p>
On Apple devices, when users go to your Web site, they can touch + at
the bottom of the browser to put an icon for that URL on their homescreen
(remember that .icon attribute when we initialized jQTouch?). If you've
created an off-line application, it loads and executes from local storage,
much like a native application.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x15d9a48"></a>
Summary</h2></div></div><p>
We defined Webnotes to be similar to an example application that comes
with the Android SDK called NotePad. See Table 1 for a comparison of lines of
code.
</p><div class="table"><a name="N0xf56580.0x15d9b50"></a><p class="title"><b>
Table 1. Comparing Lines of Code</b></p><table     summary="&#10;Table 1. Comparing Lines of Code10789t1.qrk" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&nbsp;</th><th>NotePad</th><th>Webnotes</th></tr></thead><tbody><tr><td>Java</td><td>672</td><td>&nbsp;</td></tr><tr><td>XML</td><td>50</td><td>&nbsp;</td></tr><tr><td>HTML</td><td>&nbsp;</td><td>62</td></tr><tr><td>JavaScript</td><td>&nbsp;</td><td>121</td></tr><tr><td>Source Lines</td><td>722</td><td>183</td></tr></tbody></table></div><p>
If the effort to write a line of code is about the same in any language, it
would take about a fourth of the time to write the application as a Web
application&mdash;and it runs on most mobile WebKit-based browsers. That's
worth considering as you plan your next mobile application development.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xf56580.0x15da5f8"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
Canalys 2009 Smartphone Market Analysis: <a href="http://www.canalys.com/pr/2010/r2010021.html" target="_self">www.canalys.com/pr/2010/r2010021.html</a>
</p><p>
AdMob Mobile Metrics for January 2010: <a href="http://metrics.admob.com/wp-content/uploads/2010/02/AdMob-Mobile-Metrics-Jan-10.pdf" target="_self">metrics.admob.com/wp-content/uploads/2010/02/AdMob-Mobile-Metrics-Jan-10.pdf</a>
</p><p>
Comparison of Layout Engines (HTML5): <a href="http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(HTML5)#cite_note-114" target="_self">en.wikipedia.org/wiki/Comparison_of_layout_engines_(HTML5)#cite_note-114</a>
</p><p>
Dive into HTML5's Site to Check for HTML5 Features in Browsers: <a href="http://diveintohtml5.org/past.html" target="_self">diveintohtml5.org/past.html</a>
</p><p>
What's My User Agent?: <a href="http://whatsmyuseragent.com" target="_self">whatsmyuseragent.com</a>
</p><p>
jQTouch: <a href="http://www.jqtouch.com" target="_self">www.jqtouch.com</a>
</p><p>
PhoneGap: <a href="http://phonegap.com" target="_self">phonegap.com</a>
</p><p>
iui: <a href="http://code.google.com/p/iui" target="_self">code.google.com/p/iui</a>
</p><p>
iWebkit: <a href="http://iwebkit.net" target="_self">iwebkit.net</a>
</p><p>
Jon Stark's excellent book on Building iPhone Apps with HTML, CSS and
JavaScript: <a href="http://building-iphone-apps.labs.oreilly.com" target="_self">building-iphone-apps.labs.oreilly.com</a>
</p></div></div></div>
<div class="authorblurb"><p>
Rick Rogers has been a professional embedded software developer for more
than 30
years (FORTRAN to JavaScript). He's currently a Mobile Solutions Architect
at Wind River Systems. He welcomes feedback on this article
at <a href="mailto:portmobileapps@gmail.com">portmobileapps@gmail.com</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../197/toc197.html">Issue Table of Contents</a>
    <a class="link3" href="../197/10789.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>