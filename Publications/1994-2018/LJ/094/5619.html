<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Introducing Zope</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Reuven gives a whirlwind tour of the open-source Zope&#10;    application server, beginning with an exploration of Zope as&#10;    a web development platform.&#10;    "><meta name="keywords" content="Zope, web, development, Python, HTML"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x15e0580.0x16d7ab0"></a>Introducing Zope</h1></div><div><div class="author"><h3 class="author">Reuven M. Lerner</h3></div><div class="issuemoyr">Issue #94, February 2002</div></div><div><p>
    Reuven gives a whirlwind tour of the open-source Zope
    application server, beginning with an exploration of Zope as
    a web development platform.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d8558"></a></h2></div></div><p>No matter what language and operating
system you use, web development typically means working with HTML
files, graphic files, standalone programs, hybrid HTML/code
templates and a connection to a relational database. Experienced
developers can move easily from Perl to PHP to ASP because the
concepts translate from one language to another with only minor
variations. This convergence of paradigms has been convenient for
developers, at the cost of complacency and laziness in the web
development community.
</p><p>Luckily, the open-source Zope application server is there to
shake us from our complacency and open our eyes to new ways in
which we can develop web applications. Zope, written and supported
by Zope Corporation (formerly Digital Creations), changes
everything that you ever knew about web development. You still can
create dynamically generated content and work with relational
databases, but Zope does so in very different ways from every other
application server on the market.</p><p>This month, we begin to explore Zope as a web development
platform. Along the way, I hope it becomes obvious that while Zope
is different from other environments, its elegance and power make
it a strong contender for open-source enthusiasts.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d8710"></a>What Is Zope?</h2></div></div><p>Part of the difficulty in understanding Zope is that it's
actually several things at once. Simply put, Zope provides you with
everything you need to create web applications. Installing Zope
gives you a simple HTTP, FTP and Web-DAV server (known as the
ZServer), an object database (known as ZODB) and a framework for
creating server-side web applications.</p><p>Most of Zope is written in Python, which means that it is
ported across platforms easily. And while it makes sense that a
program written in Perl, Python or Java can run equally on Linux
and Windows easily, it is still unusual for a prominent open-source
system to run on Windows.</p><p>A typical web site has a mix of static HTML files, templates
and graphic files. When the HTTP server receives a request, the
server determines what kind of file was requested (by looking at
the file's extension, location and MIME type), executes any
necessary code inside the file and returns an HTTP response.</p><p>In Zope, nothing is stored on the filesystem. Rather, all
site content and programs are stored inside of the ZODB object
database. (The database itself typically is stored as a large disk
file, which can be backed up or copied to backup Zope
servers.)</p><p>To create a simple HTML file, you will need to create a
&ldquo;file&rdquo; object in ZODB. To display an image on the web site, you
will need to create an image object in ZODB. And to execute a piece
of code when a certain URL is invoked, you must store the code in
ZODB.</p><p>Luckily, storing and retrieving items in ZODB is quite easy.
Zope takes care of most of this for you, allowing you to set
high-level parameters at installation time. Moreover, Zope is
designed so that it can be controlled completely via one web
browser. You can use one of Zope's web-based tools, which makes it
possible to create, edit and administer a web site using nothing
more than your web browser. So you can create, modify or delete any
content on the site (HTML, images or directories) using your
browser.</p><p>If you prefer to edit text (and code) in Emacs rather than in
a web text area, the ZServer supports FTP, displaying the objects
in ZODB as if they were in a filesystem hierarchy. If you (and the
nontechnical staff that you trained) previously were using FTP to
transfer files to and from your web server, ZServer's FTP
implementation will allow you to continue along that path almost
seamlessly.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d8a28"></a>Installing Zope</h2></div></div><p>For all of its complexity, Zope is surprisingly easy to
install. You will need to download the latest version from
<a href="http://www.zope.org" target="_self">www.zope.org</a> (see
Resources). After you choose the version that you want to download,
switch into your Zope directory (typically /usr/local/zope/, but
anything will do), and unpack the Zope file:</p><pre     class="programlisting">
mkdir /usr/local/zope
cd /usr/local/zope
tar zxvvf /downloads/Zope-2.4.3-linux2-x86.tgz
</pre><p>Opening up the Zope archive reveals a number of directories,
including:
<div class="itemizedlist"><ul type="disc"><li><p>bin, where the Zope startup and shutdown scripts
are located.</p></li></ul></div>

<div class="itemizedlist"><ul type="disc"><li><p>doc, where the complete Zope documentation is
kept.</p></li></ul></div>

<div class="itemizedlist"><ul type="disc"><li><p>lib, where Python and all of the various Zope
applications (known as products) are kept.</p></li></ul></div>

<div class="itemizedlist"><ul type="disc"><li><p>ZServer, which contains the classes necessary for
the ZServer.</p></li></ul></div>

<div class="itemizedlist"><ul type="disc"><li><p>utilities, which contains several Zope-related
utilities.</p></li></ul></div>

</p><p>Before you can start Zope for the first time, you must
install it with the install script. Only run this script after you
have placed the Zope files in their final location, since install
uses the current directory name to set several global configuration
values.</p><p>After you have finished installing Zope, you can start it up
by running the start script in the main Zope directory. By default,
this script starts Zope's HTTP server on port 8080 (with an FTP
server running on another port). You can change these values with a
command-line switch; a full list is available by typing
<b  >start -help</b>.</p><p>While Zope is written largely in Python, Python does not need
to be installed on your system. Zope comes with its own copy of
Python, which it uses instead of whatever is on the operating
system. This decreases the chances for version problems and errors.
As of this writing, Zope uses Python 2.1 (the latest stable
version), but Python 2.2 should be coming out in the near future.
It will be interesting to see when Zope adopts it.</p><p>The install script not only sets up the initial Zope
configuration, but also creates a hard-to-guess password for the
system's &ldquo;admin&rdquo; user. We will need this password in just a few
minutes, so be sure to write it down.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d9318"></a>Administering Zope</h2></div></div><p>Now that we have started Zope, how do we use it? Well, the
first and most important step is to fire up our web browser and
point it to our computer, giving it the URL http://localhost:8080/.
This displays some initial Zope information, including pointers to
documentation and web sites.</p><p>Let's leave this introductory screen behind, moving instead
to the main Zope management interface at
http://localhost:8080/manage. You will be prompted to enter the
username and password for a site manager; use the admin user and
the password that the install script printed out when you first
installed Zope.</p><p>Once you have entered the correct password, your browser
window will be divided into two vertical frames: the left-hand side
displays the hierarchy of your Zope server, while the right-hand
side displays the details of the object you are currently
viewing.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d94d0"></a>Creating Basic Content</h2></div></div><p>It's easy to understand what happens when you ask an Apache
server for the document /foo/bar. Apache looks for a file named bar
in the foo directory underneath its document root. If such a file
exists, then Apache reads it from disk and returns its content in
an HTTP response. If the file is a CGI program, then it executes
the program and returns its output in an HTTP response. And if the
file does not exist, Apache returns an error message to the user's
browser.</p><p>Zope interprets URLs quite differently; the URL /foo/bar is
interpreted as a request for Zope to invoke a display method on the
bar object inside of the foo object. If either foo or bar does not
exist, then Zope will return an error message indicating that no
such object can be found in ZODB.</p><p>If we always had to worry about creating objects and writing
display methods, then Zope would be a high-powered toy for
programmers. Luckily for us, Zope lets us almost pretend that ZODB
is a hierarchical filesystem into which we are placing our HTML
files and graphics.</p><p>For example, we can create a simple HTML file using nothing
more than our web browser. While inside of Zope's root folder (to
which you can always return by clicking in the upper left-hand side
of the browser's left frame), create a new document by choosing
DTML Document from the &ldquo;Select type to add...&rdquo; selection list in
the top right-hand corner. (As we will soon see, DTML&mdash;Document
Template Markup Language&mdash;is Zope's superset of HTML; Zope almost
always refers to DTML documents rather than HTML documents.)</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d96e0"></a>Setting DTML Parameters</h2></div></div><p>Your web browser should now display a short HTML form with
three elements:</p><div class="itemizedlist"><ul type="disc"><li><p>The id text field. Every object in Zope has an ID,
and IDs must be unique within a folder. IDs are analogous to
filenames on a disk, and they are used to identify objects within a
URL. In the URL /foo/bar, foo is the ID of a folder object, while
bar is the ID of an object within that folder. Zope documents
traditionally don't have suffixes (e.g., .html and .gif); because
the system knows what type of object is associated with each ID,
such a suffix would be redundant.</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>The title text field. The object's ID appears in
URLs, but the object's title appears in all of the internal Zope
management screens. (The object's title has nothing to do with the
HTML &lt;title&gt; tag, which you still will have to
create.)</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>The file element allows you to upload a file from
your local computer using HTTP uploads. This means that you can
create a DTML file on your local computer and upload it to Zope
when you are ready for testing.</p></li></ul></div><p>For the purposes of this example, we will enter an ID of
testdoc, and a title of &ldquo;Test document&rdquo;. While we simply could
add this document to ZODB, that would leave it empty. Thus, we will
click on the &ldquo;Add and edit&rdquo; button, which gives us a text area
with some default content:</p><pre     class="programlisting">
&lt;dtml-var standard_html_header&gt;
&lt;h2&gt;&lt;dtml-var title_or_id&gt;&lt;/h2&gt;
&lt;p&gt;
This is the &lt;dtml-var id&gt; Document.
&lt;/p&gt;
&lt;dtml-var standard_html_footer&gt;
</pre><p>You can edit the contents however you want within this text
area. When you have finished, click on the save changes button at
the bottom of the screen. This button brings you back to the
editing window but adds a reminder indicating when the document was
last modified.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d9c08"></a>Working with DTML</h2></div></div><p>Our DTML document looks very much like HTML, except that it
includes several tags that begin with &lt;dtml-var&gt;. DTML is
actually a programming language that lets you do all sorts of
things, but it is probably easiest (and best) to think of it as a
very strong server-side include mechanism. As demonstrated in this
sample document, &lt;dtml-var&gt; lets you insert dynamic values
into the current document. Thus &lt;dtml-var
standard_html_header&gt; inserts the contents of the object with
the ID of standard_html_header, while &lt;dtml-var id&gt; inserts
the ID of the current document. As you can imagine, &lt;dtml-var
title_or_id&gt; displays either the title or the ID, depending on
whether a title has been defined.</p><p>When Zope encounters the expression &lt;dtml-var
standard_html_header&gt;, it looks in the current folder for an
object with the ID standard_html_header. If such an object exists,
then the &lt;dtml-var&gt; tag is replaced with the object's
viewable contents. If no such object exists, then Zope repeats its
search in the enclosing folder. In this way, Zope works its way up
the entire hierarchy until it reaches the root folder.</p><p>This means that automatically inserted headers and footers
depend not only on our &lt;dtml-var&gt; tags, but also on the
location of our DTML document. The notion that an object's location
in the object hierarchy affects its output is known as acquisition
in the Zope world, and it is both important and useful. Using
acquisition, you can have a different set of headers and footers
for each folder. Moving a document from one folder to another
changes the search path that Zope uses when looking for headers,
footers and other objects. The behavior of an object in Zope thus
depends not only on its definition, but also on its location in the
object hierarchy. For this reason, acquisition is sometimes
explained as analogous to the &ldquo;nature vs. nurture&rdquo; debate in
biology: an object's definition can be seen as &ldquo;nature&rdquo;, while
its location in the object hierarchy can be seen as
&ldquo;nurture&rdquo;.</p><p>To view the current contents of the document, click on the
view tab at the top of the frame. You will see the document's
contents exactly as a user would want. To edit the document once
again, I find it easiest to click on the &ldquo;Root folder&rdquo; link in
the top-left corner, select the testdoc object and then edit things
once more using the text area.</p><p>If you make a mistake while editing a DTML document, you will
be happy to know that Zope provides infinite undo. Click on the
undo tab on the top right of the DTML editing screen, and select
the version to which you want to return. Infinite undo is one of my
favorite features in Zope, not only because it allows me to undo my
mistakes, but because it's so easily accessible to nonprogrammers,
and it works with any kind of object on the system.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d0700"></a>Other DTML Methods</h2></div></div><p>There are a number of DTML tags, each of which begins with
dtml-. Most DTML tags take one or more parameters, where each
parameter allows it to work in a slightly different way. For
example, we can modify our test document to include a simple use of
&lt;dtml-var expr&gt;:</p><pre     class="programlisting">
&lt;p&gt;&lt;dtml-var expr="5+10"&gt;&lt;/p&gt;
</pre><p>The value of our expr in the above code is a simple Python
expression. Zope evaluates the expression and replaces the dtml-var
tag with the result of that evaluation. We also can try something
more interesting than simple addition. For example, we can use the
capitalize method in the string module (automatically imported into
Zope) by naming it in the expr attribute:
<pre     class="programlisting">
&lt;p&gt;&lt;dtml-var expr="_.string.capitalize('abc')"&gt;&lt;/p&gt;
</pre>


Notice how we cannot invoke string.capitalize(), but must rather
invoke _.string.capitalize().
</p><p>While DTML allows you to use the string module in this way,
you may never have to invoke it directly because so many useful
string functions are built into DTML.</p><p>DTML was made for designers and other nonprogrammers to be
able to create their own dynamic content without being stuck with
the poor syntax and documentation of server-side includes. DTML is
not as easy for nonprogrammers to learn as some of us might think,
but it is far easier than teaching them a full-fledged programming
language. And the fact that Zope performs some error checking when
saving the DTML document helps to avoid some of the issues
associated with runtime languages.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x15e0580.0x16d09c0"></a>Conclusion</h2></div></div><p>This month, we took a whirlwind tour of several of Zope's
features, including through-the-web editing, the management
interface, acquisition and simple DTML documents. Next month, we
will look at Zope products&mdash;how to download and install them, and
then how to write our own.</p><p><a href="5619s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p><span   class="bold"><b>Reuven M. Lerner</b></span>
      owns a small consulting firm specializing in web and internet
      technologies. He lives with his wife Shira and daughter Atara
      Margalit in Modi'in, Israel. You can reach him at
      <a href="mailto:reuven@lerner.co.il">reuven@lerner.co.il</a>
      or on the ATF home page,
      <a href="http://www.lerner.co.il/atf" target="_self">www.lerner.co.il/atf</a>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../094/toc094.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>