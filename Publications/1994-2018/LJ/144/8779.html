<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Using Wikis and Blogs to Ease Administration</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;This tutorial on TWiki and WordPress shows how wikis and blogs can be&#10;useful for system administration and documentation.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2509580.0x2600ab0"></a>
Using Wikis and Blogs to Ease Administration</h1></div><div><div class="author"><h3 class="author">
Ti
 
Leggett
</h3></div><div class="issuemoyr">Issue #144, April 2006</div></div><div><p>
This tutorial on TWiki and WordPress shows how wikis and blogs can be
useful for system administration and documentation.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x26012f0"></a></h2></div></div><p>
System administration can be like sailing a ship. You must keep your
engines running smoothly, keep your crew and the harbors notified and up
to date and also maintain your Captain's log. You must keep your eye on
the horizon for what is coming next. Two technologies have emerged over
the past few years that could help keep you on course, wikis and blogs.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x26013f8"></a>
Maintaining Good Documentation</h2></div></div><p>
I find that one of the most difficult aspects of system administration is
keeping documentation accurate and up to date. Documenting how you fixed
a pesky problem today will help you remember how to fix it months later
when it occurs again. If you ever have worked with others, you realize
how critical good documentation is. Even if you are the only system
administrator, you still will reap the benefits of good documentation,
even more so if another sysadmin is ever brought on board.
</p><p>
Some goals of a good documentation system should be:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Make it easy for you and your coworkers to find relevant information.
</p></li><li><p>
Make it easy for new employees to come up to speed quickly.
</p></li><li><p>
Make it easy to create, edit and retire documentation.
</p></li><li><p>
Keep revisions of changes and who made them.
</p></li><li><p>
Limit who sees or edits the documentation with an authentication system.
</p></li></ul></div><p>
Unfortunately, keeping your documentation up to date can be a full-time
job in itself. Documenting, though not a very glamorous task,
certainly will pay off in the long run.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x2601978"></a>
Why a Wiki?</h2></div></div><p>
This is where a wiki comes in. From Wikipedia:
&ldquo;a wiki is a type of Web site that allows users to add and edit
content and is especially suited for constructive collaborative
authoring.&rdquo;
</p><p>
What this means is a wiki allows you to keep and edit your
documentation in a central location. You can access and edit that
documentation regardless of the platform you are using. All you need
is a Web browser. Some wikis have the ability to keep track of each
revision of a changed document, so you can revert to a previous version
if some errant changes are made to a document. The only obstacle a new
user must overcome is learning the particular markup language of your
wiki, and sometimes even this is not completely necessary.
</p><p>
One of a wiki's features is also one of its drawbacks. Wikis are pretty free
flowing, and although this allows you to concentrate on getting the documentation
written quickly, it can make organization of your wiki rapidly spiral out of
control. Thought needs to be put into how the wiki is organized, so that
topics do not get stranded or lost. I have found that making the front page a
table of contents of all the topics is very handy. However you decide to organize
your wiki, make sure it is well understood by everyone else.
In fact, a good
first document might be the policy describing the organization of the
wiki!
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x2601b30"></a>
TWiki</h2></div></div><p>
There are several open-source wikis available, such as MediaWiki [see
Reuven M. Lerner's article on page 62 for more information on MediaWiki] and
MoinMoin, each with its own philosophy on markup and layout, but here we
concentrate on TWiki. Some of TWiki's benefits are:
</p><div class="itemizedlist"><ul type="disc"><li><p>
A notion of webs that allows the wiki administrator to segregate areas of
collaboration into their own areas, each with its own set of authorization
rules and topics.
</p></li><li><p>
A modular plugin and skin system that allows you to customize easily.
</p></li><li><p>
A well-established base of users and developers.
</p></li><li><p>
Revision control based on RCS.
</p></li><li><p>
It is Perl-based and mod_perl or FastCGI can be used.
</p></li><li><p>
Authentication is handled outside the wiki by mechanisms such as Apache
htpasswd.
</p></li></ul></div><p>
The most current stable release at this time is Cairo, or
TWiki20040904. It was released, as the name suggests, on September
4, 2004, and it has been proven to be very stable. However, it does
lack some of the features of the current beta release, Dakar,
that I find to be very useful. The Dakar release we use here is
TWikiRelease2005x12x17x7873beta.
</p><p>
Installing TWiki is relatively easy, but still needs work. I hope, as
the beta progresses, we will see improvements in ease of installation
and upgrading along with clearer documentation.
</p><p>
First, you must create the directory where you want to install TWiki, say
/var/www/wiki. Next, untar the TWiki distribution in that directory. Then
you must make sure that the user with rights to run CGI scripts (usually
apache or www-data), owns all of the files and is able to write to
all files:

<pre     class="programlisting">
# install -d -o apache /var/www/wiki
# cd /var/www/wiki
# tar zxf /path/to/TWikiRelease2005x12x17x7873beta.tgz
# cp bin/LocalLib.cfg.txt bin/LocalLib.cfg
# vi bin/LocalLib.cfg lib/LocalSite.cfg
# chown -R apache *
# chmod -R u+w *
</pre>
</p><p>
Now copy bin/LocalLib.cfg.txt to bin/LocalLib.cfg, and edit it. You need
to edit the $twikiLibPath variable to point to the absolute path of your
TWiki lib directory, /var/www/wiki/lib in our case. You also must create
lib/LocalSite.cfg to reflect your specific site information. Here is a
sample of what might go into LocalSite.cfg:

<pre     class="programlisting">
# This is LocalSite.cfg. It contains all the setups for your local
# TWiki site.
$cfg{DefaultUrlHost} = "http://www.example.com";
$cfg{ScriptUrlPath} = "/wiki/bin";

$cfg{PubUrlPath} = "/wiki/pub";
$cfg{DataDir} = "/var/www/wiki/data";
$cfg{PubDir} = "/var/www/wiki/pub";
$cfg{TemplateDir} = "/var/www/wiki/templates";
$TWiki::cfg{LocalesDir} = '/var/www/wiki/locale';
</pre>
</p><p>
Here is a sample section for your Apache configuration file that allows
this wiki to run:

<pre     class="programlisting">

ScriptAlias /wiki/bin/ "/var/www/wiki/bin/"
Alias /wiki "/var/www/localhost/wiki"
&lt;Directory "/var/www/wiki/bin"&gt;
    Options +ExecCGI -Indexes
    SetHandler cgi-script
    AllowOverride All
    Allow from all
&lt;/Directory&gt;
&lt;Directory "/var/www/wiki/pub"&gt;
    Options FollowSymLinks +Includes
    AllowOverride None
    Allow from all
&lt;/Directory&gt;
&lt;Directory "/var/www/wiki/data"&gt;
    deny from all
&lt;/Directory&gt;
&lt;Directory "/var/www/wiki/lib"&gt;
    deny from all
&lt;/Directory&gt;
&lt;Directory "/var/www/wiki/templates"&gt;
    deny from all
&lt;/Directory&gt;

</pre>
</p><p>
TWiki comes with a configure script that you run to set up TWiki. This
script is used not only on initial install but also when you
want to enable plugins later. At this point, you are ready to
configure TWiki, so point your browser to your TWiki configure script,
http://www.example.com/wiki/bin/configure. You might be particularly
interested in the Security section, but we will visit this shortly. Until
you have registered your first user, you should leave all settings as they
are. If the configure script gives any warnings or errors,
you should fix those first and re-run the script. Once you click Next, you are prompted to enter a password. This password is used whenever the
configure script is run in the future to help ensure no improper access.
</p><p>
Once you have completed the configuration successfully, it is time to enter
the wiki. Point your browser to http://www.example.com/wiki/bin/view,
and you are presented with the Main web. In the middle of the page
is a link for registration. Register yourself as a user. Be
sure to provide a valid e-mail address as the software uses it to validate
your account. Once you have verified your user account, you need to
add yourself to the TWikiAdminGroup. Return to the Main web and click
on the Groups link at the left, and then choose the TWikiAdminGroup.
Edit this page, and change the GROUP variable to include your new user name:

<pre     class="programlisting">
   Set GROUP = %MAINWEB%.TiLeggett
   Set ALLOWTOPICCHANGE = %MAINWEB%.TWikiAdminGroup
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x2602478"></a></h2></div></div><p>
The three blank spaces at the beginning of each of those lines are critical.
</p><p>
These two lines add your user to the TWikiAdminGroup and allow
only members of the TWikiAdminGroup to modify the group. We
are now ready to enable authentication for our wiki, so go back to
http://www.example.com/wiki/bin/configure. Several options provided under
the Security section are useful. You should make sure the options
{UseClientSessions} and {Sessions}{UseIPMatching} are enabled. Also
set the {LoginManager} option to TWiki::Client::TemplateLogin and
{PasswordManager} to TWiki::Users::HtPasswdUser. If your server
supports it, you should set {HtPasswd}{Encoding} to sha1. Save your
changes and return to the wiki. If you are not logged in automatically,
there is a link at the top left of the page that allows you to do so.
</p><p>
Now that you have authentication working, you may want to tighten down
your wiki so that unauthorized people do not turn your documentation
repository into an illicit data repository. TWiki has a pretty
sophisticated authorization system that is tiered from the site-wide
preferences all the way down to a specific topic. Before locking down
the Main web, a few more tasks need to be done. Once
only certain users can change the Main web, registering new users will
fail. That is because part of the user registration process involves
creating a topic for that user under the Main web. Dakar has a user,
TWikiRegistrationAgent, that is used to do this. From the Main web, use
the Jump box at the top left to jump to the WebPreferences topic. Edit
the topic to include the following four lines and save your changes:

<pre     class="programlisting">
Set ALLOWTOPICRENAME = %MAINWEB%.TWikiAdminGroup
Set ALLOWTOPICCHANGE = %MAINWEB%.TWikiAdminGroup
Set ALLOWWEBRENAME = %MAINWEB%.TWikiAdminGroup
Set ALLOWWEBCHANGE = %MAINWEB%.TWikiAdminGroup,
 --&gt;;%MAINWEB%.TWikiRegistrationAgent
</pre>
</p><p>
This allows only members of the TWikiAdminGroup to make changes or
rename the Main web or update the Main web's preferences. It also
allows the TWikiRegistrationAgent user to create new users' home
topics when new users register. I have included a patch that you
must apply to lib/TWiki/UI/Register.pm as well. The patch follows,
but you can also download the patch from the <i  >LJ</i> FTP
site (see the on-line Resources):

<pre     class="programlisting">
--- lib/TWiki/UI/Register.pm.orig	2006-01-04 01:34:48.968947681 -0600
+++ lib/TWiki/UI/Register.pm	2006-01-04 01:35:48.999652157 -0600
@@ -828,11 +828,12 @@

     my $userName = $data-&gt;{remoteUser} || $data-&gt;{WikiName};
     my $user = $session-&gt;{users}-&gt;findUser( $userName );
+    my $agent = $session-&gt;{users}-&gt;findUser( $twikiRegistrationAgent );
     $text = $session-&gt;expandVariablesOnTopicCreation( $text, $user );

     $meta-&gt;put( 'TOPICPARENT', { 'name' =&gt; $TWiki::cfg{UsersTopicName}} );

-    $session-&gt;{store}-&gt;saveTopic($user, $data-&gt;{webName},
+    $session-&gt;{store}-&gt;saveTopic($agent, $data-&gt;{webName},
                                  $data-&gt;{WikiName}, $text, $meta );
     return $log;
 }
</pre>
</p><p>
Otherwise, new users' home directories will fail to be created and new
user registration will fail. Once you have verified that the Main web
is locked down, you should do the same for the TWiki and Sandbox webs.
</p><p>
When you are done configuring TWiki, you should secure the files'
permissions:

<pre     class="programlisting">
# find /var/www/wiki/ -type d -exec chmod 0755 {} ';'
# find /var/www/wiki/ -type f -exec chmod 0400 {} ';'
# find /var/www/wiki/pub/ -type f -exec chmod 0600 {} ';'
# find /var/www/wiki/data/ -type f -exec chmod 0600 {} ';'
# find /var/www/wiki/lib/LocalSite.cfg -exec chmod 0600 {} ';'
# find /var/www/wiki/bin/ -type f -exec chmod 0700 {} ';'
# chown -R apache /var/www/wiki/*
</pre>
</p><p>
As I mentioned before, TWiki has a plugin system that you can use.
Many plugins are available from the TWiki Web site. Be sure the plugins
you choose have been updated for Dakar before you use them.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x26028f0"></a>
Keeping Your Users in the Know</h2></div></div><p>
One important aspect of system administration that is sometimes overlooked
is keeping users informed. Most users like to know when there is new
functionality available or when resources are down or not available. Not
only does it make users happier to be kept informed, but it also can make
your life easier as well. The last thing you want to do when the central
file server is down is reply to users' questions about why they cannot get to their files. If you have trained your users to look at
a central location for status of the infrastructure first, all you have to
do after notification of a problem is post to this central place that
there is a problem. Mailing lists also are good for this, but what if the
mail server is down? Some people, for instance your boss or VP of the
company, might like to know what the status is of things as they happen.
These updates might not be suitable to send out to everyone daily via
e-mail. You could create yet another mailing list for these notifications,
but you also might consider a blog.
</p><p>
If you are not familiar with a blog, let us refer back to Wikipedia:
&ldquo;a blog is a Web site in which journal entries are posted on a
regular basis and displayed in reverse chronological order.&rdquo;
</p><p>
The notion of a blog has been around for centuries in the form of diaries,
but blogs recently have had an explosion on the Internet. Many times a
blog is started as someone's personal journal or as a way to report news,
but blogs can be extremely useful for the sysadmin.
</p><p>
Blogs can help a sysadmin give users an up-to-the-minute status of
what they are doing and what the state of the infrastructure is. If
you faithfully update your blog, you easily can look back on what you
have accomplished so you can make your case for that raise you have been
hoping for. It also will help you keep track of what your coworkers are
doing. And, with many blog software packages providing RSS feeds,
users can subscribe to the blog and be notified when there are new posts.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x2602b00"></a>
WordPress</h2></div></div><p>
There are a lot of blog software packages out there today, but here we
cover WordPress. WordPress is fast and has a nice plugin and skin
interface to allow you to customize it to your heart's content. The only
requirements for running WordPress are Apache, MySQL and PHP. I don't
go into how to install WordPress, because the on-line documentation is very
clear and easy to follow. Instead, I start where the installation
leaves off and introduce some useful plugins. I suggest starting with
WordPress v1.5.2 even though v2.0 is currently out. There have been
some problems with the initial 2.0 release that warrant waiting for
v2.0.1. Also, many of the plugins have not had a chance to update to the
new system.
</p><p>
The first thing you should do after installing WordPress is log in as
the admin user. Once logged in, you are presented with the Dashboard. At
the top of the page is a menu of options named Write, Manage, Links and
so on. You should first create an account for yourself by clicking on the Users
option. Once that has loaded, two tabs labeled Your Profile and Authors
&amp;
Users are available under the main menu. Click on Authors &amp; Users, and
scroll down to the Add New User section and fill in the text fields. Once
your user has been added, it appears in the Registered Users section
above. There are several columns of data, and one is Promote, which you
should click on. Promoting a user makes that user an author and also
allows that user to have more privileges based on its level. Once your
user has been promoted, it will have a level of one. There are plus
and minus signs on either side of the level to use to increase
your user's level. Increase it to nine, which is the highest level a
non-admin user can be. Should you ever need to delete users that have
been promoted to authors, all you need to do is decrease their level
below one and then delete them. I have included a link to a more in-depth
description of the privileges of each user level in the on-line Resources.
</p><p>
There are a few other options you might consider changing. In General
Options, there are check boxes to allow anyone to register to become a blog
user and to require users to be logged in to add comments. You may or may
not want these options enabled, depending on your security concerns and
the openness of your blog. At our site, users cannot register themselves,
though anyone can post comments without being logged in. You should
explore all the menus and all their options to tweak them for your site.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x2602cb8"></a>
WordPress Plugins</h2></div></div><p>
WordPress has a very modular plugin system, and a lot of people have
written many plugins. WordPress also has a notion of categories. Categories
can have many uses, but one might be to create mini-blogs for different
communities of users or to group posts about a specific aspect of the
infrastructure. But, you might not want all users to be able to see every
category. The Userextra plugin, in conjunction with the Usermeta plugin,
allows you to control exactly this sort of thing. Once you have followed
these plugins' installation instructions, two more menus are available
under Options and one more under Manage that allow you to refine
access.
</p><p>
Another plugin you may find useful is the HTTP Authentication
plugin. This plugin lets you use an external authentication mechanism,
such as Apache's BasicAuth, as a means to authenticate to WordPress. This
is great if you already have an LDAP directory or Kerberos realm that you
use for authentication and you have mod_auth_ldap or mod_auth_kerb up
and running.
</p><p>
Many more plugins are available for WordPress from the WordPress
Codex and the WordPress Plugin DB. If
you feel some functionality is missing, there are plenty of examples and documentation
available from the WordPress Web site, and these plugin repositories can
help you write your own plugin.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2509580.0x25f9700"></a>
Wrapping Up</h2></div></div><p>
I hope that after this whirlwind tour of wikis and blogs you have come
to see how they can be beneficial to help your shop run a smoother ship
and provide your users with all the information they might want.
Just as there are many different sails to keep your ship sailing, there
are many different wiki and blog software packages out there. The right
package for you is the one that keeps your users happy and you productive.
</p><p><span   class="bold"><b>Resources for this article:</b></span>
<a href="../144/8832.html" target="_self">/article/8832</a>.
</p></div></div>
<div class="authorblurb"><p>
Ti Leggett (<a href="mailto:ti@daleggetts.com">ti@daleggetts.com</a>) is a full-time system administrator. When
he's not working, he might be found playing his Gibson B-25 or doing some
home improvements or wood working.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../144/toc144.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>