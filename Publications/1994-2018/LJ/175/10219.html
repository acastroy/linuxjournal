<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
The Roadrunner Supercomputer: a Petaflop's No Problem
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;IBM and Los Alamos National Lab built Roadrunner, the world's&#10;fastest supercomputer. It not only reached a petaflop, it beat that by&#10;more than 10%. This is the story behind Roadrunner.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xcbc580.0xdb3ac0"></a>
The Roadrunner Supercomputer: a Petaflop's No Problem
</h1></div><div><div class="author"><h3 class="author">
James
 
Gray
</h3></div><div class="issuemoyr">Issue #175, November 2008</div></div><div><p>
IBM and Los Alamos National Lab built Roadrunner, the world's
fastest supercomputer. It not only reached a petaflop, it beat that by
more than 10%. This is the story behind Roadrunner.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0xdb42a8"></a></h2></div></div><p>
In 1995, the French threw the world into an uproar. Their testing of
a nuclear device on Mururoa Atoll in the South Pacific unleashed protests,
diplomatic friction and a boycott of French restaurants worldwide. Thanks
to many developments&mdash;among them Linux, hardware and software advances and
many smart people&mdash;physical testing has become obsolete, and French food
is back on the menu. These developments are manifested in Roadrunner,
currently the world's fastest supercomputer. Created by IBM and the
Los Alamos National Laboratory (LANL), Roadrunner models precise nuclear
explosions and other aspects of our country's aging nuclear arsenal.
</p><div       class="mediaobject"><a href="10219f1.large.jpg"><img src="10219f1.jpg"></a><div class="caption"><p>
Figure 1. Part of the Roadrunner team at Los Alamos
National Lab
</p></div></div><p>
Although modeling nuclear explosions is necessary and interesting to some,
the truly juicy characteristic of the aptly named Roadrunner is its
speed. In May 2008, Roadrunner accomplished the almost
unbelievable&mdash;it
operated at a petaflop. I'll save you the Wikipedia look-up on
this one: a petaflop is one quadrillion (that's one thousand trillion)
floating-point operations per second. That's more than double the speed
of the long-reigning performance champion, IBM's 478.2-teraflop Blue
Gene/L system at Lawrence Livermore National Lab.
</p><p>
Besides the petaflop achievement, the story behind Roadrunner is equally
incredible in many ways. Elements such as Roadrunner's hybrid
Cell-Opteron architecture, its applications, its Linux and open-source
foundation, its efficiency, as well as the logistics of unifying these
parts into one speedy unit, make for a great story. This being <span   class="emphasis"><em>Linux
Journal</em></span>'s High-Performance Computing issue, it seems only
fitting to tell the story behind
the Roadrunner supercomputer here.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0xdb4720"></a>
Many Pounds of Stuff</h2></div></div><p>
&ldquo;You want to talk about challenges; it is the logistics of dealing
with this many pounds of stuff&rdquo;, said Don Grice, IBM's lead engineer
for Roadrunner. &ldquo;The folks in logistics have it down to a
science.&rdquo; By
the time you read this, the last of Roadrunner's 17 sections with 180
compute nodes&mdash;250 tons of &ldquo;stuff&rdquo; on 21 semitrucks&mdash;will have left
IBM's Poughkeepsie, New York, facility, bound for Los Alamos National
Laboratory's Nicholas Metropolis Center in New Mexico.
</p><div       class="mediaobject"><a href="10219f2.large.jpg"><img src="10219f2.jpg"></a><div class="caption"><p>
Figure 2. Early Bird's-Eye View of Roadrunner (Phase 1 Test Version)
in Spring 2007 at Los Alamos National Lab
</p></div></div><p>
The petaflop accomplishment occurred at &ldquo;IBM's place&rdquo;, where the machine
was constructed, tested and benchmarked. In reality, Roadrunner
achieved 1.026 petaflops&mdash;merely 26 trillion additional floating-point
calculations per second beyond the petaflop mark. Roadrunner's computing
power is equivalent to 100,000 of today's fastest laptops.
</p><p>
The Roadrunner is one of the most complex projects undertaken by both IBM
and its partners. IBM produced each of Roadrunner's two server blades in
two different locations and assembled them into so-called tri-blades
in a third. The tri-blades then were shipped to Poughkeepsie to become
part of Roadrunner. Despite this logistical hurdle, the project was
completed on schedule and at budget.
</p><p>
IBM also had to find partners for the entire interconnect fabric, make
it scale and obtain the desired performance. The company also worked
with various Linux and other open-source communities to build a coherent
software stack. Fears that the high level of coordination among partners,
such as Emcore, Flextronics, Mellanox and Voltaire, wouldn't work out
were proved unfounded. &ldquo;They all pulled together in a tremendous,
tremendous way&rdquo;, said Grice. &ldquo;There isn't any aspect of the machine
that isn't doing what it was supposed to.&rdquo;
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0xdb4d50"></a>
Before Roadrunner Ran</h2></div></div><p>
Of course, a project of Roadrunner's magnitude requires many smart people
at both IBM and LANL, who have collaborated for six years to develop
and build it. The team at LANL consisted of 171 people, with a group
of similar size on the IBM side. &ldquo;Los Alamos and IBM have formed a very
close partnership&rdquo;, commented Andy White, LANL's Project leader.
&ldquo;We have
been able to work together to work though many problems&rdquo;, he added.
</p><p>
According to White, the project planning began in 2002, when LANL
decided to pursue supercomputers with accelerators (in the end, the
Cell processors) to achieve its modeling needs. They had begun hearing
about the Cell processor and were intrigued about the potential for its
applications. LANL determined that it essentially wanted a very large
Linux cluster and realized that with the accelerators, they could reach
the petaflop.
</p><p>
IBM and LANL jointly worked on Roadrunner's overall design; IBM
implemented the code&mdash;that is, the computational library (ALF) and the
arithmetic software (DaCS) for hybrid systems. The Los Alamos group was
tasked with ensuring that its applications would run on the machine.
The system modeling group spent an entire year analyzing its
applications and the performance characteristics of the machine, making
sure that both LANL's classified work and all kinds of interesting science
applications would work well. The group built four applications related
to its nuclear-physics modeling. These include the Implicit Monte Carlo
(IMC) code (the Milagro application suite) for simulation of thermal
radiation propagation, the Sweep3D kernel, the SpaSM molecular dynamics
code and the VPIC particle and cell plasma physics code. LANL's White
says that these applications were the basis for asking the question
&ldquo;Can we program [Roadrunner] and can we get accelerated performance on
this system?&rdquo;
</p><p>
There were no shortage of significant intellectual challenges to making
Roadrunner do its job. One was to prove that the aforementioned
applications could run on an accelerated Roadrunner&mdash;without having
it to run on! In September 2006, IBM delivered a base system to LANL
for testing, but without accelerators. The applications could be
tested on the Cell processor but not on the complete node or system.
White explained:
</p><div class="blockquote"><blockquote class="blockquote"><p>
The performance and architecture laboratory team actually was able to
model the entire system [complete with acceleration] and predict pretty
much dead-on what has happened when the code was run on the full system.
The fact that we were able to pass two serious technical assessments
in October [2007] and show people that we can program the machine,
the codes can get good speed up, they're accelerated, and we can manage
the machine, etcetera, without actually having the machine on hand,
I think was a tour de force.
</p></blockquote></div><p>
Another challenge involved the networking. While working with the base
system in late 2006 and early 2007, the concern arose that Roadrunner's
computing horsepower would cause the network to be a bottleneck. Thus,
said White, &ldquo;the nodes were redesigned in-flight&rdquo;, with the new ones
offering a 400% increase in performance from the Opteron to the Cell
processors, as well as out to the network, vis-&agrave;-vis the original
design. All of this was done at the same original contract price.
</p><p>
The $110 million Roadrunner was completed on schedule, just in time to
qualify for the June 2008 edition of the Top 500 list of the world's
most powerful computer systems.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0xdb5220"></a>
Speed = Hybrid Architecture + Software</h2></div></div><p>
You may be surprised to learn that Roadrunner was built 100% from
commercial parts. The secret formula to its screaming performance
involves two key ingredients, namely a new hybrid Cell-Opteron processor
architecture and innovative software design. Grice emphasized that
Roadrunner &ldquo;was a large-scale thing, but fundamentally it was about
the software&rdquo;.
</p><p>
Despite that claim, the hardware characteristics remain mind-boggling.
Roadrunner is essentially a cluster of clusters of Linux Opteron nodes
connected with MPI and a parallel filesystem. It sports 6,562 AMD
dual-core Opteron 2210 1.8GHz processors and 12,240 IBM PowerXCell 8i
3.2GHz processors. The Opteron's job is to manage standard processing,
such as filesystem I/O; the Cell processors handle mathematically and
CPU-intensive tasks. For instance, the Cell's eight vector-engine cores
can accomplish acceleration of algorithms, much cooler, faster and cheaper
than general-purpose ones. &ldquo;Most people think [that the Cell processor]
is a little bit hard to use and that it's just a game thing&rdquo;, joked Grice.
But, the Cell clearly isn't only for gaming anymore. The Cell processors
make each computing node 30 times faster than using Opterons alone.
</p><p>
LANL's White further emphasized the uniqueness of Roadrunner's hybrid
architecture, calling it a &ldquo;hybrid hybrid&rdquo;, because the Cell processor
itself is a hybrid. This is because the Cell has the PPU (PowerPC) core
and eight SPUs. Because the PPU is &ldquo;of modest performance&rdquo; as the folks
at LANL politely say, they needed a core for running code that wouldn't
run on the SPUs and improved performance. Thus, the Cells are connected
to the Opteron.
</p><p>
The system also carries 98 terabytes of memory, as well as 10,000
InfiniBand and Gigabit Ethernet connections that require 55 miles of fiber
optic cabling. 10GbE is used to connect to the 2 petabyes of external
storage. The 278 IBM BladeCenter racks take up 5,200 square feet of space.
</p><p>
The machine is composed of a unique tri-blade configuration consisting
of one two-socket dual-core Opteron LS21 blade and two dual-socket IBM
QS22 Cell blade servers. Although the Opteron cores each are connected to
a Cell chip via a dedicated PCIe link, the node-to-node communication is
via InfiniBand. Each of the 3,456 tri-blades can perform at 400 Gigaflops
(400 billion operations per second).
</p><p>
See Figure 3 for a schematic diagram of the tri-blade.

</p><div       class="mediaobject"><a href="10219f3.large.jpg"><img src="10219f3.jpg"></a><div class="caption"><p>
Figure 3. The hybrid Opteron-Cell architecture is
manifested in a tri-blade setup. The tri-blade allows the Opteron
to perform standard processing while the Cell performs mathematically
and CPU-intensive tasks.
</p></div></div><p>
The hybrid, tri-blade architecture has allowed for a
quantum leap in the performance while utilizing the same amount of
space as previous generations of supercomputers. Roadrunner takes up
the same space and costs the same to operate as its two predecessors,
the ASC Purple and ASC White machines before it. This is because
performance continues to grow predictably at a rate of 1,000% every
10&ndash;11 years. Grice noted how just three of Roadrunner's tri-blades
have the same power as the fastest computer from 1998. Put another way,
a calculation that would take a week on Roadrunner today would be
only half finished on an old 1 teraflop machine that was started in
1998.
</p><p>
Such quantum leaps in performance help boggle the minds of many
scientists, who see their careers changing right before their eyes.
If they have calculations that take too long today, they can be quite
sure that in two years, the calculation will take one-tenth of the time.
</p><p>
Neither IBM's Grice nor LANL's White could emphasize enough the
importance and complexity of the software that allows for exploitation of
Roadrunner's hardware prowess. Because clock frequency and chip power
have plateaued, Moore's Law will continue to hold through other means,
such as with Roadrunner's hybrid architecture.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0xdb5a08"></a>
Roadrunner Runs</h2></div></div><p>
Roadrunner was put together in its full configuration on May 23, 2008.
On May 26, it reached the petaflop. &ldquo;Running a petaflop just three days
after being assembled is pretty amazing&rdquo;, said White.
</p><p>
Clearly a petaflop isn't the limit. Not only was the original petaflop
achievement actually 1.026 petaflops, since then, Roadrunner has done better.
In June 2008, LANL and IBM ran a project called PetaVision Synthetic
Cognition, a model of the brain's visual cortex that mimicked more than one
billion brain cells and trillions of synapses. It reached the 1.144
petaflop mark. Calculations like these are the petaflop-level tasks
for which Roadrunner is ideal.
</p><p>
&ldquo;It's hard to overstate how exciting it is to see the science we'll
be able to do with Roadrunner&rdquo;, said White. In mid-2009 the bulk of
Roadrunner's nodes will enter &ldquo;classified&rdquo; mode for the rest of its life,
allowing only authorized personnel to know what it's doing. Nevertheless,
scientists and their groupies will be happy to learn about some of
Roadrunner's non-military duties. First, in August 2008, LANL ordered
two additional connected units for Roadrunner, dubbed the Turquoise
Network, which will be available and &ldquo;in the open all the
time&rdquo;,
according to White. These units should be running by October 2008.
In addition, during early 2009 before Roadrunner goes classified, LANL
will utilize several other so-called unclassified open science
codes as
test loads as part of Roadrunner's stabilization and integration process.
The ten codes that have been selected for this purpose must prove their
ability to work on Roadrunner. Although some of these codes are based
on the above-mentioned VPIC and SPaSM, others are new and untested.
&ldquo;It remains to be seen whether others can write codes that actually
will run on the system&rdquo;, stated White.
</p><p>
LANL received 29 proposals for access to Roadrunner, of which two were
weapons-related and eight were non-weapons-related. A sampling of the
fascinating selected projects include investigations of the formation
of metallic nanowires with an atomic-force microscope, the phylogenetics
of the early infection states of HIV and, finally, dark energy
and matter.
</p><p>
Although the chance to utilize Roadrunner's power is enticing, one must
consider the extra tweaking to take advantage of the hybrid architecture.
&ldquo;It can be tricky&rdquo;, said White. With a more conventional machine,
codes don't require much change from one Linux cluster to another.
Fortunately, for those scientists whose proposals have been accepted, LANL
is offering extra funds to support code development to the hybrid
architecture. This December, LANL will evaluate the progress of each
project and allocate compute time in early 2009 based on those results.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0x11ae0d0"></a>
Linux Was a Natural Fit</h2></div></div><p>
No, I didn't forget to mention that Roadrunner runs on Linux&mdash;Red Hat
to be exact. From the beginning, the LANL team knew it wanted Linux
due to the open nature of its mission and what it sought to accomplish.
IBM's Grice added that LANL &ldquo;has always been interested in Linux things,
so it was a natural fit. We did think about [other operating systems]
but we didn't think very hard.&rdquo;
</p><p>
Technically, Linux was a good fit too. The teams didn't need to concern
themselves about running either the Cell processor or the LS21 blade
server, nor is scalability a major issue, as it didn't come down at
the node level. Rather, it is about using all of the nodes together,
which means a low level of strain on the operating system. IBM's Linux
Technology Center was instrumental in making Linux work on the Roadrunner.
</p><p>
Beyond Linux, Grice praised other open-source communities for their
&ldquo;tremendous cooperation&rdquo;. He explained how they excitedly dived into the
unique challenges presented by Roadrunner and its hybrid architecture
and surpassed all expectations. Some of the open-source applications
include the Moab scheduler and Torque resource manager.
</p><p>
To the surprise of IBM and LANL, most potential software
&ldquo;issues&rdquo; never
turned into problems. However, one challenge presented by open source
is the numerous streams that aren't always compatible with each other.
Thus, the teams had to hold themselves back in some places and experiment in
others to keep a stack that was coherent with itself. Nevertheless,
the result was satisfying and scaled effectively.
</p><p>
&ldquo;The notion that there were separate communities who all pulled together,
and then it all locked in together as one whole stack, that I think is
a fantastic story&rdquo;, said Grice.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0x11ae498"></a>
Keeping the Bird Cool</h2></div></div><p>
In general, &ldquo;power and cooling are second only to the software
complexity&rdquo;, emphasized Grice. Power is the real problem 
for driving HPC forward. Roadrunner solves these issues through
the efficiency of its design. Especially due to the efficiency of the
Cell processors, Roadrunner needs only 2.3MW of power at full load
running Linpack, delivering a world-leading 437 million calculations
per Watt. This result was much better than IBM's official rating of 3.9MW
at full load. Such efficiency has placed Roadrunner in third place on
the Green 500 list of most efficient supercomputers.
</p><p>
Otherwise, Roadrunner is air-cooled, utilizing large copper heat sinks
and variable-speed fans.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0x11ae6a8"></a>
What Comes after Roadrunner?</h2></div></div><p>
Despite Roadrunner's quantum leap into petascale computing, it is merely
the beginning of an exciting trend. IBM's Grice spoke of efforts in
Europe to re-invigorate supercomputing there, with plans in the pipeline
for multi-petaflop machines on-line by 2010. IBM also is planning in
the tens of petaflops with Los Alamos and Sandia National Laboratories,
including a 50-petaflop machine slated for delivery in 2012 or 2013.
&ldquo;We're going to have an exaflop in 11 years&rdquo;, adds Grice,
&ldquo;so we just have
to figure out how to power it&rdquo;. The trend has been amazingly linear, and
given the advances in hybrid computing, it likely will continue unabated.
</p><p>
Roadrunner also will raise expectations, and hybrid computing will trickle
down, making the once-impossible possible. Climate-change scientists
will heap more elements to their models, pharmaceutical companies will
model the effects of drugs in the body, and Hollywood's special-effects
will become even more mind-blowing.
</p><p>
As this future unfolds, the Roadrunner teams at IBM and Los Alamos
National Lab should be confident in their accomplishment of building
the world's fastest supercomputer&mdash;the first-ever petaflop machine.
It was an incredible achievement in planning, hardware, software and
logistics that has set the global standard for supercomputing. It will
be interesting to see what the team will accomplish next.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xcbc580.0x11ae910"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
IBM Fact Sheet on Roadrunner: <a href="http://www-03.ibm.com/press/us/en/pressrelease/24405.wss" target="_self">www-03.ibm.com/press/us/en/pressrelease/24405.wss</a>
</p><p>
Roadrunner Home Page at Los Alamos National Lab:
<a href="http://www.lanl.gov/orgs/hpc/roadrunner/index.shtml" target="_self">www.lanl.gov/orgs/hpc/roadrunner/index.shtml</a>
</p><p>
The Green 500 List: <a href="http://www.green500.org" target="_self">www.green500.org</a>
</p></div></div></div>
<div class="authorblurb"><p>
James Gray is <span   class="emphasis"><em>Linux Journal</em></span> Products Editor and a
graduate student in environmental sciences and management at Michigan State
University. A Linux enthusiast since the mid-1990s, he currently resides in
Lansing, Michigan, with his wife and cats.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../175/toc175.html">Issue Table of Contents</a>
    <a class="link3" href="../175/10219.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>