<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The Quick Road to an Intranet Web Server</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Apache and Linux make the task simple.&#10;    "><meta name="keywords" content="WWW, Internet"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x14ea580.0x15e1ab0"></a>The Quick Road to an Intranet Web Server</h1></div><div><div class="author"><h3 class="author">Russell C. Pavlicek</h3></div><div class="issuemoyr">Issue #55, November 1998</div></div><div><p>
    Apache and Linux make the task simple.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14ea580.0x15e24a8"></a></h2></div></div><p>On a recent project, I was busily working
on my Linux workstation while a nearby coworker was attempting to
install a well-known web server on a popular operating system. As
the day wore on, his frustration grew. By the end of the day, he
had most of the web server functioning, but was still experiencing
difficulty with configuring certain portions of it.
</p><p>Here was a man of proven technical abilities fighting to set
up an Intranet web server for a project. It obviously wasn't a
simple task. Through dogged determination, my friend eventually
prevailed, but not without gaining a few gray hairs in the
process.</p><p>I began to reflect on my own experience with web servers. The
unobtrusive Linux workstation I was using (a 486/66 with 16 MB of
memory and a 0.5 GB SCSI drive) was equipped with the Apache web
server. Six months earlier, I had built this system from unused
parts lying around our lab and installed Red Hat 4.2 on it. When I
built the machine, it was my hope to demonstrate to my coworkers
how impressive and substantial Linux had become.</p><p>What I hadn't expected was to find myself even more impressed
with Linux and Apache as a result of my friend's experience.</p><p>When I installed Red Hat 4.2 on the machine, I simply
specified that I wanted the Apache web server installed along with
the other packages I selected. When the installation was complete,
I simply aimed a browser at the newly installed machine and found a
friendly little Red Hat-supplied web page staring at me, telling me
which file to edit to begin loading content into my new web
site.</p><p>No fussing with parameters or complex configuration was
needed. I just began editing the default HTML file, and soon had a
neat web site exemplifying the benefits of Linux.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14ea580.0x15e2768"></a>Why an Intranet Web Server?</h2></div></div><p>As corporations worldwide try to catch the Internet wave,
more and more companies realize the need to build a decent Intranet
in order to share information within their organization.
Traditional paper documents, such as policy manuals, software
documentation, design specifications, press releases and corporate
announcements, are suddenly more accessible within the organization
via an Intranet web server. New capabilities such as support
discussions, document searches and audio and video archives are
creating opportunities to increase the availability of information
and to add to an organization's competitive advantage.</p><p>At the center of many of these technologies is the need for a
robust and efficient Intranet web server. Yet even a casual glance
at the commercial software solutions employed for developing an
effective server will reveal that constructing one can be an
expensive proposition.</p><p>Here is a place where Linux and Apache shine! The combination
of the robust Linux operating system with the industry-leading
Apache web server (see Resources) creates a flexible foundation for
a low-cost, highly functional Intranet web site. Using Linux to
solve a business problem is one of the best methods of convincing
people that this operating system can hold its own in the corporate
arena.</p><p>Of course, Linux and Apache can also be configured as a
highly effective Internet web server. An Internet server requires
all the elements of a good Intranet server, plus a good deal more.
In particular, security and performance are usually much more
critical in an Internet scenario. However, the issue of installing
a web server into a less hostile internal network can be handled
with ease, especially if you are using a Linux distribution which
does most of the work for you.</p><p>What if your Linux distribution doesn't come with Apache
preconfigured? The good news is that it doesn't take much to
install Apache on most any Linux machine. It is possible to set up
a working web server on your Intranet in just a few minutes without
having to be a technical wizard.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14ea580.0x15e29d0"></a>How to Install</h2></div></div><p>Installation of Apache is a snap using Red Hat 4.2, Debian
1.3.1, or OpenLinux Base 1.x. The Debian distribution goes through
a short configuration dialogue (if in doubt, just press the ENTER
key a few times), while the Red Hat and OpenLinux distributions
have a more or less preconfigured installation. In all three
distributions, the process of creating a working Intranet server
takes neither experience nor a significant amount of time.</p><p>If your distribution doesn't have an Apache package, you can
always obtain a source kit from http://www.apache.org/. Here's an
example (using Apache 1.2.5) of the commands used to quickly unpack
and build the program:</p><pre     class="programlisting">
tar xzf apache_1.2.5.tar.gz
cd apache_1.2.5/src/
./Configure
</pre><p>If you have a different location to store the configuration
files other than the default location of
/usr/local/etc/apache/conf/, simply change the following line in
src/httpd.h:
<pre     class="programlisting">
#define HTTPD_ROOT "/etc/httpd"
</pre>


Note that the definition of <b  >HTTPD_ROOT</b> does
<span   class="bold"><b>not</b></span> include a closing slash. If
you don't make the change in the file, but still want to move the
configuration files, you will be able to specify the location of
httpd.conf at startup time by using the <b  >-f</b>
option on the <span   class="bold"><b>httpd</b></span> command line.
</p><p>Regardless of whether or not you decide to make the change
above, the final step is to compile the web server. Just type
<b  >make</b> and the httpd executable will be created in
the /src subdirectory. The source kit contains additional
instructions in README and src/INSTALL should you wish to do
anything fancy. A vanilla compile should work just fine for most
situations.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14ea580.0x15e2e48"></a>How to Configure</h2></div></div><p>Apache has many wonderful configuration options available. To
someone who has never managed a web server, the list of options
might seem quite daunting. However, it is possible to employ a
simple cookbook method to get your web server up and running in
short order. The following values will produce a working Intranet
server which should perform marvelously in most organizations. Of
course, if you have special security requirements, a review of the
Apache documentation is quite helpful.</p><p>Any Linux distribution with an easy installation of Apache
will likely have a reasonable set of parameters already enabled.
Even if your web server is live seconds after installation, you may
want to review the configuration files just to find out what
features have been enabled and disabled by default.</p><p>The Apache configuration generally has four files of note. In
Red Hat, these are found in /etc/httpd/conf/. In Debian, they are
located in /etc/apache/. If you built Apache from the sources as
described above, they should be in /usr/local/etc/apache/conf/. The
four files are access.conf, httpd.conf, srm.conf and
mime.types.</p><p>If the files are not found in your kit, you should be able to
locate the same group of files with names ending in .conf-dist.
Simply copy each of these files to the appropriate location (e.g.,
/etc/httpd/conf/ if you are using Red Hat) using the .conf file
type, and edit the files so that they contain the parameters
described below. Note that the Apache-supplied configuration files
contain useful hints not shown here for the sake of space, as well
as many additional parameters not discussed here. So, it is best to
edit the files to contain the following parameters, rather than
attempting to construct new configuration files from
scratch.</p><p>Of the four files, mime.types is the least likely to require
modifications. It is a table which associates MIME headers with
file types. For example, the table will say that a file ending with
.gz should generate a MIME header of application/x-gzip.</p><p>The most likely candidate for parameter adjustment is the
access configuration definition. In access.conf, try using the
following values:</p><pre     class="programlisting">
&lt;Directory /home/httpd/html&gt;
Options Indexes Includes ExecCGI FollowSymLinks
AllowOverride None
order allow,deny
allow from all
&lt;/Directory&gt;
</pre><p>In this example taken from a modified Red Hat file, this
entry says that the main HTML files for this server will be stored
in /home/httpd/html. The options include:
<div class="itemizedlist"><ul type="disc"><li><p><span   class="bold"><b>Indexes</b></span>: if the
user specifies a URL that points to a directory name rather than a
file name and that directory does not contain an index file (such
as index.html), Apache will display a list of the files contained
in the specified directory. If you don't want this behavior, simply
omit the &ldquo;Indexes&rdquo; keyword from the &ldquo;Options&rdquo; line.</p></li><li><p><span   class="bold"><b>Includes</b></span>: this
allows the server to include files as directed.</p></li><li><p><span   class="bold"><b>ExecCGI</b></span>: if the
URL specified is actually a CGI script, this will allow that script
to execute. If you are not interested in CGI scripts, don't include
the keyword.</p></li><li><p><span   class="bold"><b>FollowSymLinks</b></span>:
Let's say that I've created a symbolic link to my CD drive in this
directory. This keyword will instruct Apache to allow access to
that CD as if it were a subdirectory of this directory. This
facility can be quite handy if you wish to serve up the contents of
a CD or allow access to the HOWTOs which normally reside in a tree
such as /usr/doc. One quick symbolic link, and you can allow Apache
to serve those files without moving them or creating individual
symbolic links. But remember to create symbolic links with care, or
else you might find that your web site is serving up documents you
never intended to be universally available.</p></li></ul></div>

In the above example, the remaining directives translate (roughly)
to &ldquo;don't override the normal access rules&rdquo;, &ldquo;evaluate rules to
allow access before the rules to deny access&rdquo; and &ldquo;allow access
from all hosts&rdquo;. Together, these rules add up to &ldquo;if it's there
and they ask nicely, give it to them&rdquo;.
</p><p>The CGI directory entry will generally look more minimal,
like:</p><pre     class="programlisting">
&lt;Directory /home/httpd/cgi-bin&gt;
AllowOverride None
Options None
&lt;/Directory&gt;
</pre><p>The parameters that define the operational parameters for the
Apache daemon in httpd.conf are as follows:
<pre     class="programlisting">
HostnameLookups on
</pre>


If <b  >HostnameLookups</b> is &ldquo;on&rdquo;, the server will
use DNS to try to determine the user's host name for logging
purposes.
<pre     class="programlisting">
User nobody
Group nobody
</pre>


<b  >User</b> and <b  >Group</b> determine the
access privileges of the remote user. The server will act as if it
were a job created by the specified user and group (in this case,
&ldquo;nobody&rdquo;).
<pre     class="programlisting">
ServerAdmin root@localhost
</pre>


<b  >ServerAdmin</b> sets the user name and host to
receive mail messages that might be generated by the daemon.
<pre     class="programlisting">
ServerRoot /etc/httpd
</pre>


<b  >ServerRoot</b> sets the base directory for
configuration and log files.
<pre     class="programlisting">
ErrorLog logs/error_log
TransferLog logs/access_log
RefererLog logs/referer_log
AgentLog logs/agent_log
</pre>


These parameters specify the name and location of various log
files. The directories specified are relative to the
<b  >ServerRoot</b> directory. Once you've run Apache for
awhile, examine these log files. In them, you'll find information
about which pages were accessed when and by whom. You'll even find
information about the page that called your page and the type of
browser the user was employing to look at your site.
<pre     class="programlisting">
MinSpareServers 5
MaxSpareServers 10
StartServers 5
MaxClients 150
</pre>


These parameters deal with the fact that Apache generates child
processes <span   class="emphasis"><em>before</em></span> they are needed in order to
deal with any sudden increase in incoming traffic. These parameters
specify the minimum and maximum number of unused children which
should exist at any point in time. They also specify the absolute
minimum and maximum number of children which should be available.
Using the command <b  >ps ax</b> will reveal the multiple
children which the Apache daemon is currently using.
</p><p>The file srm.conf contains many different items. It deals
largely with the name space of the server as well as how the server
responds to requests. Of special interest are the following
lines:</p><pre     class="programlisting">
DocumentRoot /home/httpd/html
Alias /icons/ /home/httpd/icons/
ScriptAlias /cgi-bin/ /home/httpd/cgi-bin/
UserDir public_html
</pre><p><b  >DocumentRoot</b> specifies the top of the
directory tree that contains the pages to be served.
<b  >Alias</b> allows the specified directory to be
accessed by a pseudonym, even though it is not under the
<b  >DocumentRoot</b> tree.
<b  >ScriptAlias</b> is like <b  >Alias</b>
except that the directory will contain CGI scripts.
<b  >UserDir</b> specifies the user's subdirectory to
look in for any URL that uses a /~username/ specification. For
example, if the user's default directory is normally
/home/username/, then the user's default HTML directory will be
/home/username/public_html/.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14ea580.0x19dc170"></a>Conclusion</h2></div></div><p>The combination of Linux and the Apache web server is a quick
and inexpensive way to build a robust Intranet web server. Despite
its multiplicity of options, Apache can be quickly configured to
serve the needs of most organizations. In fact, most current Linux
distributions come with Apache preconfigured and ready for action.
If your needs should become more complex, Apache can grow with you
to do the job.</p><p><a href="2932s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="2932aa.jpg"></div>

      <span   class="bold"><b>Russell C. Pavlicek</b></span>
      is employed by Digital
      Equipment Corporation as a software consultant serving U.S. Federal
      Government customers in the Washington, D.C. area. He lives with
      his lovely wife and wonderful children in rural Maryland where they
      serve Yeshua and surround themselves with a variety of furry
      creatures. In his miniscule amounts of spare time, he continues to
      develop the Corporate Linux Advocate home page at
      http://www.geocities.com/SiliconValley/Haven/6087/. His opinions
      are entirely his own (but he will allow you to adopt one or two if
      you ask nicely). He can be reached at
      pavlicek@altavista.net.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../055/toc055.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>