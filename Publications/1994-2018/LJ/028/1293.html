<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Letters to the Editor</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Readers sound off.&#10;    "><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1e3e580.0x1f35ab0"></a>Letters to the Editor</h1></div><div><div class="author"><h3 class="author">Michael K. Johnson</h3></div><div class="issuemoyr">Issue #28, August 1996</div></div><div><p>
    Readers sound off.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36190"></a>SPARC?</h2></div></div><p>I was a SPARC user until I encountered a hardware problem. I
found it difficult to get service for the SPARC hardware; small
site end users don't get much support from SUN, it seems.</p><p>The Linux/x86 world is just the opposite. There is a very
competitive market offering a wide variety of options in all
price/performance ranges. It creates a truly affordable Unix
computing system.</p><p>I wish the Linux community would stay with x86 instead of
making Linux just another piece of software on those expensive
proprietary boxes.</p><p>&mdash;Siuki Chan
<a href="mailto:siuki.chan@xilinx.com">siuki.chan@xilinx.com</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f363f8"></a>Why Not?</h2></div></div><p>When Unix was first written it was for a PDP-7 (and written
in assembly language). Subsequent ports to additional hardware
helped turn Unix into the machine-independent system it is today.
Associated with the 25-year history of Unix and its
machine-independence has been additional overhead.</p><p>Linux offers a fresh start. Porting Linux to other
architectures can bring a new machine-independent operating system
into general use. While many people today see the x86 as the right
answer I am sure people felt the same way about the PDP-11 (which
was the second platform for Unix). Designing portability into Linux
now means it will be much easier to get running on the hardware of
the future&mdash;whether it be based on the SPARC, DEC Alpha, MIPS or
something totally new.</p><p>&mdash;Haykel Ben Jemia
<a href="mailto:haykel@cs.tu-berlin.de">haykel@cs.tu-berlin.de</a></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36608"></a>AWKward mistake</h2></div></div><p>I would like to say that I really like
<i  >LJ</i> and that through it I learn something new
about Linux every month. In issue 25 (May 1996), I found the
article <span   class="bold"><b>Introduction to Gawk</b></span> very
interesting because I often use Gawk. But when trying things out, I
noticed something wrong with the output of the
<b  >FS</b> statement. The article stated that</p><pre     class="programlisting">
{
    FS=":"
    print $5
 }
</pre><p>and</p><pre     class="programlisting">
BEGIN {
    FS=":"
}
{
    print $5
}
</pre><p>are functionally identical, except that the first one is slower.</p><p>But when I executed the first program, the first line was
blank. With the second program, everything was okay. So I asked on
the Red Hat mailing list (because I use the Red Hat distribution)
if someone could help me. Marc Ewing provided the real answer to
the problem:</p><p>The line is split into fields before the rule is evaluated,
so when the <b  >FS=":"</b> is evaluated the first time,
the line has already been split up, and either no fifth field
exists, or in some situations the fields are wrong. So the two awk
programs are not functionally identical; the first program is
incorrect.</p><p>I hope this information will be useful for someone.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36ad8"></a>Oops</h2></div></div><p>That was tested before being put in the magazine, but the bug
was hard to notice (and was missed) because the /etc/passwd file on
the machine used to test the script ran the output off the top of
the screen. Thanks for bringing this to our attention.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36be0"></a>lcc for ELF?</h2></div></div><p>In Issue 25 of <i  >Linux Journal</i>, the lcc
compiler was reviewed [<span   class="bold"><b>Introduction to
Awk</b></span>, by Ian Gordon] and the FTP site for lcc was listed
as ftp://ftp.cs.princeton.edu/pub/lcc/. However, I can only find
a.out ports of lcc to Linux. Is anybody working on ELF support in
lcc?</p><p>&mdash;Arthur D. Jerijian</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36df0"></a>Yes</h2></div></div><p>The file
ftp://ftp.cs.princeton.edu/pub/lcc/contrib/linux-elf.tar.gz is
dated November 14th, 1995, so Linux ELF support for lcc has been
around for a while.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e3e580.0x1f36ef8"></a>More AWKward mistakes</h2></div></div><p>To the editor:</p><p>I would like to comment on the article on gawk
{<span   class="bold"><b>An Introcution to Awk</b></span>] by Ian
Gordon in the May <i  >Linux Journal</i>. Overall it is
a nice introduction to the joys of awk programming, but I wish you
had let me review it first.</p><p>There are a number of minor and not so minor errors in the
article. In order of appearance:</p><p>1. Brian Kernighan wasn't one of the original designers of C;
he &ldquo;merely&rdquo; wrote the book on it with Dennis Ritchie, who
designed and implemented C. (Not to diminish his stature in any
way; Brian is still a very important and seminal figure in the Unix
and C world.)</p><p>2. The article says, &ldquo;gawk also defines several special
patterns wich do not match any input at all, the most commonly used
being BEGIN and END&rdquo;. This is incorrect. Only BEGIN and END are
defined in awk, there are no others.</p><p>3. The statement &ldquo;If you try to refer to fields beyond NF,
their value will be NULL&rdquo;, if read literally, is misleading. The
value is the null or empty string, often denoted
<b  >""</b>. Granted, most programmer types would
understand the statement at face value, maybe I'm just being
pedantic.</p><p>4. There is a major error in the part that describes using a
colon as the field separator.</p><pre     class="programlisting">
        {
                FS = ":"
                print $5
        }
</pre><p>In gawk, field splitting occurs using the value of FS
<span   class="emphasis"><em>at the time the record was read</em></span>. Thus,
<b  >$5</b> will already have been determined, based on
the previous value of FS (presumably a space, <b  >"
"</b>). Unix versions of awk do this incorrectly, delaying
field splitting until a field is needed, but doing so with whatever
value of FS is current. This is incorrect, and the POSIX standard
for awk mandates that field splitting happen the way gawk (and
mawk, see below) do it. In fact, my book (cited in the RESOURCES
sidebar, thanks!) describes this exact issue.
</p><p>The correct way to get the desired behaviour is to set FS
either using the -F option, or using an assignment inside the BEGIN
block, as mentioned later.</p><p>5. Some typos: &ldquo;does not contain a seven field&rdquo; should be
&ldquo;seventh&rdquo;, and &ldquo;modifing&rdquo; should be &ldquo;modifying&rdquo;. And a nit.
Calling the Info file a &ldquo;page&rdquo; is misleading. When printed, the
current documentation is over 330 pages...</p><p>6. When talking about variable initialization, the article
says &ldquo;... setting it to 0 for an integer or "" for an integer or a
string, respectively.&rdquo; Not quite. Variables are initialized to
<b  >0</b> for their numeric value and
<b  >""</b> for their string value. All numbers in awk
are maintained internally as C double's. Numbers that look like
integers are still stored as doubles. This can lead to confusion
for C programmers:</p><pre     class="programlisting">
        x = 5 / 4       # x is now 1.25, not 1, no integer truncation
</pre><p>(I've been bitten by this one, myself!)
</p><p>7. The discussion of the array &ldquo;for&rdquo; loop is
incomplete.</p><pre     class="programlisting">
        for (i in theArray) print i
</pre><p>prints each <span   class="emphasis"><em>index</em></span> in theArray. To get
both the indices and the corresponding values, you would need
something like 8.</p><pre     class="programlisting">
        for (i in theArray) print i, theArray[i]
</pre><p>A word about implementation speed and comparisons to Perl. There
are three freely available awk implementations: the Bell Labs
version, gawk, and mawk. Gawk is much much faster than the Bell
Labs version. Mawk (ftp from oxy.edu), by Michael Brennan, is a
very nice implementation that is (generally) even faster than gawk.
Although I haven't done any timings, I'm willing to bet that an awk
program run with mawk will give a comparable Perl program a really
good run for its money, every time. Gawk's advantages over mawk are
its additional features, its ports to more systems, and its
comprehensive documentation. Mawk's advantages are its speed and
rock solidness.</p><p>9. In the resource block, the title of the gawk documentation
from the FSF is now <span   class="emphasis"><em>The GNU Awk User's Guide</em></span>,
with just myself listed as the author. Because the manual changed
significantly (it's now about double the previous size), we changed
the title, and I am listed as the author because of all the new and
heavily revised material in the guide. The title page does give
credit where credit is due, saying &ldquo;Based on <span   class="emphasis"><em>The Gawk
Manual</em></span>, by Close, Robbins, Rubin and Stallman.&rdquo;</p><p>Finally, I would like to point out that many Linux
distributions apparently don't yet have the latest version, 3.0.0;
this should be gotten from a GNU mirror. There are a large number
of nifty new features and bug fixes over the previous version, as
well as the revised manual.</p><p>Please accept this note as constructive comments on an
otherwise enjoyable article, one that I wish I had had time to
write...</p><p>Thanks,</p><p>&mdash;Arnold Robbins gawk maintainer and documenter
<a href="mailto:arnold@gnu.ai.mit.edu">arnold@gnu.ai.mit.edu</a></p></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../028/toc028.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>