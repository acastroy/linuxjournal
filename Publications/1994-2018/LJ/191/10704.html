<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Point/Counterpoint
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Should a sysadmin put additional software in /usr/local or /opt?&#10;Bill and Kyle argue the one true location for third-party&#10;software.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1a8d580.0x1b84ac0"></a>
Point/Counterpoint
</h1></div><div><h3 class="subtitle"><i>
/opt vs. /usr/local
</i></h3></div><div><div class="authorgroup"><div class="author"><h3 class="author">
Kyle
 
Rankin
</h3></div><div class="author"><h3 class="author">
Bill
 
Childers
</h3></div><div class="issuemoyr">Issue #191, March 2010</div></div></div><div><p>
Should a sysadmin put additional software in /usr/local or /opt?
Bill and Kyle argue the one true location for third-party
software.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1a8d580.0x1b85670"></a></h2></div></div><p>
This month, Bill and I take on one of the classic holy wars between Linux
geeks: /opt vs. /usr/local. If you look at the current Linux Filesystem
Hierarchy Standard, you will see that both /opt and /usr/local are
represented there. If you read further, you will see that they both seem to
have a similar purpose: a place to put software that's not part of the
standard system. Even though both directories are designed for similar
purposes, they each go about that task in different ways. Well, there's
nothing quite like two very similar things with subtle nit-picky differences
to spark a debate between geeks.
</p><p>
<span   class="bold"><b>Bill:</b></span> So what's wrong with /opt?
</p><p>
<span   class="bold"><b>Kyle:</b></span> There <span   class="emphasis"><em>was</em></span> nothing wrong with /opt, back when it was set up. You
know, back in the days when tar was your package manager and dinosaurs
roamed the earth.
</p><p>
<span   class="bold"><b>Bill:</b></span> &ldquo;Back when it was set
up.&rdquo; Oh, here we go again, another &ldquo;Bill's older
than dirt&rdquo; comment.
</p><p>
<span   class="bold"><b>Kyle:</b></span> I'm not saying you're older than dirt, I'm just saying I've seen your
yearbook pictures with dirt. Anyway, back then, it made sense for someone to
package everything up in one big directory and dump it under /opt. But some
time in the last two decades, most Linux distributions started using more
sophisticated package managers.
</p><p>
<span   class="bold"><b>Bill:</b></span> Ahem. I rather
<span   class="emphasis"><em>like</em></span> using /opt. It's nice having a distinct
delineation as to what's installed by the distribution and what's installed
by the admins after the fact.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Wow, I totally agree with half of that statement.
</p><p>
<span   class="bold"><b>Bill:</b></span> Hey, there's a first. And it's in print too. Whoohoo!
</p><p>
<span   class="bold"><b>Kyle:</b></span> It <span   class="emphasis"><em>is</em></span> nice having a distinct delineation of what's part of the
distribution and what the admin installs&mdash;for me, it's just in
/usr/local.
</p><p>
<span   class="bold"><b>Bill:</b></span> This is the
<span   class="emphasis"><em>first</em></span> time I've heard you, of all people, advocate more
typing.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Your system packages can dump their
files in /usr, and any third-party
packages can put things in an identical directory structure under
/usr/local; however, because these days we aren't using tar, but programs like rpm
and dpkg to install packages (and their yum and apt front ends), we have a
much more sophisticated way to see what is installed and where it's
installed, beyond just the ls command. Even then, using ls, I can see that a
particular binary is in /usr/local/bin and, therefore, must be part of a
third-party package.
</p><p>
<span   class="bold"><b>Bill:</b></span> I may be arguing semantics here, but that's what Point/Counterpoint
is about. To me, /opt is for &ldquo;options&rdquo;&mdash;stuff that's post-install.
/usr/local implies that its local to that machine. To me. Your
&ldquo;ls&rdquo; point
also applies to /opt, except the path is shorter, and you can't assume that
everyone will be using rpm and dpkg.
</p><p>
<span   class="bold"><b>Kyle:</b></span> The path is shorter, eh? Well Bill, thanks for the setup.
</p><p>
<span   class="bold"><b>Bill:</b></span> What if you compile things from
source, and don't <span   class="emphasis"><em>want</em></span> to go through
the added steps of making a .deb? The bottom line is that there is no real
&ldquo;standard&rdquo;. All the admins I've seen tend to have their own spin on this.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Once you start using /opt, you can count on your system paths
increasing exponentially. With /usr/local, my library paths and my binary
paths need to add only one entry (an entry that probably is already there).
</p><p>
<span   class="bold"><b>Bill:</b></span> Exponential? Only if you're installing a crazy amount of software,
man. I rather like knowing that if I'm going to be building, say, a Java
application server, that my JDK is always in /opt/jdk (I typically have a
symlink that points to the real JDK, like /opt/jdk_sun_1.6.0.17. That way,
JAVA_HOME is always /opt/jdk. Any other packages, say a custom-compiled
apache, can live in /opt/apache.
</p><p>
<span   class="bold"><b>Kyle:</b></span> But if you installed the JDK in /usr/local (not that Sun would ever
approve), you could have all the libraries in /usr/local/lib and Java
binaries in /usr/local/bin, <span   class="emphasis"><em>and</em></span> you could just use your regular package
manager to see where things are installed.
</p><p>
<span   class="bold"><b>Bill:</b></span> That's only a couple paths. You're assuming that these things are
packaged by the software maintainer or that I want to go through with
making packages. Lots of times software's not packaged. 
</p><p>
<span   class="bold"><b>Kyle:</b></span> It's an extra (and in my opinion, proper) step when you are deploying
software to your servers, but it's a step that makes sure you can
automatically handle dependencies and can use standard tools and not tar,
cp and rm to add and remove packages.
</p><p>
<span   class="bold"><b>Bill:</b></span> Whoa, you're calling tar and cp
&ldquo;not standard tools&rdquo;?
</p><p>
<span   class="bold"><b>Kyle:</b></span> Standard
<span   class="emphasis"><em>packaging</em></span> tools. Let's take your apache example. If I
wanted a custom apache, I'm going to have to compile it, right? All I have
to do is use the --prefix option to change where it is installed from /usr
to /usr/local. In my opinion, that's <span   class="emphasis"><em>easier</em></span> than the /opt approach.
</p><p>
<span   class="bold"><b>Bill:</b></span> It's rather nice to be able to take a completely working server and
just rsync its directory to another box.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Again, I suppose if you are a closet Solaris or Slackware admin, tar,
cp and rm <span   class="emphasis"><em>are</em></span> your packaging tools, but if your add-on programs are in
packages, you can just use a standard package manager.
</p><p>
<span   class="bold"><b>Bill:</b></span> Yes, <span   class="emphasis"><em>if</em></span> there's a package for it, or you want to go through the work
of making one.
</p><p>
<span   class="bold"><b>Kyle:</b></span> That's what I think this argument ultimately comes down to: the
traditional (and ancient) approach to install software before proper package
managers came on the scene versus the modern way to deploy software on a
server.
</p><p>
<span   class="bold"><b>Bill:</b></span> There are times when packaging is appropriate. If you've got lots of
time to prepare, or require a lot of validation and control, then sure,
package away. 
</p><p>
<span   class="bold"><b>Kyle:</b></span> The modern way is to use package
managers, so dependencies are easily
managed&mdash;adding, removing and updating packages is managed, and there's an
audit trail. The traditional way is just to untar or copy files around and
hope they work. Plus, with the traditional way, you tie up extra space by
sharing fewer libraries and just bundling everything together in each
package, even if another package might use the same libraries. The work of
doing it &ldquo;right&rdquo; is work up front that saves you a lot of work down the
road. I think what it comes down to is that Bill has a soft spot for /opt
from all his years at Sun.
</p><p>
<span   class="bold"><b>Bill:</b></span> Hey, just because I feel nostalgic when I see an /opt/SUNW type path
doesn't mean I don't have a point. On a development system, or a sandbox,
having an /opt directory where you can just toss things and see if they work
makes a whole lot of sense. I know I'm not going to go through the effort of
packaging things myself to try them out. If the app doesn't work out, you
can simply <tt  >rm</tt> the /opt/mytestapp directory and that application is
history. Packaging may make sense when you're running a large deployment
(there <span   class="emphasis"><em>are</em></span> times when I do package apps), but lots of
times, it's nice to toss
stuff in /opt.
</p></div></div>
<div class="authorblurb"><p>
Kyle Rankin is a Systems Architect in the San Francisco Bay Area and the
author of a number of books, including <span   class="emphasis"><em>The Official Ubuntu Server
Book</em></span>,
<span   class="emphasis"><em>Knoppix Hacks</em></span> and <span   class="emphasis"><em>Ubuntu Hacks</em></span>.
He is currently the president of the North
Bay Linux Users' Group.

</p><p>
Bill Childers is an IT Manager in Silicon Valley, where he lives with his
wife and two children. He enjoys Linux far too much, and he probably
should
get more sun from time to time. In his spare time, he does work with the
Gilroy Garlic Festival, but he does not smell like garlic.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../191/toc191.html">Issue Table of Contents</a>
    <a class="link3" href="../191/10704.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>