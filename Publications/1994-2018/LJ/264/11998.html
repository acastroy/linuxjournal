<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The Open-Source Classroom</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;I'm like Tony Stark, but my Jarvis is named Alexa.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1c18580.0x1d0fac0"></a>The Open-Source Classroom</h1></div><div><h3 class="subtitle"><i>
Jarvis, Please Lock the Front Door
</i></h3></div><div><div class="author"><h3 class="author">
Shawn
 
Powers
</h3></div><div class="issuemoyr">Issue #264, April 2016</div></div><div><p>
I'm like Tony Stark, but my Jarvis is named Alexa.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d10358"></a></h2></div></div><p>
Years ago, we put out a request for articles on home automation. About
the time Eureka came out on TV, people wanted to have their very own
SARAH (Self Actuated Residential Automated Habitat), and it seemed like
the perfect time for nerds everywhere to make their houses smart. The
problem was, although a few programs existed (MisterHouse for
example), the hardware wasn't really reliable or highly available. The
X10 company was about the only game in town hardware-wise, and it tended
to be glitchy without much advantage over traditional switches.
</p><p>
In recent years, a glut of products have been dumped onto the
market, all toting options for automated lighting, wireless switches and so
on. Unfortunately, most were very closed and proprietary, forcing
users to stick to a specific brand. That probably was the goal, but it
backfired, because the concept of branding my house with proprietary
hardware and software was anathema. Thankfully, times are changing, and
the product that made me jump into the home automation pool with both feet
is a surprisingly proprietary one: Amazon Echo (but, more on that later).
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d104b8"></a>
Wireless Communication</h2></div></div><p>
Several brands of home automation devices use standard
Wi-Fi (2.4GHz) to communicate. At first glance, that seems like a good
idea. Unfortunately, the 2.4GHz frequency is so cluttered, adding more
devices might be counterproductive. It's also a high-bandwidth type
protocol, which is just not needed for simple switching and communication.
</p><p>
Most home automation devices, regardless of brand, focus on the 900MHz
spectrum. You might remember 900MHz from the days of cordless phones (not
cell phones, rather the old cordless phones from the 1990s). For several
reasons, 900MHz network devices have never really gone mainstream, which
means the frequency isn't oversaturated. It also penetrates walls better,
making it perfect for connecting devices around your home.
</p><p>
Unfortunately, everyone has been trying to become &ldquo;the
standard&rdquo;
in home automation, making the various brand names often incompatible
with each other. When I decided to start using home automation devices,
I wanted something that was compatible with the most products. For me,
that meant SmartThings from Samsung. It supports the very
common Z-Wave protocol and the ZigBee protocol, which is similar, but
is based on an actual IEEE standard (IEEE 802.15.4).
</p><div       class="mediaobject"><a href="11998f1.large.jpg"><img src="11998f1.jpg"></a><div class="caption"><p>
Figure 1. SmartThings is my choice for the most flexible platform upon
which to build.
</p></div></div><p>
Unfortunately again, even though SmartThings supports Z-Wave and ZigBee,
that doesn't mean it has native support for all devices that use Z-Wave
or ZigBee. It might be able to communicate with them wirelessly, but it's
sorta like using a standard phone line. Just because I can call someone
in Germany doesn't mean we'll be able to understand each other once
connected. That downfall is actually another reason I chose SmartThings
over the alternatives. Even though it doesn't support all devices, it does
have a <span   class="emphasis"><em>very</em></span> open development platform that allows users to write device
drivers for any product the SmartThings hub can find. That even includes
devices it can't communicate with directly, like my Nest thermostat. The
developer community is very active, and drivers for devices are usually
easy to implement. Be sure to google the device before you buy it though, because
some products are just so closed, communicating with them is currently
not possible. (I'm looking at you, Insteon.)
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d10988"></a>
The Actual Automation</h2></div></div><p>
This is starting to feel like an advertisement for SmartThings, but really
it's just my opinion based on lots of research and time using it. When
it comes to using your phone to turn lights on and off, or lock doors,
most brands work just fine. With SmartThings, however, you can go one step
further and write programs that have actual intelligence. Those programs
can be shared, and many are available in the SmartThings Marketplace. You
can add these &ldquo;SmartApps&rdquo; to your system and provide a wide variety of
actions based on events.
</p><div       class="mediaobject"><a href="11998f2.large.jpg"><img src="11998f2.jpg"></a><div class="caption"><p>
Figure 2. The Marketplace is full of SmartApps ready to download.
</p></div></div><p>
For example, if SmartThings detects my front door opening (due to
either detecting motion on the front porch via motion sensor, door
opening via door sensor or lock unlocking via manual code entry on
my Z-Wave deadbolt), it checks the current time of day and compares
that to the sunrise/sunset. If it's dark, it turns my entryway
light on for five minutes, then turns it back off. That might seem like a
fairly complicated event for a simple action, but that's the beauty of
programmatically dealing with mundane house activities. It requires no
thought, and the house responds intelligently every time, without any
interaction on my part.
</p><p>
If you're not a programmer, that doesn't mean you're left out of
the automation game. SmartThings (and in all fairness, several other
platforms too) integrates with If This Then That (<a href="http://ifttt.com" target="_self">ifttt.com</a>)
for trigger-based actions that will interact with your home. Want to
get a call or text if your house senses motion? You could pay for an
expensive security system, or you could just have IFTTT call you when
SmartThings triggers a motion event. With the flexibility of IFTTT, your
smart house becomes one more thing you can add to your recipes. 
</p><div       class="mediaobject"><a href="11998f3.large.jpg"><img src="11998f3.jpg"></a><div class="caption"><p>
Figure 3. IFTTT with SmartThings makes your smart house even smarter.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d10fb8"></a>
Call Me Alexa</h2></div></div><p>
I mentioned earlier that the Amazon Echo is really what convinced me
to start delving into the home automation world. That's largely because
although the Android app for SmartThings is very nice, it's not very nice
if you're a guest. I do have many Z-Wave physical switches installed
so lights can be manipulated in the traditional way, but if you have a
smart house, you want it to be convenient for people. That's where the
integration with Amazon Echo comes into play.
</p><p>
Interacting with SmartThings via Alexa can happen in two basic
ways. First, there is direct integration with SmartThings. Unfortunately,
the direct integration is limited to turning switches on and off. That
sounds great, and it is, but there's so much more I'd like Alexa to
do. That's where Alexa and IFTTT comes into play. In fact, I do just as
much integration with Alexa and IFTTT as I do with SmartThings. 
</p><div       class="mediaobject"><a href="11998f4.large.jpg"><img src="11998f4.jpg"></a><div class="caption"><p>
Figure 4. Alexa can do IFTTT things even if you don't use SmartThings!
</p></div></div><p>
Alexa isn't perfect, and sometimes the verbiage has to be perfect in order
for it to function properly. That said, it's nice to crawl into bed and say:
</p><div class="itemizedlist"><ul type="disc"><li><p>
&ldquo;Alexa, turn off all lights.&rdquo; (&ldquo;All lights&rdquo; is an Alexa group of
SmartThings switches all around our house.)
</p></li><li><p>
&ldquo;Alexa, trigger door locks.&rdquo; (This starts an IFTTT recipe that tells
SmartThings to lock all the deadbolts.)
</p></li><li><p>
&ldquo;Alexa, bedroom lamps to 20.&rdquo; (This turns on our reading lamps and dims
them to 20%.)
</p></li><li><p>
&ldquo;Alexa, turn on box fan.&rdquo; (This activates an outlet, turning on the fan
my wife needs in order to sleep at night.)
</p></li><li><p>
&ldquo;Alexa, turn on night mode.&rdquo; (This triggers a SmartThings virtual switch,
which actually activates a certain string of events, which happens to
include all of the above actions.)
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d11900"></a>
Don't Skimp on Physical Switches</h2></div></div><p>
If I lived alone and never had houseguests, I wouldn't need any physical
switches in my house at all. (I'd also smell worse and probably be
unshaven.) But because I live in a house with my family, it's very important
that our &ldquo;smart house&rdquo; is adding value instead of adding unneeded
complexity. For example, it's sometimes difficult to get Alexa to do
exactly what I want. For some tasks, it's required to say, &ldquo;Alexa, trigger
&lt;ACTION&gt;&rdquo;, and for other things, it's, &ldquo;Alexa, turn on
&lt;ITEM_OR_TASK&gt;.&rdquo;
</p><p>
Plus, if you have a house full of people, or if the television is playing,
Alexa often can't hear what you're saying clearly. In situations like
that, it's vitally important to have a plain-old switch on the wall to
turn things on and off. Thankfully, adding a smart switch in place of a
traditional light switch often gives you the best of both worlds. You
can use traditional (or LED) light bulbs and get the automation by
utilizing a wall switch that will turn the lights on and off via physical
switching or wireless control. In fact, rather than buying smart light
bulbs, I generally try to replace switches instead. A smart bulb is 
effective only if it's powered on&mdash;and if you keep your old switch, you 
inevitably will shut off the power, making your smart bulbs as dumb as ever.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x1d11bc0"></a>
Getting Started</h2></div></div><p>
Rather than just telling you to go buy a specific product, it's important
to figure out what you want to accomplish with home automation. I
eventually want
every possible aspect of my house to be automatic,
scriptable or voice-controlled. My wife would be just as happy with Alexa
and a few smart light bulbs. When you stick to something basic, like
an Amazon Alexa and some Phillips Hue lights, the integration
is really simple.
</p><p>
For my personal goals, using a central hub like the Samsung SmartThings
Hub was ideal. I can add devices to it. It supports a wide variety
of brands and technologies. The open nature of the system means
customizations can be made, even some specific to my needs, assuming
I learn the programming language. Rather than taking my word for it,
I urge you to research the various brands and see what fits
into your world the best. Insteon, for example, has the nicest-looking
switches available and a wide variety of products for sale. As
long as you're happy being limited to those products, it's hard to beat
the quality.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x2109f70"></a>
Show and Tell</h2></div></div><p>
After all the warnings about researching for yourself, it seems only
fair to list my experiences with the handful of products I'm currently
using (in no particular order).
</p><p>
<span   class="bold"><b>Samsung SmartThings&mdash;Home Monitoring
Kit ($249):</b></span>
</p><p>
This is a pricy kit, but it includes not only the hub (only one hub
required per house, regardless of the number of devices you have),
but also a smart outlet, motion sensor (with temp sensor) and two
door sensors (with vibration detection). This is a great way to start,
because it gives you multiple devices that sense things and an outlet to
&ldquo;do&rdquo; something. You easily can add a few smart light bulbs and make it
a complete system.
</p><div       class="mediaobject"><a href="11998f5.large.jpg"><img src="11998f5.jpg"></a><div class="caption"><p>
Figure 5. The Samsung SmartThings Home Monitoring Kit is a great way to start your adventure.
</p></div></div><p>
<span   class="bold"><b>Amazon Echo ($179):</b></span>
</p><p>
There's actually a few other options for using Alexa. The new Echo Dot
is $89, and it has all the same home automation features, it just doesn't
have the nice sound system included with the full-blown Echo. It does
have audio-out, however, so you potentially could build yourself an even
better Alexa. Also, Amazon Fire TV includes Alexa. That version doesn't
have all the functionality of the Echo or Echo Dot, but it does support
all the home automation features.
</p><div       class="mediaobject"><a href="11998f6.large.jpg"><img src="11998f6.jpg"></a><div class="caption"><p>
Figure 6. The original Amazon Echo or the new Echo Dot both work well for home automation.
</p></div></div><p>
<span   class="bold"><b>Leviton DZPD3-1LW Z-Wave Lamp Dimmer
($33.95):</b></span>
</p><p>
Rather than install a bunch of expensive light bulbs in our living room
lamps, I just bought this dimmer and plugged all the lamps (with extension
cords) into the single dimmer module. It allows for on/off functionality,
plus it dims all the lamps as well. (Note: it's <span   class="emphasis"><em>very</em></span> important not to
plug electronic equipment into the lamp dimmer. It basically provides
a brown-out situation and can ruin things like televisions!)
</p><div       class="mediaobject"><a href="11998f7.large.jpg"><img src="11998f7.jpg"></a><div class="caption"><p>
Figure 7. This is a great device for dimming lamps. Unfortunately, it's also
great for ruining televisions. Be careful!
</p></div></div><p>
<span   class="bold"><b>Enerwave ZWN-SC7-W 7-button Scene Controller
($42.99):</b></span>
</p><p>
The problem with the lamp dimmer module is that it doesn't include any
switches. Since I replaced a wall-mounted outlet switch with the dimmer
module, I just used that junction box and wired this controller in place
of the old switch. It required custom programming in order to make it
work with SmartThings, but the code is stable and freely available from
the SmartThings development community. I use only one of the seven buttons at
this point, but I'll use the others for things like lowering my projector
screen in the future.
</p><div       class="mediaobject"><img src="11998f8.jpg"><div class="caption"><p>
Figure 8. Enerwave 7-Button Scene Controller&mdash;I use only the single big button now, but all seven are usable.
</p></div></div><p>
<span   class="bold"><b>Kwikset 910 Z-Wave Smartcode Deadbolt
($150):</b></span>
</p><p>
This was an expensive purchase, but since we had to replace our locks
anyway (we recently moved in and have no idea who has keys to the old locks),
it was a good time to make the investment. I'm really glad we did. Using
one of the door sensors from the kit above, I have the deadbolt set
to lock automatically when the door has been closed for a minute. That
means as long as the door is shut, it's effectively locked as well. I
sleep a lot better knowing the doors are locked whether I checked them
or not. Plus, the programable codes means we won't have to re-key the
lock later, just change codes if they are compromised.
</p><div       class="mediaobject"><img src="11998f9.jpg"><div class="caption"><p>
Figure 9. This Kwikset deadbolt was expensive, but I think it was worth it. There's
a more expensive version available too, with individual buttons for the
numbers.
</p></div></div><p>
<span   class="bold"><b>Aeon Labs Aeotec Z-Wave Home Energy Meter
($94.90):</b></span>
</p><p>
I can't get this to work. I basically want to monitor the usage on
our home circuit breaker to see when and what electricity we're
using. Unfortunately, I can't get the dumb thing to work with my
SmartThings hub. Others have succeeded, so I just need to spend more
time on it. I mention it because I don't want everyone to think things always go
smoothly. This is technology after all, and technology is frustrating!
</p><div       class="mediaobject"><img src="11998f10.jpg"><div class="caption"><p>
Figure 10. This Aeon Labs Home Energy Meter will be cool, if I can ever get it working!
</p></div></div><p>
<span   class="bold"><b>GE 12727 Z-Wave Lighting Control Smart Toggle Switch
($40):</b></span>
</p><p>
These look at a quick glance like a standard light switch. The
&ldquo;flipper&rdquo;,
however, is always in the center position and can be bumped up or down
to trigger the on/off action. It doesn't actually switch to up or down,
but activates a switch and then returns to the center position. This is so
that if you turn the light on with the switch, then off with electronic
automation, the switch isn't in the &ldquo;wrong&rdquo; position. It takes a little
getting used to, but the function is straightforward even for folks who
don't know it's a smart switch. (They just think it's weird!)
</p><div       class="mediaobject"><a href="11998f11.large.jpg"><img src="11998f11.jpg"></a><div class="caption"><p>
Figure 11. It feels weird, but it works like any other switch&mdash;sorta.
</p></div></div><p>
<span   class="bold"><b>GE 12724 Z-Wave Smart Dimmer ($40):</b></span>
</p><p>
This is the same as the above toggle switch, but includes dimming
technology. It's also a wide &ldquo;paddle&rdquo; type switch. It functions the same
way, in that it returns to a middle position, but it's less noticeable
with this switch than with the toggle switch. You basically tap the
top to turn lights on and the bottom to turn lights off. To dim/undim,
you just hold the button up or down.
</p><div       class="mediaobject"><img src="11998f12.jpg"><div class="caption"><p>
Figure 12. Perfect for dimming lights, but make sure they're dimmable bulbs!
</p></div></div><p>
<span   class="bold"><b>SmartenIt Three-Button ZigBee Switch ($49.99):</b></span>
</p><p>
This is a battery-operated switch, which functions a bit like the seven-button
switch mentioned earlier, but with four fewer buttons. Also, since it's battery-operated,
you can place it anywhere. We actually put this by our bed so we can
turn our lamps on/off/20%-dim with the touch of a button. We can do the
same with Alexa, but it's nice to have the tactile option as well. This
is one of the only available battery-operated switches that I've found,
which is frustrating because battery-operated switches are perfect for
a smart house that doesn't require your switches to be hard-wired into
the house power.
</p><div       class="mediaobject"><img src="11998f13.jpg"><div class="caption"><p>
Figure 13. The SmartenIt Three-Button ZigBee Switch is great for sticking places that don't have power lines.
</p></div></div><p>
<span   class="bold"><b>GE Link Wireless A19 Smart Dimmable LED Light Bulb,
60-Watt Equivalent ($15):</b></span>
</p><p>
These bulbs are cheap. At $15, they're hardly more
expensive than a non-smart LED bulb, but they are dimmable and work
with SmartTools. I use these in our bedroom lamps. In fact, smart bulbs
are best used in lamps where the cords are plugged in so the bulbs have
constant power. I used bulbs instead of a common dimmer for both lamps
next to our bed so we can have them on/off independently. The three-button
switch mentioned previously manages both lamps at once, but Alexa can manage them
individually or as a group. It's win/win. The only thing I don't like
about them is that although they do dim, it's not an even distribution from
1&ndash;100%. There's hardly any variation between 20&ndash;100%, and the bulbs really
get dim only when you go to 10% or below. That's just a nitpick, however,
and the price of the bulbs makes it a complaint I can happily live with.
</p><div       class="mediaobject"><img src="11998f14.jpg"><div class="caption"><p>
Figure 14. These GE LinkWireless Smart Dimmable LED bulbs are cheap, but occasionally difficult to pair properly.
The cost makes them worth the hassle.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x210be08"></a>
Is Your Home Smart?</h2></div></div><p>
As with most of my articles, I write about things I love. If you have
implemented smart technology in your house, I'd love to hear about
it. Just put something like [SMART HOME] in the subject line, and drop
me a message at <a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>. I'm sure I'll follow up with cool
things I do or horrible mistakes I make along the path to my future robot
army&mdash;er, I mean smart home. I'll be sure to share the tips you send if I
find them useful.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c18580.0x210bf68"></a></h2></div></div><div class="sidebar"><p class="title"><b></b></p><p>Send comments or feedback via <a href="http://www.linuxjournal.com/contact" target="_self">www.linuxjournal.com/contact</a> or to
<a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>.
</p></div></div></div>
<div class="authorblurb"><p>
Shawn Powers is the Associate Editor for <span   class="emphasis"><em>Linux
Journal</em></span>. He's also the
Gadget Guy for LinuxJournal.com, and he has an interesting collection
of vintage Garfield coffee mugs. Don't let his silly hairdo fool you,
he's a pretty ordinary guy and can be reached via e-mail at
<a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>. Or, swing by the #linuxjournal IRC
channel on Freenode.net.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../264/toc264.html">Issue Table of Contents</a>
    <a class="link3" href="../264/11998.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>