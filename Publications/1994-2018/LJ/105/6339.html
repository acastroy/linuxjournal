<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Linux and Star Trek</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Robin speaks with the studio Digital Domain on using Linux&#10;    to render special effects in Star Trek Nemesis and other&#10;    films.&#10;    "><meta name="keywords" content="Star, Trek, graphics, film"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1b01580.0x1bf8ab0"></a>Linux and Star Trek</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #105, January 2003</div></div><div><p>
    Robin speaks with the studio Digital Domain on using Linux
    to render special effects in Star Trek Nemesis and other
    films.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1b01580.0x1bf9558"></a></h2></div></div><p>Linux got its first big Hollywood break
in 1997 when Venice, California studio Digital Domain (D2) used
Linux to render the special effects for the hit movie
<span   class="emphasis"><em>Titanic</em></span>. We spoke with D2 while they were in
production using Linux with <span   class="emphasis"><em>Star Trek Nemesis</em></span>,
which has a scheduled release date of December 13, 2002. D2 uses
Linux for both renderfarm servers and artist desktops.
</p><p>D2 has used Linux for 21 motion pictures, including best
visual effects Academy Award winners <span   class="emphasis"><em>Titanic</em></span>
and <span   class="emphasis"><em>What Dreams May Come</em></span>. D2 has won two
Scientific and Technical Achievement Academy Awards: one for Track
motion tracking software and the other for the compositing software
NUKE.</p><p>Like most studios, D2 was primarily using SGI hardware
running SGI's IRIX variant of UNIX, both on renderfarm servers and
artist workstations. Experiments at D2 with <span   class="emphasis"><em>Dante's
Peak</em></span> in 1996 proved that a move to Linux was feasible.
&ldquo;The Linux renderfarm came first&rdquo;, notes D2 Digital Production
and Technology Creative Director Judith Crow. &ldquo;With
<span   class="emphasis"><em>Titanic</em></span> we were working with a company called
Aret&eacute; using Renderworld, their ocean-simulation software. It
ran three times faster on our Linux Alphas than on our IRIX SGI
machines.&rdquo; While the renderfarm paved the way, applications such
as NUKE and Houdini pushed Linux to the desktop.</p><p>
<div       class="mediaobject"><a href="6339f1.large.jpg"><img src="6339f1.jpg"></a><div class="caption"><p>Figure 1. Preparing to insert a star field into the
window of a spacecraft using NUKE. The tree graph to the right is a
nodal view of the composite script.</p></div></div>
</p><p>A compositor is what software artists use for overlaying
moving images, for example, the starship
<span   class="emphasis"><em>Enterprise</em></span> flying past a background matte of a
space station. &ldquo;Digital Domain has been running NUKE on Linux
since 1997 when it was used extensively on
<span   class="emphasis"><em>Titanic</em></span>&rdquo;, says Digital Effects Supervisor
Jonathan Egstad. Egstad, along with D2's Bill Spitzak, Paul Van
Camp and Price Pethel received an Academy Award for the NUKE
compositor.</p><p>&ldquo;NUKE is essentially a 2-D renderer&rdquo;, says Egstad. &ldquo;It is
five or six times faster on Linux than IRIX, but it wasn't until
the beginning of 2001 that the Linux GUI was able to run fast. Back
in 1993, NUKE was the original scanline-based design. It only took
20MB of RAM to render a typical composite instead hundreds of
megabytes.&rdquo; Later commercial compositor applications, such as
Shake, the popular node-based compositor sold by Apple, have a
similar design.</p><p>&ldquo;There are many instances where 2-D can assist in the
workload&rdquo;, points out Egstad:</p><div class="blockquote"><blockquote class="blockquote"><p>We can build a complete 3-D scene in NUKE then
refer to that in a 3-D package like Maya and vice versa. A 3-D
scene can be created and rendered in Nuke3, complete with lighting,
texturing and shader support&mdash;diffuse, Blinn and Phong are
built-in. There's a complete 3-D subsystem in NUKE. That's a trend
in all 2-D packages. 2-D packages are more and more turning into
3-D packages.</p></blockquote></div><p>Houdini, a commercial 3-D package of which D2 is a big user,
offers its own integrated compositor called Halo in its latest
version. As with NUKE, it is hierarchy-based in conjunction with
2-D hierarchy. D2 also uses the commercial 3-D packages LightWave
and Maya.
</p><p><a href="6339s2.html" target="_self">FLTK, the Window Toolkit of
NUKE</a></p><p>NUKE version 3 has been in use at D2 since 2001, running on
Linux, IRIX and Windows. D2's first Linux renderfarm was on Digital
Alphas and still gets some use. The NUKE design retained the
keystrokes used in IRIX, so users, especially freelancers working
at D2, wouldn't face a learning curve when moving between operating
systems. &ldquo;The NUKE interface is deliberately Spartan, designed
more toward feature work&rdquo;, notes Egstad. &ldquo;It probably has the
strongest color-correction tools of any major package.&rdquo;</p><p><a href="6339s1.html" target="_self">D2's Linux Movies</a></p><p>D2 had requests for years to make NUKE into a commercial
product for use by other studios, and the pressure increased after
Apple purchased industry-leader Shake. Studios became concerned
when Apple dallied with announcing future Linux support.</p><p>&ldquo;We've founded the D2 Software Company to sell and market
NUKE and other applications that currently exist or don't exist
within the studio&rdquo;, says Digital Production and Technology VP
Michael Taylor. He continues:</p><div class="blockquote"><blockquote class="blockquote"><p>We have NUKE evaluation sites out in the field.
We're providing the latest NUKE 3 version that we use internally.
About two years ago when making the decision to do a complete NUKE
rewrite incorporating a 3-D into 2-D model, we considered switching
to Shake, but decided we had a better program.</p></blockquote></div><p>Taylor says Linux, Windows and IRIX versions will be
available in early 2003. There are no plans yet for Mac OS X.
Pricing starts under $10K US, which is comparable to Shake. For
students, there will be a free-of-charge or inexpensive version,
comparable to the apprentice versions of Maya and Houdini.
</p><p>Digital compositor Brian Begun describes working on a scene
in NUKE for <span   class="emphasis"><em>Star Trek Nemesis</em></span>:</p><div class="blockquote"><blockquote class="blockquote"><p>I'm working on a temp, that's a shot that isn't
finished&mdash;isn't ready for film. We have a production intranet for
each show we work on with a web page for each shot. A lot of
artists need to share information. Our job system uses Netscape
with a lot of HTML forms and a server written in Perl. Rather than
files in directories, we have links in directories. We can keep
files in any directory on any drive anywhere without seeing what
drive it is on. This allows our Systems department to juggle our
disk space when necessary and to use it as efficiently as possible,
without affecting production.</p></blockquote></div><p>Begun walks us through setting up a typical effect in
NUKE&mdash;moving the <span   class="emphasis"><em>Enterprise</em></span> across a star
field:
</p><p>
<div       class="mediaobject"><a href="6339f2.large.jpg"><img src="6339f2.jpg"></a><div class="caption"><p>Figure 2. A NUKE window displays an OpenGL 3-D
wireframe of the virtual viewing camera.</p></div></div>
</p><div class="blockquote"><blockquote class="blockquote"><p>Here's <span   class="emphasis"><em>Trek</em></span>'s environment.
We have a predefined list of variables for each show. Let's say I
choose <span   class="emphasis"><em>Star Trek</em></span> SS145A:</p></blockquote></div><pre     class="programlisting">
$ job trek                 [sets show variables]
$ shot ss145a                  [sets job variables]
</pre><div class="blockquote"><blockquote class="blockquote"><p>The <b  >cs</b> command switches to my
work directory, in this case work.begun:</p></blockquote></div><pre     class="programlisting">
$ cs
</pre><div class="blockquote"><blockquote class="blockquote"><p>From here, I can go to an image directory that
contains elements, parts of composite&mdash;or the work directory that
contains NUKE scripts and if we do tracking, the in-house Track
scripts. The work directory will contain files for NUKE, Flame,
Track and Elastic Reality (old but cheap software used for roto and
Avid morphing, such as bad frame or wire removal by morphing).
</p><p>If I need to create my work directory, I use the jsmk
command. Other directories, such as image directories also are
created this way. They contain each green screen, full-resolution
and scaled-down proxy image, previz and temp comp (which gives the
client a rough idea of the shot, but is not necessarily
pretty).</p><p>The lss command displays files in a more readable format than
ls. For example, instead of looking at files like this:</p></blockquote></div><pre     class="programlisting">
test.0001.rgb
test.0002.rgb
test.0003.rgb
</pre><div class="blockquote"><blockquote class="blockquote"><p>Typing <b  >lss</b> displays files like
this:</p></blockquote></div><pre     class="programlisting">
test.%04d.rgb 1-3
</pre><div class="blockquote"><blockquote class="blockquote"><p>Before launching NUKE, I change to the NUKE
subdirectory in my work directory:</p></blockquote></div><pre     class="programlisting">
$ cs
$ cd nuke
$ nuke3
</pre><div class="blockquote"><blockquote class="blockquote"><p>When I launch NUKE, it brings up a GUI window,
and I choose Image&reg;Read&reg;File and then ss145a.wh to load the
foreground (green screen) images. When working on a project, I use
both high-resolution images and quarter-resolution proxy images.
</p><p>The images are Cineon 10-bit log. NUKE itself will convert
that to 16-bit float. NUKE is capable of displaying up to ten
images in one viewer. By simply entering 1 to 0 on the keyboard, I
can have up to ten views.</p></blockquote></div><p>
<div       class="mediaobject"><a href="6339f3.large.jpg"><img src="6339f3.jpg"></a><div class="caption"><p>Figure 3. Adjusting a green screen Ultimate
composite in NUKE while inserting stars into spacecraft cockpit
window.</p></div></div>
</p><div class="blockquote"><blockquote class="blockquote"><p>Here's a green screen of a cockpit [see Figure
3]. I bring in the background image of stars. When pulling a green
screen, you'll typically pull three types of mattes. An edge matte
is used to retain all the fine detail present in the photography. A
fill or &ldquo;innie&rdquo; is used to fill any holes that may occur due to
green spill or green material in front of the foreground subject.
And, a cleanup or &ldquo;outtie&rdquo; matte is used to remove anything that
is supposed to be replaced by the background&mdash;such as stage lights.
To pull these mattes, I'll select a &ldquo;backing color&rdquo; in
Ultimatte's color picker that best represents the color I want to
remove, and that will give me the best matte. After that, I'll make
any necessary tweaks, including pulling additional mattes where
necessary, or additional cleanup.</p></blockquote></div><p>Technical Director Jason Iversen is responsible for energy
beam effects and debris for <span   class="emphasis"><em>Star Trek</em></span>:</p><div class="blockquote"><blockquote class="blockquote"><p>For ships exploding we use as many practical
effects as possible. Practicals are faster, even though it takes
time to build the model. That may take two guys two months, but it
is three people for four to five months to create a 3-D shot. We
shoot the explosion at 300 fps slo-mo. It's a big task, and still
might not get realism. Some explosions are enhanced with digital
debris using Houdini. Some <span   class="emphasis"><em>Enterprise</em></span> shots
are still real, but not the hull-scraping beauty shots.</p></blockquote></div><p>As we're talking, one of his SGI machines is being taken away
for use on the renderfarm. At D2, workstations are being upgraded
to dual-Pentium PCs.
</p><p><span   class="emphasis"><em>Star Trek</em></span> work at D2 was previously all
done in Houdini on Linux, but most of the Maya artists are on
Windows NT because of Maya plugins not being available on Linux.
&ldquo;One of the largest sequences we've got is the avalanche sequence,
all in Linux Houdini plus our own internal tool called VoxelB for
doing volumetrics&rdquo;, notes Iversen. He continues:</p><div class="blockquote"><blockquote class="blockquote"><p>The avalanche is a huge powdery trail that is
generated in a 3-D sense&mdash;not a 2-D cheat. Our voxel compositor
VoxelB is a plugin. All of our tools can take in data from Maya or
Houdini. We often combine those with our fluid dynamics software to
create flowing water.</p></blockquote></div><p>&ldquo;Terragen is our terrain-generating program that was used in
<span   class="emphasis"><em>Time Machine</em></span> for planet shots&rdquo;, says Iversen.
He adds:
<div class="blockquote"><blockquote class="blockquote"><p>We use it for previz and to create the initial
plate for digital painters. Digital actors are all in Maya,
primarily on NT. Our pipeline is based on previz rolling into
production. All artists do precomposites of our work, then get
assigned a compositor to take it to film out.</p></blockquote></div>

Although Linux supports popular 3-D packages such as Houdini and
Maya, Crow says she feels frustrated by a dearth of Linux paint
packages. &ldquo;There's a depth to Photoshop that Film GIMP doesn't
have. Film GIMP isn't mature enough.&rdquo; Crow says a promising
development is Amazon16, a 16-bit paint package that maker
Interactive Effects is porting to Linux. Amazon has a long history
on IRIX. &ldquo;It was layer-based before Photoshop, supports
user-defined macros, provides 3-D texture paint capabilities, and
most importantly, supports HDR formats like Cineon that are
critical for film work&rdquo;, says Crow. &ldquo;Another promising
development is the 32-bit Linux paint package Photogenics by
Idruna, currently in beta.&rdquo;
</p><p>According to Crow, porting D2's IRIX-based applications to
Linux went rapidly, especially with their compositing software
NUKE. The Linux conversion at D2 happened in stages, first the
renderfarm that performs batch processing of movie effects, then
the desktops where artists work. &ldquo;When Linux was ready for the
desktop we were eager to adopt it&rdquo;, says Crow. &ldquo;As soon as we got
an OS like Linux supporting the features we relied on we were
excited to move to it.&rdquo;</p><p><a href="6339s3.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="6339aa.jpg"></div>

        <span   class="bold"><b>Robin Rowe</b></span>
      (<a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>)
      is a partner in motion picture technology company MovieEditor.com
      and founder of LinuxMovies.org and
      OpenSourceProgrammers.org.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../105/toc105.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>