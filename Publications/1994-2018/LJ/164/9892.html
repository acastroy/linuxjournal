<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Portable Hard Disk Recorder How-To</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Use an old laptop to build a multitrack hard disk recorder.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xd38580.0xe2fab0"></a>
Portable Hard Disk Recorder How-To</h1></div><div><div class="author"><h3 class="author">
Dan
 
Sawyer
</h3></div><div class="issuemoyr">Issue #164, December 2007</div></div><div><p>
Use an old laptop to build a multitrack hard disk recorder.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe303a0"></a></h2></div></div><p>
Podcasting is great. More and more people have discovered Audacity to
record their podcasts, and in many ways it's ideal. It's like a toe in
the shallow end of the recording and producing pool. With a podcast,
you rarely need more than a mono channel&mdash;maybe a stereo setup if you're
recording with someone else in the studio. But, when you get your feet
wet with basic dialogue podcasting, it's hard to stop.
</p><p>
After all, there are so many things in the world worth recording and
podcasting. There are podcast novels, such as those put out by the folks
at <a href="http://podiobooks.com" target="_self">podiobooks.com</a>, and a good production can run into dozens of tracks
between sound effects, guest voices, music and layering.
</p><p>
If you've gone that far, why not go the rest of the way with a full-cast
radio drama? Even if you aren't a writer, plenty of plays
in the public domain work very well for audio. If you're of a
more musical bent, you could set up a recording session for your kid's
garage band. However, once you get into doing complex live audio, such
as recording full-cast radio dramas, concerts or stage plays, you're
going to need more than Audacity. You're going to need a full-fledged
portable recording studio.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe306b8"></a>
Selecting the Hardware</h2></div></div><p>
To record a moderate-sized stage play, for example, your recording
rig must capture multiple tracks simultaneously and independently while
keeping the separate streams in sync. There's nothing quite so stressful
as coming home from an excellent performance riding the mixing board
to discover that, despite what you were hearing in your headphones,
you've inadvertently created phase cancellation in your mixdown with
your microphone placement. The data you don't have on your tape or
hard drive is data lost forever&mdash;data that wouldn't have been lost if
the eight-mic zone system had run to a multitrack recorder instead of
a stereo mixdown. If you had the individual tracks, you could control
for phase and positioning problems, sweeten the mix and even create
a surround-sound environment. But, with all of the mics mixed down to
stereo, what you hear is probably the best you'll ever get.
</p><p>
Moving from simple stereo recordings on Audacity to doing sophistocated
multitrack recordings and mixes is, thankfully, a natural next step
on Linux, but it requires some initial cash outlay. First, it's off
to the great electronics mall to grab the appropriate hardware to build
your studio. Resist your urge to indulge in one of the latest gamer's
sound cards; they look sexy, but you're never going to get them to record
in anything better than stereo. No, for our purposes, you'll want a good
Pro Audio card that's well supported. It's not a cheap move, but for about
$500 you can choose from a good range of interfaces that are exceptionally
well supported. Of course, you won't want to chuck the sound card your
computer already has; a Pro Audio card is designed to interface with
mixing boards, digital audio devices and public-address systems&mdash;it
may not even include a plug for your speakers. For our purposes here,
its central feature is that it pipes multiple simultaneous nonmultiplexed
streams of audio to your computer, often including MIDI.
</p><p>
It's one thing to build a multitrack hard disk recorder out of
your desktop computer&mdash;the choice of hardware for your interfaces is
embarrassingly extensive, the price range quite broad, and there is far
more Linux support than you'd expect in terms of user community. But, unless your home recording studio is both uncommonly
large and very well soundproofed, you may have some problems with a
desktop HDR. Who wants to lug a desktop computer and monitor around in
order to do field recording? If you had a spare $1,500 you could pick
up a multitrack appliance, such as the ones made by Alesis and available
at fashionable Guitar Centers everywhere, but why bother? You'd still
need the Pro Audio card in your desktop to pipe the data back into the
computer for mixing, so the total cash outlay is more than
$2,000&mdash;much too
large for even a dedicated hobbyist.
</p><p>
But have faith, all is not lost! In my case, I needed a multitrack
portable recording rig to do client site recording of stage shows
and panel discussions, and because of the variety of voices and the
prevalence of shoddy mic techniques in the world, I needed to preserve the
option of postproduction in each individual audio track. I looked into
the commercial HDRs, particularly the Alesis models, as I have previously
used Alesis' ADAT tape-based system extensively. The advantage of these
devices is that you turn them on and they just work&mdash;they're firmware-controlled and they operate in hard real time, which is an absolute must
for multitrack recording. Even so, in the end, they were not worth
the money. Their capabilities are too limited for my needs&mdash;most are
limited to 48KHz sample rates, which is fine for dialogue, but far too
low for recording sound effects, complex movement in a space or
music&mdash;the 48KHz sample rate simply can't capture the fine high-end detail
and phase information that make such sounds distinct (explaining the
audiological reasons behind this is beyond the scope of this article,
but a quick read on the basics of acoustical sampling will give you
the background you need). I needed a better solution.
</p><p>
Fortunately, I have an old laptop lying around, and Linux&mdash;unlike some
other popular operating systems I could name&mdash;has real-time hardware
preemption, which is essential if one wants to build a hard disk recorder.
A laptop, of course, will not accept PCI or PCI Express cards, so the
choice of Pro Audio interfaces is limited to the external&mdash;something
that can plug in either to the CardBus slot or the USB or FireWire port.
</p><p>
The list of compatible external audio interfaces is far shorter than
the list of internal cards available for desktops, but it's still long enough
to require a lot of research. I actually do have an old Swissonics USB
Studio D on my rack, which is nicely supported by ALSA and normally sits
connected to my desktop HDR station, but it's too big and draws too much
power to lug around to remote locations where I might have to run off
my car battery.
</p><p>
For my purposes, I needed something around $600, with enough inputs that I
could mic a stage play&mdash;eight analog inputs, minimum. This automatically
culled out most of the FireWire-based interfaces. Even though the
FireWire boxes from Presonus can draw all their power from the FireWire
bus and let your interface run off the laptop battery&mdash;a big
plus&mdash;the
boxes in my price range tend to be limited to four or six tracks. So,
on the advice of Ardour Project maintainer Paul Davis (<a href="http://www.ardour.org" target="_self">www.ardour.org</a>),
I checked out the RME Hammerfall HDSP Multiface 2, which is a CardBus-based
device with a very nice external breakout box. It helps that its Linux
drivers are written and maintained by Davis, who is no mean slouch when
it comes to writing tight code. It also helps that I've got one of RME's
cards in my desktop HDR, so I knew they were likely to work handsomely.
RME's mixing and control panel software for the HDSP is every inch as
professional and easy to use as its Windows and Macintosh analogs.
</p><p>
After plugging this interface in to my laptop and configuring it properly,
I have a multitrack hard disk recorder that can simultaneously record
24 tracks at a maximum sample rate of 96KHz, well above the maximum
available sample rate on far more expensive commercial HDRs, with more
available input tracks.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe30ad8"></a>
Distribution Considerations</h2></div></div><p>
As mentioned previously, multitrack audio recording ideally requires
real-time access to the hardware, but this support is not built in to
the kernel by default on most Linux distributions. It's an option that
must be enabled at compile time, or, if you're running an older kernel,
must be hand-patched into the source before compiling. Although I have
no problem recompiling my kernel for a good cause, it's not something
I like doing for the sake of pure amusement.
</p><p>
Fortunately, a number of distributions are on the market,
geared particularly for multimedia production, that come with real-time
priority enabled, with the distribution binaries built with all the
architecture-specific and real-time optimizations turned on. Planet CCRMA
(Fedora-based), DeMuDi, Ubuntu Studio and 64 Studio (all Debian-based)
all come with things set up this way, and if you're building a field
recorder from scratch or don't mind re-installing the operating system,
they are all excellent starting points for your system. Although I have
used all of them and find them all quite capable, I ultimately chose
Ubuntu Studio for the sake of consistency with the rest of my
platforms&mdash;I run Ubuntu flavors on most of my workstations, and even though it's
well tuned for real-time use, Ubuntu Studio is more of a general-purpose
distribution than is my other favorite, 64 Studio.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe30c38"></a>
Hardware Configuration</h2></div></div><p>
Ubuntu Studio is currently in the Debian Feisty iteration, which presents
a problem when working with the Multiface 2, as the Ubuntu ALSA version
included doesn't contain the correct firmware to activate the hardware.
To remedy this, however, a two-pronged attack is required. First off,
the ALSA firmware loader, which is not installed by default, needs to
be loaded&mdash;a task easily done with apt-get. Once that's done, loading
the firmware still fails because of the bug in the bundled ALSA version.
Heading over to <a href="http://alsa-project.org" target="_self">alsa-project.org</a> and downloading, building and installing
the v.1.1.4 or better firmware fixes this problem neatly. Once that's
done, restart the computer. So long as the rest of the default packages
are installed (which include particularly all the HDSP tools), the system
should recognize the interface automagically.
</p><p>
To test it, open the hdspmixer utility (Figure 1), plug in a
microphone or instrument, and do a levels test. Keep this mixer open,
as it is your primary first-level control to govern what's coming into
your system.
</p><div       class="mediaobject"><img src="9892f1.jpg"><div class="caption"><p>
Figure 1. hdspmixer Utility
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe30fa8"></a>
JACK</h2></div></div><p>
Now that the hardware is up and running, it's time to get the software
whipped into shape. Pro Audio production on Linux is handled entirely
through the JACK Audio Connection Kit, which allows software to access
the hardware in real time through the real-time-enabled kernel. On the
studio distributions, this software is installed by default, although
if you intend to use the latest-and-greatest multitrack recording
software we'll examine in a moment, you need to upgrade to a later
version of JACK than is currently included in Ubuntu Studio.
</p><p>
To start JACK from the command line, enter <tt  >jackd -R -d alsa -d
hw:1</tt>
(hw:1 denotes the second sound card in your system, which will almost
always be correct when you're dealing with a laptop, as it has a
built-in sound card). Once that's done, start up QJACKCtl or another
one of the graphical patchbay clients&mdash;you'll need it (Figure 2). 
</p><div       class="mediaobject"><img src="9892f2.jpg"><div class="caption"><p>
Figure 2. The patchbay is used for routing sound from the hardware into
the applications, from one application to another, and then back out to
hardware outputs. 
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe31370"></a>
Ardour</h2></div></div><p>
When it comes to multitrack recording on Linux, one project
shines above and beyond all the other audio recording software
available for the platform. That project, Ardour, is maintained by
Paul Davis and is unabashedly geared for professional audio engineers.
Like Blender, which has a naked aim to be a free professional 3-D finishing
system for the masses and is designed with professionals in mind, so
too is Ardour aiming squarely for audio professionals, with an interface
design borrowed from programs like ProTools and then tweaked with an eye
toward improving upon it. As such, its interface is daunting and obtuse
for the newbie, but it operates with great efficiency and transparency once
you get acclimated (Figure 3).
</p><div       class="mediaobject"><a href="9892f3.large.jpg"><img src="9892f3.jpg"></a><div class="caption"><p>
Figure 3. Ardour
</p></div></div><p>
The version of Ardour that ships with the current studio distributions at
the time of this writing is version 0.99, which lags behind the current
release, now comfortably into 2.0 territory. For most purposes, 0.99
is fine, though some of the improvements in version 2.0 are ones you'll
want to take advantage of eventually. If you want to get up and running
in the quickest order, start the version that comes with your distro,
connect the HDSP patchbay outputs to the Ardour inputs, and
you're up and running (Figure 4).
</p><div       class="mediaobject"><a href="9892f4.large.jpg"><img src="9892f4.jpg"></a><div class="caption"><p>
Figure 4. Ardour Up and Running
</p></div></div><p>
If, on the other hand, you want to use Ardour 2.0, you need to do the
requisite download/compile/install routine for both the new version of
JACK and for Ardour, and you will not have to start JACK or QJACKCtl
before starting Ardour&mdash;the new version of Ardour has a JACK control
interface built in. In either case, when you're up and running to
this point, you're ready to rock and roll. Plug your microphones or
instruments to your breakout box, and begin recording. But, keep the
manual wiki handy until you get familiar with things!
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe318f0"></a>
Final Thoughts</h2></div></div><p>
Three years ago, this project would have been a royal pain in the hind end.
Although the Multiface has always been Linux-compatible, once upon a
time,
doing real-time audio on any hardware required a lot of fancy command-line
tricks and kernel recompilation. The plethora of studio distributions
in the last couple years has radically changed the process and has
brought the most powerful parts of the Linux multimedia subsystem into the
reach of people who are power users and hobbyists, rather than remaining
in the domain of kernel hackers. Thanks to the power of Linux and open-source software, for the cost of an old laptop and a new audio interface,
you own a proper, full-featured, multitrack digital audio field recorder.
Go forth, record, edit, create and compress!
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe319f8"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Some Problems with Digital Audio</b></p><p>
As you go about your recording, you're going to discover some of the
limits of digital recording, such as the fact that current technology
doesn't allow for sample rates high enough to reproduce cymbals
and other sounds with high, clear treble accurately&mdash;sounds you won't run into
when recording voices, but you will encounter in music and sound effects.
To better understand how digital sampling works, and how you can use
sound reinforcement and acoustic techniques to overcome some of those
limitations, pick up the <span   class="emphasis"><em>Yamaha Sound Reinforcement
Handbook</em></span>. It will
help you understand how audio reinforcement works and how to compensate
for such problems.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd38580.0xe31c60"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
Laptop-compatible Pro Audio interface support is spotty and hard to find
accurate information on, but an excellent place to start is the FFADO
Project at <a href="http://www.ffado.org" target="_self">www.ffado.org</a>.
</p><p>
The other place for good information is the ALSA Project hardware database
at <a href="http://www.alsa-project.org" target="_self">www.alsa-project.org</a>.
</p><p>
For more information about tweaking the RME Multiface 2, see the HDSP
How-To at <a href="http://pd.klingt.org/files/hdsp-howto.html" target="_self">pd.klingt.org/files/hdsp-howto.html</a>.
</p></div></div></div>
<div class="authorblurb"><p>
Dan Sawyer is the founder of ArtisticWhispers Productions (<a href="http://www.artisticwhispers.com" target="_self">www.artisticwhispers.com</a>), a small audio/video studio in
the
San Francisco Bay Area. He has been an enthusiastic advocate for free and
open-source software since the late 1990s, when he founded the
Blenderwars
filmmaking community (<a href="http://www.blenderwars.com" target="_self">www.blenderwars.com</a>). Current
projects include the independent SF feature <span   class="emphasis"><em>Hunting
Kestral</em></span> and <span   class="emphasis"><em>The Sophia Project</em></span>, a
fine-art
photography book centering on strong women in myth.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../164/toc164.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>