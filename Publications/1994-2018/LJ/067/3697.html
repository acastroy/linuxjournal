<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Best of Technical Support</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Our experts answer your technical questions.&#10;    "><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1c5d580.0x1d54ab0"></a>Best of Technical Support</h1></div><div><div class="author"><h3 class="author">Various</h3></div><div class="issuemoyr">Issue #67, November 1999</div></div><div><p>
    Our experts answer your technical questions.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d550e0"></a>Synchronizing Clocks</h2></div></div><p>I would like to know how best to synchronize the clocks of
the various Linux boxes (various kernels and distributions) on my
LAN.  &mdash;John Morley, jmorley@grafton.demon.co.uk</p><p>You should try NTP:
<a href="http://www.eecis.udel.edu/~ntp" target="_self">www.eecis.udel.edu/~ntp</a>.
NTP software is included in common Linux distributions such as Red
Hat.  &mdash;Pierre Ficheux, pficheux@com1.fr</p><p>I personally run <span   class="bold"><b>rdate</b></span> from
my computer's crontab. This gives me an accuracy within one second,
which is satisfactory for normal interactive use of the net.&mdash;Alessandro Rubini, rubini@prosa.it</p><p>This is definitely a useful thing to do wherever
you have more than one server, but there are many ways to
accomplish it. The most common is to use the
<span   class="bold"><b>timed</b></span> daemon. Read the
man page of the daemon for a detailed description of how to use it.
FYI, there are other programs you can download that will do the
same job with slightly different features, but since timed is
present on almost all modern UNIX systems, it's the best place to
start.  &mdash;Chad Robinson, chadr@brt.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d553f8"></a>Kernel, Modules, Mouse</h2></div></div><p>I am using SuSE Linux 6.1. I defined a new kernel
configuration (using <b  >make xconfig</b>). If I enable
&ldquo;modules&rdquo; support, my mouse does not operate. Using exactly the
same configuration but creating &ldquo;monolithic&rdquo; kernel (meaning that
I changed all m's into y's) works fine. I spent a lot of time on
this problem and got no results. Do you have any ideas?  &mdash;Mark
Shahaf, mshahaf@ibm.net</p><p>You likely have a problem with module autoloading. Try
loading the module for your mouse by hand: <b  >modprobe
psaux</b> for example. Also, if the problem affects only your
mouse, you can use modules but compile it in the kernel. Since you
probably use the mouse all the time and the code isn't too big, you
might as well compile it in the kernel.  &mdash;Marc Merlin,
merlin@varesearch.com</p><p>If the mouse driver is compiled as a module, you should load
the module in order to be able to use the mouse. Try
<b  >insmod psaux</b> (or
<b  >insmod&nbsp;serial</b> if it is a serial mouse), or
configure <span   class="bold"><b>kmod</b></span> to load it
automatically.  &mdash;Alessandro Rubini, rubini@prosa.it</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d55768"></a>startx and Colormaps</h2></div></div><p>I am running Red Hat Linux 6.0. If I run in full multiuser
mode (by setting the run level in the inittab file to 3), I can
execute <b  >startx&nbsp;-&nbsp;-bpp&nbsp;32</b> and have
all the necessary colors displayed. However, if I change the run
level from 3 to 5 in the inittab file to run X11 automatically, I
receive the following results when I try to load some GUI
applications:</p><pre     class="programlisting">
Warning: Cannot allocate colormap entry for "gray71"
Warning: Cannot allocate colormap entry for "AntiqueWhite3"
Warning: Cannot allocate colormap entry for "AntiqueWhite2"
...
</pre><p>This happens even though I have already modified the last
line in the /etc/X11/xdm/Xservers as follows:
<pre     class="programlisting">
:0 local /usr/X11R6/bin/X -bpp 32
</pre>


Any suggestions please?   &mdash;Mohsen Madi, mmadi@cs.umanitoba.ca
</p><p>This is exactly what you are supposed to do if you use
<span   class="bold"><b>xdm</b></span>. However, if you use
<span   class="bold"><b>gdm</b></span> (the default in Red Hat 6.0),
you now need to edit /etc/X11/gdm/gdm.conf. You will find this
section:</p><pre     class="programlisting">
[servers]
0=/usr/bin/X11/X
</pre><p>Just add your <b  >-bpp 32</b>
  there.  &mdash;Marc Merlin,
merlin@varesearch.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d55be0"></a>Another startx Problem</h2></div></div><p>When I type <b  >startx</b> as a regular user,
after the initialization of card, I receive this response:</p><pre     class="programlisting">
X11TransSocketUNIXConnect : Can't connect: errno = 111
giving up
xinit: Connection refused(errno 111) unable to connect to X server
xinit: no such process(errno 3) server error
X11TransSocketUNIXConnect : Can't connect: errno = 111
</pre><p>I am running XF86 3.3.3.1-49. I found this very same post in
the magazine I get; however, mine is a bit odd. I can run X as root
with no problem. I have permissions set for all users to execute X,
but things aren't going that way.
</p><p>On another note, I downloaded the bz2 package of 2.2.10 and
installed it. I added support for the /proc file system, for my
Linux box to act mainly as a router, for forwarding, firewalling,
masquerading and the extra networking goodies. However, when I
rebooted, I had no /sys subdirectory under /proc. I do have the
/proc directory tree, though. I can start the firewall with no
problem and pass arguments to ipchains. When I run <b  >uname
-a</b>, I get this output:</p><pre     class="programlisting">
Linux digitalklown.net 2.2.10 #1 Mon Jul 26 21:17:02 CDT 1999 i586 unknown
running rh6.0
</pre><p>&mdash;Jason Helfman, deklown@digitalklown.net
</p><p>The reason you don't have /proc/sys is that you forgot to add
<span   class="bold"><b>sysctl</b></span> support in the General
setup section of the kernel configuration. When you face unknown
problems like this, your best bet is to make sure your 2.2.10 tree
is clean by typing <b  >make distclean</b> (this will
erase your .config file which contains all the compilation options
you chose, so if your current copy is there, save it first). If you
do have a .config file, now you can copy it into your 2.2.10 tree
and build your kernel with the usual <b  >make clean</b>
(although useless here, since we just did <b  >make
distclean</b>); <b  >make dep</b>; <b  >make
install</b>; <b  >make modules</b>; <b  >make
modules_install</b>. If you do not have a .config you can get
the .config Red Hat used for their kernel by installing the kernel
sources by going to /usr/src/linux-version and typing <b  >make
oldconfig</b>. This will generate a .config in the same
directory, and you'll be able to move it to your new 2.2.10
tree.</p><p>Following the above procedure should insure that you have a
sane set of options selected in your kernel and that the kernel you
end up with is built correctly.  &mdash;Marc Merlin,
merlin@varesearch.com</p><p>With <span   class="bold"><b>startx</b></span>, you fire both
the X server and a set of default clients. The errors you report
are the clients' errors, which show that the server is not running.
You should look earlier on your screen to find why the server
failed.</p><p>If the server is actually running, then you may have
authorization problems. Please check whether your xauth setup is
wrong or other authorization means are running and misconfigured.
The /proc/sys tree is part of the
<span   class="bold"><b>sysctl</b></span> implementation. If you
didn't enable sysctl when configuring the kernel, no such tree is
there.  &mdash;Alessandro Rubini, rubini@prosa.it</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d56478"></a>SIS Drivers Problem</h2></div></div><p>I installed Red Hat Linux 5.0 on my system which has a Cirrus
Logic VGA card. I installed the X Window System and am running it
with success. In my office, most of the systems have SIS 6215 VGA
cards, and Linux 5.0 does not support this. I downloaded SIS
drivers from Red Hat's site. I am using the PC-quest Red Hat Linux
5.0 CD which does not have SIS drivers. How do I insert the SIS
drivers during installation, since I am installing from CD? Please
clarify my doubts on how third-party drivers should be installed
without CD during installation.  &mdash;Munnangi Reddy,
rajasekhara_m@hotmail.com</p><p>You can't. However, the installation doesn't use graphics, so
you can install the system anyway. After installing, you can
upgrade your X packages by installing the new RPM file using</p><pre     class="programlisting">
rpm -i <span   class="emphasis"><em>package</em></span>
</pre><p>  &mdash;Alessandro Rubini, rubini@prosa.it
</p><p>If you want to use new XFree86-supported cards, you should
upgrade both the XFree86 server (XFree86-SVGA...) and the
Xconfigurator utility, which is used in order to generate an
XF86Config file. All these packages are available from the Red Hat
FTP server.  &mdash;Pierre Ficheux, pficheux@com1.fr</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d56738"></a>PPP Advanced Question</h2></div></div><p>I am using Red Hat version 6.0. I have PPP configured and
working for dial-out to my ISP. It uses a dynamic IP address
assigned by the server. I also wish to allow dial-in on the same
system to allow for administration and tech support. The
documentation states that you put the IP address you wish to assign
to the port for dial-in users in the /etc/ppp/options.ttySx file.
However, as long as I put an IP number in the file which
corresponds with the dial-out port, my PPP dial-out fails. I know
it is possible to support both dial-in and dynamic dial-out on the
same port. The PPP HOWTOs state that it can be done. What do I have
to do to get it to work?</p><p>Note: the options.ttySx file has only the single entry. All
other options are in the options file.  &mdash;Gerry George,
ggeorge@digisolv.com</p><p>Actually, you would do this only if you have multiple serial
ports and modems and you want to assign IP addresses dynamically to
your users. If you have only one modem, you can simply assign the
IP on the PPP command line. You could create a PPP user in
/etc/password which launches this script in lieu of a shell:</p><pre     class="programlisting">
#!/bin/sh
IFS=" "
export IFS
/usr/bin/mesg n
stty -tostop -echo
exec /usr/sbin/pppd modem crtscts proxyarp -d\
  -detach moremagic:ppp-guest
</pre><p>  &mdash;Marc Merlin, merlin@varesearch.com
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d569a0"></a>Multiple Authorized Users</h2></div></div><p>We have several labs of Linux boxes available for student use
at the University of Arizona Physics Dept., as well as a couple of
older SPARCs which we are bringing somewhat up to date with the
latest Linux releases. We have some security concerns about LILO
and SILO. Several of these machines' consoles are openly available
to the students, and we have been worried about the students
forcing a reboot and bringing up Linux in single-user mode, gaining
total access to the system. Admittedly, not much damage can be done
from most of the machines, as most simply map their drives to the
user directory of a more secure machine, but it's still a
concern.</p><p>We've added the &ldquo;password=/password/&rdquo; and &ldquo;restricted&rdquo;
lines to the respective /etc/lilo.conf and /etc/silo.conf files on
each machine (and naturally added password protection to the BIOS
to not allow booting from floppy); however, both lilo.conf and
silo.conf are still readable to the average user. We want to retain
the single-user mode availability for the lab crew and keep items
contained in these config files, such as the image locations,
available to those lab crew members without the security to modify
the files. Is there a way to do this and yet prevent anyone from
reading the password lines in lilo.conf/silo.conf? Should we forego
using LILO/SILO altogether and use something else?  &mdash;Sam Hart,
hart@physics.arizona.edu</p><p>Using another boot loader would be a good idea, but there's
an alternative. The LILO configuration file is used ONLY when you
actually run the LILO command. It's not required at boot time.
Thus, you could put the file onto a floppy that only your lab crew
has access to. They can mount it when necessary and use the
<b  >-C</b> option to specify its location when updating
a kernel or changing a boot option.  &mdash;Chad Robinson,
chadr@brt.com</p><p>I would get the source code from SILO and LILO and hard-code
the password in there (make sure, then, that the binary is a 700,
so that a user cannot run strings on them).  &mdash;Marc Merlin,
merlin@varesearch.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c5d580.0x1d56c08"></a>Samba Problem</h2></div></div><p>I have installed Samba 1.9.15p8 and I couldn't write to the
Win98 PC. I am running Slackware 2.0.36. From the Linux box, I
could read/write to Win98 box. From the Win98 box, I could read
from my Linux box but not write. Any ideas?</p><pre     class="programlisting">
(my /etc/smb.conf)
[public]
   path = /
   public = yes
   only guest = no
   writable = yes
   printable = no
</pre><p>&mdash;Hoo Kok Mun, hkmun@pacific.net.sg
</p><p>Maybe you have some problems with Linux access rights on /.
If you want to set up a public read/write directory, you should use
a public directory such as /tmp. Here is my smb.conf config for
/tmp:</p><pre     class="programlisting">
[Tmp]
   comment = Temporary partition (rw)
   path = /tmp
   read only = no
   guest ok = yes
   case sensitive = no
   mangle case = yes
   preserve case = yes

</pre><p>If you want to test SAMBA more heavily from Win98,
you may need to configure user access and passwords. Just add the
following section in smb.conf:</p><pre     class="programlisting">
[homes]
   guest ok = no
   read only = no
</pre><p>Don't forget Win98 uses encrypted passwords, so you
should add the following lines in the [global] section of your
smb.conf:</p><pre     class="programlisting">
[global]
   security = share
   encrypt passwords = yes
   smb passwd file = /etc/smbpasswd
</pre><p>and add users and passwords with the
<span   class="bold"><b>smbpasswd</b></span>
command.  &mdash;Pierre Ficheux, pficheux@com1.fr
</p></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../067/toc067.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>