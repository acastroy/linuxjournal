<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>X-ISP and Maintaining Multiple Account Records</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Even for the experienced administrator, X-ISP provides an&#10;    easy way to manage multiple accounts, keep track of usage&#10;    expense and time on-line.&#10;    "><meta name="keywords" content="connectivity, programs, software"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1286580.0x137dab0"></a>X-ISP and Maintaining Multiple Account Records</h1></div><div><div class="author"><h3 class="author">Chris LeDantec</h3></div><div class="issuemoyr">Issue #56, December 1998</div></div><div><p>
    Even for the experienced administrator, X-ISP provides an
    easy way to manage multiple accounts, keep track of usage
    expense and time on-line.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1286580.0x137e4a8"></a></h2></div></div><p>Connecting your Linux box to a PPP server
can be a frustrating task, especially if you are not familiar with
the scripting requirements, authentication modes or network
settings your ISP expects you to use. X-ISP, a program written by
Dimitrios P. Bouras (dbouras@hol.gr), takes what could be a complex
task and simplifies it with a clean, effective GUI front end.
</p><p>What makes X-ISP such a great piece of software? First, it is
a user-friendly X-based front end to PPP/CHAT. Second, X-ISP
provides a dialer, <span   class="bold"><b>xispdial</b></span>, and a
stripped-down terminal, <span   class="bold"><b>xispterm</b></span>,
which help work out some of the difficulty in establishing a
connection. By using PPP/CHAT, X-ISP leaves most of the work to the
operating system, while also giving experienced users the freedom
to hack familiar connection scripts for any special needs.</p><p>X-ISP can be found at http://users.hol.gr/~dbouras/. To run
X-ISP, you need to have X11R6, Xforms-0.88 and ppp-2.2.0f, and your
modem must be set to verbose mode so that X-ISP can pick up
connection status correctly. The home page provides comprehensive
information and screen shots of the configuration and main screens.
Once downloaded, the installation README gives clear instructions
on how to compile X-ISP on a variety of systems.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1286580.0x137e710"></a>How Does it Work?</h2></div></div><p>X-ISP adds two helper modules called by
<span   class="bold"><b>pppd</b></span> (see Figure 1). The first,
xispdial, takes care of the dialing.
<span   class="bold"><b>xispdial</b></span> sits between pppd and
<span   class="bold"><b>chat</b></span> and is used by X-ISP to start
the connection. <span   class="bold"><b>xispdial</b></span> reads an
environment file residing in the user's directory. After getting
the information for the ISP selected, it calls chat to make the
connection. Once connected, control of the modem is turned over to
the second module, xispterm. This terminal program allows the user
to log in to the system manually, or in the case that ip-up/ip-down
scripts exist, xispterm runs those scripts. X-ISP also runs
user-specific scripts, .xisp-up/.xisp-down, which reside in the
user's directory and provide increased versatility.</p><p><a href="2856f1.jpg" target="_self"><span   class="bold"><b>Figure 1. X-ISP
Functional Layout</b></span></a></p><p>A named pipe sends information from pppd, chat, xispdial and
xispterm to the terminal window in X-ISP. The pipe gives immediate
feedback as to system and connection status. The terminal window
provides a clean view into the connection sequence and invaluable
information for tracking down any connection errors.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1286580.0x137ead8"></a>Setup and Connecting</h2></div></div><p>The user interface provides all actions through five buttons,
three pull-down menus and a drop list for selecting which account
to activate. The first step is setting up an account through the
<b  >Options</b> menu.</p><p>First, open the &ldquo;Account Information&rdquo; item. Enter the name
of the account to add, then enter the phone number, user name and
password. You will also need to know which authentication protocol
your ISP uses. (See Figure 2.)</p><p><a href="2856f2.jpg" target="_self"><span   class="bold"><b>Figure 2.
Account Information Setup</b></span></a></p><p>The next item, &ldquo;Dialing and Login&rdquo;, has you set the login
and connect environment. Set the number of retries, connect
notification, ISP callback and login setting. For manual login,
X-ISP will start xispterm, or if you know the sequence, you can put
together an automated login script and send user name, password and
any initialization commands to the remote host. (See Figure 3.)
X-ISP will use the connection script for automatic login or ISP
call-back. For PAP or PAP/CHAP-Secrets authentication, the script
will be ignored.</p><p><a href="2856f3.jpg" target="_self"><span   class="bold"><b>Figure 3.
Dialing and Login Preferences</b></span></a></p><p>&ldquo;Communication Options&rdquo; allows you to control settings for
the modem, baud rate, flow control, initialization and reset
strings.</p><p><a href="2856f4.jpg" target="_self"><span   class="bold"><b>Figure 4.
TCP/IP Options</b></span></a></p><p>The final item, &ldquo;TCP/IP Options&rdquo;, sets up Network
Addressing. The most notable point here is the &ldquo;Support for
ip-up/ip-down&rdquo; scripts. If set to &ldquo;yes&rdquo;, the DNS addressing can
be set for each account, providing great flexibility when
maintaining multiple accounts by dynamically updating the
/etc/resolv.conf file. (See Figure 4.) When using ip-up/ip-down,
X-ISP sends the <span   class="bold"><b>ipparam</b></span> option to
pppd, which passes a string to ip-up/ip-down containing the pipe
name for X-ISP, the description set in Account Information, and if
set, the DNS addresses specified. X-ISP will also display any
information from ip-up/ip-down on the terminal window via the named
pipe.</p><p>The next menu choice is <b  >Logging</b>. If you
are located in Europe, you will get the most advantage of this
feature as the telephone companies (TelCo) listed are applicable
only there. By selecting the appropriate TelCo and zone, X-ISP will
keep track of on-line cost.</p><p>The <b  >Statistics</b> item displays usage data in
a window with a text summary and a bar graph.</p><p>The last item is the <b  >Help</b> menu. Any issues
you come across will probably be addressed in this very thorough
help file. The &ldquo;about&rdquo; screen displays the version number and how
to get in touch with the author.</p><p>Once your account is set up, you are ready to connect. First,
check the following to be sure the rest of the system is in
order:</p><div class="itemizedlist"><ul type="disc"><li><p>Set pppd for all users (i.e., other than just
root):
<pre     class="programlisting">
        chmod u+s /usr/sbin/pppd
</pre>

</p></li><li><p>Check the permissions on all X-ISP modules
(xispdial, xispterm ...) so that group root can execute them (this
should be done by the install script):
<pre     class="programlisting">
        chmod g+x
</pre>

</p></li><li><p>Add any users who will use X-ISP to the dialout or
root group for Debian or Red Hat releases, respectively.</p></li></ul></div><p>Now, to connect, click on the &ldquo;Connect&rdquo; button in the main
window of X-ISP. You should see the connection feedback in the
small terminal window to the right. (See Figure 5.) Once the
connection is established, the status windows will report the
assigned IP address, modem connect status, connection speed and
time since connected. The status is updated every 15 seconds, so if
your connection is dropped, a maximum latency of 15 seconds will
pass before X-ISP recognizes the dead connection and allows you to
reconnect.
</p><p><a href="2856f5.jpg" target="_self"><span   class="bold"><b>Figure 5. Main
Window, Establishing a Connection</b></span></a></p><p>Hopefully, everything now works correctly. If there is a
problem, the terminal window in X-ISP should give you an indication
of where to look.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1286580.0x137f840"></a>Security Issues</h2></div></div><p>As with any program that allows users to connect or
disconnect the system to or from a network, security concerns must
be addressed. The areas of most concern to me are the entering of
account passwords at setup time (not dial-up time) and the
transmission of authentication data.</p><p>X-ISP saves all account information in the .xisprc file in
the user's home directory, including user name and passwords for
the accounts. The rc file is readable only by the owner, so as long
as there has not been a breach of the user's security, there should
be no problem. As a secondary line of defense, X-ISP encrypts the
password in the rc file using encrypt(3). The key used to encrypt
the rc file is scrambled to remove any visibility in the binary.
Since the encryption key resides in the source code, the
possibility exists that someone could come up with the key and
decode a user's rc files. Therefore, it would be best to change the
encryption key in the source code before compiling X-ISP. The
documentation outlines the procedure for changing the encryption
key.</p><p>For PAP authentication, X-ISP calls pppd with the
<b  >+ua</b> option. PPPD version 2.3 no longer supports
the <b  >+ua</b> option, so if you are using that version
of pppd, the PAP authentication mode will not be available. X-ISP
creates a temporary file with login details in the user's home
directory before calling pppd during a connect request, then
removes the file as soon as the connection is established. This
prevents any plaintext files with login details from sticking
around. For PAP/CHAP-Secrets login, the appropriate files must be
edited aside from X-ISP.</p><p>A potential liability may occur since X-ISP requires the user
to be a member of the root group. Two remedies exist: either create
a new group for X-ISP and add appropriate permissions to the
program and data files, or use
<span   class="bold"><b>sudo</b></span>. Creating a new group and
adding users and files to it is probably the most straightforward
way to tighten security on X-ISP. However, by allowing users access
through sudo, the system administrator can allow the use of X-ISP
without creating a new group or adding users to the root group and
still maintain security integrity.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1286580.0x137fb58"></a>What's to come?</h2></div></div><p>This should give you a good start with X-ISP, as well as a
little insight into how it works. In the next release of X-ISP, a
PTT editor will enable users to add entries to the TelCo database.
The PTT information editor envisioned for X-ISP version 2.4 enables
editing of all tariff rules for PTTs known to X-ISP, and also
adding your own PTT information through a versatile GUI interface.
The fields of the editor pop-up window shown in Figure 6 are the
result of analyzing the PTTs currently known to X-ISP (version
2.3p7) plus a handful more which haven't yet made it into the
distribution.</p><p><a href="2856f6.jpg" target="_self">Figure 6. Information Form (under
development, courtesy of Dimitrios P. Bouras).</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="2856aa.jpg"></div>

      <span   class="bold"><b>Chris LeDantec</b></span>
      is a Computer Engineering
      undergraduate at the University of Arizona. Aside from Linux, his
      passions include skiing, the Grateful Dead, philosophy of mind and
      National Parks. He may be reached at
      ledantec@engr.arizona.edu.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../056/toc056.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>