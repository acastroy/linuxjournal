<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Paranoid Penguin</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Debian gives you every security feature you need and more, but using these&#10;tools can be a daunting task.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xfa3580.0x109aab0"></a>
Paranoid Penguin</h1></div><div><h3 class="subtitle"><i>
Security Features in Debian 3.1</i></h3></div><div><div class="author"><h3 class="author">
Mick
 
Bauer
</h3></div><div class="issuemoyr">Issue #145, May 2006</div></div><div><p>
Debian gives you every security feature you need and more, but using these
tools can be a daunting task.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x109b3f8"></a></h2></div></div><p>
Last month, I began a three-part series on distribution-specific security
features, beginning with SUSE Linux 10.0. This month, I continue with
Debian 3.1, and next month I will conclude with Red Hat Enterprise Linux.
</p><p>
As you may recall, unless you missed last month's column or have been
enjoying yourself in memory-impairing ways since then, several things
about SUSE 10.0 really struck me: its wide variety of security-enhancing
software packages and security-scanning tools; its inclusion of several
different virtual machine platforms; and Novell AppArmor, which adds
Mandatory Access Controls (MACs) to individual applications and processes.
</p><p>
When I began exploring security features in Debian 3.1 (Sarge)
GNU/Linux, I was therefore particularly interested to determine how
does Debian 3.1 compare with SUSE 10.0 in those areas? And, what unique security features does Debian bring to the table?
</p><p>
Like SUSE, Debian GNU/Linux is a general-purpose Linux distribution
designed to be useful in a wide variety of desktop and server roles. Also
like SUSE, Debian includes a long and varied bundle of binary
software packages.
</p><p>
Unlike SUSE, Debian is a 100% not-for-profit undertaking. There is no
expensive Enterprise version of Debian 3.1 with more features than the
freeware version. There's only one version of Debian GNU/Linux 3.1,
and it's 100% free&mdash;;unless you purchase Debian CD-ROMs from a Debian
re-packager such as LinuxCentral (see the on-line Resources), in
which case you're paying primarily for the cost of CD-ROM production,
not for Debian itself.
</p><p>
Arguably, there are security ramifications associated with any purely free
software product. Business-oriented IT managers love to ask, &ldquo;Who's
accountable when things go wrong?&rdquo; But others point to Debian's impressive
record of releasing timely security patches as evidence that the Debian
Security Team is at least as dependable and responsive as any equivalent
commercial entity. My own opinion is that its freeness isn't a major factor one
way or the other. Debian doesn't have a reputation for being any more
or less secure than commercial general-purpose Linux distributions.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x109b6b8"></a>
Installing Debian GNU/Linux 3.1</h2></div></div><p>
So, what is the Debian installation experience like, and how does it
encourage good security?
</p><p>
Compared to other major general-purpose Linux distributions, Debian's
installer is decidedly old-school. It uses a bare-bones, text-based GUI
that does little more than install software packages. Although this may be
off-putting to many users, especially those new to Linux, it minimizes
the system resources required to install Debian and the amount
of time you'll spend waiting for the installer to load itself into RAM.
</p><p>
Software package installation, as with any Linux distribution, is
the heart of the Debian installation process, and in Debian 3.1 it's
handled by aptitude. aptitude is similar to its predecessor, dselect,
but with a couple of important differences. The first is that although
it's text-based like dselect, aptitude sports drop-down menus
you can access by pressing the F10 key. The second difference is that, for me at
least, aptitude organizes packages in a much less confusing way than
dselect. It's still primitive compared to the graphical package
installers in SUSE, Red Hat Enterprise Linux and so on (and arguably clunkier
than the text-based Slackware installer); however, aptitude is a significant
improvement over dselect.
</p><p>
With aptitude, it's also easy to update your local package list and get
the latest security patches from the Debian.org site (see Resources). In fact, anytime
you install software using the Advanced Packaging Tool (apt) system
(for example, when you run aptitude or apt-get), Debian automatically
checks for security updates for the packages you're attempting to install.
</p><p>
The bad news about the Debian installer is that it doesn't seem to do very
much to harden your system, even in a preliminary
way. It
doesn't give you an opportunity to create even a basic local firewall
policy or choose a preconfigured or default policy. It doesn't even check
your root and first nonprivileged-user account passwords for complexity
(although it does warn you that passwords <span   class="emphasis"><em>need</em></span> to be complex).
</p><p>
Rather, it appears as though in Debian the emphasis is on providing
users with as wide a variety of security-related software packages as
possible, rather than actually helping users set up any of those packages. Considering that Debian consists of more than 15,000 software packages
in all, you've got many choices indeed.
Table 1 lists some Debian packages that directly enhance system
security.
</p><div class="table"><a name="N0xfa3580.0x109b9d0"></a><p class="title"><b>Table 1. Some Security-Enhancing Packages in Debian 3.1
</b></p><table     summary="Table 1. Some Security-Enhancing Packages in Debian 3.1&#10;" border="1"><colgroup><col><col></colgroup><thead><tr><th>Package Name</th><th>Description</th></tr></thead><tbody><tr><td>aide, fam, tripwire, osiris</td><td>File/system integrity checkers.</td></tr><tr><td>bastille</td><td>Excellent, comprehensive and interactive (yet
scriptable) hardening utility.</td></tr><tr><td>
bochs</td><td>Bochs virtual x86 PC.</td></tr><tr><td>
bozohttpd, dhttpd, thttpd</td><td>Minimally featured, secure Web server daemons.</td></tr><tr><td>
chrootuid, jailer,
jailtool, makejail</td><td>
Utilities for using and creating chroot jails.</td></tr><tr><td>
clamav</td><td>General-purpose virus scanner.</td></tr><tr><td>
cracklib2,
cracklib-runtime </td><td>
Library and utilities to prevent users from choosing easily guessed
passwords.</td></tr><tr><td>
filtergen, fireflier,
firestarter, ferm,
fwbuilder, guarddog,
mason, shorewall</td><td>Tools for generating and managing local firewall policies.</td></tr><tr><td>
flawfinder, pscan,
rats</td><td>
Scripts that parse source code for security vulnerabilities.</td></tr><tr><td>
freeradius,
freeradius-ldap, etc.</td><td>Free radius server, useful for WLANs running WPA.</td></tr><tr><td>
frox, ftp-proxy</td><td>
FTP proxies.</td></tr><tr><td>
gnupg, gnupg2,
gpa, gnupg-agent</td><td>GNU Privacy Guard (gpg), a versatile and ubiquitous e-mail- and
file-encryption utility.</td></tr><tr><td>
harden,
harden-clients,
harden-servers, etc.</td><td>Actually an empty package containing only scripts that install and
un-install <span   class="emphasis"><em>other</em></span> packages so as to improve system
security.</td></tr><tr><td>
ipsec-tools, pipsecd,
openswan,
openswan-modules-source</td><td>Tools for building IPSec-based virtual private networks.</td></tr><tr><td>
libapache-mod-chroot, libapache2-mod-chroot</td><td>
Apache module to run httpd chrooted without requiring a populated chroot
jail.</td></tr><tr><td>
libapache-mod-security, libapache2-mod-security</td><td>Proxies user input and server output for Apache.</td></tr><tr><td>
oftpd, twoftpd, vsftpd</td><td>
Minimally featured, secure FTP server daemons.</td></tr><tr><td>
privoxy</td><td>Privacy-enhancing Web proxy.</td></tr><tr><td>
psad</td><td>Port-scan attack detector.</td></tr><tr><td>
pyca, tinyca</td><td>Certificate authority managers.</td></tr><tr><td>
selinux-utils,
libselinux1</td><td>Utilities and shared libraries for SELinux.</td></tr><tr><td>
slat</td><td>Analyzes information flow in SELinux policies.</td></tr><tr><td>
slapd</td><td>OpenLDAP server daemon.</td></tr><tr><td>
squidguard</td><td>Adds access controls and other security functions to
the popular Squid Web proxy.</td></tr><tr><td>
squidview, srg</td><td>Log analyzers for Squid.</td></tr><tr><td>
syslog-ng</td><td>Next-generation syslog daemon with many more features
than standard syslogd.</td></tr><tr><td>
trustees</td><td>Extends file/directory permissions to allow different
permissions for different (multiple) groups on a
single object.</td></tr><tr><td>
uml-utilities</td><td>User-mode Linux virtual machine engine for Linux
guests.</td></tr></tbody></table></div><p>
In addition to the local security-enhancing packages in Table 1, Debian
includes many tools for analyzing the security of other systems and
networks. Table 2 lists some notable ones.
</p><div class="table"><a name="N0xfa3580.0x10942b0"></a><p class="title"><b>Table 2. Security Audit Tools in Debian 3.1
</b></p><table     summary="Table 2. Security Audit Tools in Debian 3.1&#10;" border="1"><colgroup><col><col></colgroup><thead><tr><th>Package Name</th><th>Description</th></tr></thead><tbody><tr><td>
dsniff, ettercap</td><td>Packet sniffers for switched environments.</td></tr><tr><td>
ethereal, tcpdump</td><td>Excellent packet sniffers.</td></tr><tr><td>
fping</td><td>Flood ping (multiple-target ping).</td></tr><tr><td>
idswakeup</td><td>Attack simulator for testing intrusion detection
systems (IDSes).</td></tr><tr><td>
john</td><td>John the Ripper, a password-cracking tool
(legitimately used for identifying weak passwords).</td></tr><tr><td>
kismet</td><td>Wireless LAN sniffer that supports many wireless cards.</td></tr><tr><td>
nessus, nessusd,
nessus-plugins</td><td>
Nessus general-purpose security scanner.</td></tr><tr><td>
nmap</td><td>Undisputed king of port scanners.</td></tr><tr><td>
snort</td><td>Outstanding packet sniffer, packet logger and
intrusion detection system.</td></tr></tbody></table></div><p>
Sifting through all these packages at installation time
can be daunting. One thing that helps is aptitude's
ability to search for packages by name. Another is
the &ldquo;Securing Debian Manual&rdquo; (see Resources).
</p><p>
Once you've selected and installed your initial set of software packages,
aptitude runs a few post-installation scripts (depending on what
you installed). On my test system, I was disappointed to see very little
in these scripts germane to security&mdash;these deal primarily with basic
system setup, such as network settings. If you need to reconfigure these
basic settings later (without editing files in /etc directly), you can
re-invoke that part of the installer with the base-config command.
</p><p>
In summary, Debian's installation-time security
features are disappointing and sparse. It may not be fair to compare
the purely volunteer-driven Debian effort to a commercial product, but
in my opinion, Debian sorely needs a centralized, security feature-rich
installation and administration utility akin to SUSE's YaST.
</p><p>
Like other major Linux distributions, Debian increases in size and
complexity with each new release. The paradox here is that Debian's
ever-growing, almost unparalleled selection of software packages makes
it more complex, even to the point of confusion&mdash;confusion causes
sloppiness; sloppiness introduces avoidable security holes. A central
administration utility would go a long way to reduce this confusion
and enhance security for Debian neophytes and power users
alike. It would go even further if it included modules for creating
local firewall policies, managing virtual machines, managing SELinux or
Trustees policies and so on.
</p><p>
All ranting aside, I like Debian, and as of this writing, I'm
in the process of migrating my Web server from SUSE to Debian
(though my laptop will remain a SUSE box). It's also worth
mentioning that there are many unofficial Debian installers
available, including other Linux distributions based on Debian
and able to run Debian packages (see Resources).
</p><p>
So, moving on, let's talk about some particularly interesting and useful
groups of security-related packages in Debian GNU/Linux 3.1.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x10950c8"></a>
Virtual Machines in Debian</h2></div></div><p>
If you want a hypervisor-based virtual machine environment, such as Xen for
Debian, you need to obtain and compile source code, though that's not
too huge of a barrier. Debian has no Xen packages. Debian does include,
however, binary packages for two other general-purpose virtual machine
environments: user-mode Linux (UML) and Bochs. (It also includes Wine,
but this is more of a shim for running specific Windows applications
than a virtual machine per se.)
</p><p>
Of Debian's two officially supported virtual machines, user-mode
Linux is probably the most viable option for using virtual hosts to
segregate different application environments, for example, Apache on
one virtual machine and BIND9 on another. This is because of performance
limitations in Bochs: Bochs emulates every single x86 CPU instruction
and all PC devices. Bochs therefore would appear to be more suited to
single guest-system applications, such as running Windows applications
on your Linux desktop system. The Bochs Project home page (see Resources) includes
official documentation and links to mailing lists, discussion boards
and so forth. Debian's bochs-doc package
also contains Bochs documentation.
</p><p>
User-mode Linux doesn't support Windows guest systems, but it is
much faster than Bochs and has the added advantage of running all
guest systems' kernels as nonprivileged users (that is, not as root,
like the underlying &ldquo;host&rdquo; kernel). See Debian's user-mode-linux-doc
package for more information. If you run a Debian guest on
an underlying Debian host, you may need to install the user-mode-linux
package (on the guest) from Debian's unstable release&mdash;the stable
version is unavailable for some reason.
</p><p>
I must add a disclaimer at this point: I've never used UML myself,
being a VMware user of long standing (see my review of VMware Desktop
5.5 on page 56). Therefore, I can't tell you firsthand how
to use UML or even how well it works in Debian.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x10952d8"></a>
Enhanced Access Controls in Debian</h2></div></div><p>
Several packages in Debian GNU/Linux 3.1 enhance local access
controls. The trustees package lets you define multiple sets of
permissions on a single file/directory/device object by associating
a trustee object with it. For example, you can give members of the
users group read-only access to the file foo.txt, and give members of
the foomasters group write privileges to the same file.
</p><p>
A much more comprehensive set of controls is provided by SELinux,
the US National Security Agency's type-enforcement and role-based
access control system for the Linux kernel. SELinux makes it possible
to manage users, groups and system resources with a very high level of
granularity, even to the extent of making it possible to restrict root's
own privileges.
</p><p>
The trade-off is complexity. Creating and managing SELinux policies that
don't impair needed functionality can be involved. Luckily, besides its
standard selinux-utils package, Debian includes checkpolicy, an SELinux
policy compiler, and setools, a group of utilities for analyzing SELinux
policies and managing users.
</p><p>
If SELinux is more than you're willing to tackle, Debian provides several
other tools for delegating root's authority. sudo, of course, is the
classic in this category, but there's also osh, the Operator's Shell.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x10954e8"></a>
Limited-Feature SSH Packages in Debian</h2></div></div><p>
Another interesting category of tools that are well represented in Debian
are limited-feature Secure Shell (SSH) tools. SSH, of course,
is an encrypted, strongly authenticated means of running remote shells,
executing remote commands and even for tunneling other TCP-based network
applications including the X Window System. But what if you want
to offer users only a subset of SSH functionality&mdash;for example, encrypted file
transfers, without giving them shell access?
</p><p>
Two Debian packages that address this problem are rssh, which allows
users to use scp, rdist, rsync, cvs or sftp over SSH without actual shell
access, and scponly, which allows scp without allowing remote shells.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x1095648"></a>
Filesystem Encryption in Debian</h2></div></div><p>
The last category of security tools I highlight here is filesystem
encryption. These are different from more general-purpose encryption
tools, such as gnupg and bcrypt, which are used to encrypt individual
files. Filesystem encryption tools let you encrypt entire volumes
(directory structures), for example, on USB drives and other removable
media.
</p><p>
Three Debian packages that provide filesystem encryption are cryptsetup,
which manages loopback-device encryption via the Linux 2.6 kernel's
dm-crypt functionality; encfs, which doesn't require use of loopback
devices; and lufs-cryptofs, an encryption module for the Linux Userland
Filesystem (lufs). Of the three, cryptsetup offers the best performance,
because it operates at the kernel level. The user-space filesystems,
encfs and lufs, work at a higher layer of abstraction than the
kernel&mdash;that is, they're less efficient. They're also, however, more useful for
networked filesystems.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x10957a8"></a>
Debian's Stability</h2></div></div><p>
I'd be remiss if I didn't at least briefly discuss one of my favorite
characteristics of Debian, and the main reason I'm running it on my
new Web server&mdash;Debian's relatively glacial release schedule. On the
one hand, the delay in releasing Debian 3.1 (three years, or 21
dog/computer years after 3.0) was a bit extreme, and the Debian team
has pledged a more predictable release cycle, probably one year from
now on. But it's also true that stability enhances security.
</p><p>
Put another way, if you use Debian to run the latest desktop applications,
or other things that depend on the very latest hardware drivers, you
may be happier with the Debian variant Ubuntu, which has a predictable
and short (six-month) release cycle. If, however, you want to build
an appliance system that chugs along in a corner, requiring little
ongoing maintenance other than regular security patches, Debian's
longer release cycle is positively luxurious. In many situations,
it's preferable to run somewhat-outdated but fully security-patched
applications than it is to have to upgrade the entire operating system
every six months (or sooner). I admit, however, that I am among the
world's laziest system administrators!
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfa3580.0x13a8ea8"></a>
Conclusion</h2></div></div><p>
Like UNIX itself, Debian provides the security-minded user with
maximal power, flexibility and variety of tools, at the cost of
complexity. Debian GNU/Linux 3.1 is probably not for you if you have
an aversion to man pages or Google. But it's very flexible indeed. This
article scratches only the surface of Debian's potential as a platform
for secure server operations or for security scanning and auditing.
</p><p>
Next month, I'll conclude my &ldquo;Security Features&rdquo; trilogy with Red Hat
Enterprise Linux. Until then, take care!
</p><p><span   class="bold"><b>Resources for this article:</b></span>
<a href="../145/8885.html" target="_self">/article/8885</a>.
</p></div></div>
<div class="authorblurb"><p>
Mick Bauer (<a href="mailto:darth.elmo@wiremonkeys.org">darth.elmo@wiremonkeys.org</a>) is Network
Security
Architect for one of the US's largest banks. He is the author of
the O'Reilly book <span   class="emphasis"><em>Linux Server Security</em></span>, 2nd edition
(formerly called
<span   class="emphasis"><em>Building Secure Servers With Linux</em></span>), an occasional
presenter at
information security conferences and composer of the &ldquo;Network
Engineering Polka&rdquo;.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../145/toc145.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>