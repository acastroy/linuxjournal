<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Sometimes, You Have to Do It Yourself</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    How to set up and use KDE Desktop Sharing and redesktop, the&#10;    remote-control package.&#10;    "><meta name="keywords" content="desktop, KDE, Desktop, Sharing, remote, access, VNC, rdesktop"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1d47580.0x1e3eab0"></a>Sometimes, You Have to Do It Yourself</h1></div><div><div class="author"><h3 class="author">Marcel Gagn&eacute;</h3></div><div class="issuemoyr">Issue #108, April 2003</div></div><div><p>
    How to set up and use KDE Desktop Sharing and redesktop, the
    remote-control package.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1d47580.0x1e3f5b0"></a></h2></div></div><p>Fran&ccedil;ois, make sure that hub is
plugged in. <span   class="emphasis"><em>Merci, mon ami</em></span>. Now watch as I
connect to the terminal in the wine cellar's east wing. You see, I
have full access from up here. I can control the desktop, start
applications, install software and so on. In fact, Fran&ccedil;ois,
if you were down there now, we could both use the desktop. What do
you mean, &ldquo;But what is it good for?&rdquo;
</p><p>Sometimes, Fran&ccedil;ois, there is no control like remote
control. If you could share your Linux desktop with another user or
take control of another user's desktop as needed, you could save a
great deal of time controlling the session or simply observing what
is happening. For instance, let's pretend a certain waiter recently
installed his new Linux system and occasionally needs a little
guidance. <span   class="emphasis"><em>Mais non</em></span>, Fran&ccedil;ois, it is
purely a hypothetical question. Your expertise with the desktop is
well known. Please do not fret.</p><p>Ah, <span   class="emphasis"><em>mes amis</em></span>! Welcome to Chez Marcel,
home of tantalizing Linux fare, great service and fine wine. Please
sit and make yourselves comfortable. Fran&ccedil;ois, why don't you
run down to the cellar? Something Italian today, I think. Bring
back the 1997 Brunello di Montalcino for our guests.</p><p>I was explaining to Fran&ccedil;ois that there are times when
nothing works better than taking control of a remote desktop in
order to do what needs to be done. Perhaps the best incentive is
the office environment. Using desktop sharing, a system
administrator could deal with individual desktop issues without
leaving the comfort (or convenience) of the office. Do you need to
show a user how to add an icon to the desktop? Connect to their
desktops and have them watch. Have you received a call asking for
help interpreting an error message? Connect to the system and ask
the user to recreate the scenario while you watch. The
possibilities are endless.</p><p>An excellent cross-platform remote-control package is VNC
from AT&amp;T Laboratories in Cambridge, England.
The problem with VNC is it doesn't provide any means of controlling
the main X display (<b  >$DISPLAY:0</b>), so taking
control of a user's desktop to fix a problem or to show them how to
do something is out of the question.</p><p>Enter KDE Desktop Sharing from creator Tim Jansen. The
package is scheduled to be part of the standard network offerings
in KDE 3.1, which may be out as we speak. Those running KDE 3.0
also can take advantage of this great package by visiting Tim's
site,
<a href="http://www.tjansen.de/krfb" target="_self">www.tjansen.de/krfb</a>,
and downloading the latest source.</p><p>Building the package is the standard extract and build
five-step with a twist. The twist is the package is stored as a
bzip2 file rather than as a straight gzip file.</p><pre     class="programlisting">
tar -xjvf desktopsharing-0.7.tar.bz2
cd desktopsharing-0.7
./configure --prefix=
make
su -c "make install"
</pre><p>The reason I suggest adding the prefix shown above is KDE
Desktop Sharing becomes a KDE control center module, so letting
your KDE implementation know where the software lives is a good
idea. For instance, I've installed this on Red Hat, Mandrake and
SuSE systems. Red Hat and Mandrake's KDE directories are
subdirectories of /usr, while SuSE's are in /opt/kde3.
</p><p>Before we move on to using the product, let me clear up one
other potential area of confusion. Different distributions
sometimes opt for nonstandard KDE menus, meaning that things aren't
where this little installer expects to find them. A case in point
is the Mandrake 9.0 desktop. Despite the installation having gone
smoothly, the Desktop Sharing configuration option did not appear
in the Control Center menu. The fix is an easy one, once you know
about it. Here is what you do: from the desktopsharing distribution
directory, change to the krfb/kcm_krfb directory and manually
install the desktop entry for the KDE Control Center (the following
is one single command line):</p><pre     class="programlisting">
/usr/bin/install -c -p -m 644 kcmkrfb.desktop
/usr/share/applnk-mdk/Configuration/KDE/Network/
</pre><p>Once again, I stress that when this feature becomes part of
the actual KDE distribution (release 3.1), installation won't be a
problem at all. Now, when you have finished compiling, installing
and tweaking menus, make sure to log out from your KDE desktop
before you continue. While the desktop reboots, why not take a
moment to appreciate the bouquet from this most excellent wine,
<span   class="emphasis"><em>non</em></span>?
</p><p>To configure your client PC for remote access, start by
bringing up the KDE Control Center from your application starter
menus (the big K in the lower left-hand corner). You also can start
the control center by typing <b  >kcontrol &amp;</b> at a
shell prompt. When kcontrol starts, click on the Network icon in
the left-hand sidebar menu and select Desktop Sharing, as shown in
Figure 1. As you can see, two tabbed windows appear on the
right-hand side. One is labeled Access and the other is
Network.</p><p>
<div       class="mediaobject"><a href="6553f1.large.jpg"><img src="6553f1.jpg"></a><div class="caption"><p>Figure 1. Configuring KDE Desktop Sharing from the
Control Center</p></div></div>
</p><p>The Network tab takes the least amount of explanation, so I
will cover it first. Click the tab, and you'll have the opportunity
to override the default to Assign port automatically. KDE Desktop
Sharing's default port is 5900, but unchecking this box here makes
it possible to assign a specific port number.</p><p>On to the Access tab. Invitations are the means by which
access is granted to the desktop, but it also is possible to allow
uninvited connections as well. I suspect, <span   class="emphasis"><em>mes
amis</em></span>, that I do not have to explain the security
implications of this course of action. For this reason, allow me to
tell you how to create and manage invitations.</p><p>For starters, click the button that says Create &amp; Manage
Invitations. The window that pops up offers you two important
choices. You can create either a New Personal Invitation or a New
E-mail Invitation. Let's start with a personal invitation.</p><div       class="mediaobject"><a href="6553f2.large.jpg"><img src="6553f2.jpg"></a><div class="caption"><p>
Figure 2. Creating a Personal Invitation for a KDE Control Session
</p></div></div><p>For security reasons, the invitation itself lasts for only an
hour. If you don't do anything else, Desktop Sharing automagically
comes up with a password and an expiration time for the session.
The host address necessary for the connection also is displayed.
Overriding either the password or the expiration time is not
allowed. Make sure you pass on the information as it is shown to
the person who will be connecting. When you have passed on the
information (or written it down), click Close.</p><p>The other option is an e-mail invitation. The only catch here
is you are sending the means to access your system via e-mail
during that one hour period. If you choose this option, you'll
receive a warning about plain-text e-mail over the Internet and the
<span   class="emphasis"><em>wisdom</em></span> of encrypting said e-mail. Click
Continue to get past the warning and a KMail message appears, ready
for you to click Send. If no one answers the invitation, it
disappears within an hour. Incidentally, you also can manage
invitations with the following command:</p><pre     class="programlisting">
krfb &amp;
</pre><p>Before we move on, click Close to get past all those
invitations, and we'll have another look at the second means of
providing access, uninvited connections. If sending an e-mail
invitation presents interesting security concerns, then a
wide-open, permanent invitation should ring additional bells. That
said, in an office environment it also may be the sanest method of
giving yourself access. If you check on Allow uninvited
connections, you still have to assign a password for connecting.
Furthermore, you have the opportunity to Confirm uninvited
connections before accepting. You also can decide to give those
uninvited connections the ability to control the desktop.
</p><p>To connect to the desktop, you can use any VNC client; but
the slicker way is to install KDE Desktop Sharing on the
controlling desktop also. You'll find the interface friendly and
appealing. To start the client, either select it from the Internet
menu under the big K or call the program directly from the command
line:</p><pre     class="programlisting">
krdc &amp;
</pre><p>After creating an open invitation with a confirm option, a
remote client trying to connect generates a warning message asking
whether you want to allow that connection (Figure 3).
<div       class="mediaobject"><a href="6553f2.large.jpg"><img src="6553f2.jpg"></a><div class="caption"><p>
Figure 3. A Request for Desktop Control
</p></div></div>

</p><p>After accepting the request, the remote user still has to
enter the password, at which point you'll see a nice blue eye
staring at you from the system tray.</p><p>One of the great things about this particular program is you
can resize or scale the virtual desktop to almost any size. Size
your window, then click on the magnifying glass icon. If you would
like a particularly psychedelic experience, set up an invitation on
your own machine and try connecting to it. You'll receive an
endless cascade of desktops, an effect much like standing between
two parallel mirrors facing each other (Figure 4).</p><p>
<div       class="mediaobject"><a href="6553f4.large.jpg"><img src="6553f4.jpg"></a><div class="caption"><p>Figure 4. Fun-House Mirrors, Linux
Style!</p></div></div>
</p><p>Ah, it is very exciting to consider how much closer Linux can
bring us, <span   class="emphasis"><em>non</em></span>? It is true even when dealing
with non-Linux systems. Allow me to demonstrate.</p><p>Another remote-control package worth your consideration is a
little something Matt Chapman has cooked up called rdesktop. Here's
the idea. From time to time, you may have to work on a box running
Windows 2000. If that box requires you to connect using Win2K's
Terminal Server, you no longer need to shut down your Linux system
to do your work.</p><p>Simply put, rdesktop is a GPLed Windows (NT/2000) Terminal
Server client, which means it uses RDP (remote desktop protocol).
If you'd like to use rdesktop and keep running a Linux desktop in
the process, pick up your copy of the source at
<a href="http://www.rdesktop.org" target="_self">www.rdesktop.org</a>.
Build it using the classic extract and build five-step:</p><pre     class="programlisting">
tar -xzvf rdesktop-1.1.0.tar.gz
cd rdesktop-1.1.0
./configure
make
su -c "make install"
</pre><p>The whole process should take no more than a few seconds.
</p><p>When the installation is complete, you can start the program
like this:</p><pre     class="programlisting">
rdesktop -u Administrator -p PaSsWoRd 192.168.22.212
</pre><p>The -u parameter specifies a user account on the Windows
server, while the -p option specifies the password. Have a look at
Figure 5 for a screenshot of my KDE 3.1 desktop running rdesktop to
a remote Windows 2000 server.
</p><p>
<div       class="mediaobject"><a href="6553f5.large.jpg"><img src="6553f5.jpg"></a><div class="caption"><p>Figure 5. Windows Terminal Server Access Using
rdesktop</p></div></div>
</p><p>As you can see, <span   class="emphasis"><em>mes amis</em></span>, with a network
connection and your Linux system, you are never far away. It is
just like being there.</p><p><span   class="emphasis"><em>Mon Dieu</em></span>, has the time passed so
quickly. As I cannot connect to your systems and pour you a glass
of wine, I must attend to it here before Fran&ccedil;ois and I
close the restaurant for the night. Fran&ccedil;ois, would you be
so kind as to refill our guests' glasses a final time? Until next
time, <span   class="emphasis"><em>mes amis</em></span>, let us all drink to one
another's health. <span   class="emphasis"><em>A votre sant&eacute;</em></span>!
<span   class="emphasis"><em>Bon app&eacute;tit</em></span>!</p><p><a href="6553s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p><span   class="bold"><b>Marcel
      Gagn&eacute;</b></span> lives in Mississauga, Ontario. He is the
      author of Linux System Administration: A User's Guide (ISBN
      0-201-71934-7), published by Addison-Wesley (and is currently at
      work on his next book). He can be reached via e-mail at
      <a href="mailto:mggagne@salmar.com">mggagne@salmar.com</a>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../108/toc108.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>