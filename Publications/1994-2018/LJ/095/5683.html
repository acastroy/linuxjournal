<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Film GIMP at Rhythm &amp; Hues</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Robin introduces Film GIMP, an open-source Linux tool being&#10;    used in major motion pictures.&#10;    "><meta name="keywords" content="film, GIMP, graphics"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1c80580.0x1d77ab0"></a>Film GIMP at Rhythm &amp; Hues</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #95, March 2002</div></div><div><p>
    Robin introduces Film GIMP, an open-source Linux tool being
    used in major motion pictures.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d78608"></a></h2></div></div><p>The GIMP probably leads any list of
killer applications for Linux. This Photoshop-like graphics package
is very popular for retouching still images. However, fewer people
are aware of its motion picture cousin called Film GIMP, intended
for working on a series of images.
</p><p>Linux is now being adopted in motion picture production at
DreamWorks, Pixar, ILM and many other major studios. Most of this
Linux effort involves commercial tools such as the popular 3-D
animation package Maya (see the article &ldquo;Alias|Wavefront Maya 4&rdquo;
in the October 2001 issue of <i  >Linux Journal</i>) or
obscure internal tools representing an investment of millions of
lines of code created by the studios themselves (see &ldquo;DreamWorks
Features Linux and Animation&rdquo;, August 2001 <i  >Linux Journal</i>). Today there is just one significant
open-source Linux tool being used in major motion pictures. Let's
take a look at Film GIMP and its use at Los Angeles film and
television commercial postproduction studio Rhythm &amp;
Hues.</p><p>R&amp;H programmer Caroline Dahll&ouml;f is a lead developer
and maintainer of Film GIMP. &ldquo;We use Film GIMP on all talking
animal jobs&rdquo;, says Dahll&ouml;f. &ldquo;Film GIMP is in use in
production by various studios but probably is used most by R&amp;H.
Other studios say that they think GIMP is a great idea, but we seem
to be the only production house currently developing and supporting
it.&rdquo; Dahll&ouml;f would like to see other studios become more
involved in development. At R&amp;H, Film GIMP has been used in
<span   class="emphasis"><em>Harry Potter</em></span>, <span   class="emphasis"><em>Cats &amp;
Dogs</em></span>, <span   class="emphasis"><em>Dr. Dolittle 2</em></span>,
<span   class="emphasis"><em>Little Nicky</em></span>, <span   class="emphasis"><em>How the Grinch Stole
Christmas</em></span>, <span   class="emphasis"><em>The 6th Day</em></span>,
<span   class="emphasis"><em>Stuart Little</em></span> and <span   class="emphasis"><em>Planet of the
Apes</em></span>. R&amp;H also creates commercials, such as the
familiar Coca-Cola bear commercial. Dahll&ouml;f says:</p><div class="blockquote"><blockquote class="blockquote"><p>Our big thing is talking animals. We'll create
those in 3-D because we like the look much better than 2-D
morphing. We'll make a 3-D model and track it to the plate,
matching the movement of the live animal with a CG animal head.
Then the lighting department projects the frame on to 3-D model.
The 2-D department fixes missing background parts as the animal
talks.</p></blockquote></div><p>Stretching has to be fixed with textures. The mouth interior
is all CG. Some projects, such as the Coke commercial, are all CG.
That's a different technique than making live-action animals talk.
</p><p>As is typical with production studios, R&amp;H uses not just
one tool but a pipeline of tools for 3-D animation and live-action
special effects. Before looking at Film GIMP, let's examine some of
the proprietary tools in the production pipeline that Film GIMP
must seamlessly interact with.</p><p>
<div       class="mediaobject"><a href="5683f1.large.jpg"><img src="5683f1.jpg"></a><div class="caption"><p>Film GIMP Screenshot&mdash;Working on </p></div></div>
</p><p>
<div       class="mediaobject"><a href="5683f2.large.jpg"><img src="5683f2.jpg"></a><div class="caption"><p>Film GIMP Screenshot&mdash;Visa
Commercial</p></div></div>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d790b0"></a>3-D Modeling with And</h2></div></div><p>For 3-D modeling, R&amp;H uses an in-house modeling tool
called And and Maya. Modeler/TD Yeen-shi Chen explains:</p><div class="blockquote"><blockquote class="blockquote"><p>For a TV commercial I am creating a model of a
cat wearing a wet suit. The cat model was retrieved from our model
library and modified to match the cat in the commercial. The wet
suit and diving gear are added later. The entire model was built in
And. I create the model in a neutral pose because that makes it
easier for the setup people to put a skeleton in it.</p></blockquote></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d79268"></a>Compositing with ICY</h2></div></div><p>Technical Director Jeff McLean explains how R&amp;H uses IC
(Interactive Compositing), their internally developed compositor:
&ldquo;A typical task is removing the arms of a skateboarder from a
scene in <span   class="emphasis"><em>Scooby Doo</em></span> to be replaced by Scooby
in a barrel.&rdquo; (<span   class="emphasis"><em>Scooby Doo</em></span> is due for release
June, 2002.) When McLean replaces a live actor with an animated
figure like Scooby, he must not just cover up the actor but handle
situations where the actor's movements extend beyond what the
animated figure will cover. &ldquo;I have to do a background replace and
repair the missing pieces of the background when I remove an object
from a scene&rdquo;, says McLean.</p><p>
<div       class="mediaobject"><a href="5683f3.large.jpg"><img src="5683f3.jpg"></a><div class="caption"><p>ICY Screenshot&mdash;Canon Commercial</p></div></div>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d79630"></a>Lighting with Voodoo</h2></div></div><p>Lighting TD Greg Yepes uses internally created lighting tool
Voodoo on projects such as <span   class="emphasis"><em>Harry Potter</em></span> or
Canon printer commercials. &ldquo;When setting up lighting for 3-D
objects composited into a scene I'll initially set my virtual
lights to an extreme value so I easily can see what I'm doing&rdquo;,
says Yepes. &ldquo;Later it will go into Wren with more subdued
values.&rdquo; Similar to RenderMan, the Wren software is their internal
rendering engine ported to Linux a year ago. &ldquo;All the apps have
gotten ported faster than we had thought&rdquo;, says Yepes. &ldquo;I started
with DEC Alphas on <span   class="emphasis"><em>Cats &amp; Dogs</em></span>, then the
Intel PCs came on-line and really saved us.&rdquo;</p><p>
<div       class="mediaobject"><a href="5683f4.large.jpg"><img src="5683f4.jpg"></a><div class="caption"><p>Voodoo Screenshot&mdash;Canon Commercial</p></div></div>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d799f8"></a>Voodoo Screenshot&mdash;Canon Commercial</h2></div></div><p></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x1d79b00"></a>Using Film GIMP</h2></div></div><p>Film GIMP replaced an internally developed paint tool called
Inc. &ldquo;We like to use Film GIMP to dust-bust&rdquo;, says Dahll&ouml;f.
&ldquo;There might be dust or a piece of hair on the plate either from
scanning or from the negative. Normally one will clone/merge from
the previous frame or from the same frame to remove the dust.&rdquo;
Film GIMP also is used for rig and wire removal, for example on
<span   class="emphasis"><em>How the Grinch Stole Christmas</em></span>. Lighters may
use Film GIMP to edit fur control files. &ldquo;These control files are
used by our internal fur program, Fur. Lighters also use GIMP to
paint textures and make paint fixes to frames&rdquo;, says
Dahll&ouml;f.</p><p>&ldquo;As the studio moves to Linux, more and more people will use
Film GIMP on Linux&rdquo;, says Dahll&ouml;f. Because she is evaluating
SGI-based commercial paint programs, Matador and Illusion,
Dahll&ouml;f usually works with Film GIMP running on SGI, not
Linux. &ldquo;I'm looking to see what features I need to add to Film
GIMP to make it an equal tool. We need a good paint tool for Linux
that our 2-D department can use. We have not found a satisfactory
commercial solution.&rdquo;</p><p>&ldquo;GIMP didn't support any sequence work, which is important
for a 2-D artist&rdquo;, says Dahll&ouml;f. &ldquo;A lot of their work is
cloning from one frame to the next in a sequence. So, we added a
frame manager.&rdquo; R&amp;H uses its own proprietary RLL file format.
&ldquo;A major feature of Film GIMP is 16-bit per channel color, and it
is compatible with our file format. We do not get any of the color
loss when using Film GIMP that we can get with other 16-bit paint
packages.&rdquo;</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x2171f60"></a>Downloading and Building Film GIMP</h2></div></div><p>To get Film GIMP we had to check it out of anonymous CVS.
There is no tarball, RPM or deb. You must build it from source. The
Film GIMP branch is named HOLLYWOOD:</p><pre     class="programlisting">
cvs -z3 -d:pserver:anonymous@gap:/cvs/gnome checkout
-r HOLLYWOOD gimp
</pre><p>We had configured our firewall PC named gap to have its port
2401 point to the server
<a href="http://anoncvs.gimp.org" target="_self">anoncvs.gimp.org</a>. If
we weren't behind a firewall, we would have specified that server
directly in the cvs checkout command rather than our proxy.
</p><p>After the 18MB download from CVS completed we had to make
some minor corrections in order to build. In
gimp/plug-ins/Makefile.am we had to delete rll, pts, fm_pts and
parsley from the list of directories included in the SUBDIRS
variable there. These plugins will not build in Film GIMP and would
cause the build to fail.</p><pre     class="programlisting">
cd gimp
libtoolize --force
aclocal
automake
autoconf
./configure -prefix=/usr/local
make
./app/gimp
</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x2172220"></a>The Linux Conversion at R&amp;H</h2></div></div><p>Technology VP Mark Brown says, &ldquo;We have 50 Linux machines as
desktops now and will have 250 Linux desktops by the end of 2002.
We also have a 200-node Linux renderfarm, but that expands or
contracts with demand.&rdquo; R&amp;H wrote their our own virtualized
filesystem to support PTS, their production tracking system.
R&amp;H uses the ext2 filesystem.</p><p>&ldquo;We decided against actually building our own boxes and have
ordered 100 Dual processor 1.5GHz AMD machines with Angstrom
Microsystems&rdquo;, says Brown. &ldquo;This was the most cost-effective move
at this time. All our current desktops are dual PIII. We will
support a completely heterogeneous environment. Video cards and
CPUs are two of the things we know we can't keep completely
consistent at the desktop.&rdquo;</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x2172380"></a>History of the Development of Film GIMP</h2></div></div><p>Film GIMP came about thanks to the patronage of R&amp;H and
software development company Silicon Grail. Each hired an OSS GIMP
programmer for a year: GEGL designer Calvin Williamson at R&amp;H
and GIMP maintainer Manish Singh at Silicon Grail. Silicon Grail
founder Ray Feeney explains, &ldquo;We had done some other open-source
projects, such as film recorder drivers, and saw enhancing GIMP as
an opportunity to do something with the Open Source
community.&rdquo;</p><p>Silicon Grail RAYZ product manager Craig Zerouni says, &ldquo;We
did a little work integrating GIMP into our compositor Chalice as a
plugin. But in the end we decided a nonprocedural paint program
didn't fit well into a procedural program like Chalice.&rdquo; Silicon
Grail was working with GIMP script-fu to create a series of Film
GIMP commands that could be saved in Chalice. However, that work
was abandoned when Silicon Grail developers switched to begin
development on their new compositor product, RAYZ.</p><p>Zerouni feels a true procedural language is needed in the
paint program, something like the language in RenderMan. Silicon
Grail has lately acquired the Cineon source code from Kodak,
including the program Retoucher. &ldquo;Film GIMP was a useful thing for
us to do&rdquo;, says Zerouni. &ldquo;We learned a lot about what paint
should be.&rdquo;</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x2172538"></a>GEGL and the Future of Film GIMP</h2></div></div><p>GEGL, the GIMP E Graphical Library, is an image-processing
library based on GObjects. GEGL developer Calvin Williamson helped
develop Film GIMP originally while at R&amp;H, together with Ray
Lehtiniemi from Silicon Grail. The next version of GIMP will be
1.4, but Film GIMP continues in development on a branch of 1.0.4.
GEGL, whose design supports 16-bit channels, is due to integrate
with GIMP 2.0, perhaps two years away. GIMP 2.0 is anticipated to
bring the pro features of Film GIMP into mainstream GIMP.</p><p>Williamson says his current plan is to write a baby
compositor for GEGL to test memory management for large images,
multithreading, large composite trees and other heavy-duty
professional requirements:</p><div class="blockquote"><blockquote class="blockquote"><p>The classes that do image and memory management
have been split from the actual image-processing classes. This
allows one to write image managers that traverse the graph of ops
in custom ways, or write custom caching or memory managers for
handling memory management. The classes that hold information about
ops as part of graphs, with inputs, outputs, regions of interest
(all extrinsic op info), have been separated from image-processing
classes (intrinsic op info) as well. This makes graph traversals
cleaner for things like multithreading.</p></blockquote></div><p>&ldquo;GEGL is still in a very early phase and many classes are
under construction&rdquo;, says Williamson. &ldquo;There is no official
release yet, but you can download it from anonymous CVS. I have
made quite a few architecture changes recently.&rdquo; GEGL is a fully
16-bit image engine for future GIMP and other projects.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1c80580.0x21727a0"></a>Conclusion</h2></div></div><p>Both GEGL and Film GIMP seek volunteers to help with
programming. Williamson says PDI, ILM, ICT and Sony studios have
expressed interest, but so far have not provided programmers.
Williamson welcomes programmers interested in writing image
operators, memory management code and working on multithreading to
join the GEGL Project. &ldquo;Filling out the library and writing image
operators takes time&rdquo;, notes Williamson. &ldquo;GEGL is an important
part of the future for GIMP.&rdquo; For programmers who find the GEGL
timeline too far away, Williamson suggests helping with enhancing
Film GIMP for the next year or so.</p><p>Film GIMP maintainer Dahll&ouml;f says, &ldquo;We want to enhance
Film GIMP by adding more tools for artists working on a sequence of
frames. We want to make it easier for them to paint and clone from
one frame to another one.&rdquo; R&amp;H uses a proprietary flipbook
player called Flicks. A feature missing from Film GIMP is a
flipbook playback mode so users can detect flickering. &ldquo;Artists do
use filters, but some of the filters in the main branch of Film
GIMP are not useful in motion pictures. Artists want more control
over filters.&rdquo;</p><p>On the topic of open-source software, R&amp;H principal
software engineer Green says:</p><div class="blockquote"><blockquote class="blockquote"><p>It's a big debate about releasing more of our
proprietary software as open source, beyond Film GIMP. Most of our
software would be difficult to use outside this building. It is
tied to our production tracking system, PTS. Nothing will run
without that.</p></blockquote></div><p>Green says the biggest pro argument is to save on the high
cost of training. New hires at R&amp;H spend their first month just
doing training. Having a pool of talent emerging from the
universities already trained in R&amp;H tools would help.
</p><p><a href="5683s1.html" target="_self">Resources</a></p><p><a href="5683s2.html" target="_self">Trademark Information</a></p></div></div>
<div class="authorblurb"><p>
       email: <a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>
       </p><p><span   class="bold"><b>Robin
      Rowe</b></span>
      (<a href="mailto:robin.rowe@movieeditor.com">robin.rowe@movieeditor.com</a>)
      is a partner in MovieEditor.com, a technology company that creates
      internet and broadcast video applications. He has written for
      <span   class="emphasis"><em>Dr. Dobb's Journal</em></span>, the <span   class="emphasis"><em>C++ Report</em></span>, the
      <span   class="emphasis"><em>C/C++ Users Journal</em></span> and <span   class="emphasis"><em>Data Based
      Advisor</em></span>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../095/toc095.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>