<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
  <title>Monitoring Your UPS With apcupsd</title>
<link rel="stylesheet" href="../../css/archive.css" type="text/css" />
</head>

<body>
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <h4>Listing 4.</h4>
  <pre>
## apcupsd.conf v1.1 ##
#
# ========= General configuration parameters ============
#
# defines the type of cable that you have.
UPSCABLE smart
#
# defines the type of UPS you have.
UPSTYPE smartups
#
# name of your serial port
DEVICE /dev/ttyS0
#
# path for serial port lock file
LOCKFILE /var/lock
#
# ======== configuration parameters used during power failures ==========
#
# If during a power failure, the remaining battery percentage
# (as reported by the UPS) is below or equal to BATTERYLEVEL,
# apcupsd will initiate a system shutdown.
BATTERYLEVEL 5
#
#
# If during a power failure, the remaining runtime in minutes
# (as calculated internally by the UPS) is below or equal to MINUTES,
# apcupsd, will initiate a system shutdown.
MINUTES 3
#
#
# If during a power failure, the UPS has run on batteries for TIMEOUT
# many seconds or longer, apcupsd will initiate a system shutdown.
# A value of 0 disables this timer.
TIMEOUT 0
#
#
# Time in seconds between annoying users to signoff prior to
# system shutdown. 0 disables.
ANNOY 300
#
# Initial delay after power failure before warning users to get
# off the system.
ANNOYDELAY 60
#
# The condition which determines when users are prevented from
# logging in during a power failure.
NOLOGON disable
#
# ==== Configuration statements the network information server =========
#
# information server. If netstatus is on, a network information
# server process will be started for serving the STATUS and
# EVENT data over the network (used by CGI programs).
NETSERVER on
#
# port to use for sending STATUS and EVENTS data over
# the network.
# It is not used unless NETSERVER is on. If you change this port,
# you will need to change the corresponding value in the cgi directory
# and rebuild the cgi programs.
SERVERPORT 7000
#
# If you want the last few EVENTS to be available over the network
# by the network information server, you must define an EVENTSFILE.
# Only the last 50 or so events are kept.
EVENTSFILE /etc/apcupsd/apcupsd.events
#
# ===== Configuration statements to control apcupsd system logging ========
#
# Time interval in seconds between writing the STATUS file; 0 disables
STATTIME 60
#
# Location of STATUS file (written to only if STATTIME is non-zero)
STATFILE /etc/apcupsd/apcupsd.status
#
# You probably do not want this on.
LOGSTATS off
#
# Time interval in seconds between writing the DATA records to
# the log file. 0 disables.
DATATIME 0
#
# ========== Configuration statements used if sharing =============
#            a UPS and controlling it via the network
#
# normally standalone unless you share a UPS with multiple machines.
UPSCLASS netslave
#
# Unless you want to share the UPS (power multiple machines).
# this should be disable
UPSMODE net
#
#NETACCESS &lt;string&gt; [ true | false ] Enable Network Access Support
NETACCESS true
#
# NETTIME &lt;int&gt;
NETTIME 60
#
# NETPORT &lt;int&gt;
NETPORT 6666
#
# MASTER &lt;string&gt;
MASTER my.network.master.com
#
# USERMAGIC &lt;string&gt;
USERMAGIC some_unique_string
</pre>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../080/toc080.html">Issue Table of Contents</a>
    <a class="link3" href="../080/4347.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body>
</html>
<!--
## vim: tabstop=2: shiftwidth=2: expandtab:
## kate: tab-width 2; indent-width 2; replace-tabs true;
-->
