<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
At the Forge</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Scriptaculous is a spectaculous set of libraries for Ajax.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x259b580.0x2692ab0"></a>
At the Forge</h1></div><div><h3 class="subtitle"><i>
Scriptaculous</i></h3></div><div><div class="author"><h3 class="author">
Reuven
 M. 
Lerner
</h3></div><div class="issuemoyr">Issue #154, February 2007</div></div><div><p>
Scriptaculous is a spectaculous set of libraries for Ajax.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2693348"></a></h2></div></div><p>
Ajax is the hot new Web development paradigm that uses JavaScript to send
and then handle asynchronous HTTP requests.  The past few months,
this column has looked into different ways to spawn and handle Ajax
calls.  The most complicated way was to do it ourselves, creating an
XMLHttpRequest object, and then using it to send a request to the
user's browser as well as to specify which JavaScript function will
handle the response.  Last month, we showed that we can simplify our
lives greatly by using Prototype, a JavaScript library that includes
many of the shortcuts and utility functions that are of use to JavaScript
programmers.
</p><p>
The good news is that Prototype does indeed make JavaScript
programming easier and more straightforward.  But, one of the things
people most want to do with JavaScript is create more flexible
GUIs.  This is especially true now that Web applications are becoming
more desktop-like; users expect to have the same sense of feedback and
control that they have with their nonbrowser applications.
</p><p>
Just as we saw with Ajax, there are ways to create and re-use these
behaviors on your own.  But why would you do that, when there are
libraries that handle such tasks for you? Several of these are
Scriptaculous, MoochiKit and Dojo.  (Dojo is actually a complete
top-to-bottom JavaScript library; I expect to look at it in a future
installment of this column.)  This month, we look at
Scriptaculous, an open-source library written by Thomas Fuchs.
Scriptaculous makes it easy to spruce up our HTML
files without having to delve into the low-level JavaScript.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2693500"></a>
Basics of Scriptaculous</h2></div></div><p>
Installing Scriptaculous couldn't be easier.  Download the latest
version of Scriptaculous (<a href="http://script.aculo.us" target="_self">script.aculo.us</a>), and
install the six included JavaScript files (in the src directory)
somewhere in your Web server's document root.
</p><p>
Actually, installing Scriptaculous could be even easier than this.  If you
use a recent version of Ruby on Rails, Scriptaculous and
Prototype are already installed.  See the Rails documentation for a
description of how to use these libraries directly, as well as from
Ruby code.
</p><p>
Note that Scriptaculous 1.6.5, which I use in this article, requires
Prototype 1.5 or above.  Although Prototype 1.5 likely will be released
by the time this column sees print, I currently am relying on
Prototype 1.5 RC1.  Thus, there might be some differences between the
functionality I describe here and the final distribution.
</p><p>
In order to use Scriptaculous, you need to include two
script tags in your HTML page to load Prototype and then
Scriptaculous:</p><pre     class="programlisting">&lt;script src="/javascripts/prototype.js"
type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="/javascripts/scriptaculous.js"
type="text/javascript"&gt;&lt;/script&gt;</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x26937c0"></a>
Simple Effects</h2></div></div><p>
So, what might you want to do with Scriptaculous? One of its most
common uses is in the creation of visual effects.  Each effect is
defined as a method within the Effect object.  You can create an
effect by saying:</p><pre     class="programlisting">new Effect.EffectName('id')</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2693920"></a></h2></div></div><p>
where EffectName is the name of the effect that you want, and id
is the ID of the HTML element on which the effect will take place.
For example, if we have the following headline:</p><pre     class="programlisting">&lt;h2 id="headline"&gt;The headline&lt;/h2&gt;</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2693a80"></a></h2></div></div><p>
we can make it fade by invoking:</p><pre     class="programlisting">new Effect.Fade('headline');</pre><p>
Of course, it makes sense for such things to happen only when
particular events occur.  Listing 1 contains a simple HTML file,
effects.html, with two buttons labeled appear headline and
fade headline.  Clicking on the first button invokes Effect.Appear
on the node with an ID of headline.  Note that we don't pass the
node itself to Effect.Fade, but rather the ID.  Effect.Fade uses
Prototype's $() function to retrieve the node with that ID.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2693c38"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 1. effects.html</b></p><pre     class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;

  &lt;head&gt;&lt;title&gt;Special effects&lt;/title&gt;

    &lt;script src="/javascripts/prototype.js"
type="text/javascript"&gt;&lt;/script&gt;
    &lt;script src="/javascripts/scriptaculous.js"
type="text/javascript"&gt;&lt;/script&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;h2 id="headline"&gt;Welcome&lt;/h2&gt;
    &lt;p&gt;Welcome to the page of effects!&lt;/p&gt;
    &lt;p&gt;&lt;input type="button" value="Fade headline" onclick="new
Effect.Fade('headline')" /&gt;&lt;/p&gt;
    &lt;p&gt;&lt;input type="button" value="Appear headline" onclick="new
Effect.Appear('headline')" /&gt;&lt;/p&gt;

  &lt;/body&gt;
&lt;/html&gt;</pre></div><p>
To make the headline fade, we set the following event handler:</p><pre     class="programlisting">onclick="new Effect.Fade('headline')"</pre><p>
Each of the effects has a number of settings, each of which is given a
default value by Scriptaculous.  To override one or more of these
defaults, pass one or more of them in the invocation:</p><pre     class="programlisting">onclick="new Effect.Fade('headline', {delay: 2, duration: 10})"</pre><p>
In some cases, such as the appear/fade duo in Listing 1,
it seems a bit silly to have two buttons.  After all, what
happens if I click on fade twice? It would be more reasonable to have a single button that turns the headline on when it's
off and vice versa. Scriptaculous supports this with the toggle
effect.  For example, we can remove one button and give the second
one an event handler that looks like this:</p><pre     class="programlisting">onclick="new Effect.toggle('headline', 'appear')"</pre><p>
Now, clicking on that button toggles the visibility of the headline,
using appear and fade to turn the headline on and off.  We can do the
same thing with the blind (BlindUp and BlindDown) and slide
(SlideUp and SlideDown) effects as well.  We also can combine a
toggle with the parameters shown earlier:</p><pre     class="programlisting">onclick="new Effect.toggle('headline', 'appear',
{delay: 2, duration: 10})"</pre><p>
Only a few effects come in pairs.  Several are useful only for
removing text, as in the following:</p><pre     class="programlisting">new Effect.Fold("headline")</pre><p>
Others are made to get the user's attention.  For example, we can
highlight our headline by doing this:</p><pre     class="programlisting">new Effect.Highlight("headline")</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2694210"></a>
Autocomplete</h2></div></div><p>
Effects are certainly an important and impressive part of
Scriptaculous; the library comes with many effects, and there are
numerous ways to combine and invoke them.  However, Scriptaculous
offers much more than merely a bunch of effects.  It also includes some
user-level functionality JavaScript programmers might want.
</p><p>
One such example, popularized by Google Suggest (and its cousin in
Firefox 2.0) is an autocompleting text field.  Such a text field
lets you enter whatever contents you want, but if what you have
entered so far matches a known text string, you are offered the chance
to complete it.  This is similar in many ways to the combo box
widget that was long popular on Windows systems, but which was
unavailable to Web applications.  (Some Scriptaculous users have
created derivatives of the Autocompleter class that is more similar to
a combo box.)
</p><p>
Scriptaculous comes with two different types of autocompleting text
fields, differing only in how the completion list is filled.  In the
first case, known as Autocompleter.Local, the list of matches is set
in JavaScript.  The related text field, Ajax.Autocompleter, uses Ajax
to retrieve a list of matches from a remote HTTP server.  The two are
similar enough in spirit that I demonstrate only Autocompleter.Local
here for the sake of simplicity.
</p><p>
In order to use Autocompleter.Local, we first create a text field,
just as we would do in an HTML form:</p><pre     class="programlisting">&lt;input type="text" id="distro" name="distro_text_field"
   autocomplete="off" /&gt;</pre><p>
Notice that I have included the setting
<tt  >autocomplete="off"</tt> in the
above field.  The autocomplete attribute, which is used only by
Microsoft's Internet Explorer, is set here to off to ensure
that IE users aren't unpleasantly surprised by dueling completion
systems.
</p><p>
Next, we create a &lt;div&gt; section with an ID attribute.  In addition, we
set the style attribute to keep the div hidden until we modify its
styling:
</p><pre     class="programlisting">&lt;div id="distro_complete" style="display:none"&gt;&lt;/div&gt;</pre><p>
Finally, we add some JavaScript that creates a new
Autocompleter.Local object:</p><pre     class="programlisting">&lt;script type="text/javascript"&gt;
    new Autocompleter.Local('distro', 'distro_complete',
    ['Red Hat', 'Fedora Core', 'Debian', 'Gentoo', 'Knoppix',
     'Ubuntu', 'Kubuntu'], { });
&lt;/script&gt;</pre><p>
The constructor for Autocompleter.Local takes four arguments: the ID
of the text field, the ID of the div into which we'll insert
completions, an array containing the completion strings and a set of
options (currently empty).  If you try to put this code in the &lt;head&gt;
of your document, it will fail with odd errors, because the text
field and div must exist before the code is executed.
</p><p>
By including the above in an HTML page (as in Listing 2), you set the
stage for autocompletion to work.  Whenever the user loads the page
and types a letter into the text field, Scriptaculous waits for 0.4
seconds of inactivity.  If the user isn't typing, and if the text
field already contains one or more characters,
Autocompleter.Local tries to find a match from the current list.  If
it finds one, it fills in the rest of the text field.

</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2694738"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 2. complete.html</b></p><pre     class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;

  &lt;head&gt;&lt;title&gt;Special effects&lt;/title&gt;

    &lt;script src="/javascripts/prototype.js"
type="text/javascript"&gt;&lt;/script&gt;
    &lt;script src="/javascripts/scriptaculous.js"
type="text/javascript"&gt;&lt;/script&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;h2&gt;Enter your favorite distribution&lt;/h2&gt;
    &lt;p&gt;&lt;input type="text" id="distro" name="distro_text_field"
autocomplete="off" /&gt;&lt;/p&gt;
    &lt;div class="auto_complete" id="distro_complete"
style="display:none"&gt;&lt;/div&gt;

    &lt;script type="text/javascript"&gt;
        new Autocompleter.Local('distro', 'distro_complete', ['Red Hat',
'Fedora Core', 'Debian', 'Gentoo', 'Knoppix', 'Ubuntu', 'Kubuntu'], { });
    &lt;/script&gt;

  &lt;/body&gt;
&lt;/html&gt;</pre></div><p>
If it finds more than one (as would happen to a user typing K in our
example, which matches both Kubuntu and Knoppix), the system
displays a menu of options, from which the user may choose by typing
or clicking.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x259b580.0x2694948"></a>
Conclusion</h2></div></div><p>
Protoype is a library aimed at the JavaScript that endeavors to solve many
programmers' needs.  However, Prototype's functionality extends
only so far as the programmer; it doesn't offer any direct GUI
improvements.  Given that JavaScript is largely used to handle the GUI
in a Web application, it shouldn't come as a surprise that there are
several libraries built on top of Prototype to handle such tasks.
Scriptaculous appears to be one of the best known of these, and in my
experience, there's good reason for that.
</p><p>
There are several functions of Scriptaculous that we didn't get to
explore this month, including drag and drop and JavaScript unit
testing.  This last item is probably of note even for JavaScript
programmers who have no intention of creating GUI effects.
</p><p><span   class="bold"><b>Resources for this article:</b></span> <a href="../154/9505.html" target="_self">/article/9505</a>.
</p></div></div>
<div class="authorblurb"><p>
Reuven M. Lerner, a longtime Web/database consultant, is a PhD
candidate in Learning Sciences at Northwestern University in Evanston,
Illinois.  He currently lives with his wife and three children in Skokie,
Illinois.  You can read his Weblog at
<a href="http://altneuland.lerner.co.il" target="_self">altneuland.lerner.co.il</a>.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../154/toc154.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>