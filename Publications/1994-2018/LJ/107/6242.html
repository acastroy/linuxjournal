<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Getting Started with Emacs</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Emacs is the text editor with everything. Learn the&#10;    basics&mdash;maybe you'll even want to keep your calendar on it.&#10;    "><meta name="keywords" content="Emacs"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xefe580.0xff5ab0"></a>Getting Started with Emacs</h1></div><div><div class="author"><h3 class="author">Charles Curley</h3></div><div class="issuemoyr">Issue #107, March 2003</div></div><div><p>
    Emacs is the text editor with everything. Learn the
    basics&mdash;maybe you'll even want to keep your calendar on it.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0xff63f8"></a></h2></div></div><p>This article is a whirlwind introduction
to Emacs that assumes you have Emacs installed and running (easy
enough on most Linux distributions). It also assumes that you have
used Emacs' built-in tutorial. Program development in Emacs is not
the topic, as that was covered in my June 2002
<i  >LJ</i> article &ldquo;Emacs: the Free Software IDE&rdquo;
[available at
<a href="../098/5765.html" target="_self">www.linuxjournal.com/article/5765</a>].
</p><p>To launch Emacs from an xterm, enter <b  >emacs
&amp;</b>. The ampersand puts Emacs into the background. As X
provides the display for Emacs, this setup is fine.</p><p>You also can run Emacs in a console by entering
<b  >emacs</b> without the ampersand. To run Emacs in an
xterm without opening a new window, launch it with <b  >emacs
-nw</b>. These console and xterm modes are great for
situations where you don't have X, such as an SSH connection to a
remote server. But if you have SSH set up to forward X, you can run
Emacs (and other X applications) remotely.</p><p>If you haven't taken the Emacs tutorial, now is the time to
do it. Pressing Ctrl-H then T gets you to it. The tutorial is
ancient as computers go (1985), so it ignores cursor keys and other
modern conveniences. Emacs supports these features but the tutorial
doesn't take them into account. It's a good idea to be aware of, if
not learn, some of the Emacs keystrokes, though. You can set bash
and many other GNU programs to use them. So, for example, Ctrl-B
and Ctrl-N can do exactly the same things in Emacs as they do in
bash. In fact, Emacs-style key bindings are the default in
bash.</p><p>The tutorial should teach you basic cursor movement, how to
abort an Emacs command, Emacs windowing, the relationship between
buffers and files and so on. Probably the most important thing to
remember from the tutorial is the movement keys are usually a given
key (F for forward) with different modifiers for different ranges.
For example, Ctrl-F moves one character forward, and M-F moves a
word forward (M- is Emacs notation for Meta, which on most
keyboards means the Alt key).</p><p>Emacs existed long before web browsers, so it uses the term
<span   class="emphasis"><em>frame</em></span> for what X calls a window, and
<span   class="emphasis"><em>window</em></span> for a section within a frame. As this
is an Emacs article, this article uses Emacs terminology. To
display a new window with a horizontal split, use Ctrl-X 2. For a
new window with a vertical split, use Ctrl-X 3. Whereas Ctrl-X 5 1
gives you a whole new frame to play in, Ctrl-X 0 and Ctrl-X 5 0
kill off the current window and frame, respectively.</p><p>Another highlight of the tutorial is an introduction to
Emacs' incremental search commands. They make life much easier, so
learn and remember them.</p><p>Ctrl-H is the gateway to Emacs' help system. Pressing Ctrl-H
? gives you a menu for different parts of the help system. The Info
system (Ctrl-H I) gives you access to FSF documentation in FSF's
Info format. A form of hypertext that predates the World Wide Web,
it is arranged in a tree structure. You also can go to an Info node
for an Emacs function with Ctrl-H Ctrl-F. This section provides
information on the current major and minor modes (more on those in
a moment), the warranty and license under which Emacs is provided
and other information. Because Emacs' help system is displayed by
Emacs, the cursor movement keystrokes you learned in the tutorial
apply to the help system.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0xff69d0"></a>Getting in the Mode</h2></div></div><p>According to the top Emacs info page, Emacs is the
extensible, customizable, self-documenting, real-time display
editor. It is extensible because it is written in Emacs Lisp, or
elisp, a dialect of Lisp especially customized for Emacs and text
processing. You therefore can extend Emacs by writing code in
elisp. Furthermore, you can customize it by changing the values of
existing elisp variables. Self-documenting might be a slight
exaggeration, but elisp does encourage programmers to document. And
as we've seen, there is extensive help available.</p><p>Users also can customize Emacs by adapting it to specific
applications. Do this by switching to what is called a major mode.
Only one major mode can be active in a buffer at a time, but you
can switch major modes on the fly. For example, when writing CGI
scripts it is useful to toggle between Perl mode and HTML Helper
mode.</p><p>To identify the current modes active in a buffer, see the
mode line. In parentheses you will find one or more modes, with the
current major mode listed first. Not all minor modes identify
themselves in the mode parentheses, but their action is obvious,
such as Column Number mode.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0xff6b88"></a>Major Modes</h2></div></div><p>Major modes are generally associated with file extensions. A
Lisp variable, auto-mode-alist, does this association, and we'll
show you how to add to it. Emacs also recognizes associations with
shebang entries in the first line of scripts, like this one for
Perl:</p><pre     class="programlisting">
#! /usr/bin/perl
</pre><p>And you can always force the mode in the first line of a
document by surrounding it with <b  >-*-</b>, like this:
<pre     class="programlisting">
# -*- shell-script -*-
</pre>


To switch manually from one major mode to another, use M-X
<b  ><i><tt>mode-name</tt></i></b>. For
example, M-X <b  >perl-mode</b> puts Emacs into the major
mode for editing Perl.
</p><p>Major modes provide a number of useful facilities. They
usually provide custom indentation and pretty printing options
suitable to the subject at hand. There is often some way to insert
a comment with a short key sequence. A region of text can be
commented out with M-X <b  >comment-region</b>. One
advantage of using Emacs for all your editing is the functions (and
their keystrokes and menu entries) available in one major mode tend
to be available in another, so if you know how to edit C in Emacs,
you probably can edit SQL in Emacs as well (Figure 1).</p><div       class="mediaobject"><img src="6242f1.jpg"><div class="caption"><p>
Figure 1. C mode in Emacs, showing font locking (color syntax
highlighting). The indenting is courtesy of C mode.
</p></div></div><p>Major modes typically provide what Emacs calls font locking,
a feature everyone else calls syntax coloring. It automatically
associates syntax with colors. For example, comments show up in
red, data types in green and strings in a light red. Another
advantage of editing with Emacs is that color associations operate
across modes, so comments are red regardless of whether you are
working in assembler or XML.</p><p>Major modes redefine how keystrokes operate, usually the Tab
and Delete keys. Also, major modes have mode-specific commands
accessed with the prefix Ctrl-C. For example, to validate an SGML
document in PSGML mode, use Ctrl-C Ctrl-V.</p><p>One of the most powerful major modes around is Lennart
Staflin's PSGML mode (see Resources). It facilitates inserting SGML
or XML tags and provides automatic pretty printing comparable to C
mode. PSGML mode has font locking and other goodies, but it also
reads the DTD and uses it to enforce proper tag nesting. For
example, in DocBook, it won't let you insert a &lt;sect4&gt;
directly into a &lt;sect1&gt;. It also is a front end for a
validator (Figure 2).</p><div       class="mediaobject"><img src="6242f2.jpg"><div class="caption"><p>
Figure 2. Editing a Linux Documentation Project document in the
DocBook SGML DTD in Emacs. The font locking highlights tags and
entities for you.
</p></div></div><p>Other major modes that almost anyone will find useful are
Dired mode, Ediff mode, W3 and the calendar and diary. Dired mode
is for editing directories. You can navigate from directory to
directory, visit files and edit file metadata, such as permissions
and ownership. One of the more powerful features of Dired mode is
the ability to grep a number of files and have Dired mark the hits.
You can then visit each hit in sequence and edit it. This allows
you to manipulate files <span   class="emphasis"><em>en masse</em></span>, including
renaming them or deleting them.</p><p>One mode that has proven to be quite useful is the
calendar/diary. Not just any calendar tool, Calendar mode allows
you to do date manipulations in and conversions between Gregorian
and Julian, Copt, Hebrew and Islamic calendars. And, for something
completely different, date your next intra-office memo in the
Persian or Mayan calendar. Or, send your next bug report to the
Free Software Foundation in the French Revolutionary Calendar
(Figure 3).</p><div       class="mediaobject"><a href="6242f3.large.jpg"><img src="6242f3.jpg"></a><div class="caption"><p>
Figure 3. Emacs' Calendar and Diary
</p></div></div><p>Somewhat more useful than obscure calendars is the diary.
With the diary, you can set appointments, anniversary reminders,
cyclical events (such as &ldquo;every third Thursday of the month&rdquo;) and
other types of events. If you specify the event time, Emacs will
remind you as the time approaches. Not only is this diary system
useful, but it runs in Emacs, so it runs on any computer on which
Emacs runs&mdash;and that's most of them. The diary file is portable as
well.</p><p>Ediff mode is useful for selectively applying patches. You
also can use it to update files on several computers, such as my
.emacs and diary files. Because it is selective, ediff lets you
propagate changes in both directions. This can be important if you
set appointments on your laptop and your secretary sets them on
your desktop (Figures 4 and 5).</p><div       class="mediaobject"><img src="6242f4.jpg"><div class="caption"><p>
Figure 4. Diffing two files. Emacs shows not only which lines are
changed, but what the changes are.
</p></div></div><div       class="mediaobject"><img src="6242f5.jpg"><div class="caption"><p>
Figure 5. The control window for Ediff mode.
</p></div></div><p>If browsing the World Wide Web is your thing, take a close
look at William M. Perry's W3 mode. It is a web browser written in
Emacs Lisp.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0xff7b58"></a>Minor Modes</h2></div></div><p>Add-ons, called minor modes, supplement major modes. Most
minor modes operate regardless of the major mode, so they can
operate in different documents. For example, Show Paren mode
matches parentheses for you. It is useful for the C programmer even
in Text mode, and it's a godsend to the Lisp programmer.</p><p>Minor modes can be turned on and off as you wish. For
example, when programming, Auto Fill mode (for filling, or line
wrapping, paragraphs) is useful in comments, but a nuisance outside
of them.</p><p>Some minor modes are global; they extend across all buffers
when they are active. Others are local to a buffer. To activate a
given mode, append <b  >-mode</b> to its name and execute
that command. So to activate Parentheses mode, press M-X then type
<b  >show-paren-mode</b>. To deactivate it, run the
command again.</p><p>Several useful buffer-local minor modes are Abbrev mode
(autocorrection on the fly), Auto Save mode, Font-Lock mode (color
highlighting), Flyspell mode (spell checking on the fly) and
Overwrite mode. Two useful minor modes that apply to all buffers
are Line Number mode and Column Number mode. These print the
current position of point in the mode line, usually over to the
right.</p><p>Another useful mode is Ispell, which lets you spell check
your buffer. It has special submodes for checking e-mail messages,
programming language comments and strings, and other special
uses.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0x13f00c0"></a>Your .emacs File</h2></div></div><p>Key to customizing Emacs is the initialization file,
~/.emacs. Administrators usually provide a global init file. If you
don't like it you can tell Emacs to ignore it in your own init
file. And, you can start Emacs with no init file with
<b  >emacs -q</b>, useful for debugging. The init file is
nothing but some elisp used to set up Emacs the way you (or your
administrator) like it (Figure 6).</p><div       class="mediaobject"><a href="6242f6.large.jpg"><img src="6242f6.jpg"></a><div class="caption"><p>
Figure 6. Editing the author's .emacs, an example of Emacs Lisp, in
Emacs.
</p></div></div><p>You also can set variables in the init file. I customize HTML
Helper mode by setting some mode variables:</p><pre     class="programlisting">
(setq html-helper-do-write-file-hooks t)
(setq html-helper-build-new-buffer t)
(setq html-helper-address-string "&lt;a href=
\"mailto:ccurley@trib.com\"&gt;Charles
Curley&lt;/a&gt;")
</pre><p>Short useful functions, or macros, also go into .emacs. For
example, the following function inserts today's date at point:
<pre     class="programlisting">
(defun insert-date ()
  "Insert the current date according to the variable
\"insert-date-format\"."
  (interactive "*")
  (insert (format-time-string insert-date-format
                              (current-time))))
</pre>


Keystrokes and key sequences also can be bound to functions. This
allows you to use the key sequence to activate the function. For
example, having written the function insert-date, I can bind it to
the F3 function key with this line:
<pre     class="programlisting">
(global-set-key [f3] 'insert-date)
</pre>


You also can use this capability to remap your keyboard. If you
don't like some of the long key sequences in Emacs, you can rebind
them.
</p><p>The other way to customize Emacs is with the Customize menu,
accessed with M-X <b  >customize</b> or from the Options
pull-down menu. This extensive menu system allows users to change
variables and store the changes in your init file.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xefe580.0x13f0640"></a>Emacs as a Server</h2></div></div><p>A number of programs, such as crontab and mutt, invoke an
external program as their editor. To let them run Emacs, set Emacs
up to run as a server by putting this line into your .emacs
file:</p><pre     class="programlisting">
(server-start)
</pre><p>Next, set the environment variable EDITOR or VISUAL to
emacsclient. In Bash, add this to your /etc/bashrc or your
~/x.bash_profile:
<pre     class="programlisting">
export VISUAL=emacsclient
</pre>


Now, when you execute <b  >crontab -e</b> or edit a
message in mutt, you edit in your existing Emacs session instead of
waiting for a new Emacs to start up. To finish editing and make
emacslient exit, end your session in that buffer with Ctrl-C #
instead of Ctrl-X K.
</p><p>For emacsclient to work, Emacs must be running when the
external program invokes it. This is consistent with the preferred
way of using Emacs, which is to start Emacs when you log in and
leave it running until you log out. One result of using emacsclient
is you only have one instance of Emacs running at any one time.
While memory is cheap today, it wasn't always so. And even today,
if you want to run Linux on your laptop or elderly computers,
conserving memory is always a good idea.</p><p>You might want to have Emacs edit your mail in Mail mode. If
you use mutt, add this to your .emacs file:</p><pre     class="programlisting">
;; Automatically go into mail-mode if
filename starts with /tmp/mutt
(setq auto-mode-alist (append (list (cons
"^\/tmp\/mutt" 'mail-mode))
                                  auto-mode-alist))
</pre><p>Of course, to comply with the RFCs on netiquette, you will
want Auto Fill mode active when you edit mail. Most major modes
have a hook they execute on entering the mode and another they
execute on leaving. Here is how to get Mail mode to invoke Auto
Fill mode:
<pre     class="programlisting">
(defun my-mail-mode-hook ()
  (auto-fill-mode 1)
  )
(add-hook 'mail-mode-hook 'my-mail-mode-hook)
</pre>


When you are done writing your e-mail, if you want to annoy the
NSA, use Spook. To protest the Communications Decency Act (a decent
thing to do) and annoy a lot of American politicians, see Bruce.
</p><p>Finally, before we take our leave of this wild and woolly
editor, let me bring the etc directory (in the Emacs directory
tree) to your attention. It contains a number of useful documents,
such as an Emacs English language reference card, in source
(refcard.tex) and postscript (refcard.ps) form. Translations of the
reference card into other languages are available. There is also
some background material on Emacs and the GNU Project and a copy of
the GPL.</p><p>Something you rarely find in proprietary software (at least,
not deliberately) is present in Emacs: humor. Check out the bug
report from the year 2199, the word list for Spook mode, some
explanations of what Emacs stands for and more. And if you really
want to exercise your font server, visit the file &ldquo;HELLO&rdquo;.</p><p><a href="6242s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
       email: <a href="mailto:ccurley@trib.com">ccurley@trib.com</a>
       </p><p><span   class="bold"><b>Charles Curley</b></span>
      (<a href="http://w3.trib.com/~ccurley" target="_self">w3.trib.com/~ccurley</a>)
      writes about and teaches Linux. Naturally, he wrote this article
      using Emacs on Linux.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../107/toc107.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>