<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Tippett Studio and Nothing Real's Shake</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Robin describes how Shake on Linux is used to composite&#10;    special effects.&#10;    "><meta name="keywords" content="Shake, video, compositing, graphics, visual, effects"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x173e580.0x1835ab0"></a>Tippett Studio and Nothing Real's Shake</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #97, May 2002</div></div><div><p>
    Robin describes how Shake on Linux is used to composite
    special effects.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x173e580.0x1836768"></a></h2></div></div><p>Video compositing software is used by
motion picture studios to combine special effects or animation
elements into film sequences. Compositing software may be thought
of as doing for moving images what tools like the GIMP and
Photoshop do for still images. Nothing Real's Shake seems to be the
most widely used high-end compositing package today. Shake runs on
Linux, Windows and IRIX, and Apple has just confirmed rumors that
it has acquired Nothing Real and Shake.</p><p>Tippett Studio specializes in scary effects, such as bugs and
creatures. Let's visit Tippet Studio in Berkeley, California for a
look at how they use Shake on Linux.</p><p>As a visual effects and animation studio for feature films,
Tippett Studio has won Academy Awards for visual effects work on
<span   class="emphasis"><em>Return of the Jedi</em></span> and for <span   class="emphasis"><em>Jurassic
Park</em></span> and was nominated for effects in <span   class="emphasis"><em>Starship
Troopers</em></span>, <span   class="emphasis"><em>Dragonheart</em></span>,
<span   class="emphasis"><em>Willow</em></span>, <span   class="emphasis"><em>Dragonslayer</em></span> and
<span   class="emphasis"><em>Hollow Man</em></span>. Tippett Studio currently is
creating effects for the vampire movie sequel <span   class="emphasis"><em>Blade
II</em></span> (release March, 2002). &ldquo;We've been using Shake on
Linux since <span   class="emphasis"><em>Evolution</em></span>, about a year and
half&rdquo;, says compositing supervisor Alan Boucek. &ldquo;I'm running
Shake on a dual Athlon. What's exciting is that it is so fast. I
can mostly work on my own machine, without going to the
renderfarm.&rdquo;</p><div       class="mediaobject"><img src="5851f1.jpg"><div class="caption"><p>
Shake being used to composite a scene with Wesley Snipes in
<span  class="emphasis"><em>Blade II</em></span>. Window manager is MWM for continuity
of look and feel with SGI IRIX workstations.
</p></div></div><p>Boucek adds that his compositing crew was the first in the
studio to move to Linux. &ldquo;Once we got Shake up and running, the
next task was to get our pipeline on Linux&rdquo;, he says. &ldquo;For most
of our 3-D rendering, we use Pixar's RenderMan. Grey renders are
straight out of Maya, but animators run their stuff through a
simple Renderman pass for daily review.&rdquo;</p><p>Shake uses a tree-graph interface to manipulate effects. Each
input is passed through nodes that represent filters or transforms
that create the final composite images. Complex effects take longer
to render, and time is always at a premium at a studio. Special
effects artists often work at quarter resolution in near real time
with Shake on a workstation, then later batch process the effects
at full resolution on the server renderfarm.</p><p>Two years ago when Tippett needed new computers for
compositing they chose $5,000 US SGI x86 PCs over $24,000 US SGI
Mips Octanes. &ldquo;We bought SGI PCs at first, but after those were
discontinued we started building our own machines from scratch&rdquo;,
Boucek says. &ldquo;We've saved a lot of money on machines, but a lot of
that is taken up in providing our own support.&rdquo; Besides PC and SGI
computers, they have many Macintoshes. And, some of the PCs are
running not Linux but Windows versions of Shake and 3-D modeling
package Maya. Boucek prefers Linux:</p><div class="blockquote"><blockquote class="blockquote"><p>We can't tie NT into our renderfarm. When we go
home at night the Linux boxes keep working. The NT workstations are
dead&mdash;can't do double duty as renderfarm servers. We still have a
lot of SGIs. Our Linux software conversion is just
completing.</p></blockquote></div><p>&ldquo;Just being able to talk to who wrote the original code is a
tremendous advantage&rdquo;, says Director of Technology Christian Rice.
<div class="blockquote"><blockquote class="blockquote"><p>With Linux we can have a personal dialogue with
the author of a package in a noncorporate manner. We've overcome
several hurdles in that manner. It does create more responsibility
for us though, and more uncertainty. Just because a search of the
Web turns up nothing doesn't mean something can't be done. Talking
directly to the developer often gives us an insight into special
features that we wouldn't otherwise be aware of, not to mention
special features being implemented to accommodate us.</p></blockquote></div>

&ldquo;We have ten programmers here in a crew of 150&rdquo;, says Boucek.
&ldquo;They work on 2-D, 3-D and pipeline support. A lot of what they do
takes care of the handoff [integration] between tools not
especially intended to work together.&rdquo; These programmers support
about 25 artists doing 2-D work, and about 75 doing 3-D. Although
Shake has many built-in effects, studios often create their own
that may become a look or specialty associated with that studio. As
with the GIMP and Photoshop, programmers may create plugins for
Shake written in C or C++.
</p><p>&ldquo;Writing plugins for Shake at the beginning is very hard&rdquo;,
warns Software Engineer Qin &ldquo;Jean&rdquo; Shen. &ldquo;There isn't complete
developer's documentation. I would copy a simple example from the
dev kit then send a lot of e-mail questions to Nothing Real as I
worked on extending it. They are good about replying and helpful.&rdquo;
Shen explains that Nothing Real tries to write good documentation,
but because each plugin serves a special purpose it is hard to be
comprehensive. Plugin developers must take care to note when
something is needed in memory so that Shake can automatically fetch
it. &ldquo;Shake is a scanline renderer&rdquo;, notes Boucek. &ldquo;It doesn't
read the entire image in memory at once. That's what makes Shake so
fast.&rdquo;</p><p>Shen disproves the theory that you can't get an exciting job
in motion picture software development right out of college.
Although she already had an offer from nearby ILM, she choose
Tippett because as a smaller studio it offered her more
involvement. &ldquo;When I started in 1999 we were still using
Alias|Wavefront Composer. I wrote plugins for that, and then Shake
after we switched.&rdquo; Shen works on development of Flipper (a
flipbook movie player) and GammaGal (a tool to adjust monitors),
both internal tools. &ldquo;Flipper and GammaGuy had been written using
Motif and IrisGL. I rewrote those in OpenGL and FLTK, and GammaGuy
became GammaGal.&rdquo;</p><div       class="mediaobject"><img src="5851f2.jpg"><div class="caption"><p>
Shake preview on left during split screen transition. Flipper
flipbook player on right. Icons (lower left) are for in-house
plugins.
</p></div></div><div       class="mediaobject"><img src="5851f3.jpg"><div class="caption"><p>
Flipper on left, GammaGal on right. Flow graph in Shake to build
one entire movie shot (scene).
</p></div></div><p>&ldquo;An important feature in Photoshop is gamma-level
adjustment&rdquo;, explains Software Developer Darby Johnston.
&ldquo;GammaGal allows us to do something similar very quickly on IRIX
and Linux.&rdquo; Because film has a greater dynamic range than do video
monitors, users constantly must play with levels to see details in
dark or light areas. Artists working in film play with gamma like
an artist will play with magnification while retouching a still
image.</p><p>&ldquo;To describe our Linux efforts converting our IRIX tools as
porting is too strong a word&rdquo;, says Johnston. &ldquo;For the most part,
stuff just compiles.&rdquo; Johnston's work involves mostly traditional
C-style coding, without threads or shared memory. Johnston is part
of a team writing glue code for integration, an image-processing
suite (e.g., blurs, crops, scales) and batch tools.</p><p>&ldquo;There still are growing pains with Linux&rdquo;, notes Boucek.
&ldquo;A lot of development in Linux seems to be about beating
Microsoft. But, what we need is a reliable platform that runs our
tools.&rdquo; When Tippett started with Linux, the NVIDIA drivers were
still in beta and had problems. &ldquo;Sometimes it wouldn't draw a line
in glLines correctly&rdquo;, says Shen. &ldquo;I used glStrip instead as a
workaround. We had many instances like that.&rdquo; Boucek adds, &ldquo;A lot
of instability in the early months with Linux was tracked down to
the NVIDIA drivers, and Maya is still pretty unstable for us on
Linux using NVIDIA GeForce2 and Quadro2 graphics cards.&rdquo; Despite
problems, NVIDIA drivers have been key in the transition to
Linux.</p><p>&ldquo;The performance of the proprietary NVIDIA drivers has been
important in spurring our move to Linux, although we can tell that
the optimization effort is toward <span   class="emphasis"><em>Quake</em></span> more
than 2-D&rdquo;, says Johnston.</p><div class="blockquote"><blockquote class="blockquote"><p>We recently tested XiG with an ATI RADEON 7500 on
a 1.4GHz Athlon and found it much faster for 2-D. Flipping frames
at 1,920 &times; 1,200, the NVIDIA drivers barely hit 30fps, but
the XiG drivers were over 40. However, in 3-D the NVIDIA drivers
were perceptibly faster in Maya.</p></blockquote></div><p>&ldquo;We're trying hard to get Linux on everyone's desktop&rdquo;,
says Boucek. &ldquo;But, we're still not there because of stability
problems with Maya on Linux.&rdquo; Boucek wants to see Linux and Linux
drivers continue to get more stable and for performance to improve.
</p><p>Square is another movie studio that has done stunning work
using Shake, on the motion picture <span   class="emphasis"><em>Final
Fantasy</em></span>. &ldquo;We started with IRIX four years ago&rdquo;, says
Visual Effects Supervisor James Rogers. &ldquo;Our Linux renderfarm was
brought up in the middle of production.&rdquo; Square used their
existing IRIX boxes for workstations, then sent data through a
custom render manager to Shake batch render on the Linux
renderfarm. &ldquo;We started testing Linux workstations at the end&rdquo;,
says Rogers. Square recently announced it will cease movie
operations and close its offices in Hawaii as of March 29,
2002.</p><p>To install Shake we download three files (55MB) from the
Nothing Real web site: the license manager (lmutil.Z, 184k), the
application (shake-linux-v2.46.0116.tar.bz2, 28MB) and the tutorial
(shake-tutorial-v2.46.0116.tar.gz, 26MB):</p><pre     class="programlisting">
gunzip lmutil.Z
tar xvfj shake-linux-v2.46.0116.tar.bz2
tar tvfz z/shake-tutorial-v2.46.0116.tar.gz
tar xvfz z/shake-tutorial-v2.46.0116.tar.gz
./lmutil lmhostid
</pre><p>Just to double-check, we used the tell switch with tar to see
what it would do before doing an extract.
</p><p>The lmutil program echoes a 12-digit license-manager host ID.
This host-locked ID code must be sent to Nothing Real in order to
receive a two-week trial key code (key.dat). Copy the e-mailed key
to the specified directory, start X and run Shake:</p><pre     class="programlisting">
cp key.dat shake-v2.46.0116/keys/
startx
shake-v2.46.0116/bin/shake
</pre><p>Unless you already know Shake, two weeks isn't much time to
learn about this complex tool.
</p><p>As this story is being written, the future of Shake is
unclear. Apple confirmed rumors of the Nothing Real acquisition in
a short statement released on February 6, 2002. Tippett Studio's
Boucek notes:</p><div class="blockquote"><blockquote class="blockquote"><p>They have a core renderer that's faster than
anybody's. That could be valuable in QuickTime or Final Cut Pro.
Shake is such an important tool for us on Linux we have to be
concerned about what would happen if it becomes OS X only. But, it
would be good if it was cheaper so we could afford more seats. In
general, we're excited about OS X. We have a lot of Macs
here.</p></blockquote></div><p>With BSD-based OS X, the Apple platform gained NFS and other
UNIX features that help it integrate into movie studio pipelines.
</p><p>Apple, in a two-sentence statement confirming rumors that it
had purchased the company, only revealed that it &ldquo;plans to use
Nothing Real's technology in future versions of its products&rdquo;. In
2001, Nothing Real had announced that it would port Shake, which
runs on Linux, Windows and IRIX, to Apple OS X. However, Apple is
uncommitted as to whether it will release that promised OS X
version of Shake.</p><p>Since Apple has never continued development of a GUI
application for another OS after an acquisition, it seems this may
be the last version of Shake for Linux workstations. However, the
Shake renderfarm server software will probably continue to support
Linux indefinitely. There's a precedent with the Apple Linux Darwin
QuickTime server software. If future versions of the Shake GUI only
run on Macintoshes, the extra hardware cost for new Macs seems a
nonstarter to studios. But, Apple could sidestep that by lowering
the cost of Shake. At nearly $10,000 US per seat, Apple could throw
in a loaded $2,000 US iMac for free.</p><p>Some studio managers are feeling spooked by Apple's total
silence on their plans for Shake. But others, such as Boucek at
Tippett Studio, express optimism that Apple has something to offer
to the professional motion picture editing market.</p><p>Because that's been most of the market, Linux companies are
more focused on servers than workstations. Despite not really being
designed for that, Red Hat is the de facto standard for Linux
workstations. Some users say server-oriented Red Hat is not a good
distro for the desktop. Red Hat CEO Robert Young admits being booed
more than once for telling Linux crowds, &ldquo;Linux will never be
successful on the desktop.&rdquo; Competition from Apple OS X may spur
Linux to become more user-friendly. Thanks to OS X, Apple system
Software Product Manager Ernest Prabhakar was able to announce at
USENIX BSDCON in February 2002 that BSD is now three times more
popular than Linux on the desktop.</p><p>Apple may shake up the motion picture effects business. Steve
Jobs is the CEO of both Apple and Pixar. Or, up-and-coming
competitor Silicon Grail's RAYZ could be a big winner as a result
of the Apple's Nothing Real acquisition. Many studios are taking a
hard look at RAYZ due to the uncertainty surrounding Apple's plans
for Shake. We'll take a look at RAYZ on Linux in detail here next
month.</p><p><a href="5851s1.html" target="_self">Resources</a></p><p><a href="5851s2.html" target="_self">Cat Sequence</a></p></div></div>
<div class="authorblurb"><p>
       email: <a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>
       </p><p><span   class="bold"><b>Robin
      Rowe</b></span>
      (<a href="mailto:robin.rowe@movieeditor.com">robin.rowe@movieeditor.com</a>)
      is a partner in
      <a href="http://MovieEditor.com" target="_self">MovieEditor.com</a>, a
      technology company that creates internet and broadcast video
      applications. He has written for <span   class="emphasis"><em>Dr. Dobb's Journal</em></span>, the
      <span   class="emphasis"><em>C++ Report</em></span>, the <span   class="emphasis"><em>C/C++ Users
      Journal</em></span> and <span   class="emphasis"><em>Data Based
      Advisor</em></span>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../097/toc097.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>