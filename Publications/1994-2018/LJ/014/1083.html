<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Review: xBASE Products for Linux</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Some Linux aficionados would lke to run their DOS-based&#10;    xBASE database under Linux. Robert Broughton examines two&#10;    products that make this possible.&#10;    "><meta name="keywords" content="flagship, DBMan, tool, library"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x236f580.0x2466ab0"></a>Review: xBASE Products for Linux</h1></div><div><div class="author"><h3 class="author">Robert Broughton</h3></div><div class="issuemoyr">Issue #14, June 1995</div></div><div><p>
    Some Linux aficionados would lke to run their DOS-based
    xBASE database under Linux. Robert Broughton examines two
    products that make this possible.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x236f580.0x2467558"></a></h2></div></div><p>XBASE is a generic term for
implementations of what was originally the dBASE programming
language. The principal players in the MS-DOS portion of this
market are FoxPro (Microsoft), dBASE V (Borland), and Clipper
(Computer Associates). It is a language which has statements
normally found in programming languages, like IF, ELSE, ENDIF, and
WHILE. (There is a GOTO statement, but it is for going to a
specific record in the file; There is no GOTO in the FORTRAN
flow-control sense.) It also has some powerful statements for
processing files and getting data from screens. Setting up
relations between files is easy to do. The names of all fields in a
file, and their types and lengths, are recorded in the file header.
New fields can be added to a file without changing programs which
use the file.
</p><p>None of these products are available for Linux, although
there has been at least one effort to make the SCO version of dBASE
V work with iBCS. What we have instead is
<span   class="bold"><b>FlagShip</b></span> from multisoft
Datentechnik GmbH and <span   class="bold"><b>dBMAN</b></span> from
Versasoft Corporation. Both of these products run on several
implementations of Unix; dBMAN also runs on MS-DOS.</p><p>These two products resemble each other only at the very
simple level. To start with, FlagShip is patterned after Clipper
version 5, while dBMAN resembles dBASE III+ or FoxPlus, with some
enhancements. This, in turn, means two things. FlagShip, like
Clipper, is a compiler, while dBMAN is primarily an interpreter,
although it is possible to &ldquo;compile&rdquo; dBMAN programs (though not
into binaries). FlagShip is also an object-oriented language, which
makes it philosophically different from dBMAN, as well as from
FoxPro and dBASE. Clipper and FlagShip have a lot of C-like
features, which I suspect won't be a problem for most Linux
users.</p><p>Their target markets are also different. dBMAN is targeted
primarily at individual users. If you want a program you can run on
your desk to keep track of time billed to clients, or that will
maintain a data base of customers or your inventory, dBMAN will do
the job, but FlagShip might be overkill. FlagShip is aimed at
people who want to develop or port software packages.</p><p>I consider four features to be essential for developing
decent user interfaces: pull-down menus, windowing, hot-key
activated selection lists, and input validation. These products
were evaluated with these criteria in mind. I'm also in awe of
FoxPro's BROWSE command, so it's the standard by which I measure
the browse features of other languages.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x236f580.0x2467870"></a>FlagShip</h2></div></div><p>As I mentioned previously, FlagShip is a compiler. It
translates the xBASE code into C, and the result is turned over to
the gcc compiler. (Yes, you can link functions written in C or
assembler into FlagShip programs. You can even mix xBASE and C code
in a program.) The compiled binaries may be distributed without
paying royalties to multisoft.</p><p>FlagShip has no equivalent of the &ldquo;dot prompt&rdquo; or interactive
command interface found in other xBASE products. However, there is
a public-domain program in WorkGroup Solutions' FTP area named
<span   class="bold"><b>dbu</b></span> . This program will provide
the capability to create files and indexes, add, change, or locate
records, and browse files.</p><p><a href="1083f1.jpg" target="_self">Figure 1</a></p><p>The FlagShip feature I like best is its on-line reference
program called <span   class="bold"><b>fsman</b></span>.
<span   class="bold"><b>fsman</b></span> contains the entire FlagShip
manual, over 1,000 pages worth of material. If you use an X-window
environment, you can easily park fsman in one corner of your
screen, and refer to it whenever necessary. It's also possible to
save pages of the manual to ASCII files, which makes it easy to
incorporate programming examples in the manual into whatever
program you are working on at the time. Of course, you could also
use the mouse to copy text from fsman into your program.</p><p>When you install FlagShip, you get a set of terminfo files
specifically for FlagShip. Because of a problem with ncurses 1.8.5,
they are compiled with ncurses 1.8.1.</p><p>FlagShip doesn't have a function specifically for managing
pull-down menus. What FlagShip and Clipper programmers normally do
is use <b  >@PROMPT/MENU</b> TO statements to create the
horizontal menu, and use a function called
<b  >ACHOICE()</b> for the vertical menus.</p><p>FlagShip has functions for managing windows that work very
nicely, but they're not part of the basic package. You have to buy
the <span   class="bold"><b>FStools</b></span> library. As the name
suggests, the FStools library is a clone of the Clipper Tools
library. There are also windowing functions in the NanForum
library, which is public domain.</p><p>Hotkeys are set up with the statement <b  >SET KEY keyid
TO</b> statement. Normally, statement would be a function
invocation. Within this function, you can call the function
<b  >READVAR()</b> to find out which field the cursor was
in when the key was pressed.</p><p>An input field can be validated by adding the
<b  >VALID</b> statement parameter to the
<b  >@SAY/GET</b> statement. Again, the statement would
normally be a function invocation. Within the function, the value
the user typed in could be looked up in a database file.</p><p>To determine how compatible FlagShip is with Clipper, I
downloaded a couple of programs from a local BBS. I ran into two
problems. The programs contained function calls that looked like
this:</p><pre     class="programlisting">

IF (expr, true_result,)
</pre><p>FlagShip complained about the absence of the third parameter.
Adding &ldquo;.f.&rdquo; for the third parameter solved the problem. The other
problem was a reference to a function named
<b  >FT_Shadow()</b>, which FlagShip simply doesn't know
about. I got rid of this problem by commenting it out. Once I got
clean compiles on these programs, they worked beautifully.</p><p>A key feature of FlagShip is the <b  >TBROWSE()</b>
object. You use this in place of the <b  >BROWSE</b>
command that exists in other xBASE languages. If you don't have any
previous experience with object-oriented programming, setting up
<b  >TBROWSE()</b> for the first time is intimidating.
However, I was able to get it to do what I wanted by extracting the
example in fsman and rearranging it.</p><p>I encountered one problem with FlagShip when I was running a
FlagShip program in an xterm; I got hieroglyphics instead of line
drawing characters. Fiddling with the &ldquo;<b  >acsc</b>&rdquo;
parameter in the &ldquo;fslinxterm&rdquo; terminfo entry had no effect
whatsoever. I worked around this by using the &ldquo;vga&rdquo; font that comes
with DOSEMU. I eventually learned that instead of using the
<b  >acsc</b> parameter, FlagShip uses another file named
Fschrmap.def which maps the character codes generated by the
program to the character codes displayed on the screen. I didn't
bother to alter this, however. Using the &ldquo;vga&rdquo; font is actually a
better solution, because it's possible to display double line
drawing characters.</p><p>Another &ldquo;gotcha&rdquo; in FlagShip turned up when I put a
<b  >REPORT EDIT</b> statement in a program; The compiler
rejected it. It seems that this statement just doesn't exist in the
Linux version. <b  >REPORT FORM</b> will work if you have
an MS-DOS version of Clipper around to set up a report.
<b  >REPORT EDIT</b> does exist in other implementations
of FlagShip, and I've been told by WorkGroup Solutions (the North
American agent for FlagShip) that it will be in the next Linux
release.</p><p>Another problem had a number of people scratching their heads
for a while. <b  >ACHOICE()</b> and several other
functions were simply refusing to work. It turned out that the name
of my program was browse.prg, and <b  >browse</b> is
treated as a reserved word by FlagShip. I can report that the
support people at multisoft and WorkGroup Solutions were reasonably
helpful in resolving this problem.</p><p>WorkGroup Solutions is very aggressive at marketing their
product. (They also sell a Linux CD-ROM.) They turn up quite
frequently in the comp.language.xbase and comp.os.linux.misc
newsgroups. They promise that FlagShip will eventually have some
sort of GUI support. Programs that have been ported, or are in the
process of being ported to FlagShip include:</p><div class="itemizedlist"><ul type="disc"><li><p><span   class="bold"><b>Accounting for
Clipper</b></span>--A demo version can be found in WorkGroup
Solutions' FTP site, but it's considered alpha</p></li><li><p><span   class="bold"><b>SBT</b></span>--A MAJOR
accounting package</p></li><li><p><span   class="bold"><b>SourceMate</b></span>--Another
accounting package</p></li><li><p><span   class="bold"><b>Comix</b></span>--A library
to handle FoxPro-style compound indexes</p></li><li><p><span   class="bold"><b>BandIt</b></span>--A report
writer</p></li><li><p><span   class="bold"><b>SoftCode</b></span>--A
program generator</p></li><li><p><span   class="bold"><b>xPRINT</b></span>--A printer
control library</p></li><li><p><span   class="bold"><b>NanForum Kit</b></span>--A
widely used function library</p></li></ul></div><p>WorkGroup Solutions also happily points out that FlagShip
programs could be attached to WWW pages, making it possible for net
surfers to access and update databases.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x236f580.0x28611c8"></a>dBMAN</h2></div></div><p>dBMAN functions primarily in interpretive mode, although it
is possible to compile programs. (Compiling a program does not
produce an executable binary; It produces a .run file, which still
requires dBMAN to execute it.) When dBMAN starts up, a
<b  >CMD:</b> prompt appears at the top of the screen. At
this point, you can type in <b  >ASSIST</b>, which starts
up a menu-driven interface similar to ones available with FoxPro or
dBASE, but limited in comparison; dBMAN's <b  >ASSIST</b>
only allows one file to be open at a time, which in turn means that
it is not possible to set up relations. It is possible to start up
a simple program generator from <b  >ASSIST</b>. Again,
it has a single file limitation.</p><p>It is also possible to enter <b  >CREATE REPORT</b>
or <b  >MODIFY REPORT</b> at the <b  >CMD:</b>
prompt. This will put you in dBMAN's report writer, which works
very nicely. The report writer allows relations. I had a little bit
of trouble getting it to write a report with lines wider than 80
columns, but I eventually got it to work.</p><p>dBMAN provides a function called <b  >PMENU()</b>
to create pull-down menus. <b  >PMENU</b> doesn't have
any mechanism for temporarily disabling a menu choice.</p><p>dBMAN handles windows differently from other xBASE products.
Prior to defining a window, you call <b  >PUSHWIND()</b>
to push the current window onto a stack. (When a program is in its
initial state, the entire screen is considered to be a window.) You
then call <b  >WINDOW()</b> to create the window. When
you are finished with it, you call <b  >POPWIND()</b>,
which removes the window, and makes the previous window
active.</p><p>dBMAN allows you to define only one hot key. You do so by
invoking the ONKEY( ) function. This will have no effect until you
execute the statement <b  >ON KEY
<i><tt>statement</tt></i></b>.
(<b  ><i><tt>statement</tt></i></b> will
normally be <b  >DO hot-key-handler</b>.)</p><p>The <b  >BROWSE</b> Command has a long list of
options. You can browse only certain fields, and you can specify
the width of each field, and whether it is editable. The list of
fields can include fields in other files, which is great if you
have relationships set up.</p><p>dBMAN does not use either termcap or terminfo. Instead, it
includes a file named dbmterm.dbm. It looks a lot like termcap. The
first problem I had to solve after installing dBMAN was that there
were no entries for either &ldquo;<b  >xterm</b>&rdquo; or
&ldquo;<b  >console</b>&rdquo;.</p><p>I created one for color xterms without a whole lot of
difficulty, and it is included in <a href="1083l1.html" target="_self">Listing
1</a>.</p><p>dBMAN has no facility for executing functions written in C or
assembler.</p><p>There were a couple of nasty bugs in the version of dBMAN I
evaluated, which was 5.32. The main one was that procedure files
simply didn't work if the procedure file was a .prg. If you
compiled it into a .run file, it worked OK.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x236f580.0x2861d20"></a>A Benchmark</h2></div></div><p>I put together a simple benchmark program, which can be found
in <a href="1083l2.html" target="_self">Listing 2</a>.</p><p>The test file I used contained 33,830 records. I ran the
benchmark with dBMAN (compiled and non-compiled), FlagShip, and
FoxPro 2.0 under MS-DOS. The benchmark was done on a 66MHz 486 with
a SCSI disk. Here are the <a href="1083t1.html" target="_self">results</a>.
At first glance, you might conclude that both dBMAN and FlagShip
were blown out of the water by FoxPro. This would be unfair. FoxPro
generally beats similar MS-DOS products in benchmarks, because
FoxPro, by design, grabs all resources it can find. No well-behaved
Linux program would do this. To put it another way, dBMAN and
FlagShip would run a lot faster if they allocated most of the 16
megabytes of memory on my machine, but someone doing text editing
on another terminal would see their performance suffer.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x236f580.0x2861f30"></a>Compatibility</h2></div></div><p>xBASE files always have separate data (.dbf) and index files.
The format of data files is pretty much uniform for all xBASEs, but
as far as I know, no two xBASE products use the same index file
formats. I was able to use the same .dbf files with FlagShip and
dBMAN, but I haven't tried any memo fields yet. (Memo fields put
free-form text into a separate file, usually with the .dbt
extension.)</p><p><a href="1083s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
           <div       class="mediaobject"><img src="1083aa.jpg"></div>
           <span   class="bold"><b>Robert Broughton</b></span>
           (<a href="mailto:a1040@mindlink.bc.ca">a1040@mindlink.bc.ca</a>)
           has been developing software for
           23 years, and has been using Linux since February, 1993. He is
           employed by Zadall Systems Group, in Burnaby, BC, Canada.
        </p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../014/toc014.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>