<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Cooking with Linux</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Explore new user interface ideas without leaving your&#10;regular desktop. Our chef shows you how to nest X sessions.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1a39580.0x1b30ab0"></a>
Cooking with Linux</h1></div><div><h3 class="subtitle"><i>
Can't Get Enough Desktops!</i></h3></div><div><div class="author"><h3 class="author">Marcel Gagn&eacute;</h3></div><div class="issuemoyr">Issue #119, March 2004</div></div><div><p>
Explore new user interface ideas without leaving your
regular desktop. Our chef shows you how to nest X sessions.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1a39580.0x1b31348"></a></h2></div></div><p>
Ah, Fran&ccedil;ois, I see you have decided to run Window Maker&mdash;excellent.
It's a great window manager, and I think you'll enjoy it. Two weeks
ago, you were running GNOME; last week it was KDE, and now it's Window Maker.
I'm glad you took my advice and decided to try other desktop window
managers. Choice, after all, is one of the great joys of running Linux.
</p><p>
<span   class="foreignphrase"><i>Quoi</i></span>? Which one am I running? All of those
and a half-dozen more, <span   class="foreignphrase"><i>mon ami</i></span>. Fran&ccedil;ois, I am not pulling your leg.
My main desktop is KDE, but over here I have GNOME and over there
XFCE, and in that virtual desktop, I have Window Maker. Furthermore,
I have IceWM running in my Window Maker session. No, <span   class="foreignphrase"><i>mon
ami</i></span>, it
is not complicated at all, and I will show you how it is done as soon
as our guests arrive. But they are already here! Fran&ccedil;ois!
<span   class="foreignphrase"><i>Vite</i></span>!
To the wine cellar. Given that today's menu is more dessert than meal,
fetch the 2001 Niagara Peninsula Riesling ice wine and bring it back
<span   class="foreignphrase"><i>tout de suite</i></span>!
</p><p>
Welcome, <span   class="foreignphrase"><i>mes amis</i></span>, to <span   class="foreignphrase"><i>Chez
Marcel</i></span>. Please sit and make yourselves
comfortable. I have been pushing my faithful waiter to experiment with
different desktops. It's always nice to
try something different, which is why we change the menu from time
to time, <span   class="foreignphrase"><i>non</i></span>? The same is true for your desktop environment.
KDE or GNOME may be your favorite, but why not try Window Maker, IceWM
or XFCE for a change? A little visit to Matt Chapman's Window Managers
for X Web site at <a href="http://www.plig.org/xwinman" target="_self">www.plig.org/xwinman</a> should whet your
alternative window manager appetite. In fact, why not try them
while
you are still running your favorite desktop?
<span   class="foreignphrase"><i>Non, mes amis</i></span>, I have not been oversampling
the wine. It is
possible to run multiple desktops simultaneously, and it is a lot of fun
once you get the hang of it.
</p><p>
As with many things in the Open Source world, there is certainly more
than one way to do it. The first involves jumping out of your current
X session back to one of your virtual terminals. If you already
are running an X session, press Ctrl-Alt-F1 and you should find
yourself back at a text screen. Incidentally, F1
just as easily could be F2, F3, F4, F5 or F6. If you started X from the
command line (as opposed to using a login manager like gdm
or kdm), you should see the dialog for the session when
you press Ctrl-Alt-F1 with the log output from X on your screen.
Any of the other function keys, F2&ndash;F6, should provide you with
a text-based login screen. Simply press Ctrl-Alt-F2 for virtual
terminal two and so on.
</p><p>
Your graphical session is still active. It runs by default on what the
system calls display :0, something you can verify by typing
the command <tt  >echo $DISPLAY</tt> at a shell prompt (inside your
graphical session, of course). You should see your PC's hostname with the
display suffix. Press Ctrl-Alt-F7 to go back to your KDE,
GNOME or whatever session. Go ahead and try it, and then head on back to a
text screen (Ctrl-Alt-F?). Your X session, then, is on virtual terminal
seven. From the text screen, log in as yourself and type the following:


<pre     class="programlisting">
xinit /usr/X11R6/bin/xterm -- :1
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1a39580.0x1b31a28"></a></h2></div></div><p>
Notice the <tt  >-- :1</tt> at the end of this line. Because X
already is
running on display :0, we need to run this X terminal
on an alternate display, in this case, :1. Now a new X session
begins, this one running on virtual terminal eight. It looks
pretty boring because all you have is a simple X terminal running
on a gray background. There isn't much to look at or even any way to
move the X terminal window around, but you can execute commands and even
start up other X programs, which you also won't be able to move around.
To go from your new session to the old, press Ctrl-Alt-F7, then
Ctrl-Alt-F8 to get back to your X terminal. Easy,
<span   class="foreignphrase"><i>non</i></span>?
Using this technique, you could start something more interesting, like
another window manager, such as IceWM or XFCE, and happily switch back
and forth from one virtual X session to another.
</p><div       class="mediaobject"><a href="7298f1.large.jpg"><img src="7298f1.jpg"></a><div class="caption"><p>
Figure 1. A Somewhat Dull and Bare X Display with a Single X Terminal
</p></div></div><p>
To get out of that X session, you should know about the classic
X window escape hatch, what I call the &ldquo;<span   class="foreignphrase"><i>oh, mon
Dieu</i></span>, I've tried
everything and I can't get out of X&rdquo; escape clause. Simply press
Ctrl-Alt-Backspace. This is, <span   class="foreignphrase"><i>mes
amis</i></span>, a rather rude way
to exit X and should be used only when no other options are available.
</p><p>
Switching from one X session to another is fine, but doing this makes it
hard to continue working on two desktops. To avoid
constantly switching back and forth, I have been running a program called
<span   class="bold"><b>Xnest</b></span>. Xnest, part of the XFree86 distribution, is interesting
because it is both an X client and server all in one. It literally is
a nested X server. Before I continue, I probably should let you
know that although it is part of X, it may not be installed already on
your system; however, the package (XFree86-Xnest) is likely
on your distribution CDs.
</p><p>
In order to start a nested server, you have to provide an
alternative DISPLAY variable, as we did with the X terminal earlier.
Because your own X server is probably running as :0,
choose :1. To make sure you can connect to this new server
from any of your applications, use the -ac option as well.
This option disables access controls. The ampersand starts my new server as
a background process:

<pre     class="programlisting">

Xnest :1 -ac &amp;

</pre>
</p><p>
Now, a blank window starts on your desktop with the basic X cursor
in the center. On my Mandrake system, it was a dark-blue square.
On another server running Red Hat, it was black. It doesn't look like
much, so let's start an X application on our new server. We start
with something simple like our venerable Xclock:

<pre     class="programlisting">
xclock -display :1
</pre>

</p><p>
When you press Enter, the classic Xclock appears in your second X server
window. This also is a great way to play with things like X resources.
For instance, let's dress up that rather boring clock and move it to
another part of the display:

<pre     class="programlisting">
xclock -foreground "Red" \
-geometry +450+250 -display :1
</pre>
</p><div       class="mediaobject"><a href="7298f2.large.jpg"><img src="7298f2.jpg"></a><div class="caption"><p>
Figure 2. Populating Your Nested X Server
</p></div></div><p>
One by one, you could populate this new server with applications&mdash;the X logo here and an Eterm there. Of course, moving windows around
isn't possible in this environment, thereby making this idea only so
useful. To experience the flavor of desktop mania truly, you need the
whole sm&ouml;rg&aring;sbord, meaning a window manager and, of course, a little
more wine to go with it.
</p><p>
Starting a full-blown window manager is a similar process, and for this
next step we start with the basic Tabbed Window Manager (TWM).
This is the most basic window manager you have and comes as part of
XFree86. Begin by closing the applications in your Xnest so you can
start clean. You should be looking at that blank square with the X
cursor in the center. Now, from the command line, type:

<pre     class="programlisting">
twm -display :1

</pre>
</p><p>
If nothing changes, press the left mouse button
and TWM's menu should appear. I did say it was a basic window manager,
<span   class="foreignphrase"><i>non</i></span>? Let's try running Window Maker
this time:

<pre     class="programlisting">
wmaker -display :1
</pre>
</p><p>
As you can see, the format essentially is the same, passing the
-display parameter to the window manager's command name in
each case. This is, of course, where I should tell you that not every
window manager uses the same switch. Here's a list of the more popular
window managers and what you need to start them:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Motif Window Manager: <tt  >mwm -display :1</tt>
</p></li><li><p>
F Virtual Window Manager: <tt  >fvwm2 -display :1</tt>
</p></li><li><p>
GNOME (note double hyphen): <tt  >gnome-session --display
:1</tt>
</p></li><li><p>
AfterStep: <tt  >afterstep -d :1</tt>
</p></li></ul></div><p>
In some cases, you won't be able to start a window manager using some
kind of display redirect switch. This is true with KDE, AmiWM, XFCE
and some others. To run these window managers, begin with a simple X
terminal in
your nested X server:

<pre     class="programlisting">
xterm -display :1
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1a39580.0x1b32b00"></a></h2></div></div><p>
From that command line, start your window manager or desktop simply
by typing its command name, such as <tt  >xfce4-session</tt> for XFCE,
<tt  >amiwm</tt>
for AmiWM and so on.
</p><p>
After you've played with several window managers in this manner, you may
find yourself faced with a bit of a roadblock. Sometimes, in doing
this, I ran into a message (particularly from GNOME) that it could not
start, specifically <tt  >gnome-session: you're already running a session
manager</tt>. As I knew this wasn't the case, I checked to see what
the SESSION_MANAGER pointed to:

<pre     class="programlisting">
$ echo $SESSION_MANAGER
local/ultraman:/tmp/.ICE-unix/3132
</pre>
</p><p>
As you can see, I had leftover session information from a prior
run with a nested window manager. One option is to unset the
SESSION_MANAGER variable. Another is simply to remove the
troubling files, assuming, of course, that you are no longer running
your window manager:

<pre     class="programlisting">
$ rm /tmp/.ICE-unix/3132
rm: remove socket `/tmp/.ICE-unix/3132'? y
</pre>
</p><p>
It would appear, <span   class="foreignphrase"><i>mes amis</i></span>, that closing time is approaching
rapidly, so it's time for <span   class="foreignphrase"><i>la pi&egrave;ce de
r&eacute;sistance</i></span>&mdash;your desktop dessert, if
you will. Some of you may be asking, &ldquo;if I can run one nested
server, why not two or three?&rdquo; Starting a second nested server is simply
a matter of assigning a different display number. For the second,
type <tt  >Xnest -ac :2</tt> or <tt  >Xnest -ac
:3</tt> for the third and so on. In fact, you can run an Xnest inside of
another Xnest. Figure 3 shows an IceWM session running
inside a GNOME session, running inside a KDE session.
</p><div       class="mediaobject"><a href="7298f3.large.jpg"><img src="7298f3.jpg"></a><div class="caption"><p>
Figure 3. IceWM Nested inside of GNOME, Nested inside of KDE
</p></div></div><p>
As you can see, <span   class="foreignphrase"><i>mes amis</i></span>, there is enough here to satisfy the
greatest desktop gourmand among you,
<span   class="foreignphrase"><i>non</i></span>? As Robert Heinlein
might have said, &ldquo;to enjoy the full flavor of life, take big
bites&rdquo;
or in this case, run many different window managers and many desktops.
</p><p>
And now, closing time truly is upon us, but spend a little more time
exploring. Fran&ccedil;ois will refill your glasses one final time before
you go. Until next time, <span   class="foreignphrase"><i>mes amis</i></span>, let us all drink to one
another's health. <span   class="foreignphrase"><i>A v&ocirc;tre sant&eacute;! Bon
app&eacute;tit!</i></span>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1a39580.0x1f2b6f0"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
Window Managers for X: <a href="http://www.plig.org/xwinman" target="_self">www.plig.org/xwinman</a>
</p><p>
XFree86 Web Site: <a href="http://www.xfree86.org" target="_self">www.xfree86.org</a>
</p><p>
Marcel's Web Site (check out the wine page): <a href="http://www.marcelgagne.com" target="_self">www.marcelgagne.com</a>
</p></div></div></div>
<div class="authorblurb"><p>
Marcel Gagn&eacute; (<a href="mailto:mggagne@salmar.com">mggagne@salmar.com</a>) lives in Mississauga,
Ontario. He is the author of the newly published <span   class="emphasis"><em>Moving
to Linux: Kiss the Blue Screen of Death Goodbye!</em></span> (ISBN
0-321-15998-5) from Addison Wesley. His first book is the highly
acclaimed <span   class="emphasis"><em>Linux System Administration: A User's Guide</em></span>
(ISBN 0-201-71934-7). In real life, he is president of Salmar Consulting,
Inc., a systems integration and network consulting firm.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../119/toc119.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>