<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Best of Technical Support</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Our experts answer your technical questions.&#10;    "><meta name="keywords" content=""><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xc0c580.0xd03ab0"></a>Best of Technical Support</h1></div><div><div class="author"><h3 class="author">Various</h3></div><div class="issuemoyr">Issue #69, January 2000</div></div><div><p>
    Our experts answer your technical questions.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd04190"></a>X Marks the Spot</h2></div></div><p>My system worked fine for a few months, but now I'm facing
some problems with it. When using X, the system suddenly freezes.
Neither the keyboard nor the mouse responds. I can't
<span   class="bold"><b>telnet</b></span> to my computer&mdash;nothing
works. Log files tell nothing&mdash;just as if nothing happened&mdash;but I
have to boot my computer and hope
<span   class="bold"><b>fsck</b></span> can fix everything. This
happens about once a week and I don't have the slightest idea why.
The system is Red Hat 6 out-of-the-box with no updates. Tried
another video adapter, but that didn't change anything. Hardware:
AMD-233, 64MB, ATI 3d Rage Pro, 3c509, Seagate 32.  &mdash;Tony
S&ouml;derudd, tsoderud@cc.hut.fi</p><p>It's hard to tell what the problem is. One possible reason is
a bug in X; try upgrading to the latest stable XFree86 (3.3.5 at
the time I write this). Another possibility is some kind of
hardware/resource conflict, although since you say the problem
happens only once a week on average, it's not too likely. The last
option is simply bad hardware, like an overheating CPU (bad fan?)
or flaky memory. I believe that is the most likely alternative and
the freeze is actually completely unrelated to X. See
<a href="http://www.bitwizard.nl/sig11" target="_self">http://www.bitwizard.nl/sig11/</a>.  &mdash;Marc
Merlin, merlin@varesearch.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd043f8"></a>A Communications Problem</h2></div></div><p>For the last couple of years, my computer has been a small
server on the Internet. Its connection is via modem. I had no
problems the first year or so. On April 16, 1999, my
/var/adm/messages file filled up with garbage. After a couple of
weeks, I determined the phone company came to the wrong residence
and &ldquo;played&rdquo; with my phone lines while my modem was connected.
Ever since that time, my modem will randomly hang up without
dropping carrier. Linux still thinks it is connected to the
Internet, i.e., the <span   class="bold"><b>route</b></span>,
<span   class="bold"><b>ifconfig</b></span>... still show a
connection even though there isn't one. This doesn't happen every
time the modem disconnects. Sometimes this will happen a couple of
times a day; sometimes only once a month. Once it does happen,
there is no way to fix it, other than physically turning the modem
off and back on. I've tried replacing all
hardware: modem, modem cable, serial port(s), phone wiring, phone
jack. I've also tried compiling a new kernel and
<span   class="bold"><b>pppd</b></span>. Nothing has helped. What in
the world is happening and how do I fix it?  &mdash;Eric Trimmer,
eric@et.trimmer.org</p><p>There is a relatively simple solution, but you may need to
upgrade your kernel and PPP package to support it, depending on the
age of your actual installation. Use the
<b  >lcp-echo-interval</b> and
<b  >lcp-echo-failure</b> options to tell pppd to
terminate when it doesn't receive a certain number of
<span   class="bold"><b>ping</b></span> request responses.
<span   class="bold"><b>pppd</b></span> will then terminate and cycle
the connection when your physical layer goes down, whether or not
your modem is correctly telling Linux it has lost its link.  &mdash;Chad
Robinson, Chad.Robinson@brt.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd047c0"></a>Those Pesky .tgz Files</h2></div></div><p>The instructions Software Forge Inc. provided for installing
LinuxCAD are not really applicable to OpenLinux 2.2. What is the
best way to install software in a .tar or .tar.gz file on an
operating system that uses RPM?  &mdash;Wayde C. Gutman,
wcgutman@mwpower.net</p><p>You can actually install a
<span   class="bold"><b>tar</b></span> file just fine on an RPM-based
system. It is, however, better to have an RPM, since it keeps track
of the files installed. I believe you should be able to use
<span   class="bold"><b>alien</b></span> to convert your tar file
into an RPM:
<a href="http://kitenet.net/programs/alien" target="_self">http://kitenet.net/programs/alien/</a>.  &mdash;Marc
Merlin, merlin@varesearch.com</p><p>The tar.gz format is somewhat similar to .ZIP under other
operating systems. Usually, you'll just unpack the tar file,
following instructions found in the included README or equivalent
file.</p><p>Use
<b  >tar&nbsp;tvzf&nbsp;<i><tt>filename</tt></i></b>
to list the contents of a tar.gz file, and
<b  >tar&nbsp;xvzf&nbsp;<i><tt>filename</tt></i></b>
to extract it. <span   class="bold"><b>tar</b></span> is one of the
most important UNIX commands; check the introductory UNIX guides or
check <b  >info&nbsp;tar</b> and
<b  >man&nbsp;tar</b> to get detailed
information.  &mdash;Alessandro Rubini, rubini@prosa.it</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd04d40"></a>To Load or Not to Load</h2></div></div><p>I have tried to use function
<span   class="bold"><b>request_module</b></span> in my code to load
dynamic kernel modules. The request_module function itself is not a
problem, but the function
<span   class="bold"><b>kerneld_send</b></span>, which is called by
request_module. Every time I try to insert
(<span   class="bold"><b>insmod</b></span>) my module, which is
supposed to request the other module, I get the following error:
&ldquo;helloworld.o: unresolved symbol kerneld_send&rdquo;. Why can't
request_module find the kerneld_send function? I use Red Hat 5.0,
kernel 2.0.36RTL1.1.  &mdash;Kristiina Valtanen,
Kristiina.Valtanen@vtt.fi</p><p>At insmod time, the module is linked to the running kernel,
using the public symbol table exported by the kernel (shown in
/proc/ksyms). The function request_module (defined in
linux/module.h) is actually an in-line function, and it gets
expanded in-line at compile time. However, kerneld_send is not
in-line and must be located at link time. Since kerneld_send is not
exported, your module can't be loaded. The function is not
exported, because no module normally asks for kenreld
functionality. Unneeded internals are not exported. You can export
the function by hacking the file kernel/ksyms.c and rebooting a new
kernel.  &mdash;Alessandro Rubini, rubini@prosa.it</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd04fa8"></a>Support Your Local CD-ROM</h2></div></div><p>I am trying to install Linux 6.0 on my 486. I have run into
serious problems. Red Hat Linux 6.0 does not seem to recognize my
Sony CD-ROM. Several e-mails and phone calls to Technical Support
at Red Hat have not solved my problem. The error message I keep
getting is &ldquo;I could not mount your CD on device hdk&rdquo;. I was asked
to download the new boot image and try installing it again, but was
not successful. I was asked to give some parameters at the boot
prompt, again in vain. The last suggestion I got from tech support
is to buy a new CD-ROM. The CD I have is Sony Atapi CD76E. It is an
IDE controller. Is there anyone who could let me know how I can
work around this problem so that I don't have to buy another
CD-ROM?  &mdash;Srilakshmi, RSSri@aol.com</p><p>You say the installation is trying to mount the CD drive as
/dev/hdk&mdash;that's the 11th drive on your system! I suspect this is
not correct, and the kernel merely needs to be nudged toward the
correct device. Consider first the naming conventions for IDE
drives (including CD drives):</p><div class="itemizedlist"><ul type="disc"><li><p>First IDE drive on 1st controller:
/dev/hda</p></li><li><p>Second IDE drive on 1st controller:
/dev/hdb</p></li><li><p>First IDE drive on 2nd controller:
/dev/hdc</p></li><li><p>Second IDE drive on 2nd controller:
/dev/hdd</p></li></ul></div><p>You should see the pattern. What you probably need to do is
determine which /dev device points correctly to your drive, and
tell the Linux kernel what it is at the <b  >boot:</b>
prompt. For example, if you have two IDE controllers on your system
(very common), the first controller has one IDE hard drive and the
second controller has your CD drive. Thus, you should point your
kernel to /dev/hdc. At the <b  >boot:</b> prompt, type:
<pre     class="programlisting">
hdc=cdrom
</pre>


There will be something before this on the
<b  >boot:</b> line that needs to be typed in; probably
<b  >linux</b> or <b  >install</b>. Red Hat
support should be able to tell you what needs to precede the line
above.  &mdash;Erik Ratcliffe, erik@calderasystems.com
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd05688"></a>Control Issues</h2></div></div><p>I'm using Linux and I'm wondering how I can control a TELNET
session from a shell script. In DOS, I would use a keyboard buffer,
but it seems this is not available in Linux. I would like to send
characters, wait for a special response, then send something again.
How can I do that?  &mdash;Thomas Lienhard, tl@tlienhard.com</p><p>You can open a pipe to telnet and send data to its STDIN and
read responses from STDOUT. Using the keyboard buffer makes no
sense in UNIX, as no process accesses the keyboard; they just read
from standard input. If using the telnet command doesn't work, you
can try <span   class="bold"><b>netcat</b></span> (available within
Debian). Also, note that most languages support TCP connections;
<span   class="bold"><b>expect</b></span>, for example, is a Tcl
extension designed to perform exactly the task you need to
accomplish: sending input and expecting responses.  &mdash;Alessandro
Rubini, rubini@prosa.it</p><p>What you are looking for is expect. This is exactly what it
was designed for. <b  >man&nbsp;expect</b> on any Linux
box with it installed will give you the information you need, or
you can download it from
<a href="http://expect.nist.gov" target="_self">http://expect.nist.gov/</a>
if you don't already have it. &mdash;Mark Bishop,
mark@bish.net</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd059a0"></a>Executions 'R' Us</h2></div></div><p>I'm using the KDE window manager, KDM and tcsh. My
distribution is Mandrake 6.0. In my home directory, I'm keeping
.cshrc and .login for my own initializations, but the problem is
that after logging to an X session and invoking any terminal (xterm
or kvt), the .login is not executed at all (.cshrc executes fine).
Both files (.cshrc and .login) have execute permission and properly
execute in a normal (batch) session. Where and how do I need to
tell X (and/or KDM) to execute my .login after start-up?  &mdash;Valentine
Kouznetsov, vkuznet@fnal.gov</p><p>When you log in to the computer using a display manager, no
login shell is started, so no .login or .bashlogin is sourced. The
display manager handles the authentication and runs your display
configuration without passing through a shell. You need to perform
all of your initialization from within .cshrc. That's one of the
reasons I don't run a display manager at all.  &mdash;Alessandro Rubini,
rubini@prosa.it</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc0c580.0xd05b00"></a>Need Fire Protection</h2></div></div><p>Is it possible to run a Linux firewall using IP mask
connecting a small network to the Net using a cable modem?  &mdash;Tom,
tlross@home.com</p><p>Yes, it is the easiest firewall configuration. Just
run</p><pre     class="programlisting">
ipfwadm -a accept -m
</pre><p>or an equivalent
<span   class="bold"><b>ipchains</b></span>
command.  &mdash;Alessandro Rubini, rubini@prosa.it
</p></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../069/toc069.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>