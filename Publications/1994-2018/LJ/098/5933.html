<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Silicon Grail RAYZ</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    This month Robin looks at how special effects are assembled&#10;    with RAYZ in several new and upcoming motion pictures.&#10;    "><meta name="keywords" content="RAYZ, graphics, film"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1ecd580.0x1fc4ab0"></a>Silicon Grail RAYZ</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #98, June 2002</div></div><div><p>
    This month Robin looks at how special effects are assembled
    with RAYZ in several new and upcoming motion pictures.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1ecd580.0x1fc5660"></a></h2></div></div><p>Last month we looked at Nothing Real's
Shake, compositing software used on many major motion pictures to
add special effects or to overlay animation. Nothing Real was
recently acquired by Apple, which plans to use its fast scanline
rendering technology in future Apple products. Shake's uncertain
future on Linux may benefit competitor Silicon Grail's RAYZ.
</p><p>Both RAYZ and Shake use an interactive scene-graph interface
for defining how effects are assembled. While similar from a
user-interface standpoint, RAYZ doesn't use the scanline rendering
approach of Shake. &ldquo;I think caching schemes are more important
today than scanline algorithms for optimizing rendering&rdquo;, says
Silicon Grail President Ray Feeney. &ldquo;Memory is much cheaper now.
Scanlines can actually be slower than keeping more blocks in
RAM&mdash;for example, with rotations.&rdquo;</p><p>Hollywood effects company Flash Film Works used RAYZ on Linux
for three recent Warner Bros. productions: the Arnold
Schwarzenegger action film <span   class="emphasis"><em>Collateral Damage</em></span>,
the Robin Williams dark comedy <span   class="emphasis"><em>Death to
Smoochy</em></span> and the Eddie Murphy gangster sci-fi film
<span   class="emphasis"><em>Pluto Nash</em></span> (to be released August 16, 2002).
&ldquo;RAYZ has the basic features a compositor should have, plus warp,
morph and CineSpeed&rdquo;, says Flash Film Works Technical Supervisor
Dan Novy. RAYZ is a new codebase. Silicon Grail's previous
compositor, Chalice, didn't support Linux. &ldquo;Silicon Grail held
discussion groups and polled Chalice users over a year for
power-user input&rdquo;, Novy says. &ldquo;The RAYZ flipbook is just amazing.
It can display 2k resolution in real time. Nodes will cache ahead
as it is playing. I can work on the shot as it runs, do color-match
changes in real time.&rdquo;</p><div       class="mediaobject"><img src="5933f1.jpg"><div class="caption"><p>
A simple color correction in RAYZ. Top-left is the flipbook preview
player. Bottom-right panel is a tree-graph view of attached
filters. Bottom-left panel contains settings for selected filter.
</p></div></div><p>&ldquo;In <span   class="emphasis"><em>Death to Smoochy</em></span> RAYZ did a lot of
compositing of characters in cars and boats&rdquo;, notes Novy. &ldquo;We
used RAYZ to add muzzle flashes to guns and for street reflections.
We did a lot of 3-D effects on top of 2-D plates.&rdquo; In one scene,
the RAYZ warp and morph feature was used to repair a piece of a
physical set that broke during a take. Although other takes had the
set intact, the director felt that the take with the set problem
had the best performance.</p><p>&ldquo;For <span   class="emphasis"><em>Collateral Damage</em></span> we did a lot of
retiming&rdquo;, says Novy. &ldquo;Retiming 24fps into 36fps creates slow
motion where none was shot.&rdquo; The RAYZ software creates tweens,
extrapolating the missing frames. &ldquo;Retiming may not be flawless,
but it's better than double framing. REALVIZ ReTimer is an
alternative, but that isn't built-in and would have to be rendered
out.&rdquo; In <span   class="emphasis"><em>Collateral Damage</em></span>, a lot of
compositing was done to place Schwarzenegger in front of
explosions.</p><div       class="mediaobject"><img src="5933f2.jpg"><div class="caption"><p>
For <span  class="emphasis"><em>Collateral Damage</em></span>, Flash Film Works used
RAYZ to composite actors working in front of a blue screen over
background footage featuring an explosion, plus additional elements
of explosions, debris and a falling pole were added.
</p></div></div><div       class="mediaobject"><img src="5933f3.jpg"><div class="caption"><p>
For <span  class="emphasis"><em>Collateral Damage</em></span>--the helicopter on the
left is real. The one on the right is a 3-D creation built in Maya
and composited into the shot using RAYZ.
</p></div></div><p>For <span   class="emphasis"><em>Pluto Nash</em></span>, RAYZ composited in
moonscapes created in LightWave on Windows NT and blue-screened
with Ultimatte. &ldquo;The RAYZ net license Ultimatte feature is
important to us. Digital Fusion, Combustion and After Effects
require a dongle to use Ultimatte. You can't float to any machine
like RAYZ.&rdquo; For a 3-D theme-park ride film, Flash Film Works is
developing a plugin to distort the pixels to create parallax. A
smoke plume can be adjusted to match the inter-ocular distance and
create a composite for each eye. Their plugins are in Perl and C++.
Novy is considering a switch from LightWave to Houdini, a popular
3-D package for Linux.</p><p>After Kodak stopped making the Cineon compositor, Silicon
Grail acquired the technology and incorporated it into RAYZ as
Grain/Degrain, Sharpen and CineSpeed. &ldquo;A unique thing about RAYZ
is it can keep data in Cineon 10-bit log color format&rdquo;, points out
Novy. &ldquo;Every other compositor makes you convert to 16-bit linear
or to float. With RAYZ you can convert or keep it 10-bit all the
way. It will do the internal math with logs.&rdquo; Video monitors are
8-bit linear and need LUTs (colorspace lookup tables) to
approximate film. &ldquo;Because it was part of the Cineon technology
incorporated into RAYZ, it can do full-monitor calibration to bring
all our monitors into peak performance.&rdquo;</p><p>&ldquo;RAYZ runs on all of our operating systems and all our
hardware&rdquo;, notes Novy.</p><div class="blockquote"><blockquote class="blockquote"><p>We're even using RAYZ on Alpha workstations, the
64-bit 21264. Back when we purchased these Alphas for
<span   class="emphasis"><em>Deep Blue Sea</em></span> there was nothing faster, but a
year and a half later they were in a corner doing nothing. Because
of up-to-date Alpha support in RAYZ, we could resurrect this
obsolete but fast hardware. We're moving toward Debian because Red
Hat support for Alpha is lagging. I think Linux will dominate the
motion picture industry like SGI did, but I am not sure about Red
Hat.</p></blockquote></div><p>Santa Monica-based Island Fever Productions is using RAYZ for
visual effects in the 3-D, large-format film <span   class="emphasis"><em>Haunted
Lighthouse</em></span> starring Lea Thompson. Due for summer 2002
release at Busch theme parks, the theaters showing the film will
incorporate physical effects such as vibrating seats, water and
odors.
</p><p>&ldquo;We're using RAYZ for all the compositing on this movie&rdquo;,
says Island Fever President and Visual Effects Supervisor Nick
Ilyin. Compositing a large-format film shot in 65mm is especially
demanding. The film is scanned at 4k resolution instead of the
usual 2k typical with a 35mm film. &ldquo;At 2k resolution performance
is pretty reasonable, but at 4k RAYZ is handling four times the
normal resolution of 35mm. Then, double that for 3-D. Our machines
need a lot more memory to handle that. We use 2GB dual-processor
workstations.&rdquo; The 65mm scans are done at IMAGICA and delivered in
Cineon DLT format at 4,096 &times; 1,536 resolution, stereoscopic.
The finished 70mm 5-perf prints will be shown using two projectors
and with Polaroid glasses for 3-D.</p><p>Island Fever Productions also uses Linux to create
commercials, including three for Orkin showing cockroaches crawling
on TV screens. Four commercials for Meijer Toy City feature funny
animated penguins. &ldquo;We created a penguin sculpture that was
digitized and brought into Maya for 3-D character animation, then
to Houdini for deformation and lighting and compositing, and then
output to Pixar RenderMan&rdquo;, says Ilyin. &ldquo;We have written a lot of
custom code to integrate that pipeline as well as a custom lighting
package for Houdini.&rdquo; Houdini's limited built-in compositor isn't
powerful enough for projects like <span   class="emphasis"><em>Haunted
Lighthouse</em></span>, which is why Island Fever recently moved to
RAYZ for compositing.</p><div       class="mediaobject"><img src="5933f4.jpg"><div class="caption"><p>
For a Meijer Toy City commercial, 3-D penguins created by Island
Fever Productions using Houdini on Linux. MPEG copies of these
amusing commercials are on-line at
<a href="http://www.island-fever.com/meijer.html" target="_self">www.island-fever.com/meijer.html</a>.
</p></div></div><p>Ilyin says Linux is definitely getting there, but wishes it
were more dependable. He sometimes finds his renderfarm locked up,
a problem that the industry generally attributes to issues being
worked on in the Linux implementation of NFS. &ldquo;We're hoping to
have everything eventually in Linux, but support can be a problem.
Red Hat support isn't enough.&rdquo; Island Fever uses Linux Red Hat 7.1
and 7.2, SGI IRIX and Windows 2000.</p><p>Drew Perttula is establishing a RAYZ community web site at
<a href="http://rayz.bigasterisk.com" target="_self">rayz.bigasterisk.com</a>
to offer tips, examples, discussions and code (plugin code and
external utilities). As a freelance effects compositor, Perttula
has worked on several independent films. &ldquo;I stumbled upon the beta
version of RAYZ back in April 2001&rdquo;, says Perttula.</p><div class="blockquote"><blockquote class="blockquote"><p>Since then I've been very active, with more than
600 feature and bug reports. Earlier versions of RAYZ seemed
prematurely focused on optimization. Stability has gotten much
better lately. In a few weeks the 2.2 version will be coming out
with some exciting changes for plugin writers.</p></blockquote></div><p>For indie film <span   class="emphasis"><em>Less Miserables</em></span>, Perttula
is working on a background replacement for a scene shot on Mission
Street in San Francisco. Where the street background has the wrong
look, it is being adjusted to look more like Mission Street. &ldquo;It's
difficult because the actress' wardrobe presents very soft edges
with feathers. Fortunately, I'm able to adapt a University of
Washington friend's research to find edges, then import the result
into RAYZ.&rdquo;
<div       class="mediaobject"><img src="5933f5.jpg"></div>
<div       class="mediaobject"><img src="5933f6.jpg"><div class="caption"><p>
For <span  class="emphasis"><em>Less Miserables</em></span>, a background replacement
made difficult by soft edges with feathers (before and after).
</p></div></div>

</p><p><span   class="emphasis"><em>Less Miserables</em></span> is a comedy about what
can go wrong on a motion picture set. Director Justin Lomba was
turned down by HBO's Project Greenlight but produced the film
anyway on a $20,000 budget. In one scene, the gag is that a grip
shines a reflector directly into the lens of the camera, blinding
the cameraman. &ldquo;The reflector as shot is actually in a shadow, so
we have to add the flare in post using RAYZ&rdquo;, explains Perttula.
&ldquo;In another shot we're hoping to get a friend at PDI to model a
3-D camera crane that I'll composite in to make it look like a
bigger movie set.&rdquo;</p><div       class="mediaobject"><a href="5933f7.large.jpg"><img src="5933f7.jpg"></a><div class="caption"><p>
For <span  class="emphasis"><em>Less Miserables</em></span>, lens flare effect added
to reflector by RAYZ in a scene where a clumsy grip holding a
reflector is supposed to be inadvertently blinding the camera
operator.
</p></div></div><p>Another shot for <span   class="emphasis"><em>Less Miserables</em></span> needs
people added:</p><div class="blockquote"><blockquote class="blockquote"><p>A lunchtime scene at a fountain in San Francisco
should be filled with people, but the shot was actually done on a
weekend when it was more deserted. If we had been called in earlier
we might have simply had some friends walk in the background as
extras. It is going to take some work to comp the crowds in
afterward.</p></blockquote></div><p>&ldquo;Projects I worked on at PDI include indie
<span   class="emphasis"><em>Memories of You</em></span>&rdquo;, says Perttula.
<div class="blockquote"><blockquote class="blockquote"><p>People at PDI work on independent projects all
the time, and I was brought in by my friend Marlon Montgomery.
Director Shane Pollack wanted red rain and other supernatural
effects, such as an actor crying a blue tear. That was fairly
complex, with a couple hundred nodes in RAYZ and the rain from Maya
and stock footage (from
<a href="http://www.artbeats.com" target="_self">www.artbeats.com</a>).</p></blockquote></div>

</p><p>
<div       class="mediaobject"><a href="5933f8.large.jpg"><img src="5933f8.jpg"></a><div class="caption"><p>For </p></div></div>
</p><p>For his own project, <span   class="emphasis"><em>Golden Memories</em></span>,
Perttula demonstrates a shot from a scene where a woman on vacation
is feeding her fish by sending envelopes of fish food by mail. As
it falls in the fish tank the envelope disintegrates.
<span   class="emphasis"><em>Golden Memories</em></span> screened recently at
ROBOTMEDIA, a monthly festival in Berkeley. &ldquo;I'm taxing RAYZ by
making each fragment of the envelope a block. I used Python and
Pygame to create the blocks, so I don't need to manually create all
the nodes in the RAYZ GUI.&rdquo;</p><p><a href="5933s1.html" target="_self">Using Python with
RAYZ</a></p><p>&ldquo;RAYZ appeals to artists because it has a simpler interface
than Shake&rdquo;, says Perttula.</p><div class="blockquote"><blockquote class="blockquote"><p>And for programmers, RAYZ has a much better
documented API than Shake. With its text-based file formats you can
easily create little RAYZ accessories. RAYZ doesn't have a
statistics gatherer but I built one in ten minutes. I'm using Perl
and Graphviz to create a pretty shot tree diagram of what went into
RAYZ and what came out.</p></blockquote></div><p>Perttula says that the ease of having Perl create an overview
of how a whole project works is a testament to how easy it is to
read RAYZ files and do interesting things with them.
</p><p><a href="5933s2.html" target="_self">The Mouse that Roared</a></p><p>To get RAYZ, download the license manager
(license_manager.linux.intel.tar.gz) and the application
(rayz-2.0.i386.rpm) separately from the Silicon Grail web site.
Using alien we converted the RPM to install on our Debian system.
The alien tool handles conversions between Red Hat RPM, Debian deb,
Stampede slp and Slackware tgz formats.</p><pre     class="programlisting">
alien -k rayz-2.0.i386.rpm
dpkg-deb -c rayz_2.0-20020129_i386.deb
dpkg -i rayz_2.0-20020129_i386.deb
cd /usr
tar xvfz /install/compositor/rayz/z/
    license_manager.linux.intel.tar.gz
grail/hostinfo
grail/Install
grail/grailadmin -r localhost
grail/graild -l /var/log -k /usr/grail
rayz
</pre><p>Using <b  >dpkg-deb -c</b> reveals where files will
be placed without extracting them. Many Linux programs fail to
mention how to launch them, but dpkg-deb makes that easy to figure
out. (Using dpkg-deb -Xe is an option if you ever want to simply
extract a deb as though it were a tar file without installing it.)
Since we see that the main directory is /usr/grail, we chose to
install the license manager there, too. The hostinfo command
displays your machine's ID number to send to Silicon Grail to get a
license key. Rather than installing the license manager as a
d&aelig;mon, we ran it manually.
</p><p>The RAYZ development team consists of five developers, all
working on Linux workstations. &ldquo;We made a strategy decision three
years ago to focus on Linux&rdquo;, says RAYZ Product Manager Craig
Zerouni. &ldquo;It was clear to us then that Linux would be the place to
be.&rdquo; Windows and SGI IRIX versions of RAYZ are built from a single
Linux-developed codebase of about a million lines of code. Tools
used include gcc, g++, CVS and Jam. &ldquo;We recently switched from
<span   class="bold"><b>make</b></span> to Jam&rdquo;, says Zerouni. &ldquo;Our
time for a recompile dropped from hours to minutes because Jam is
smarter than make depends.&rdquo; Head of R&amp;D Kimball Thurston adds,
&ldquo;We can't use autoconf or tools like that cross-platform, but Jam
works the same across all platforms.&rdquo; Using Jam requires rewriting
Makefiles into jamfiles. A familiar project that uses Jam is
FreeType.</p><p>At $9,900 US per GUI and $2,900 US per render thread, RAYZ
isn't cheap. However, Silicon Grail is cooperative with plugin
developers and university users. Silicon Grail welcomes developers
to become third-party plugin providers. &ldquo;You don't have to be a
studio to be involved with RAYZ&rdquo;, says Zerouni.</p><div class="blockquote"><blockquote class="blockquote"><p>Our plugin SDK, documentation and examples are
included with the evaluation download. You can use all of RAYZ
internal operations (for example, image rotation) as building
blocks for your own code. If you just want to develop we can set up
a three-month trial license beyond the one-month evaluation license
available with the download. Depending on what you have in three
months that may be extended.</p></blockquote></div><p>Companies such as Martian Labs are creating RAYZ plugins, as
well as The Foundry in the UK with Keylight and Photron with
Primatte.
</p><p><a href="5933s3.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
       email: <a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>
       </p><p><span   class="bold"><b>Robin
      Rowe</b></span>
      (<a href="mailto:robin.rowe@movieeditor.com">robin.rowe@movieeditor.com</a>)
      is a partner in
      <a href="http://MovieEditor.com" target="_self">MovieEditor.com</a>, a
      technology company that creates internet and broadcast video
      applications. He has written for <span   class="emphasis"><em>Dr. Dobb's Journal</em></span>, the
      <span   class="emphasis"><em>C++ Report</em></span>, the <span   class="emphasis"><em>C/C++ Users
      Journal</em></span> and <span   class="emphasis"><em>Data Based
      Advisor</em></span>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../098/toc098.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>