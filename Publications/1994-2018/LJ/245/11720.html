<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Letters</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x12e5580.0x13dcac0"></a>Letters</h1></div></div><div class="qandaset"><a name="N0x12e5580.0x13dcfe8"></a><h4 class="title"><a name="N0x12e5580.0x13dcfe8"></a>
<span   class="emphasis"><em>Linux Journal</em></span>&mdash;NSA's &ldquo;Extremist
Forum&rdquo;</h4><p>
Just came across:
&ldquo;If you visit the forum page for the popular <span   class="emphasis"><em>Linux
Journal</em></span>, dedicated to the
open-source operating system Linux, you could be fingerprinted regardless
of where you live because the XKEYSCORE source code designates the Linux
Journal as an 'extremist forum'&rdquo; (<a href="http://www.defenseone.com/technology/2014/07/if-you-do-nsa-will-spy-you/88054/?oref=govexec_today_nl" target="_self">www.defenseone.com/technology/2014/07/if-you-do-nsa-will-spy-you/88054/?oref=govexec_today_nl</a>).

<br><br>&mdash;<br> 
Andy Bach  <br><br>
</p><p>
Crazy, isn't it? Although it's frustrating to draw the attention of the NSA,
we don't plan on changing how we do things. We're advocates of freedom, and
if anything, this makes us more so!&mdash;Shawn Powers
</p><a name="N0x12e5580.0x13dd510"></a><h4 class="title"><a name="N0x12e5580.0x13dd510"></a>
Vim Macros</h4><p>
Regarding Kyle Rankin's &ldquo;The Only Mac I Use&rdquo; article in the
July 2014 issue: I knew all about macros. What I didn't know was what &lt;ctrl&gt;-a did.
That is going to save me so much time in the future.

<br><br>&mdash;<br> 
Rick   <br><br>
</p><a name="N0x12e5580.0x13dd7d0"></a><h4 class="title"><a name="N0x12e5580.0x13dd7d0"></a>
Extremist Bonus Points?</h4><p>
After the latest news regarding the XKEYSCORE program, I felt it was a great
time to subscribe. Now that I subscribed, do I get a free upgrade to
extremist financier? 
</p><p>
Chris at <a href="http://jupiterbroadcasting.com" target="_self">jupiterbroadcasting.com</a> brought me&mdash;LAS
ep320.

<br><br>&mdash;<br> 
Sean Rodriguez  <br><br>
</p><p>
Although we haven't seen any &ldquo;upgrades&rdquo; yet ourselves, I must admit I'm a
little more nervous than usual when I go through airport security
now!&mdash;Shawn Powers
</p><a name="N0x12e5580.0x13ddc48"></a><h4 class="title"><a name="N0x12e5580.0x13ddc48"></a>
Leap Year Problems</h4><p>
Regarding Dave Taylor's &ldquo;Days Between Dates&rdquo; article in the
July 2014 issue, I think he has a big problem with the valid_date.sh way of checking for
leap year:


<pre     class="programlisting">
harrie@v1:~&gt; ./lj243_valid_date.sh 2 29 1776
checking for feb 29 : was 1776 a leap year?
Yes, 1776 was a leapyear, so February 29, 1776 is a valid date.
harrie@v1:~&gt; ./lj243_valid_date.sh 2 29 1929
checking for feb 29 : was 1929 a leap year?
Yes, 1929 was a leapyear, so February 29, 1929 is a valid date.
</pre>
</p><p>
Well, 1929 was not a leap year.
Using <tt  >grep -w</tt> solves this:


<pre     class="programlisting">
harrie@v1:~&gt; ./lj243_valid_date-w.sh 2 29 1929
checking for feb 29 : was 1929 a leap year?
Oops, 1929 wasn't a leapyear, so February only had 28 days.
harrie@v1:~&gt; cat lj243_valid_date-w.sh
mon=$1; day=$2; year=$3
if [ $mon -eq 2 -a $day -eq 29 ] ; then
echo checking for feb 29 : was $3 a leap year?
leapyear=$(cal 2 $year | grep -w 29)
if [ ! -z "$leapyear" ] ; then
echo "Yes, $year was a leapyear, so February 29, $year \
is a valid date."
else
echo "Oops, $year wasn't a leapyear, so February only \
had 28 days."
fi
fi
</pre>


<br><br>&mdash;<br> 
Harrie Wijnans  <br><br>
</p><p>
<span   class="bold"><b>Dave Taylor replies:</b></span> Yup, someone else also pointed out the flaw in my leap year
test. Got a much better one in the next column.
Thanks for writing in, Harrie!

</p><p>
<span   class="bold"><b>Harrie Wijnans replies:</b></span> Yeah,
my solution, of course, fails for the year 29.
Adding <tt  >tail</tt> solves that (and the
<tt  >-w</tt> flag for <tt  >grep</tt>
has no real meaning anymore):

<pre     class="programlisting">
leapyear=$(cal 2 $year | tail +3 | grep -w 29)
</pre>
</p><p>
<span   class="bold"><b>Dave Taylor replies:</b></span> Nah, the solution is to take a sharp left turn and think
about it differently. The question isn't &ldquo;is there a Feb 29&rdquo;, but
&ldquo;how many days are in the year&acirc;&rdquo; So, with help from GNU date:

<pre     class="programlisting">
$ date -d 12/31/1929 +%j
365
$ date -d 12/31/1932 +%j
366
</pre>
</p><p>
With this test, you can see that 1932 was a leap year, but 1929 wasn't.
</p><p>
<span   class="bold"><b>Harrie Wijnans replies:</b></span>
That one fails for years &lt; 1901:

<pre     class="programlisting">
harrie@v1:~&gt; date -d 1901/12/31
Tue Dec 31 00:00:00 AMT 1901
harrie@v1:~&gt; date -d 1900/12/31
date: invalid date `1900/12/31'
</pre>
</p><p>
That is, for the date on my Linux (openSUSE 12.1), and it also fails for
12/31/1900:


<pre     class="programlisting">
harrie@v1:~&gt; date --version
date (GNU coreutils) 8.14
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
 &#8618;&lt;http://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie.
</pre>
</p><p><span   class="bold"><b>
Dave Taylor replies:</b></span>
Actually, here's the cleanest version of all of this:


<pre     class="programlisting">
function isleap
{
  # If you have GNU date on your Linux system, this is superior:
  #   leapyear=$(date -d 12/31/$1 +%j | grep 366)

  # If you don't have GNU date (Mac OS X doesn't, for example), 
  # use this:

  leapyear=$(cal -j 12 $1 | grep -E '[^12]366')
}
</pre>
</p><p>
But, there's something else going on then, because I also have date 8.4, and
it works fine:

<pre     class="programlisting">
$ date -d 12/31/1844 +%j
366
$ date -d 12/31/1810 +%j
365
</pre>
</p><p>
Hmm...
</p><p>
<span   class="bold"><b>Harrie Wijnans replies:</b></span>
The date.c from the 18.4 that I got from
<a href="ftp://rpmfind.net/linux/sourceforge/m/ma/magiclinux-plus/Source26/coreutils-8.14-1mgc25.src.rpm" target="_self">rpmfind.net/linux/sourceforge/m/ma/magiclinux-plus/Source26/coreutils-8.14-1mgc25.src.rpm</a>
uses <tt  >parse_datetime</tt> to fill a struct tm, which has:


<pre     class="programlisting">
/* Used by other time functions.  */
struct tm
{
  int tm_sec;           /* Seconds.     [0-60] (1 leap second) */
  int tm_min;           /* Minutes.     [0-59] */
  int tm_hour;          /* Hours.       [0-23] */
  int tm_mday;          /* Day.         [1-31] */
  int tm_mon;           /* Month.       [0-11] */
  int tm_year;          /* Year - 1900.  */
  int tm_wday;          /* Day of week. [0-6] */
  int tm_yday;          /* Days in year.[0-365] */
  int tm_isdst;         /* DST.         [-1/0/1]*/

#ifdef  __USE_BSD
  long int tm_gmtoff;       /* Seconds east of UTC.  */
  __const char *tm_zone;    /* Timezone abbreviation.  */
#else
  long int __tm_gmtoff;     /* Seconds east of UTC.  */
  __const char *__tm_zone;  /* Timezone abbreviation.  */
#endif
};
</pre>
</p><p>
Apparently, openSUSE library does not accept the year field to be &lt;= 0.
Sorry, I'm lost
here. I'm not that experienced in Linux C programming, and lib/parse-datetime.y even
uses bison, which I hardly ever used.
</p><p>
Beware of the <tt  >cal -j</tt> you gave as an example. Try it
for 2000, which is missed as a leap
year. (Are we lucky it was a leap year? Otherwise, the
&ldquo;millennium-bug&rdquo;
would have been much more severe.)
</p><p>
This is because there, 366 is at the start of the line, so there are no characters in front
of it, hence it does not match <tt  >[^12]366</tt>. An extra
<tt  >-e ^366</tt> would solve that and
still not see 1366 or 2366 as leap years; 366 still would be considered a leap year.
</p><p>
I thought about the <tt  >cal 2 $year</tt>, and <tt  >grep
-v February</tt>, but that is language-dependent. (Try
<tt  >LANG=nl_NL.UTF8 cal 2 2012</tt> or
<tt  >fr_FR.UTF8</tt>&mdash;no February
in there.)
</p><p>
I'd say, the person who claims creating scripts for everyone and every
environment is simple, never tried it.
</p><p>
Looking forward to reading your next column.
</p><a name="N0x12e5580.0x13d5ad8"></a><h4 class="title"><a name="N0x12e5580.0x13d5ad8"></a>
Letters?</h4><p>
It is 19.48 GMT on 9 July 2014. I only say this in case at this point
in time there is a problem with your system. Reading my
<span   class="emphasis"><em>LJ</em></span>, I followed the
link to the new letters &ldquo;page&rdquo; to find just two letters there. There 
always were more when they were included in the magazine (print and of course
digital). Only two! I cannot believe that <span   class="emphasis"><em>LJ</em></span> readers have been that
quiet.

<br><br>&mdash;<br> 
Roy Read  <br><br>
</p><p>
The past couple months, we've been experimenting with moving Letters to the
Editor to the Web, or at least partially to the Web. We received a lot of
feedback, and so we have put things back the way they used to be. We appreciate
the feedback, and really do listen!&mdash;Shawn Powers
</p><a name="N0x12e5580.0x13d5f50"></a><h4 class="title"><a name="N0x12e5580.0x13d5f50"></a>
Dave Taylor's June 2014 Work the Shell Column</h4><p>
The first attempt at running Dave's script on Solaris 8 failed because
the default Solaris shell in Solaris 10 and before does not support the
<tt  >$()</tt> syntax.
</p><p>
The issue after switching to /bin/bash appears to be likely a cut-and-paste error. The script works as is for me, but if you modify the first
sed replacement so that the space is removed:

<pre     class="programlisting">
myPATH="$(echo $PATH | sed -e 's//~~/g' -e 's/:/ /g')"
</pre>
</p><p>
Then the output is a sed error, which matches your published results:

<pre     class="programlisting">
First RE may not be null
0 commands, and 0 entries that weren't marked executable
</pre>

<br><br>&mdash;<br> 
Brian   <br><br>
</p><p>
<span   class="bold"><b>Dave Taylor replies:</b></span> thanks for the
update. It's been a while since I had access to a
Solaris system! 
</p><a name="N0x12e5580.0x13d6478"></a><h4 class="title"><a name="N0x12e5580.0x13d6478"></a>
Bug in Dave Taylor's Days Between Dates Script</h4><p>
Dave's leap year test in the July 2014 issue contains a little bug. He uses:

<pre     class="programlisting">
leapyear=$(cal 2 $year | grep '29')
</pre>
</p><p>
which looks for 29 in a calendar output. If 29 is present, it is supposed to be a
leap year. However, if the user tries to find out if 2029 is a leap year, the
script will fail, because it does contain 29 in the output, even though it can
never be a leap year.
A better version of this test would be:

<pre     class="programlisting">
leapyear=$(cal -h 2 $year | tail -n 2 | grep '29')
</pre>
</p><p>
This will look for 29 only in the last 2 lines of the calendar. And, it also
will omit the highlighting of today's date, just in case it is February 29 today. A
highlighted 29 would not be found by grep.

<br><br>&mdash;<br> 
San Bergmans  <br><br>
</p><p>
<span   class="bold"><b>Dave Taylor replies:</b></span> Another good solution to a problem that a number of people
have pointed out, San!
</p><p>
Here's my latest solution to that problem, one requiring GNU date:

<pre     class="programlisting">
leapyear=$(date -d 12/31/$1 +%j | grep 366)
</pre>
</p><p>
A different approach, for sure!
Thanks for writing.
</p><a name="N0x12e5580.0x13d6aa8"></a><h4 class="title"><a name="N0x12e5580.0x13d6aa8"></a>
Digital Encryption and a Random Bit Generator</h4><p>
A printable poster of an unbreakable encryption algorithm declassified by the NSA
can be downloaded from <a href="http://www.tag.md/public" target="_self">www.tag.md/public</a>.
</p><p>
In addition, there is a POSIX C implementation of a digital non-deterministic
random bit generator.


<br><br>&mdash;<br> 
Mark Knight  <br><br>
</p><p>
Cool stuff, thanks Mark!&mdash;Shawn Powers
</p><a name="N0x12e5580.0x13d6ec8"></a><h4 class="title"><a name="N0x12e5580.0x13d6ec8"></a>
Comments on Dave Taylor's June 2014 Work the Shell Column</h4><p>
Solaris 8 was actually released in 2000, not 2004.

<br><br>&mdash;<br> 
Peter Schow  <br><br>
</p><p>
<span   class="bold"><b>Dave Taylor replies:</b></span> Bah, and I looked it
up on-line too. Thanks for the update. Now
for the real question: are you still running it, Peter?

</p><p>
<span   class="bold"><b>Peter Schow replies:</b></span> No, I run the
latest-and-greatest Solaris, but there are
stories about
Solaris 7 (~1998) still in production out there.
</p><p>
Enjoy your column!
</p></div><div class="sidebar"><p class="title"><b>Write <span   class="emphasis"><em>LJ</em></span> a Letter</b></p><p>
We love hearing from our readers. Please send us your comments and feedback
via
<a href="http://www.linuxjournal.com/contact" target="_self">www.linuxjournal.com/contact</a>.
</p></div><div class="sidebar"><p class="title"><b>Photo of the Month</b></p><p>
Remember, send your Linux-related photos to
<a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>!
</p></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../245/toc245.html">Issue Table of Contents</a>
    <a class="link3" href="../245/11720.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>