<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Product Review: Pro-Lite Scrolling Message Signs</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    A review of the Pro-Lite Tru-Color II PL-M2014R, an&#10;    affordable multi-color LED scrolling message board that is&#10;    capable of being controlled by a standard RS-232 serial&#10;    port.&#10;    "><meta name="keywords" content="message, signs, product, review"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1bb3580.0x1caaab0"></a>Product Review: Pro-Lite Scrolling Message Signs</h1></div><div><div class="author"><h3 class="author">Walter Stoneburner</h3></div><div class="issuemoyr">Issue #62, June 1999</div></div><div><p>
    A review of the Pro-Lite Tru-Color II PL-M2014R, an
    affordable multi-color LED scrolling message board that is
    capable of being controlled by a standard RS-232 serial
    port.
    </p></div></div><div       class="mediaobject"><img src="2823f1.jpg"></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1cab5b0"></a></h2></div></div><div class="itemizedlist"><ul type="disc"><li><p>Manufacturer: Pro-Lite</p></li><li><p>E-mail: info@prolite.com</p></li><li><p>URL: http://www.pro-lite.com/</p></li><li><p>Price: $150 US</p></li><li><p>Author: Walt Stoneburner</p></li></ul></div><p>The Pro-Lite Tru-Color II PL-M2014R is an affordable
multi-color LED scrolling message board that is capable of being
controlled by a standard RS-232 serial port. The sign is obtainable
from Pro-Lite directly (http://www.pro-lite.com/), but can also be
purchased at various discount warehouses for approximately $150.
The serial cable and Windows software are sold separately.
</p><p>This article is not just a review; it can serve as a primer
for Pro-Lite's PL-M2014R with ROM release 5.24Q and 32K of memory
with Trivia mode, basically your standard sign. Until now, not much
developer information has been available to the public, meaning
signs were usually configured with the included infrared remote
control to display static messages. For very little money, it is
possible to build your own serial cable and control the sign using
Linux to display more than static text.</p><p>The business and personal applications for a highly visible
sign are almost limitless: reporting days until software delivery,
announcing traffic congestion, providing the weather, showing the
date and time, sending public messages, reporting system load,
announcing new mail, showing who's logged in, warning when disk
space gets low, login information, announcing unexpected server
outages as a watchdog, etc.</p><p>Communicating with the sign is almost as simple as beaming
text out the serial port; however, a bit of text manipulation is
necessary in order to get the sign to respond and do advanced
tasks. Linux handles the serial port communication, so sending
information to the sign appears as trivial as writing to a
file.</p><p>Luckily, the majority of the work can be accomplished by
simple scripts. All you need is a basic understanding of the shell,
AWK, PERL or Python, and you can be running in almost no time. The
first hurdle is to build a cable and configure Linux to talk out
the serial port.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1cabbe0"></a>Cable Construction</h2></div></div><div       class="mediaobject"><img src="2823f2.jpg"><div class="caption"><p>
Figure 1. Female DB9 Adapter
</p></div></div><p>The first step is wiring an RJ12 to female DB9 adapter. It
requires no tools, and an adapter kit can be purchased at most
computer supply stores for about $2 US. The only other thing you
need is a length of RJ12 cable with male adapters at each end. This
means a standard telephone cord will do nicely. Your cable will
most likely have the standard colors black, red, green and yellow,
in that order.</p><p>Cables come in two flavors: straight-thru and reversed.
You'll need to take the RJ12 cable and put it end to end (like a
loop) to find out which kind of adapter you need to build.</p><div       class="mediaobject"><img src="2823f3.jpg"><div class="caption"><p>
Figure 2. RJ12 Adapter Diagram
</p></div></div><p>One of two things will be noticeable: either the wires will
match black to black, red to red and so on, or they will reverse
their order showing black to yellow, red to green and so on.</p><p>If the cable is a straight-through, where the colors match,
wire your RJ12 to a DB9 adapter using Pin 2 as green, Pin 3 as red
and Pin 5 as yellow. If the cable is reversed, then where the
colors reverse sequence, wire your RJ12 to a DB9 adapter using Pin
2 as red, Pin 3 as green and Pin 5 as black.</p><div       class="mediaobject"><img src="2823f5.jpg"><div class="caption"><p>
Figure 3. RJ12 to DB9 Wiring
</p></div></div><p>Shove the unused adapter wires into the casing and snap the
adapter shut. Take care not to let the exposed ends touch anything
metal inside the adapter casing. You may want to clip the unused
wires. Put an extension cable on your serial port and connect the
adapter wires directly to the extension cable in order to test the
wiring configuration before pushing the pins into the
connector.</p><p>When all is said and done, one end of the RJ12 goes into the
side of the LED sign, the other into the adapter you just made, and
the adapter plugs into the computer.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1cac3c8"></a>Configuring Linux to Talk to the Sign</h2></div></div><p>My sign is plugged into COM1, also known as /dev/ttyS0. I've
elected to use a symbolic link to the sign, in the event I ever
decide to change to another serial port in the future. To make the
link, as root type:</p><pre     class="programlisting">
ln -s /dev/ttyS0 /dev/prolite
</pre><p>I tend to shy away from doing development as root. Putting
security issues aside for the moment, we can make the device
world-writable by typing:
<pre     class="programlisting">
chmod a+rw /dev/prolite
</pre>


The sign communicates using No Parity, 8 Bits, 1 Stop Bit; no
handshaking of any kind (hardware or software) is used. Early
versions of the sign work only at 300 baud, but they can be
upgraded to 9600 baud. All signs I've encountered had the 9600
capability right out of the box. The bottom line is that all signs
are capable of communication, and even at 300 baud you can outrun
the sign. The only drawback is that the sign's baud rate has to be
set by the remote control, according to the setup in the manual.
This needs to be done only once.
</p><p>In theory, the sign requires a 15ms delay between each
character sent to the sign. I've found that Linux's device driver
seems to work just fine without having to do anything special in
the software.</p><pre     class="programlisting">
stty speed 9600 cs8 -parenb -cstopb cread \
   -clocal -crtscts -ignpar -echo nl1 cr3 &lt; \
   /dev/prolite
</pre><p>Naturally, you can substitute any baud rate the sign will
handle for the 9600. This command will work when you aren't root
because it is world-writable.
</p><p>The most important piece of information for communicating
with the sign is that each command sent to the sign must end with a
carriage return/newline pair. This is <b  >ctrl-M
ctrl-J</b> on the keyboard or 0x0C 0x0A in hexadecimal. C
programmers will recognize it as \r\n. If you want Linux to handle
the end-of-line sequence for you, type the command:</p><pre     class="programlisting">
stty opost -ocrnl onlcr &lt; /dev/prolite
</pre><p>When you send a newline, Linux will send both carriage
return/newline automatically. Text can now be listed or redirected
to /dev/prolite from the shell. If you want to send the carriage
returns yourself, type:
<pre     class="programlisting">
stty -opost -ocrnl -onlcr &lt; /dev/prolite
</pre>


Where the options are defined as:
<div class="itemizedlist"><ul type="disc"><li><p><b  >opost</b>: postprocess the output
stream.</p></li><li><p><b  >-opost</b>: do not postprocess the
output stream.</p></li><li><p><b  >-ocrnl</b>: do not convert carriage
returns into newlines.</p></li><li><p><b  >-onlcr</b>: do not translate each
newline into a carriage return/newline pair.</p></li><li><p><b  >onlcr</b>: translate each newline
into a carriage return/newline pair.</p></li></ul></div>

The <span   class="bold"><b>stty</b></span> command allows for a
shorthand representation of all the termios structures that define
the device characteristics. For 9600,N,8,1 with automatic carriage
returns, type on one line:
<pre     class="programlisting">
stty 0:705:bd:0:3:1c:7f:15:4:0:1:0:11:13:1a:0:
12:f:17:16:0:0:73 &lt; /dev/prolite
</pre>


For 9600,N,8,1 with no automatic carriage returns, use the line:
<pre     class="programlisting">
stty 0:700:bd:0:3:1c:7f:15:4:0:1:0:11:13:1a:0:
12:f:17:16:0:0:73 &lt; /dev/prolite
</pre>


</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1ca37b0"></a>Command Syntax</h2></div></div><p>Only a minimal understanding is needed in order to operate
the sign. Mastery requires becoming familiar with the protocol and
doing a little experimenting.</p><p>Multiple signs can be connected to a computer over the same
serial port by using a simple telephone-line-splitting Y-connector.
Each sign has an assignable logical address that allows you to send
messages to particular signs. A logical address is represented in
hexadecimal as a number between 01 and FF. Addresses may be shared
enabling grouping; in this way, a message to ID01 goes to all signs
with ID01.</p><p>Communication with the sign is always done with readable
ASCII characters; thus, an arbitrary ID of 2F would be designated
with the digit &ldquo;2&rdquo; and the capital letter &ldquo;F&rdquo;.</p><p>ID00 is reserved to mean &ldquo;broadcast to all signs&rdquo;. By
default, a sign is preconfigured as ID01; this can be changed with
the remote control. If you are addressing a single sign connected
straight to the computer, it will respond with its ID number after
each successful command. Messages sent to ID00 do not return a
response, and neither does an individual sign when the line is
shared via the Y-connector.</p><p>All messages to the sign, except for those setting the date
and time, are sent in the following format followed by the carriage
return/line feed:
<b  >&lt;ID<i><tt>xx</tt></i>&gt;<i><tt>command</tt></i></b>,
<span   class="emphasis"><em>xx</em></span> is 00 to FF. Any command longer than 1,023
bytes will be ignored by the sign.</p><p>To set the date and time, no ID is needed. The format is
<b  >&lt;<i><tt>TYYMMDDwhhmmss</tt></i>&gt;</b>
where <span   class="emphasis"><em>YY</em></span> is the year, <span   class="emphasis"><em>MM</em></span>
the month, <span   class="emphasis"><em>DD</em></span> the day, <span   class="emphasis"><em>w</em></span>
the weekday (0=Sun, 1=Mon,...6=Sat), <span   class="emphasis"><em>hh</em></span> the
hour, <span   class="emphasis"><em>mm</em></span> the minute and
<span   class="emphasis"><em>ss</em></span> the seconds. This can be accomplished with
the shell very easily. Set the date/time of all signs with the
command:</p><pre     class="programlisting">
ate "+&lt;T%y%m%d%w%H%M%S&gt;" te "+&lt;T%y%m%d%w%H%M%S&gt;" &gt; /dev/prolite&gt; /dev/prolite
</pre><p>The leading <b  >+</b> sign tells the date command
to build a string via substitution; see your man pages for details.
</p><p>To signal a sign to start listening to responses, send it an
empty command with the format
<b  >&lt;ID<i><tt>xx</tt></i>&gt;</b>; e.g.,
type:</p><pre     class="programlisting">
echo "&lt;ID01&gt;" &gt; /dev/prolite
</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1ca4150"></a>Pages</h2></div></div><p>The most fundamental concept of the sign is the idea of a
page. A page consists of a message the sign is to display either
now or some time in the future. Pages may contain text, numerics,
symbols, font attribute tags, color tags, graphic tags and effect
tags. There are 26 pages named, appropriately enough, A to Z. Case
does matter when identifying a page.</p><p>Any given page can hold approximately 1,012 bytes of
information. I say approximately because special tags (see sidebar)
consume more than one byte, which means less space. Also, using
some trickery by omitting the page directive completely and
defaulting to page A squeezes out an additional two bytes, which
means more space.</p><p>The command to set a page is
<b  >&lt;P<i><tt>x</tt></i>&gt;</b>, where
<span   class="emphasis"><em>x</em></span> is the page name. Any text after this
sequence is considered text for the sign. To set the message
&ldquo;Linux Rules&rdquo; on page A, type the following command:</p><pre     class="programlisting">
echo "&lt;ID01&gt;&lt;PA&gt;Linux Rules" &gt; /dev/prolite
</pre><p>It is important to leave extra space at the end so the end of
the message is separated from the front of the message as it
scrolls.
</p><p>To delete a page, use
<b  >&lt;DP<i><tt>x</tt></i>&gt;</b>, where
<span   class="emphasis"><em>x</em></span> is the page name. For example, to delete
page B, type:</p><pre     class="programlisting">
echo "&lt;ID01&gt;&lt;DPB&gt;" &gt; /dev/prolite
</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1ca4678"></a>Displaying Pages</h2></div></div><p>The sign is constantly displaying a page. If the default page
A is scrolling by, then when its content is changed it will
immediately start displaying the new message. Otherwise, we must
tell the sign which page to run using the
<b  >&lt;RP<i><tt>x</tt></i>&gt;</b> command,
where <span   class="emphasis"><em>x</em></span> is the page to display. Normally, the
sign can run only one page at a time.</p><p>Once a page has been defined, it can be run. For example, to
repeatedly display our message, type:</p><pre     class="programlisting">
echo "&lt;ID01&gt;&lt;RPA&gt;" &gt; /dev/prolite
</pre><p>Running an undefined page will result in displaying the
sign's demo.
</p><p>Two points of interest for script writers:</p><div class="orderedlist"><ol type="1"><li><p>It is possible to update the contents of a page not
being displayed, then switch to that page at a later time.</p></li><li><p>It is possible to update the currently displayed
message. The only problem is the display will be interrupted
mid-message.</p></li></ol></div><p>Sadly, you cannot ask the sign what the contents of a page
are, what page it is currently displaying, or when it has started
or ended a display sequence. Thus, techniques like double-buffering
don't work for continuous messages.
</p><p>I have received one terse message from Pro-Lite that alluded
to a future version of the sign which is designed to address such
needs explicitly for computer users.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1ca4c50"></a>Timers</h2></div></div><p>In order to display one or more messages at a time, the sign
includes ten timers named A to J. Each timer specifies a time and a
series of 1 to 32 pages to sequence through. You may repeat pages
in a sequence. The time a sequence is displayed consists of a
weekday, an hour and a minute, any of which may be wildcarded (*)
to match &ldquo;all&rdquo;.</p><p>When the first timer is defined, the sign is put into
&ldquo;timer&rdquo; mode and will display that timer's messages immediately.
Should two or more timers be defined, the sign seems to wait one
minute, then checks each timer to see if one triggered based on the
current time. If so, at the end of the displaying message, the new
timer's sequence goes into effect. If no rule matches, no change is
made.</p><p>Note the sign checks the rules for the immediate time. It
will not go back to try to find a previous timer. So if you set a
timer for 4:15PM and it is now 4:17PM, you've missed the moment
when the sign would change.</p><p>Should two or more timers both be valid for the current time,
the sign unpredictably selects one for display. This means you
cannot set one timer to display at 4:15 and another timer to
display at 15 minutes past any hour. Both rules would be triggered
at 4:15 and it is a toss-up as to which message will be
displayed.</p><p>The timer command is defined as
<b  >&lt;T<i><tt>x</tt></i>&gt;<i><tt>dhhmm</tt></i>ABC</b>...,
where <span   class="emphasis"><em>x</em></span> is the timer, <span   class="emphasis"><em>d</em></span>
is 0 (Sunday) to 6 (Saturday) for the day, <span   class="emphasis"><em>hh</em></span>
is a two-digit hour and <span   class="emphasis"><em>mm</em></span> is the minute.
&ldquo;ABC...&rdquo; is a list of 1 to 32 pages to display in the order
specified. Note that Page-A and Timer-A are two different,
unrelated entities. A timer set for &ldquo;*****&rdquo; will be triggered
immediately.</p><p>The following sequence will display a series of messages at
8:00AM, noon, 1:00PM and 5:00PM:</p><pre     class="programlisting">
$ cat &gt; /dev/prolite
&lt;ID01&gt;
&lt;ID01&gt;&lt;PA&gt;Good morning.
&lt;ID01&gt;&lt;PB&gt;Have a nice lunch.
&lt;ID01&gt;&lt;PC&gt;Get back to work.
&lt;ID01&gt;&lt;PD&gt;Have a safe drive home.
&lt;ID01&gt;&lt;TA&gt;*0800A
&lt;ID01&gt;&lt;TB&gt;*1200B
&lt;ID01&gt;&lt;TC&gt;*1300C
&lt;ID01&gt;&lt;TD&gt;*1700D
ctrl-D
</pre><p>In order to display a whole sequences of pages, just list
more page letters. For instance, it is useful to make a scheme
where you assign page letters to different message content. For
example, page A could be hourly announcements, page R the runtime
status of your machine, page M the message of the day, page T the
time and so on. To display several pages right now (including
repeats):
<pre     class="programlisting">
$ cat &gt; /dev/prolite
&lt;ID01&gt;
&lt;ID01&gt;&lt;TA&gt;*****TAMARA
ctrl-D
</pre>


Two interesting tidbits of information:
<div class="itemizedlist"><ul type="disc"><li><p>For some reason, the specific time of Sunday at
midnight (00000 as a timer value) does not seem to work
consistently. I suspect it confuses this value with unset
timers.</p></li><li><p>If a run-page command
(<b  >&lt;ID01&gt;&lt;RPA&gt;</b>) is issued, the sign is
taken out of &ldquo;timer&rdquo; mode and displays the requested page. If you
then issue the command <b  >&lt;ID01&gt;&lt;RP*&gt;</b>,
the sign will go back into &ldquo;timer&rdquo; mode, displaying the last
sequence of messages.</p></li></ul></div>

To delete a timer, use
<b  >&lt;DT<i><tt>x</tt></i>&gt;</b>, where
<span   class="emphasis"><em>x</em></span> is the timer letter or * for all timers. For
example, to delete timer D type:
<pre     class="programlisting">
echo "&lt;ID01&gt;&lt;DTx&gt;" &gt; /dev/prolite
</pre>


</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1ca5648"></a>Graphics</h2></div></div><p>There are 26 graphic blocks that can be redefined and are
commonly used for graphics. Graphics are inserted into the text via
the tag <b  >&lt;B<i><tt>x</tt></i>&gt;</b>,
where <span   class="emphasis"><em>x</em></span> is a letter from A to Z. For example,
this command will display a mug and a wine glass:</p><pre     class="programlisting">
echo "&lt;ID01&gt;&lt;PA&gt;&lt;BW&gt; Party Tonight &lt;BZ&gt;"
&gt;\
   /dev/prolite
</pre><p>Altering the graphics requires the
<b  >&lt;G<i><tt>x</tt></i>&gt;</b> command
followed by a string of 126 characters made up of R (for red), Y
(for yellow), G (for green) and B (for black or unlit). A sequence
of seven rows of eighteen LEDs is specified back to back on a
single command line. (See Figure 4.)
<div       class="mediaobject"><img src="2823f6.jpg"><div class="caption"><p>
Figure 4. A Graphics Block Specification
</p></div></div>

</p><p>I know at least one user who loads a font into a sequence of
graphic blocks, and in this way is able to display more characters
than the sign technically allows by default&mdash;very clever.</p><p>To delete a graphic block, restoring it to the default, use
<b  >&lt;DG<i><tt>x</tt></i>&gt;</b>, where
<span   class="emphasis"><em>x</em></span> is a letter A to Z; * is a wildcard
indicating all are to be deleted.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1fb7ff8"></a>Trivia</h2></div></div><p>One additional feature of the sign is to display in sequence
a trivia question, your message, the answer to the question and
your message again. It works its way though a canned list of
questions and then starts over. The sign can be loaded with your
own list, which does not have to be trivia. The list can be up to
16KB long, leaving 16KB for the pages. If no list is loaded (i.e.,
you deleted the trivia), the full 32KB of the sign is available for
page content. To make your own list, do the following:</p><pre     class="programlisting">
$ cat &gt; /dev/prolite
&lt;ID01&gt;
&lt;ID01&gt;&lt;Q+&gt;
&lt;ID01&gt;What operating system isn't a pig?
&lt;ID01&gt;Linux.
&lt;ID01&gt;What operating system is free?
&lt;ID01&gt;Linux.
&lt;ID01&gt;&lt;Q-&gt;
Control-D
</pre><p>To delete the trivia, just omit the lines between
<b  >&lt;Q+&gt;</b> and <b  >&lt;Q-&gt;</b>. If
no messages are loaded, trivia mode is turned off. If they are,
trivia is turned on.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1fb8260"></a>Other Useful Commands and Tricks</h2></div></div><p>To reset the sign, removing all timers and pages, use
<b  >&lt;D*&gt;</b> like this:</p><pre     class="programlisting">
echo "&lt;ID01&gt;&lt;D*&gt;" &gt; /dev/prolite
</pre><p>Technically, there is no way to bring the sign to a halt.
However, you can take advantage of a quirk in the software to do
the same thing. If you use the <b  >&lt;FX&gt;</b> tag in
a message to control the speed of the sign, but don't supply a
message, the old text isn't cleared and the sign stops scrolling
until it gets a new message.
</p><p><a href="2823s1.html" target="_self">Function Tags</a></p><p>Additional tags are shown in &ldquo;Function Tabs&rdquo;. European tags
are available for characters shown in Figure 5.</p><div       class="mediaobject"><img src="2823f7.jpg"><div class="caption"><p>
Figure 5. European Characters Available
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1bb3580.0x1fb8788"></a>Uses for the Sign</h2></div></div><p>It doesn't take much to make the sign useful. For example,
scripts that send commands to the sign can be executed every few
minutes by editing your crontab file (<b  >crontab
-e</b>) to include:</p><pre     class="programlisting">
*/5 * * * * /usr/local/bin/sign 1&gt; /dev/null \
2&gt; /dev/null
</pre><p>Every five minutes, the system will call /usr/local/bin/sign.
In this script, we can place any number of tasks. To show our
uptime, add these lines:
<pre     class="programlisting">
#!/bin/bash
stty 0:705:bd:0:3:1c:7f:15:4:0:1:0:11:13:1a:0:12\
:f:17:16:0:0:73 &lt; /dev/prolite
echo "&lt;ID01&gt;&lt;PU&gt;'uptime' " &gt; /dev/prolite
echo "&lt;ID01&gt;&lt;TA&gt;*****U" &gt; /dev/prolite
</pre>


If root wants to see the last line of the log file scroll by, this
command will suffice:
<pre     class="programlisting">
tail -f -n 1 /var/log/messages |
   awk '{ print "&lt;ID01&gt;&lt;PA&gt;" $0 " "; }' &gt;
   /dev/prolite &amp;
</pre>


This job sits in the background, getting lines from the end of the
log as they come in, prefixes a
<b  >&lt;ID01&gt;&lt;PA&gt;</b> to it and sends it to the
sign. The process then goes to sleep until another log entry is
made. The only reason to run as root is to get access to the
messages file.
</p><p>The sign can also act as a watchdog for our system by setting
up a timer to go off several minutes later. Ideally, the sign will
get updated before the timer goes off and the timer will again be
set for some time in the future. In the event the sign is not
updated, the timer trips and an alternate alert message is
displayed.</p><pre     class="programlisting">
!/bin/bash
stty 0:705:bd:0:3:1c:7f:15:4:0:1:0:11:13:1a:0:12\
:f:17:16:0:0:73 &lt; /dev/prolite
echo "&lt;ID01&gt;&lt;PU&gt;&lt;FD&gt;Server Up" &gt; /dev/prolite
echo "&lt;ID01&gt;&lt;DTB&gt;" &gt; /dev/prolite
echo "&lt;ID01&gt;&lt;TA&gt;00001U" &gt; /dev/prolite
echo "&lt;ID01&gt;&lt;TD&gt;&lt;FB&gt;&lt;CC&gt;Server Down" &gt; \
   /dev/prolite
date "+&lt;ID01&gt;&lt;TB&gt;*%H%MD" -date "7 min" &gt; \
   /dev/prolite
</pre><p>To do this relies on some tricks. First, you cannot use a
generic timer (<b  >&lt;TA&gt;*****</b>) for running
standard messages because it conflicts with our watchdog timer.
Secondly, we cannot use timer <b  >&lt;TA&gt;00000</b>
because it confuses the sign. Thus, we have to use one minute after
midnight on Sunday (<b  >&lt;TA&gt;00001</b>) in order to
display our messages. When no timers are defined, the first timer
defined shows our page.
</p><p>Deleting timer B keeps us using timer A, which shows normal
text. The sign ignores requests to delete timers and pages that
don't exist. Once page A is defined and displaying, we define page
B in the background and set up a time, again using the clever
<span   class="bold"><b>date</b></span> command to output it seven
minutes from now. Since our cron job is set to run this script
every five minutes, the timer should never go off unless something
is wrong.</p><p>If Linux suffers a power failure, the cron daemon is killed,
or the sign becomes disconnected, it will display a warning
message. The tag <b  >&lt;FD&gt;</b> indicates the
message should instantly appear instead of scrolling, where
<b  >&lt;FB&gt;</b> indicates the text should appear from
the center&mdash;this will get your attention quickly.</p><p>More information about the protocol, cable and sign can be
found at http://wls.wwco.com/prolite/. This site also includes
source code for various applications that manipulate the
sign.</p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="2823aa.jpg"></div>

        Walt Stoneburner currently works as a software
      engineer for Downright Software, LLC. In his spare time, he enjoys
      working with Linux, playing non-computer games, reading and
      reviewing hardware and development software. Feel free to contact
      him at wls@wwco.com or ICQ# 5368391.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../062/toc062.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>