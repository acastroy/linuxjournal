<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Getting Started with Vi</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Even if you use a different editor for most of your work, it helps&#10;to know the basics of the ubiquitous vi.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x261a580.0x2711ab0"></a>
Getting Started with Vi</h1></div><div><div class="author"><h3 class="author">
William Ward</h3></div><div class="issuemoyr">Issue #114, October 2003</div></div><div><p>
Even if you use a different editor for most of your work, it helps
to know the basics of the ubiquitous vi.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2712138"></a></h2></div></div><p>
Most people who are getting started with Linux
or UNIX today already know how to use graphical WYSIWYG (what you see is
what you get) editors, with heavy use of the mouse, icons and pull-down
menus. When they first encounter the traditional UNIX/Linux editor, vi, it
may seem awkward and not very powerful, but the opposite is true.
</p><p>
As with graphical editors, you can select
a range of text and execute a command to make
changes, move the cursor by indicating where you
want it to be and insert text by typing at the
keyboard. The difference is that vi doesn't
use the mouse; you use the keyboard to specify
changes or move the cursor. In order for the
entire keyboard to be available for commands,
vi has separate command and insert modes.
</p><p>
Modes can be confusing at first. With most editors, whatever you type
always goes into the document, and editing is done using a mouse or perhaps
keyboard shortcuts. With vi, command mode uses the whole keyboard
to specify editing commands. Only when you issue an insert command does
the keyboard add text to the document.
</p><p>
Most new vi users learn only a few basic commands: the arrow keys,
<b  >i</b> for insert, <b  >x</b> to delete a
character, <b  >dd</b> to delete a
line, <b  >:wq</b> to save and exit and perhaps a few others. They quickly
grow tired of leaning on the same keys over and over but are afraid of
learning a huge list of commands.
</p><p>
Instead of merely providing a list to memorize, here we explore the
structure behind them, which makes the commands easier to remember and
allows you to become a vi power user quickly. There are several basic
categories of commands, including inserting text, moving the cursor,
block edit commands, colon (ex) commands, options and miscellaneous
commands.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2712500"></a>
Inserting Text</h2></div></div><p>
The first command to learns in vi is <b  >i</b>. Typing
<b  >i</b>
puts the editor into insert mode, where everything you type is inserted
into the document until you press the Esc key. But <b  >i</b> is not the
only way to insert text.
</p><p>
To add text after the cursor, such as at the end of the line,
use <b  >a</b>. Or jump to the end of the line and append text with
<b  >A</b>. Similarly, <b  >I</b> inserts at the beginning of the line. With
these and other insert commands, always press Esc to return to command
mode.
</p><p>
Use <b  >o</b> to open a new line after the current one and insert text
there or <b  >O</b> to open before the current line.
</p><p>
Replace the current character with <b  >s</b>, or replace many characters
using <b  >R</b>, similar to overwrite mode in a graphical editor.
</p><p>
Nearly all vi commands allow a numeric prefix, which usually
repeats the command a specified number of times. For example, type
<tt  >3iHooray</tt> then press Enter and Esc. It inserts three
lines of &ldquo;Hooray&rdquo; into your buffer. The <b  >s</b> command
is different; here, the number indicates how many characters are to
be replaced: <b  >5s</b> replaces five characters with whatever
you type.
</p><p>
A few control keys have special meaning in insert mode. You
can use the arrow keys to move around, but don't forget
you're still in insert mode. Also, <b  >Ctrl-T</b> and
<b  >Ctrl-D</b>,
at the start of a line, can be used to indent. <b  >Ctrl-T</b> moves to
the next level of indentation, and <b  >Ctrl-D</b> moves back. Use these with
the autoindent and shiftwidth options (described in the Options section
below) for best results.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2712df0"></a>
Moving the Cursor</h2></div></div><p>
Graphical editors move around mainly by clicking the mouse. Some vi clones offer mouse support, but vi and all its clones share
movement commands that can move you around
quickly. The simplest are the arrow keys or the equivalent letters:
<b  >h</b> (left), <b  >j</b> (down),
<b  >k</b> (up) and <b  >l</b> (right). If these
are all you use, however, you are missing out on the full power of vi.
</p><p>
You can move forward and back on a line by holding down the
right or left arrow key (or <b  >l</b> or <b  >h</b>), but there are easier
ways. Go to the beginning of the line with <b  >^</b> or the end with
<b  >$</b>. To jump one word at a time, use <b  >w</b>
or <b  >W</b> to go forward
or <b  >b</b> or <b  >B</b> to go back. You also can
use <b  >e</b> or <b  >E</b> to
jump to the end of the current word. For lowercase <b  >w</b>,
<b  >b</b> and
<b  >e</b>, a word is a sequence of alphanumeric characters;
the uppercase versions use spaces to separate words.
</p><p>
Another way to move around on the current line is to jump to a particular
character. For example, to move the cursor to the next s
on a line, type <b  >fs</b>. Use <b  >F</b> for the previous one:
<b  >Fs</b>. Or use <b  >ts</b> to go right before the
s and <b  >Ts</b> to go the other way. Change s
to search for any character. Type <b  >,</b> (comma) to repeat any of
these searches.
</p><p>
To move the cursor to the top, middle or bottom of the screen,
use <b  >H</b>, <b  >M</b> or <b  >L</b>
(uppercase). For <b  >H</b> or <b  >L</b>,
a numeric prefix indicates how many lines from the top or bottom of the
screen you want to go; it has no effect on <b  >M</b>.
</p><p>
To jump back and forth by sentences, type <b  >(</b> or
<b  >)</b>; for
paragraphs, use <b  >{</b> and <b  >}</b>. If you're editing source code
with a lot of brackets, try the <b  >%</b> command: put the cursor on any
of the following characters: (, ), [, ], { or }, and press
<b  >%</b>;
you'll be taken to the matching bracket.
</p><p>
Often the best way to move around is by searching with the
<b  >/</b>
command. For example, type <tt  >/hello</tt> and press Enter to
jump to the next &ldquo;hello&rdquo; in the document. Instead of
&ldquo;hello&rdquo;, enter any regular expression. The
<b  >n</b> command
repeats the search; <b  >N</b> goes the other way. Or use
<b  >?</b> to search
backward in the file. Search is case-sensitive; I discuss the ignorecase
option later in this article.
</p><p>
With most movement commands, a numeric prefix can be used to repeat. For
example, <b  >5w</b> moves you forward five words,
<b  >2n</b> jumps not to the
next search match, but to the one after that, and <b  >5fs</b>
jumps to the fifth s to the right of the cursor.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x270a910"></a>
Block Edit Commands</h2></div></div><p>
In graphical editors, to change a block of text, click and drag
the mouse to highlight the text, then click an icon or menu option
or type a keyboard shortcut. Although vi does not utilize the mouse,
the process is surprisingly similar.
</p><p>
As we have just seen, vi has a rich set of movement commands. Any of
these will work as an argument to a block editing command (for example,
<b  >dw</b> to delete a word). In vi, instead of first highlighting with
a mouse and choosing an action, type the block edit command
(<b  >d</b>)
first, and <span   class="emphasis"><em>then</em></span> a movement command (<b  >w</b>) to specify the block
of text. As a shortcut, you can type the block edit command twice to
affect only the current line, for example, <b  >dd</b> deletes the current
line.
</p><p>
As we've seen, <b  >d</b> is for delete. Whenever you delete text, that
text is remembered, much like the cut command in a graphical editor. To
paste the text (&ldquo;put&rdquo; in vi parlance), type
<b  >p</b> to put
it after the cursor's position (or uppercase <b  >P</b> for before).
</p><p>
That takes care of cut and paste, but what about copy? In
vi, it's called yank and is done with the <b  >y</b>
commands. These are exactly like the <b  >d</b> commands, except they
don't delete anything: <b  >yy</b> yanks the current line,
<b  >yw</b>
yanks a word and so on.
</p><p>
To replace a chunk of text, you could delete it first and use
<b  >i</b>
to insert a replacement, or use <b  >c</b> (change) instead, and you are placed
into insert mode to type the replacement text; press Esc when done. Use
with a movement command (such as, <b  >cw</b>) or change the whole line with
<b  >cc</b>.
</p><p>
Programmers will love the <b  >&gt;</b> and
<b  >&lt;</b> commands. These
shift a range of text to the right or left. To shift a block of code,
put the cursor on the { or } character at the beginning or end of the
block and type <b  >&gt;%</b> to shift it to the right. Any other
movement command can be used in place of <b  >%</b>, or use
<b  >&gt;&gt;</b>
to shift one line. Use <b  >&lt;</b> to shift left. See also
<b  >Ctrl-T</b>
and <b  >Ctrl-D</b> (while in insert mode) and the shiftwidth option below.
</p><p>
Lastly, use <b  >!</b> to filter text through an external program. Type the
program to run, and the selected part of the file is passed as
standard input; the output of the program is inserted into the
document in its place. For example, <b  >!!</b> filters the current line;
<b  >!}</b> filters a paragraph. One command that is particularly useful with
this is the UNIX/Linux filter <b  >fmt</b>, which reformats paragraphs. To
run an external program without modifying the file, see the
<b  >:!</b>
command in the &ldquo;Colon (ex) Commands&rdquo; section.
</p><p>
Any numeric prefix given is passed along to the movement portion of
the command, whether it is given first or between the edit and movement
command. For example, either <b  >3dw</b> or
<b  >d3w</b> deletes three
words; <b  >3yy</b> or <b  >y3y</b> yanks (copies) three lines.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x270b888"></a>
Colon (ex) Commands</h2></div></div><p>
Vi inherits as class of commands from its predecessor
ex, accessible through what is sometimes called colon mode. Common
examples are <b  >:wq</b> (write and quit) and
<b  >:s/<i>X</i>/<i>Y</i>/</b>
(substitute <i>Y</i> for <i>X</i>). Type <b  >:</b> followed by an
<b  >ex</b>
command, and press Enter. After the command is done, vi returns to
command mode.
</p><p>
There are several variations on the <b  >:w</b> and
<b  >:q</b> commands. To
save the file and continue editing, use <b  >:w</b>. You can quit vi
with <b  >:q</b>, but only if your work is saved; to quit no matter what,
use <b  >:q!</b> (dangerous). Try <b  >:w!</b> to override read-only mode
if <b  >:q</b> gives an error. Many people use
<b  >:wq!</b> to write and
exit. In vim or nvi, this is like typing <b  >:w!</b> and then
<b  >:q</b>
if there was no error while saving. But some other versions of vi treat
it like <b  >:w</b> and <b  >:q!</b>, which means if there was any error saving
the file, the work would be lost. Because of this, it is a better habit
to use <b  >:wq</b>.
</p><p>
The substitution command is extremely powerful. In its simplest
form, <b  >:s/<i>X</i>/<i>Y</i>/</b> replaces one occurrence
of <i>X</i> with <i>Y</i> on the current line. To replace all
occurrences on a line, add <b  >g</b> (global) to the end, for example,
<b  >:s/<i>foo</i>/<i>bar</i>/g</b>. Add <b  >c</b> to the end to
confirm each change, for example,
<b  >:s/<i>foo</i>/<i>bar</i>/gc</b>. To
change a range of lines, put two line numbers separated by a comma
in front, for example,
<b  >:<i>10,20</i>s/<i>foo</i>/<i>bar</i>/g</b>
replaces all occurrences of &ldquo;foo&rdquo; with &ldquo;bar&rdquo;
on lines 10 through 20. Use 1 for the first line of the file
and <b  >$</b> for the last line; to replace on all lines, use
<b  >:<i>1</i>,$s/<i>foo</i>/<i>bar</i>/g</b> (instead of
<b  >1,$</b>, you can
use <b  >%</b>, as in
<b  >:%s/<i>foo</i>/<i>bar</i>/g</b>).
</p><p>
Another useful command is <b  >:g/<i>X</i>/</b>. It allows you to run any
<b  >ex</b> command for all lines matching the pattern
<i>X</i>. For example,
to print all lines that contain &ldquo;hello&rdquo; on the screen,
use <b  >:g/hello/p</b> (<b  >:p</b> is an
<b  >ex</b> command for printing
lines to the screen). You even can combine it with the
<b  >:s///</b>
command. To change &ldquo;foo&rdquo; to &ldquo;bar&rdquo; on all lines
that contain &ldquo;hello&rdquo;, use
<b  >:g/hello/s/foo/bar/g</b>.
</p><p>
In both <b  >:s/<i>X</i>/<i>Y</i>/</b> and
<b  >:g/<i>X</i>/</b>, the
expression <i>X</i> is a regular expression, not only a static string. Set
the nomagic option to disable this (see below). To learn about regular
expressions, I recommend the book <span   class="emphasis"><em>Mastering Regular
Expressions</em></span>
by Jeoffrey Friedl (O'Reilly &amp; Associates, 2nd ed., 2002).
</p><p>
Use <b  >:!</b> to run an external program.
<b  >:!ls</b> prints the
current directory listing. As a convenience, the percent character (%)
in the command is replaced with the name of the file you are
currently editing, so use <b  >:!chmod +x %</b> to make the file
executable. Typing <b  >:!!</b> repeats the previous
<b  >:!</b>
command. Unlike the command-mode <b  >!</b> commands, this does not modify
the text; the output of the program, if any, is simply displayed.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2a21ab8"></a>
Options</h2></div></div><p>
In vi you can set options to change the editor's behavior
using the ex <b  >:set</b> command. For example, the search commands are
normally case-sensitive; to change this use the <b  >:set
ignorecase</b>
or <b  >:set ic</b> option. Most options
have a two-letter abbreviated version.
</p><p>
There are two types of options, Boolean (true/false) options and
those that take a value. To turn off a Boolean option, add
&ldquo;no&rdquo;
to the front; for example, <b  >:set noignorecase</b> or
<b  >:set
noic</b> turns off the ignorecase option.
</p><p>
For options that take a value, use the equal sign followed by the
value to set. For example, the default spacing for the shift commands
(<b  >&gt;</b>, <b  >&lt;</b>, <b  >^T</b>
and <b  >^D</b>) is eight spaces (one
tab character), but most programmers prefer two to four spaces. Use
<b  >:set shiftwidth=4</b> (or <b  >:set sw=4</b>) to make all
indentation commands use a four-space indent.
</p><p>
Here are some other useful options:
</p><div class="itemizedlist"><ul type="disc"><li><p>
<b  >wrapmargin=<i>N</i></b> turns on word wrapping;
specify the number of characters before the end of the line at which to
wrap, for example <b  >:set wm=8</b>.
</p></li><li><p>
<b  >autoindent</b> (Boolean) indents each line you type
the same amount as the previous line, for example, <b  >:set
ai</b>.
</p></li><li><p>
<b  >magic</b> (Boolean, default true, no abbreviation)
controls regular expression behavior in the search commands, for
example, <b  >:set nomagic</b>.
</p></li></ul></div><p>
To set several options at once, combine them into one
<b  >set</b>
command like this: <b  >:set noic wm=8 sw=4 nomagic ai</b>.
</p><p>
To save options for future editing sessions, put them in your .exrc
file. When you run vi, it runs any ex (colon-mode) commands found
in that file. Omit the : character, simply enter the <b  >set</b>
commands.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2a22770"></a>
Miscellaneous Commands</h2></div></div><p>
A graphical editor's scrollbar tells you where you are, and
you can click
on it to view other parts of the file. Because vi has no scrollbar,
it uses equivalent keyboard commands.
</p><p>
<b  >Ctrl-G</b> displays the file status, including the current line
number. Go to a particular line of the file with the
<b  ><i>X</i>G</b>
command. <b  >G</b> by itself jumps to the end of the file, or use
<b  >:<i>X</i></b> as an alternate for
<b  ><i>X</i>G</b>.
</p><p>
<b  >Ctrl-F</b> scrolls the screen one page forward, and
<b  >Ctrl-B</b>
goes back one page. To move in half-page increments, use
<b  >Ctrl-D</b>
(down) or <b  >Ctrl-U</b> (up).
</p><p>
Some other miscellaneous commands:
</p><div class="itemizedlist"><ul type="disc"><li><p>
The <b  >x</b> command deletes the current character
(uppercase <b  >X</b> deletes to the left). A numeric prefix deletes several
characters. Text deleted using this command is cut as
with the <b  >d</b> commands.
</p></li><li><p>
<b  >~</b> changes the current letter from uppercase
to lowercase or vice versa.
</p></li><li><p>
Undo a mistake with the <b  >u</b> command.
Vim has multiple levels of undo. Repeating the <b  >u</b> command
undoes each step in turn; the <b  >Ctrl-R</b> keystroke puts them back
(redo). Other versions of vi have only one level of undo; typing
<b  >u</b>
again simply undoes the undo, restoring the change.
</p></li><li><p>
An uppercase <b  >U</b> undoes all changes made so
far on the current line; once you leave that line, however, it doesn't
work anymore.
</p></li><li><p>
Type <b  >.</b> (period) to repeat the last edit
command.
</p></li><li><p>
To repeat the last <b  >:s///</b> command
(but modifying only the current line), type <b  >&amp;</b>.
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2c9d098"></a>
Read More</h2></div></div><p>
The vim editor comes with a handy tutorial to let you practice
many of these commands. Type <tt  >vimtutor</tt> from the shell prompt
or <tt  >:help tutor</tt> from within vim.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2c9d250"></a></h2></div></div><div class="sidebar"><p class="title"><b>History of Vi</b></p><p>
The vi editor (the name is short for &ldquo;visual&rdquo;) initially
was written in 1976 by Bill Joy at the University of California, Berkeley. It has been included in the BSD (Berkeley Standard Distribution)
versions of UNIX ever since those days, and other versions of UNIX,
including Linux, have adopted it over the years.
</p><p>
The vi editor is a descendant of ex, which in turn was based on ed. These
older editors were designed for use on a teletype and could display
only one line of text at a time; vi was the first UNIX full-screen text
editor.
</p><p>
The original vi's source code has not been available due to copyright
(until just a few months ago), but many clones have been written. The
one included with most Linux distributions is vim (vi improved). The
current standard BSD editor is nvi (new vi). Others include elvis,
vile and stevie. These vi editors include the basic vi functionality,
plus their own bells and whistles.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x261a580.0x2c9d568"></a></h2></div></div><div class="sidebar"><p class="title"><b>Resources</b></p><p>
The Vi Editor and Its Clones:
<a href="http://www.math.fu-berlin.de/~guckes/vi/index.php3" target="_self">www.math.fu-berlin.de/~guckes/vi/index.php3</a>

Vi Lovers Home Page: <a href="http://www.thomer.com/vi/vi.html" target="_self">www.thomer.com/vi/vi.html</a>
</p></div></div></div>
<div class="authorblurb"><p>
William R. Ward (<a href="mailto:wrw@bayview.com">wrw@bayview.com</a>) has been using vi since
1987. He is a teacher, writer and programmer living in Mountain View,
California with his wife, Holly. Their company, Bay View Consulting
Services (<a href="http://www.bayview.com" target="_self">www.bayview.com</a>), offers training courses
in Perl, Linux/UNIX and other related topics.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../114/toc114.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>