<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Wall-Mounted Dual-Head Desktop
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Would you like to do less and get more? Try a wall-mounted PC with Linux,&#10;multihead with Xinerama and input sharing with a tiling window manager&#10;for less input and more output.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xfad580.0x10a4ac0"></a>
Wall-Mounted Dual-Head Desktop
</h1></div><div><div class="author"><h3 class="author">
Marcin
 
Teodorczyk
</h3></div><div class="issuemoyr">Issue #218, June 2012</div></div><div><p>
Would you like to do less and get more? Try a wall-mounted PC with Linux,
multihead with Xinerama and input sharing with a tiling window manager
for less input and more output.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a51f8"></a></h2></div></div><p>
Would you like to do less and get more? Yes, that's a standard
salesman question, but I couldn't resist using it in this article, because
it
just fits so well.
</p><p>
One thing that always has bothered me is the amount of work I've
had to do to change hardware on my PC. Of course, I don't have screws in my
case&mdash;it's quite pointless when you take your case off every few days. But
even so, adding or removing some hardware was a painful job.
</p><p>
Another inconvenience I've repeatedly encountered was extensive use
of virtual desktops. My 24" display just wasn't enough, and bigger ones
were too high to be comfortably usable for me. Even with a relatively small
font size, a Web browser and two terminals for input plus two terminals
with logs preview didn't fit well on one desktop. Thus, very often
I had to switch every few seconds between two&mdash;a browser with input
terminals and terminals with logs.
</p><p>
The above reasons were sufficient enough to end my laziness for a while
and make me to do a little research. I found two solutions that suited me
perfectly. The first one was a wall-mounted PC. And, the second was multihead with Xinerama and
a tiling window manager. In this article, I explain how I made my
first dual-head wall-mounted PC and shared its input with a laptop.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a54b8"></a>
Wall-Mounted PCs</h2></div></div><p>
A wall-mounted PC is exactly what the name says&mdash;a PC mounted on a
wall. As an example, you can see my machine, called VMS (Virtual Machine
Server), shown in Figure 1. Why would anyone do something like this?
</p><div       class="mediaobject"><a href="11261f1.large.jpg"><img src="11261f1.jpg"></a><div class="caption"><p>
Figure 1. VMS (Virtual Machine Server): a wall-mounted,
dual-head PC and a laptop connected with Synergy.
</p></div></div><p>
First, it's a lot of fun to make it. If you're into case-modding, you
might like making wall-mounted PCs. Second, such a computer has easier
accessible modules. If you have a constantly unscrewed or opened case,
a wall-mounted PC might be a good solution for you. Third, it is generally
easier to keep clean, especially if it's uncovered. Also, it uses less
space, because it hangs flat on the wall, usually at a fair
height&mdash;taking space that typically is unused. It's also easier to control
the wires. Finally, and this might be a matter of opinion, but I think it just
looks good. It has a bit of a working-on-a-laptop feel, because you
have it all before your eyes.
</p><p>
As a disadvantage, messing with the case might break the air circulation and can
be dangerous for the cooling system. Thus, when doing such a project,
you should think it out and monitor/benchmark the hardware for the first
few hours or days, especially the temperature sensor readings. Another
disadvantage is mobility. Assuming everything is wireless,
you need to have one power supply cord. Typically, you also will have 
Ethernet and display cables, and possibly a keyboard and
mouse as well. The mainboard is in a fixed position on the wall. You can move
a PC with a case and peripherals relatively easily to other place, but a
wall-mounted PC requires you to disconnect all cables and prepare a new
wall. When it has no case, you have to be extremely cautious too.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a5880"></a>
Multihead with Linux</h2></div></div><p>
Whether or not you decide to use a wall-mounted PC, you might want
to try a multihead display setup. You'll find it useful especially if you
often switch between windows or virtual desktops. Personally, I find the
three-display setup to be the most optimal. One display is for my activity,
and the other two are for monitoring purposes, such as log tails, network
traffic dumps or documentation. This doesn't require me to switch
focus between displays, but it allows me to see actual information in a blink
of an eye.
</p><p>
If you decide to try multihead with Linux, you'll have at least three
options for the hardware: one multihead graphic card, a few typical
graphic cards or some mix of those two.
</p><p>
Multihead graphic cards are more expensive than typical ones and not
always well supported by Linux, although you often can find proprietary
drivers. On the other hand, they take less slots on the mainboard, and if
well supported, they are very easy to set up. Thus, when you decide to use such
a solution, the main thing you should consider is Linux support. Typical
multihead graphic cards deliver two or four video outputs, but you 
also can find ones with more.
</p><p>
Alternatively, you can use a few typical graphic cards. Sure, they'll
take more slots on the mainboard, but they have two advantages. First,
if each one is supported by Linux, they should work with multihead with
no problems. Second, you easily can add/remove displays/cards to/from
your setup.
</p><p>
On the software side, you have again at least three possibilities:
a proprietary solution, Xorg with a few screens or Xinerama.
</p><p>
Proprietary solutions are popular with multihead graphic cards. For a
few graphic cards, you either can set up Xorg to use a few screens or use
Xinerama. The first solution is very inconvenient for typical desktop
use, because it requires you to manipulate the DISPLAY environment
variable. I focus on Xinerama here. Xinerama makes one virtual desktop
from all your displays, and this is what you usually would want.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a5b40"></a>
Tiling Window Managers</h2></div></div><p>
A tiling window manager might come in handy when working with more than one
display, especially if you mainly tend to use the keyboard. In such
managers,
windows always occupy the whole desktop area&mdash;there is no window
stacking (except in a few cases, such as video playing). Figure 2 shows an
example screenshot of two displays controlled by the Xmonad tiling window
manager. Other examples of tiling window managers
include Awesome, WMII or Ratpoison.
</p><div       class="mediaobject"><a href="11261f2.large.jpg"><img src="11261f2.jpg"></a><div class="caption"><p>
Figure 2. Two HD Displays Controlled by Xmonad
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a5e58"></a>
Output/Input Sharing</h2></div></div><p>
Apart from the multihead setup, there are a few solutions for output
(display) and input (keyboard and mouse) sharing between PCs over the
network. Two examples are Xdmx and Synergy, respectively.
</p><p>
Xdmx lets you use another PC display as a second display for your
first PC. From the user point of view, it works just like Xinerama,
but instead of connecting the second display to the second graphic card,
you connect the second PC to your network.
</p><p>
Synergy lets you use your computer's keyboard and mouse to control
another computer that is connected to the network. The focus can be switched
either with mouse or keyboard. For example, if you have your second PC
to the right of your first one, you can set up Synergy to switch focus
when you move the cursor of your first PC to the right over the right
edge of your screen. In such a case, the cursor will appear on the second PC
screen immediately.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a6010"></a>
VMS (Virtual Machine Server)</h2></div></div><p>
VMS is my first wall-mounted, dual-head PC. It has no input
devices, and it works as a personal lab and computing machine. It's connected
to an Ethernet network and controlled only from the laptop connecting to
the network from time to time. It works as a sort of server and docking
station for the laptop, extending its power and screen area while keeping
the input system.
</p><p>
I set up this system in three steps. First, I made the wall-mounted
&ldquo;case&rdquo;. Second, I set up dual-head, and finally, I removed the server
keyboard and mouse and configured Synergy to share input with the laptop
connected to the LAN.
</p><p>
For the wall-mounted &ldquo;case&rdquo;, I selected the simplest and fastest
solution: a board, a few screws and perforated metal tape. It took me no
more than one hour to build it, but you can go further. For example, you
could use a metal
plate instead of a wooden board as well as hinges and Plexiglas as a cover.
</p><p>
For the dual-head setup, I chose two cards. First, I checked whether
they worked separately. After making sure they did, I plugged in both of
them and
checked the BIOS settings. Typically, one card always is set up as a
master&mdash;this one will work during bootup.
</p><p>
After booting Linux, I checked how the cards were connected with
lspci:

<pre     class="programlisting">
[root@vms ~]# lspci | grep -i vga
01:00.0 VGA compatible controller: Advanced Micro 
 &#8618;Devices [AMD] nee ATI RV370 [Radeon X550]
03:05.0 VGA compatible controller: Advanced Micro 
 &#8618;Devices [AMD] nee ATI RV100 QY [Radeon 7000/VE]
</pre>
</p><p>
The above shows what driver to use as well as the bus ID (first column),
which will be necessary for proper Xorg configuration. In my case, the
driver for both cards is Radeon. The location of the configuration file
depends on your installation, but usually it is located by Xorg in
/etc/xorg.conf. Listing 1 shows my configuration.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a63d8"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 1. Dual-Head Xinerama Xorg Configuration Example</b></p><pre     class="programlisting">
Section "ServerLayout"
        Identifier     "X.org Configured"
        Screen      0  "Screen0" 0 0
        Screen      1  "Screen1" RightOf "Screen0"
        InputDevice    "Mouse0" "CorePointer"
        InputDevice    "Keyboard0" "CoreKeyboard"
        Option         "Xinerama" "on"
EndSection

Section "Files"
        ModulePath   "/usr/lib/xorg/modules"
        FontPath     "/usr/share/fonts/misc/"
        FontPath     "/usr/share/fonts/TTF/"
        FontPath     "/usr/share/fonts/OTF/"
        FontPath     "/usr/share/fonts/Type1/"
        FontPath     "/usr/share/fonts/100dpi/"
        FontPath     "/usr/share/fonts/75dpi/"
EndSection

Section "Module"
        Load  "glx"
        Load  "dri"
        Load  "record"
        Load  "dbe"
        Load  "dri2"
        Load  "extmod"
EndSection

Section "InputDevice"
        Identifier  "Keyboard0"
        Driver      "kbd"
EndSection

Section "InputDevice"
        Identifier  "Mouse0"
        Driver      "mouse"
        Option      "Protocol" "auto"
        Option      "Device" "/dev/input/mice"
        Option      "ZAxisMapping" "4 5 6 7"
EndSection

Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
EndSection

Section "Monitor"
        Identifier   "Monitor1"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
EndSection

Section "Device"
        Identifier  "Card0"
        Driver      "radeon"
        BusID       "PCI:3:5:0"
EndSection

Section "Device"
        Identifier  "Card1"
        Driver      "radeon"
        BusID       "PCI:1:0:0"
EndSection

Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        SubSection "Display"
                Viewport   0 0
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
        EndSubSection
EndSection

Section "Screen"
        Identifier "Screen1"
        Device     "Card1"
        Monitor    "Monitor1"
        SubSection "Display"
                Viewport   0 0
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
        EndSubSection
EndSection
</pre></div><p>
The Device, Monitor and Screen sections are not much different from a
single-head setup, but they are duplicated&mdash;one for each graphic card and
display. The only difference that you might see is the bus ID I read
earlier using PCI&mdash;this is used to distinguish the cards.
</p><p>
The Xinerama setup is done in the ServerLayout section. I define two screens and
their relative position. Screen 1 is on the right of Screen 0. Finally,
I turn on Xinerama with <tt  >Option "Xinerama" on</tt>.
</p><p>
The last thing I needed to do before running Xorg with two displays was
choose a window manager.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a6748"></a>
Xmonad</h2></div></div><p>
I've been using Xmonad for a while on my laptop, and since it has great
support for Xinerama, I decided to try it first for the multihead setup.
Xmonad delivers nine desktops and three layouts by default. 
</p><p>
In Xinerama setup, virtual desktops are shared between the screens. That
means you can switch between the screens and between the virtual
desktops on each screen, but virtual desktop nr 3 on screen 0 is the same
as virtual desktop nr 3 on screen 1. Also, you can't see the same virtual
desktop on both screens. Thus, when, for example, you have virtual desktop
nr 3 present on screen 0 and want to switch to virtual desktop nr
3 on screen 1, screen 0 goes blank.
</p><p>
On each desktop, by default, you can choose either vertical, horizontal
or full-screen layout. You easily can extend Xmonad with other layouts,
but for 16:9 displays, I recommend trying three-column.
</p><p>
The Xmonad's default shortcuts are based on Vi-like keybindings. Figure 3
shows
Xmonad's cheat sheet. You also can define
custom keybindings.

</p><div       class="mediaobject"><a href="11261f3.large.jpg"><img src="11261f3.jpg"></a><div class="caption"><p>
Figure 3. Xmonad Cheat sheet
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x10a6b68"></a>
Connecting a Laptop with Synergy</h2></div></div><p>
Next, I took advantage of the wall-mounted PC setup and connected a
laptop to it with Synergy. The laptop works as a third (middle) screen
and a master input device. In practice, when connected to the network,
I'm able to move the laptop's mouse pointer seamlessly between screens as
well as switch the focus with the keyboard.
</p><p>
Synergy works as a client/server application. The server has control
over the input. The client gives away control over its input, but its
input devices also can be used simultaneously. In my case, the laptop
is the server.
</p><p>
You need to configure only the server. Listing 2 shows an example
configuration. It is placed in /etc/synergy.conf.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x13b2e08"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Listing 2. Example Synergy Configuration</b></p><pre     class="programlisting">
section: screens
        red:
        vms:
end

section: links
        red:
                right    = vms
                left     = vms
        vms:
                right    = red
                left     = red
end

section: options
   keystroke(control+alt+l) = switchInDirection(right)
   keystroke(control+alt+h) = switchInDirection(left)
end
</pre></div><p>
In the section screens, I define the hosts that I want to be connected. In
the section
links, I define the relations between the hosts and their screens. Finally, I
define the keystrokes that can be used to switch focus.
</p><p>
With the server configured, you can start the synergys d&aelig;mon as well
as the client on the laptop with <tt  >synergyc servername</tt>, where
<tt  >servername</tt> is the name of synergy server machine running
syngergys. It is important to make sure that the hostnames you used in
the configuration file (in my case red and vms) are resolvable.
</p><p>
Also, keep in mind that communication between hosts isn't secure. If
you want to secure it, you can use SSH tunneling. For example, on the
client machine, you can run:

<pre     class="programlisting">
ssh -L 24800:server:24800 server
</pre>
</p><p>
<tt  >24800</tt> is the default listening port for the Synergy server, and
<tt  >server</tt>
is the hostname for the server. After that, you can run the client with:

<pre     class="programlisting">
synergyc localhost. 
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x13b3388"></a>
Summary</h2></div></div><p>
Building VMS and connecting it with my laptop was a lot of fun, but
using it is a real pleasure compared to how I worked earlier.
Nonetheless, what I've shown here is only one example of what you can do
to make your own power-user desktop. The possibilities are endless. For
example, I'm thinking about a five-display setup now, or one of those
wearable screens that looks like glasses and gives the impression of
a 16-meter display&mdash;if only the resolution of such a solution was more
than 800x600.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xfad580.0x13b3490"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
Xinerama: <a href="http://sourceforge.net/projects/xinerama" target="_self">sourceforge.net/projects/xinerama</a>
</p><p>
Xmonad: <a href="http://xmonad.org" target="_self">xmonad.org</a>
</p><p>
Distributed Multihead X Project: <a href="http://dmx.sourceforge.net" target="_self">dmx.sourceforge.net</a>
</p><p>
Synergy: <a href="http://synergy-foss.org" target="_self">synergy-foss.org</a>
</p></div></div></div>
<div class="authorblurb"><p>
Marcin Teodorczyk is a GNU/Linux user with more than ten years of experience. For
the past three years, he's been using Arch Linux exclusively on his personal
computers. Marcin has an M.Sc. degree in IT and works as a security
officer. In his spare time, he works out or writes articles for IT-related magazines.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../218/toc218.html">Issue Table of Contents</a>
    <a class="link3" href="../218/11261.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>