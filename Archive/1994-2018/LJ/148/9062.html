<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
The Ultimate Linux Server</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;The Aberdeen A261T rackmount server delivers amazing bang for the buck as a&#10;rule of thumb&mdash;literally.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1ff3580.0x20eaab0"></a>
The Ultimate Linux Server</h1></div><div><div class="author"><h3 class="author">
Nicholas
 
Petreley
</h3></div><div class="issuemoyr">Issue #148, August 2006</div></div><div><p>
The Aberdeen A261T rackmount server delivers amazing bang for the buck as a
rule of thumb&mdash;literally.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1ff3580.0x20eb2f0"></a></h2></div></div><p>
We defined specific parameters that would describe our Ultimate Linux
Server before we began our search.  To put it simply, the server had
to be built for reliability, high availability and provide the best
bang for the buck.  Only one vendor provided us with a server that met our
requirements.  Although this made it easy to choose the Aberdeen Stonehaven
A261T dual-core dual-processor rackmount server as our Ultimate Linux
Server, one shouldn't get the idea that the Stonehaven doesn't deserve
its place at the top based on its own merits.  This server meets our
entry criteria and then some.
</p><p>
The Aberdeen Stonehaven A261T rackmount server has two dual-core AMD
Opteron processors for a total of four effective CPUs, and it comes with six
250GB hard drives configured for RAID 5.  Aberdeen can provide up to
12TB of storage if you need it.  The server comes with redundant power
supplies for increased availability.  Should one fail, you can hot swap
a new one in its place.  You also can hot swap the SATA drives.
</p><p>
The A261T is based on the Tyan S2882-D Thunder K8SD Pro motherboard.  Tyan
has long been a reliable provider of server motherboards, and this
particular model is a terrific foundation upon which to build.  The server
includes an Areca SATA RAID controller.  The default Linux software is
Red Hat Enterprise Linux Server 4.0, 64-bit (x86_64), which is included
with the server along with a handful of driver disks, manuals and other
minor goodies.
</p><p>
Here is the official list of the box's features that we tested:
</p><div class="itemizedlist"><ul type="disc"><li><p>
AMD Opteron 64-bit dual-core 265 (1.8GHz), 1GB per core processor.
</p></li><li><p>
Six 250GB SATA 7,200RPM 16MB cache hard drives with NCQ.
</p></li><li><p>
1.5TB storage capacity (maximum 3TB).
</p></li><li><p>
2GB Registered ECC DDR 400 memory (16GB memory capacity).
</p></li><li><p>
Six hot-swap drive bays.
</p></li><li><p>
Available 5.25 for optional tape backup.
</p></li><li><p>
Dual Gigabit Ethernet controllers.
</p></li><li><p>
Redundant 460W hot-swappable power supply.
</p></li><li><p>
Hot-swappable four 10cm fans and two 4cm fans.
</p></li><li><p>
Eight port SATA II 3Gb/s RAID controller (0, 1, 10, 5, 6, 50, JBOD capability)
with
battery backup module.
</p></li><li><p>
RAID Management Software Installation and User Guides.
</p></li><li><p>
Tyan System Monitor Server Management Software Installation and User
Guides.
</p></li><li><p>
Five-year parts and labor warranty.
</p></li><li><p>
Optional: XDAS scalable storage appliance capability.
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1ff3580.0x20ebef8"></a>
Performance</h2></div></div><p>
We ran a series of benchmarks on the A261T.  Most of them produced
meaningless results, because the A261T was too fast for our benchmarks to
stress the hardware adequately.  We finally produced our own benchmark
based on the siege program, which simulates a number of simultaneous
Web clients hammering the server for Web pages.  It wouldn't do to
serve up static pages for this benchmark, because that would create
no significant stress on the server.  So we created a Web site based
on Apache, PHP and MySQL that includes IFrames, JavaScript and records
information about each visitor, so that each page access produces write
operations on MySQL as well as read operations.
</p><p>
This turned out to be too much for the server at first.  In fact, our
dinky workstation outperformed the server by a wide margin.  Naturally,
this made no sense, so we went on a troubleshooting spree.  The answer
turned out to be a poorly configured Apache file (httpd.conf).  We suspect
that the fault lies primarily with the GUI httpd configuration tool in
Red Hat Enterprise Linux, but we haven't had time to back out all
the changes and try the process from scratch in order to identify where
things went wrong.  Regardless, this is an issue with Red Hat EL 4.0,
not with the server hardware.  Any administrators worth their salt
will want to tweak the http.conf one way or another to adapt it to their
applications, whether they do so manually or via any one of several
Web-based or GUI tools.
</p><p>
We didn't find this problem easily, but that's thanks mostly to Murphy's
Law, which includes the axiom that one never looks in the right place the
first time.  At first, we noticed that MySQL was using up an unusual amount
of CPU power.  Was the outdated MySQL that comes with Red Hat Enterprise
Linux 4.0 causing the problem? No.  We replaced the 4.x version of
MySQL with a 5.x version, and it made no difference.  We ran up2date
and chose to replace the existing Linux kernel with the latest version.
This turned out to be a bigger task than expected.  The Red Hat kernel
doesn't include support for the Areca RAID controller.  Fortunately,
Aberdeen provides a CD-ROM with driver code and instructions for creating
a module for any new Red Hat kernel and instructions on including this
module in the initial RAM disk.  Once we found those instructions, it
was just a matter of minutes before we had the new kernel up and running.
It didn't matter.  The new kernel and driver didn't improve performance.
</p><p>
That's when we finally looked at the Apache httpd.conf file.  On a hunch,
we removed a duplicate Alias line created by Red Hat's GUI tool, and
we tweaked the pre-fork parameters of Apache.  Here is what we ended
up using:

<pre     class="programlisting">

&lt;IfModule prefork.c&gt;
StartServers 20
MinSpareServers 5
MaxSpareServers 20
MaxClients 256
MaxRequestsPerChild 0
&lt;/IfModule&gt;

</pre>
</p><p>
We restarted Apache and MySQL, re-initialized the database and Web site
and then nothing seemed to be able to slow this puppy down.  The siege
benchmark defaults to simulating 15 simultaneous clients.  Don't be
deceived by this apparently tiny number of clients.  The siege benchmark
doesn't merely send 15 clients to the Web site, it hammers away at the
Web site continually, unlike how 15 real users would.  Real people read a
page and move on.  The siege benchmark doesn't bother reading anything.
It just keeps hammering away.
</p><p>
Nevertheless, the A261T laughed at our 15 simultaneous users.  So, we kept
boosting the number until we hit 500 simultaneous users, which produced
enough load to make the server recognize we were there.  Table 1 shows the
final results of the siege test with 500 simultaneous users.
</p><div class="table"><a name="N0x1ff3580.0x20ec210"></a><p class="title"><b>Table 1. Results of the siege Test with 500 Simultaneous Users</b></p><table     summary="Table 1. Results of the siege Test with 500 Simultaneous Users9062t1.qrk" border="1"><colgroup><col><col></colgroup><tbody><tr><td>
Transactions</td><td>25,000 hits</td></tr><tr><td>
Availability</td><td>100.00%</td></tr><tr><td>
Elapsed time</td><td>81.29 secs</td></tr><tr><td>
Response time</td><td>0.71 secs</td></tr><tr><td>
Transaction rate</td><td>307.54 trans/sec</td></tr><tr><td>
Concurrency</td><td>218.21</td></tr><tr><td>
Successful transactions</td><td>25,000</td></tr><tr><td>
Failed transactions</td><td>0</td></tr><tr><td>
Longest transaction</td><td>45.36</td></tr><tr><td>
Shortest transaction</td><td>0.00</td></tr></tbody></table></div><p>
As you can see, the response time was usually less than one second, which is
remarkably fast for the kind of pages we were serving.  The server had
no problem delivering more than 300 transactions per second with a concurrency
of 218 requests.
</p><p>
We had to go back to our workstation and try the same test, given that
the workstation previously left the A261T server in the dust at 15
concurrent users.  We changed the workstation configuration to match
the server, and the workstation couldn't even finish the test at 500
concurrent users.  In fact, the only way we could get it to finish
was to reduce the number of concurrent users to 100 maximum, and even
then it failed one transaction.  We produced the numbers in Table 2 on
a system with an AMD 4400+ Athlon x2 processor with 4GB of DDR400 RAM
and a 300GB SATA 3.0Gb/s drive (no RAID).
</p><div class="table"><a name="N0x1ff3580.0x20e3758"></a><p class="title"><b>Table 2. Same Test, on the Workstation</b></p><table     summary="Table 2. Same Test, on the Workstation9062t2.qrk" border="1"><colgroup><col><col></colgroup><tbody><tr><td>
Transactions</td><td>4,999 hits</td></tr><tr><td>
Availability</td><td>99.98%</td></tr><tr><td>
Elapsed time</td><td>37.45 secs</td></tr><tr><td>
Response time</td><td>0.05 secs</td></tr><tr><td>
Transaction rate</td><td>133.48 trans/sec</td></tr><tr><td>
Concurrency</td><td>6.80</td></tr><tr><td>
Successful transactions</td><td>4,999</td></tr><tr><td>
Failed transactions</td><td>1</td></tr><tr><td>
Longest transaction</td><td>
7.35</td></tr><tr><td>
Shortest transaction</td><td>0.00</td></tr></tbody></table></div><p>
This story wouldn't be complete without mentioning our personal blunders.
The Aberdeen server made an extremely loud whining noise when we first
set it up.  We tolerated this noise for what seemed like an eternity
(more like two weeks of playing around with the server and running the
original benchmarks, which we eventually had to replace).  When we'd
had enough, we opened up the case to listen to specific areas and feel
around for vibrations in order to locate the source of the noise.
A slip of the wrist, and suddenly there was a piece of thumb caught
in a CPU fan blade.  (Never let it be said that we don't put a bit of
ourselves into everything we do.) Now we had not only a loud whine,
but also a fan that made a nearly unbearable racket.
</p><p>
It turns out the whine was just the server's way of letting us know one
of the redundant power supplies wasn't working.  Why wasn't it working?
Because we didn't have the power cord pushed in all the way.  It turned
out we could have saved ourselves two weeks of agony and a band-aid if
we'd simply pushed in the power cords more carefully.  As for the fan,
it worked, if noisily.  But we replaced it with one of our own while we
waited for Aberdeen to send another.  The server wasn't whisper quiet
by any means once we had it in normal operation, but it sounded like
virtually any other rackmount server that has to push a lot of air in
order to stay cool.
</p><p>
The retail direct price for this particular configuration is $4,999 US.
Given the design for reliability and its excellent performance and
scalability, we consider the A261T to deliver an awful lot of bang for
this buck.  This model is very well deserving of our title of Ultimate
Linux Server, and we recommend the Aberdeen line of servers without
reservation.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1ff3580.0x20e4468"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Company Information</b></p><p>
Aberdeen LLC
</p><p>
9130 Norwalk Boulevard,
Santa Fe Springs, CA 90670
</p><p>
Phone: 562/699-6998
</p><p>
Sales: 800/552-6868
</p><p>
Fax: 562/695-5570
</p><p>
<a href="http://www.aberdeeninc.com" target="_self">www.aberdeeninc.com</a>
</p></div></div></div>
<div class="authorblurb"><p>
Nicholas Petreley is Editor in Chief of <i  >Linux Journal</i> and a former programmer, teacher, analyst and
consultant who has been working with and writing about Linux for more
than ten years.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../148/toc148.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>