<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Work the Shell
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;An Ubuntu Bash shell as a Windows app? Fantastic! Here's how to&#10;proceed.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xbc3580.0xcbaac0"></a>
Work the Shell
</h1></div><div><h3 class="subtitle"><i>
Ubuntu Linux and Bash as a Windows Program!
</i></h3></div><div><div class="author"><h3 class="author">
Dave
 
Taylor
</h3></div><div class="issuemoyr">Issue #282, October 2017</div></div><div><p>
An Ubuntu Bash shell as a Windows app? Fantastic! Here's how to
proceed.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xbc3580.0xcbb3b0"></a></h2></div></div><p>
Microsoft has ruled the operating system world for many years, and it's
staggering to see how many computers run Microsoft Windows in all its many
variants. In May 2017, Microsoft announced it had an installed base of 1.4
billion. Sure, there also are much more than a billion devices now running Android,
but if you're running a desktop or laptop computer, odds remain that
it's running some version of Microsoft Windows.
</p><p>
Microsoft hasn't just ignored the rest of the OS world&mdash;although it sure
took a long time for them to bail on Windows Mobile and accept Android&mdash;so
it was with delight that I read that the next version of Windows 10 would
include a simple app that lets you run a Linux shell.
</p><p>
No hassles with complex installations, no dual booting, no virtual machines you
need to configure&mdash;just a simple app to find in the Microsoft Store and a program
to click and run whenever you want to expand your knowledge of Bash or
Linux.
</p><p>
Sort of.
</p><p>
At the time of this writing, the app requires that you're in the early release
program (it's free to join, and you'll become a beta tester for the next version of
Windows 10), but once you're signed up and running the early release version,
it is indeed a download-and-go program.
</p><p>
By the time you read this article, however, what I'm running as an early
release of Win10 should be the latest public update, so that roadblock will
vanish.
</p><p>
To get started, you'll need to enable the Windows Subsystem for Linux (which
also lets you run other flavors of Linux and is pretty cool), but start by
searching in the Microsoft Store for &ldquo;Ubuntu&rdquo; to find Ubuntu Linux on
Windows. The latest version of Ubuntu is supported in the app too: 16.04 LTS.
</p><p>
Click to launch it once installed, and you'll be confronted with a window
like the one shown in Figure 1.
</p><div       class="mediaobject"><a href="12239f1.large.jpg"><img src="12239f1.jpg"></a><div class="caption"><p>
Figure 1. Ubuntu as a Windows App? Excellent! 
</p></div></div><p>
It's interesting to note that some standard Linux commands return
nothing&mdash;like <tt  >who am i</tt>&mdash;but most of them work
fine, and there even are dot files in my
newly created home directory /home/taylor.
</p><p>
This is a Bash login shell. You can confirm your own shell a couple
different ways, but
I like this command: <tt  >ps $$</tt>.
</p><p>
Are you curious about how the system identifies itself? <tt  >uname -a</tt> is the standard Linux
command to get the version, which reveals this interesting info:

<pre     class="programlisting">
$ uname -a
Linux VirtuaPC 4.4.0-43-Microsoft #1-Microsoft 
 &#8618;Wed Dec 31 14:42:53 PST 2014
x86_64 x86_64 x86_64 GNU/Linux
</pre>
</p><p>
VirtuaPC is indeed a virtual machine system (you can learn more about it at the
Microsoft.com download center, if you're curious), and it's all part of
the install, all hidden from us users. Thank goodness; VM installs can be tricky
to configure properly.
</p><p>
What about Bash itself? It's easy to identify versions by using the
<tt  >--version</tt> flag:

<pre     class="programlisting">
$ bash --version
GNU bash, version 4.3.11(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
 &#8618;&lt;http://gnu.org/licenses/gpl.html&gt;

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
</pre>
</p><p>
Version 4.3.11 is reasonably current, although the GNU archive shows the latest
version is 4.4 (you can go to <a href="http://ftp.gnu.org/gnu/bash" target="_self">ftp.gnu.org/gnu/bash</a> to see the latest).
</p><p>
Better yet, you're not quite in the late 1980s with the command line
either, as the default TERM identifies itself to programs not as ANSI but as
<tt  >xterm-256color</tt>. This means you can have colors
included in <tt  >ls</tt>
output, <tt  >grep</tt> results and so on. Whether it looks nice and is legible is another
story.
</p><p>
Let's give it a whirl&mdash;see Figure 2.
</p><div       class="mediaobject"><a href="12239f2.large.jpg"><img src="12239f2.jpg"></a><div class="caption"><p>
Figure 2. The Contents of /bin, in Glorious 256color
</p></div></div><p>
Changing the font size, window color scheme and so on is tricky because there's
no UI to the Ubuntu program in Windows. It's also hard to get into the X
Window System underlying the Ubuntu server that's running on your Windows
system, so the standard trick of changing settings in .Xdefaults won't work.
</p><p>
Fortunately, you at least can improve the color scheme somewhat with the
<tt  >setterm</tt>
command, then axe the default aliases to remove the clumsy ANSI colors. This
command produces a far more readable terminal screen:

<pre     class="programlisting">
setterm -term linux -back white -fore black -clear 
</pre>
</p><p>
Ubuntu or Microsoft, someone has set it so that &ldquo;white&rdquo; is actually a
very light grey, so the results are quite attractive. The problem is, run a command
that knows how to output in color, and things get pretty broken pretty fast, as
you can see in Figure 3 when I tried an <tt  >ls -a</tt>.
</p><div       class="mediaobject"><a href="12239f3.large.jpg"><img src="12239f3.jpg"></a><div class="caption"><p>
Figure 3. New Color Scheme, Overwritten by LS 
</p></div></div><p>
Open up the ~/.bashrc file, however, and you'll find that commands like
<tt  >ls</tt>
have aliases that force the use of color. You also can check this with the
<tt  >alias</tt>
command:

<pre     class="programlisting">
$ alias
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo 
terminal || echo error)" "$(history|tail -n1|sed -e
 &#8618;'\''s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'\'')"'alias 
 &#8618;egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias l='ls -CF'
alias la='ls -A'
alias ll='ls -alF'
alias ls='ls --color=auto'
</pre>
</p><p>
The solution is to go into the ~/.bashrc and comment out (preface each line with a
<tt  >#</tt>
symbol) all of these aliases, and you'll be very close to Windows/Ubuntu
configuration nirvana.
</p><p>
The only piece left that I kept hitting was the default ability of the vi editor
(yeah, not emacs) to use color. Open up a file like my .profile, and
it's out-of-control color soup and completely unreadable, as you can see in
Figure 4.
</p><div       class="mediaobject"><a href="12239f4.large.jpg"><img src="12239f4.jpg"></a><div class="caption"><p>
Figure 4. Vi's color scheme is ghastly! 
</p></div></div><p>
Again, it's fixable. This time, you want to create a new file in your home directory
called .vimrc that contains this single line:

<pre     class="programlisting">
syntax off
</pre>
</p><p>
Confusingly, <tt  >syntax</tt> is the parsing and display of different file
elements in different colors. Can't read the screen to create this file? In
vi type this:

<pre     class="programlisting">
:syntax off
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xbc3580.0xcbcc70"></a></h2></div></div><p>
and it'll turn off all that crazy color stuff.
</p><p>
Those few tweaks will get you much farther toward being able to use and easily
read the Ubuntu window in Windows until there's an actual settings or
preferences option that becomes available.
</p><p>
Give it a try, and if you find out how to make the typeface bigger or any other
useful configuration tweaks, send them along, and I'll revisit this in a
few months with the best user submissions.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xbc3580.0x10b50d0"></a></h2></div></div><div class="sidebar"><p class="title"><b></b></p><p>Send comments or feedback via <a href="http://www.linuxjournal.com/contact" target="_self">www.linuxjournal.com/contact</a> or to
<a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>.
</p></div></div></div>
<div class="authorblurb"><p>
Dave Taylor has been hacking shell scripts on UNIX and Linux systems for a
really
long time. He's the author of <span   class="emphasis"><em>Learning Unix for Mac OS
X</em></span> and
<span   class="emphasis"><em>Wicked Cool Shell Scripts</em></span>. You can find him on Twitter
as @DaveTaylor
or
reach him through his tech Q&amp;A site: <a href="http://www.AskDaveTaylor.com" target="_self">www.AskDaveTaylor.com</a>.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../282/toc282.html">Issue Table of Contents</a>
    <a class="link3" href="../282/12239.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>