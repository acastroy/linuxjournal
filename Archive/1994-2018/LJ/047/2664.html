<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>qvplay and the Casio QV-10 Camera</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Linux software to control the Casio QV-10 camera is now&#10;    available. Mr. Hepple tells us how to use qvplay.&#10;    "><meta name="keywords" content="qvplay, camera"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x151f580.0x1616ab0"></a>qvplay and the Casio QV-10 Camera</h1></div><div><div class="author"><h3 class="author">Bob Hepple</h3></div><div class="issuemoyr">Issue #47, March 1998</div></div><div><p>
    Linux software to control the Casio QV-10 camera is now
    available. Mr. Hepple tells us how to use qvplay.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x1617450"></a></h2></div></div><p>In the continuing battle with the Evil
Empire, I have recently reduced my dependence on &ldquo;Them&rdquo; by one
program&mdash;I discovered a way to use my Casio QV-10 digital camera
with Linux.
</p><p>This article is a simple HOWTO on the method I
used&mdash;hopefully to encourage more people and Casio to use
Linux.</p><p>One of these days, every peripheral will ship with Linux
drivers and support software&mdash;until then, let's &ldquo;share and
enjoy!&rdquo; (Douglas Adams, <span   class="emphasis"><em>Hitchhiker's Guide to the
Galaxy</em></span>).</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x1617660"></a>The Casio QV-10 Camera</h2></div></div><div       class="mediaobject"><img src="2664f1.jpg"><div class="caption"><p>
Figure 1. Casio Camera
</p></div></div><p>Describing the camera in full is probably best left to Casio
but suffice it to say that it:</p><div class="itemizedlist"><ul type="disc"><li><p>has fixed focal length lens (no zoom)</p></li><li><p>has fixed resolution of 320x240 pixels in 24-bit
colour</p></li><li><p>stores up to 96 shots in Flash memory (immune from
low battery power)</p></li><li><p>takes 4 AA alkaline cells or an optional, external
power source, but not NiCad</p></li><li><p>has a serial link to a PC</p></li><li><p>has a separate printer available, driven directly
by the camera</p></li><li><p>can also output to TV/video</p></li><li><p>has CAM default file format, proprietary to
Casio</p></li><li><p>sells for about $400 in Singapore (about $263US),
although I paid a lot more than that last Christmas&mdash;prices have
dropped.</p></li></ul></div><p>The resolution of the pictures is adequate for simple web
pages but nowhere near as fine grained as some of the models
recently on the market. By comparison, a Kodak PhotoCD image
digitised from a 35mm slide or film would be about 3000x2500
pixels&mdash;more than 100 times the number of pixels. On the other
hand, while the resolution is so-so, the 320x240 jpeg files that
are produced are reasonably fast to download with current
modems.</p><p>It is quite possible that Casio's proprietary CAM format is
superior to others for certain purposes (I am no graphics expert),
but it is no good for web pages, which need JPEG or GIF files. The
Windows software that Casio provides makes converting more than one
or two files to JPEG format very difficult. No filter is provided
for batch conversion of files to other formats. The process for
each conversion is:</p><div class="orderedlist"><ol type="1"><li><p>Open CAM image on PC (10 seconds on my 486)</p></li><li><p>Pull down File|Export menu or press
<b  >ctrl-E</b></p></li><li><p>Pull down Format|JPG</p></li><li><p>Type in new file name (.jpg extension is provided
automatically)</p></li><li><p>Select OK</p></li></ol></div><p>On one file this is manageable, but on 96&mdash;forget it.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x16184d0"></a>The qvplay Software</h2></div></div><p><span   class="bold"><b>qvplay</b></span> was written by
ken-ichi HAYASHI and Jun-ichiro &ldquo;itojun&rdquo; ITOH to control the
QV-10 and is really great. Itojun also wrote a filter called
<span   class="bold"><b>cam2jpeg</b></span> to convert CAM files to
JPEG. (I haven't tested this program yet.) With qvplay running on
Linux you can:</p><div class="itemizedlist"><ul type="disc"><li><p>Download individual or groups of pictures to or
from the camera in JPEG, BMP, PPM, RGB or CAM formats.</p></li><li><p>Instruct the camera to take a picture.</p></li><li><p>Delete pictures from the camera's memory.</p></li><li><p>Instruct the camera to display a certain picture
(or 4 or 9 thumbnail pictures).</p></li><li><p>Protect or UN-protect specific pictures from
deletion.</p></li></ul></div><p>It seemed to me that the quality of the pictures from qvplay
was better than from the QV-LINK software provided with the
camera&mdash;apparently, some older versions of QV-LINK do some
automatic re-touching of the pictures which seems to make things
worse. Also included in the package were two utilities:</p><div class="itemizedlist"><ul type="disc"><li><p><span   class="bold"><b>qvrec</b></span>: send CAM
files to the QV-10 camera.</p></li><li><p><span   class="bold"><b>qvalldel</b></span>: clear
the camera's memory.</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x160f5a0"></a>The Software</h2></div></div><p>I used version 0.92 of qvplay. Just use your favorite search
engine to find qvplay-0_92_tar.gz and download from the site
nearest you.</p><p>Configuration couldn't be easier. Expand the distribution
file and follow the instructions. A
<span   class="bold"><b>setup</b></span> script is provided that
worked just fine &ldquo;out of the box&rdquo;. I use Red Hat Linux 4.1 with a
2.0.18 kernel. One thing you might want to tinker with is the
default serial port for qvplay to use. I changed the supplied
default of /dev/cua1 to /dev/cua0. Once it's working, use
<span   class="bold"><b>strip</b></span> on the executables to remove
extraneous lines such as debug commands and run the command
<b  >make install</b>.</p><p>I have written man pages for the
<span   class="bold"><b>qvplay</b></span>,
<span   class="bold"><b>qvrec</b></span> and
<span   class="bold"><b>qvalldel</b></span> software (not in the
original distribution). These pages are available at
http://home.pacific.net.sg/~bhepple/qvplay/qvplay.html.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x160f968"></a>Cameras Supported by qvplay</h2></div></div><p>According to the source code, qvplay appears to support the
following cameras:</p><div class="itemizedlist"><ul type="disc"><li><p>QV-10 in its various flavours, e.g., QV-10a</p></li><li><p>QV-11</p></li><li><p>QV-30</p></li><li><p>QV-100 (including the fine resolution)</p></li><li><p>QV-300 (including the fine resolution)</p></li></ul></div><p>The only camera I have tested is the QV-10.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x160fe90"></a>Handy Scripts for qvplay</h2></div></div><p>Once I got the hang of qvplay, I wrapped it up in a couple of
simple scripts to do the things I normally do without reading the
manual pages. These two scripts are:</p><div class="orderedlist"><ol type="1"><li><p><span   class="bold"><b>get_a_pic</b></span>: A
simple script to get one photo. (See
<a href="2664l1.html" target="_self">Listing 1</a>.)</p></li><li><p><span   class="bold"><b>get_all_pics</b></span>:
Another way to get all the photos from the camera. (See
<a href="2664l2.html" target="_self">Listing 2</a>.)</p></li></ol></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x16102b0"></a>Post-processing of JPEG Files</h2></div></div><p>One weird thing that you have to do is fix the size of the
JPEG images (see the get_a_pic script). I must confess I don't
fully understand what's going on here but apparently the images
come across as 480x240 pixels and you must change them to an aspect
ratio of 4:3 or 320x240 pixels. You can do this with the
<span   class="bold"><b>xv</b></span> program or using the
Independent JPEG Group's commands,
<span   class="bold"><b>djpeg</b></span> and
<span   class="bold"><b>cjpeg</b></span>, along with the Poskanzer
portable bitmap utilities. These utilities are normally found in
the various Linux distributions. For example:</p><pre     class="programlisting">
qvplay -g 1 | djpeg | pnmscale -xsize 320\
        -ysize 240 | cjpeg &gt; foobar.jpg
</pre></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x1610518"></a>Using a WWW Browser to View Files</h2></div></div><p>You can view your JPEG files quite nicely with xv(1) or with
a WWW browser such as Netscape. In the latter case, you might want
to generate HTML index files for your shots using something like
the following automatic procedure.</p><p>Assuming your JPEG files are sitting in a directory&mdash;e.g., I
keep all the files from one day's shooting together under a
directory labelled with the date, something like
~/photos/971128/*.jpg&mdash;I then run the following script on them to
create an index page viewable by the browser. This could be put
into a Makefile:</p><pre     class="programlisting">
(cat hdr
ls $i*.jpg |sed "s/^/&lt;IMG SRC=\"/" |sed
"s/$/\"&gt;/"
cat tlr) &gt; index.html
</pre><p>The file hdr simply contains a standard HTML startup:
<pre     class="programlisting">
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;TITLE&gt;Photo viewer&lt;/TITLE&gt;
  &lt;META NAME="Author" CONTENT="Bob Hepple"&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;H1&gt;Photo viewer&lt;/H1&gt;&lt;HR&gt;
</pre>


Similarly, the file tlr contains your standard HTML wrap-up script:
<pre     class="programlisting">
&lt;P&gt;
&lt;HR&gt;
&lt;ADDRESS&gt;
&lt;A HREF="mailto:bhepple@pacific.net.sg"&gt;Bob
Hepple&lt;/A&gt; &lt;P&gt; Copyright &copy; 1997 Bob
 Hepple. All rights reserved.
&lt;/ADDRESS&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;
</pre>


</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x16107d8"></a>A Graphical User Interface for qvplay</h2></div></div><p><span   class="bold"><b>qvplaytk</b></span> is a Tcl/Tk wrapper
for qvplay which provides a GUI interface. Figure 2 is a screen
shot of the program which can be found at its author's (Mr. Amano)
home page at http://www.bekkoame.or.jp/~tormato/qvplayk.htm.</p><div       class="mediaobject"><img src="2664f2.jpg"><div class="caption"><p>
Figure 2. Screen shot of qvplaytk
</p></div></div><p>As a Tcl/Tk script, qvplaytk is very easy to configure and
adapt. For example, you might like to change the obscure &ldquo;G&rdquo;,
&ldquo;S&rdquo; and &ldquo;T&rdquo; buttons to &ldquo;Get&rdquo;, &ldquo;Save&rdquo; and &ldquo;Take&rdquo;.</p><p>One very nice feature of qvplaytk is that the &ldquo;Take&rdquo; mode
allows you to take a photo every N seconds&mdash;this could be used in a
remote monitoring application. Perhaps it could be used for one of
those strange web sites which offer a changing view of the level of
the coffee in the kitchen, or for keeping an eye on your kids in
the next room.</p><p>Apart from qvplay, qvplaytk requires Tcl 7.4 and Tk 4.0 or
Tcl 7.5 and Tk 4.1. It also relies on
<span   class="bold"><b>xv</b></span> for the viewing
functions.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x1610c50"></a>Converting Casio CAM Files to JPEG or
PPM</h2></div></div><p>Itojun wrote cam2jpeg (sometimes written as camtojpeg) as a
filter to batch convert CAM files to JPEG or PPM formats. It works
with a whole range of Casio products that output the CAM format
such as the QV-10, 10A, 30 and 100. It can also be found through
ken-ichi HAYASHI's home page at
http://www.asahi-net.or.jp/~xg2k-hys/.</p><div       class="mediaobject"><img src="2664f3.jpg"><div class="caption"><p>
Figure 3. Singapore River
</p></div></div><div       class="mediaobject"><img src="2664f4.jpg"><div class="caption"><p>
Figure 4. Lau Pau Sat Food Centre
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x151f580.0x16110c8"></a>Example Pictures</h2></div></div><p>The camera works well in full daylight, as shown in Figure 3,
a shot of the Singapore River from the famous &ldquo;Boat Quay&rdquo;. It
also works well in very low light conditions, as shown in Figure 4,
a shot of one of our wonderful food centres, &ldquo;Lau Pau Sat&rdquo;, in
the business district.</p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="2664aa.jpg"></div>

      <span   class="bold"><b>Bob Hepple</b></span>
      has been hacking at Unix since 1981
      under a variety of excuses and has somehow been paid for it at
      least some of the time. It's allowed him to pursue another
      interest&mdash;living in warm, exotic places including Hong Kong,
      Australia, Qatar, Saudi Arabia, Lesotho and (presently) Singapore.
      His initial aversion to the cold was learned in the UK. His
      ambition is to stop working for the credit card company and tax man
      and to get a real job. Bob can be reached at
      bhepple@pacific.net.sg.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../047/toc047.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>