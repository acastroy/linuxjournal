<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Paranoid Penguin</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;SUSE is a security-friendly distribution with a plethora of&#10;security-related tools.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1504580.0x15fbab0"></a>
Paranoid Penguin</h1></div><div><h3 class="subtitle"><i>
Security Features in SUSE 10.0</i></h3></div><div><div class="author"><h3 class="author">
Mick
 
Bauer
</h3></div><div class="issuemoyr">Issue #144, April 2006</div></div><div><p>
SUSE is a security-friendly distribution with a plethora of
security-related tools.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x15fc3f8"></a></h2></div></div><p>
Over the years, we've seen more and better security features incorporated
into our favorite Linux distributions. Distribution-specific security
awareness manifests itself in many ways, including:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Availability of security-enhancing applications.
</p></li><li><p>
&ldquo;Hardening&rdquo; functionality in setup/installation scripts.
</p></li><li><p>
The way patches are handled.
</p></li><li><p>
Default settings of network applications.
</p></li></ul></div><p>
This month, I begin a series of three articles on
distribution-specific security in SUSE Linux, Debian GNU/Linux
and Red Hat Enterprise Linux. These are the three distributions with
which I've had the most experience, and they are arguably the three most
popular. (But as with anything, if you want to contribute an article
about your own favorite distribution, go for it! See our author's guide
at <a href="http://www.linuxjournal.com/xstatic/author/authguide" target="_self">www.linuxjournal.com/xstatic/author/authguide</a>.)
</p><p>
I'll start with SUSE 10.0. SUSE is a general-purpose,
commercially produced Linux distribution developed for Intel 32-
and 64-bit platforms. Originally based in Germany and still primarily
developed there, SUSE is now owned by Novell. There are a number of
different SUSE products, including SUSE Linux, a &ldquo;personal&rdquo; version
available from numerous retail outlets; SUSE Linux Enterprise Server, an
&ldquo;enterprise-grade&rdquo; version available directly from Novell; and OpenSUSE,
which is essentially the same as SUSE Linux but without installation
media (it's installable only over the Internet), printed manuals or
installation support.
</p><p>
The basis of this article is SUSE Linux 10.0, that is, the commercial
&ldquo;personal use&rdquo; version. Everything I say here should be equally applicable
to OpenLinux 10.0, and mostly relevant to the Enterprise versions of
SUSE. Presumably, the Enterprise versions include additional security-related packages and
features.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x15fc978"></a>
Installing SUSE Linux 10.0</h2></div></div><p>
System security begins with installation. This is your first opportunity
to make crucial decisions concerning what role the system will play,
which software the system will run and how the system will be
configured. Therefore, it's useful to begin our discussion of SUSE
security with the installation process.
</p><p>
All versions of SUSE use YaST (Yet Another Setup Tool) both for initial
system installation and for ongoing system administration. Over the
years,
YaST has evolved from a simple RPM front end to a modular, comprehensive
administration tool that can be used to configure not only low-level
system software but also complex server applications such as Apache
and Postfix.
</p><p>
We'll talk more about YaST shortly. Your immediate problem during
initial OS installation, however, is deciding which software packages to
install. And if you're security-focused, this is a happy problem. SUSE
Linux 10.0 offers a wide variety of security applications from which to
choose.
</p><p>
In my view, these applications fall into two categories: system security
applications and security-scanning applications. The former include both
general-purpose applications with strong security features&mdash;Postfix
springs instantly to mind&mdash;and applications whose sole purpose is
providing security controls to other applications or to the underlying
operating system, of which tcpwrappers is a classic example. Table 1
lists the packages
in SUSE Linux 10.0 that enhance system security.
</p><div class="table"><a name="N0x1504580.0x15fcb88"></a><p class="title"><b>Table 1. Some Security-Enhancing Packages in SUSE Linux 10.0
</b></p><table     summary="Table 1. Some Security-Enhancing Packages in SUSE Linux 10.0&#10;" border="1"><colgroup><col><col></colgroup><thead><tr><th>Package Name</th><th>Description</th></tr></thead><tbody><tr><td>aide, fam</td><td>File integrity checkers, both similar to Tripwire.</td></tr><tr><td>
bind-chrootenv</td><td>Automatically creates a chroot environment in which
to run BIND (the DNS daemon) more securely.</td></tr><tr><td>
clamav, antivir</td><td>
Antivirus packages&mdash;clamav is completely free,
but antivir is commercial (free for personal use).</td></tr><tr><td>
cracklib</td><td>Library and utilities to prevent users from choosing easily
guessed passwords.</td></tr><tr><td>
gpg, gpg2, gpa</td><td>GNU Privacy Guard (gpg), a versatile and ubiquitous e-mail- and
file-encryption utility.</td></tr><tr><td>
ipsectools, openswan</td><td>Tools for building IPsec-based virtual private networks.</td></tr><tr><td>
openldap, freeradius</td><td>Open-source authentication daemons.</td></tr><tr><td>
proxy-suite</td><td>An FTP security proxy developed by SUSE.</td></tr><tr><td>seccheck</td><td>SUSE-customized cron scripts that perform various security checks
against logs, system state and so on, and send e-mail reports to you.</td></tr><tr><td>
subdomain-utils, subdomain-profiles, mod-change-hat and so on</td><td>AppArmor, a mandatory access control (MAC) system that restricts
the behavior of specific binaries. SUSE uses this instead of SELinux,
which it closely resembles.</td></tr><tr><td>squid, SquidGuard</td><td>Squid is a popular HTTP/HTTPS proxy. SquidGuard adds access
controls and other security features.</td></tr><tr><td>SUSEfirewall</td><td>SUSE's handy front end for Linux's netfilter/iptables.</td></tr><tr><td>syslog-ng</td><td>Advanced system logger, much more powerful than syslogd. syslog-ng
is SUSE's default logger.</td></tr><tr><td>tinyca2</td><td>Front end to OpenSSL for managing Certificate Authorities.</td></tr><tr><td>yast2-firewall</td><td>Firewall functionality.</td></tr><tr><td>vsftpd</td><td>The Very Secure FTP Daemon.</td></tr><tr><td>xen, FAUmachine, uml-utilities, bochs</td><td>The Xen, FAUmachine, User Mode Linux and BOCHS virtual machine
environments.</td></tr></tbody></table></div><p>
Actually, the lengthy list of packages in Table 1 represents only
particular favorites of mine and SUSE-specific selections. SUSE
includes many, many more system security tools, including tcpd
(tcpwrappers), openssl, chkrootkit, sudo and wipe. You can
view the full list of packages included in SUSE Linux 10.0 at
<a href="http://www.novell.com/products/linuxpackages/professional/index_all.html" target="_self">www.novell.com/products/linuxpackages/professional/index_all.html</a>.
</p><p>
Besides securing the system on which you install SUSE, you may be
interested in using a SUSE system to validate the security of other
systems or of entire networks. SUSE is a good choice for this. Table
2 shows some SUSE Linux 10.0 packages that can be used for security
scanning. Note that you should never install these packages (except
perhaps Snort) on any Internet-connected server. Each is of much greater
use to an attacker than it is to you in that context. Scanning software
should be performed from systems that are normally kept out of harm's
way.
</p><div class="table"><a name="N0x1504580.0x15f4968"></a><p class="title"><b>Table 2. Security Scanners in SUSE Linux 10.0</b></p><table     summary="Table 2. Security Scanners in SUSE Linux 10.0" border="1"><colgroup><col><col></colgroup><thead><tr><th>Package Name</th><th>Description</th></tr></thead><tbody><tr><td>
ethereal, tcpdump</td><td>Excellent packet sniffers.</td></tr><tr><td>fping</td><td>Flood ping (multiple-target ping).</td></tr><tr><td>john</td><td>John the Ripper, a password-cracking tool (legitimately used for
identifying weak passwords).</td></tr><tr><td>kismet</td><td>Wireless LAN sniffer.</td></tr><tr><td>nessus-core, nessus-libraries</td><td>The Nessus general-purpose security scanner.</td></tr><tr><td>nmap</td><td>Undisputed king of port scanners.</td></tr><tr><td>
snort</td><td>Outstanding packet sniffer, packet logger and intrusion detection
system.</td></tr></tbody></table></div><p>
If you're new to SUSE, you should be aware that by default, YaST uses
a Selections filter (view) for selecting packages, in which only a
small subset of all available packages is offered to you. If you don't
see something you need in this view, for example, nessus-core, use the
Package Groups filter to see a more complete set of categories. If you
want to see a single list of all packages in alphabetical order, simply
set the filter to Package Groups and click on the group zzz All
(Figure 1).
</p><div       class="mediaobject"><a href="8783f1.large.jpg"><img src="8783f1.jpg"></a><div class="caption"><p>
Figure 1. Viewing All Available Packages in YaST
</p></div></div><p>
You also can set the filter to Search to search for packages by name
or keyword.
</p><p>
After you've selected and installed all software packages, YaST
allows you to set the root password and create the first (nonroot)
user account. By default, SUSE uses Blowfish for password encryption,
and YaST checks the password you type for complexity. (Too-simple a
password can be easily guessed or brute-force cracked by an attacker.)
</p><p>
You're also given the opportunity to enable local firewall scripts
(enabled by default), and the SSH and VNC remote-shell daemons (both
disabled by default). Note that of the latter two, SSH is the best choice
for administering bastion hosts (hardened Internet servers)--among
other reasons, you shouldn't be using the X Window System on bastion
hosts unless you've got a very specific, very compelling reason. YaST,
it should be noted, runs perfectly well in text (ncurses) mode, with
exactly the same modules and options as the X version. Also, tightvnc,
the version of the VNC remote-desktop tool shipped with SUSE, doesn't
encrypt session data, only authentication data.
</p><p>
Note also that at installation time, you aren't given the opportunity to
customize your local firewall settings. Initially, a default script
is used that provides a simple &ldquo;allow all outbound transactions, allow
nothing inbound that wasn't initiated locally&rdquo; policy. In other words,
the default SUSEfirewall script is perfectly appropriate for most desktop
systems, but it is inadequate for server use. You can change this later on by
running YaST's Firewall module.
</p><p>
YaST then lets you choose from the following methods for authenticating
nonroot users:
</p><div class="itemizedlist"><ul type="disc"><li><p>
local /etc/passwd file (default).
</p></li><li><p>
LDAP.
</p></li><li><p>
NIS.
</p></li><li><p>
Samba (Windows NT Domains).
</p></li></ul></div><p>
Active Directory authentication is also supported in SUSE Linux 10.0,
via Kerberos.
</p><p>
Once you've selected an authentication method, you can create your first
nonroot user account. Be sure to leave Automatic Logon disabled unless
your system has very low security requirements indeed&mdash;enabling this
causes the machine to log in your nonroot user automatically at boot
time. (About the only situation in which this is a good idea, I think,
is for kiosk-type systems!)
</p><p>
And that's it&mdash;SUSE installation is now finished! Your job as a
security-conscious system administrator, however, is not.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x15f5b48"></a>
Security-Related YaST Modules</h2></div></div><p>
After the first time you boot your newly minted SUSE Linux system, you
immediately should log in as your unprivileged user and invoke YaST. If
you do this from within KDE or GNOME, you'll be prompted
for the root password automatically, but in a text-console session, you need to use
<tt  >su -c</tt> to invoke /sbin/yast.
</p><p>
As I mentioned earlier, YaST has a lot of security functionality built
in. YaST modules particularly relevant to system security are listed in
Table 3.
</p><div class="table"><a name="N0x1504580.0x15f5d00"></a><p class="title"><b>Table 3. Security-Related YaST Modules</b></p><table     summary="Table 3. Security-Related YaST Modules" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>YaST Section</th><th>Module Name</th><th>Description</th></tr></thead><tbody><tr><td>Software</td><td>Online Update</td><td>Sets up manual and automatic software updates.</td></tr><tr><td>&nbsp;</td><td>Software Management</td><td>For installing and removing packages.</td></tr><tr><td>&nbsp;</td><td>Virtual Machine Installation (XEN)</td><td>Creates virtual machines for the Xen 3 virtual machine
environment.</td></tr><tr><td>System</td><td>/etc/sysconfig Editor</td><td>Edits daemon startup parameters.</td></tr><tr><td>&nbsp;</td><td>System Services (Runlevel)</td><td>Manages startup scripts.</td></tr><tr><td>&nbsp;</td><td>Powertweak</td><td>Sets advanced kernel parameters, such as TCP timewait
sockets.</td></tr><tr><td>Network Services</td><td>DNS Server</td><td>Configures BIND.</td></tr><tr><td>&nbsp;</td><td>HTTP Server</td><td>Configures Apache.</td></tr><tr><td>&nbsp;</td><td>LDAP Client</td><td>Sets up LDAP authentication and lookups.</td></tr><tr><td>&nbsp;</td><td>Mail Transfer Agent</td><td>Configures Postfix or Sendmail.</td></tr><tr><td>&nbsp;</td><td>Kerberos Client</td><td>Sets up Kerberos authentication, including Active
Directory.</td></tr><tr><td>&nbsp;</td><td>Remote Administration</td><td>Configures TightVNC.</td></tr><tr><td>Novell AppArmor</td><td>Various</td><td>For managing AppArmor mandatory access controls on specific
binaries.</td></tr><tr><td>Security and Users</td><td>Firewall</td><td>For managing netfilter/iptables settings.</td></tr><tr><td>&nbsp;</td><td>Local Security</td><td>Determines password complexity and length, password aging,
file-permission schemes and various other system security
parameters.</td></tr><tr><td>&nbsp;</td><td>Group Management</td><td>Used to create, edit and delete group accounts.</td></tr><tr><td>&nbsp;</td><td>User Management</td><td>Used to create, edit and delete user accounts (actually the same
module as Group Management, which is dual-purpose). </td></tr></tbody></table></div><p>
Of these YaST modules, Online Update is one of the most important. You
immediately should use it to configure automatic patch downloads and,
unless your system is under a change-control process, automatic patch
installation as well. YaST Online Update was one of the first automatic
patch utilities offered in a major Linux distribution, and it's still
one of the best. Use it to take advantage of SUSE's excellent record of
providing prompt, well-tested security patches.
</p><p>
The Firewall module (Figure 2) is also extremely useful, especially if
you're uncomfortable creating and managing your own firewall scripts
(I acknowledge that people like me, who find this fascinating and fun,
are rare). Similarly, Group/User Management eliminates the need for
you ever to edit /etc/group or /etc/passwd manually.
</p><div       class="mediaobject"><a href="8783f2.large.jpg"><img src="8783f2.jpg"></a><div class="caption"><p>
Figure 2. YaST's Firewall Module
</p></div></div><p>
The Virtual Machine Installation module and Novell AppArmor section are
also especially noteworthy. So much so, in fact, that I should spend
some time talking about SUSE's virtual machine and mandatory access
control systems, respectively, in a little more depth.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x190afd8"></a>
Virtual Machines in SUSE Linux</h2></div></div><p>
You may recall my article &ldquo;The Future of Linux Security&rdquo;
[<i  >LJ</i>, August 2005], in which I touted virtual machine environments and
hypervisors (aka security monitors) as being an important new
direction in system security. If you don't recall this, the gist of it
is that it's because MAC schemes such as SELinux are
viewed by many people as too complex. A simpler approach instead is to
run each major application or service on its own virtual machine. That
way, if for example a virtual machine in which Sendmail is running gets
compromised, a virtual machine running Apache2 on the same physical
hardware won't be in immediate or direct danger.
</p><p>
Virtual machines, therefore, provide a powerful and easy-to-understand
means of isolating complex applications from each other. And, SUSE Linux
10.0 includes no fewer than three different virtual machine technologies.
</p><p>
The Xen 3 environment, which originated at Cambridge University,
is provided by SUSE as a &ldquo;technology preview&rdquo;. To the best of my
determination, this simply means that because Xen 3 is an immature
and potentially unstable application, SUSE is simply trying to lower
people's expectations of its usability&mdash;the version of Xen 3 in SUSE
Linux 10.0 isn't a special preview or evaluation version or anything
like that. Xen 3 supports Linux, FreeBSD, NetBSD and Plan9
&ldquo;guest&rdquo;
(virtual) systems.
</p><p>
Alternatively, the FAUmachine virtualization environment includes RPM
packages that enable support for SUSE 9, Debian 3.0, OpenBSD 3.5/3.6
and Red Hat 9 guest systems. One advantage of FAUmachine over Xen 3 is
that in FAUmachine, the guest systems' kernels run on the host system
with nonroot (unprivileged-user) permissions.
</p><p>
User Mode Linux is another virtualization environment offered in SUSE
Linux 10.0 via the uml-utilities package. Like FAUmachine, its guest
kernels run without root privileges.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x190b298"></a>
Novell (Immunix) AppArmor</h2></div></div><p>
However, not everyone has given up on MAC-based system security, and SUSE
has covered this area handsomely by acquiring and repackaging Immunix's
AppArmor (aka Subdomain). AppArmor is similar to SELinux, in that it
allows you to restrict the behavior of specific processes, with an effect
similar to but more effective than running them in chroot jails.
</p><p>
(Note that although SUSE provides the libselinux package and includes
SELinux functionality in its default kernel, SELinux isn't
officially supported in SUSE Linux. You need the packages available at
<a href="http://www.cip.ifi.lmu.de/~bleher/selinux" target="_self">www.cip.ifi.lmu.de/~bleher/selinux</a> to run SELinux in SUSE Linux.)
</p><p>
The document /usr/share/doc/packages/subdomain-docs/ug_apparmor.pdf,
included in the subdomain-docs package, is the AppArmor User's Guide,
and it tells you everything you need to know about configuring and
using AppArmor. Suffice it to say for now that if you simply run the
YaST AppArmor Control Panel module and enable AppArmor, a default
profile is loaded that includes settings for many common daemons
and commands, including netstat, ping, traceroute, firefox, evolution,
gaim, syslogd, acroread, ethereal, appropos, procmail, postfix (smtpd,
and so on), Apache2 (httpd2-prefork), nscd, identd, ntpd, sshd and squid.
</p><p>
This is a limited-feature version of AppArmor, so apparently it provides
only a subset of features available in the full $1,250 US version.
Personally, I'm not clear as to precisely what the difference is,
though&mdash;everything
I tried to do with the version in SUSE Linux 10.0 seemed to work fine, so
this would not appear to be a too significantly crippled edition. Perhaps
the full version includes a longer list of preconfigured applications.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1504580.0x190b500"></a>
Conclusion</h2></div></div><p>
These aren't SUSE Linux 10.0's only security features. I haven't talked
about how secure many applications' default settings are (in general
they're quite secure, with daemons running with nonroot privileges
whenever possible, network listeners such as sshd typically disabled by
default and so on).
</p><p>
This is a very security-friendly version of SUSE Linux indeed. Remember,
though, that real security begins with you&mdash;little of SUSE's
security potential is realized until you configure or at least enable
it yourself! Hopefully, this article has helped you get a feel
for what that potential is.
</p><p>
Next month, it's on to Debian 3.1. Until then, be safe!
</p></div></div>
<div class="authorblurb"><p>
Mick Bauer (<a href="mailto:darth.elmo@wiremonkeys.org">darth.elmo@wiremonkeys.org</a>) is Network
Security
Architect for one of the US's largest banks. He is the author of
the O'Reilly book <span   class="emphasis"><em>Linux Server Security</em></span>, 2nd edition
(formerly called
<span   class="emphasis"><em>Building Secure Servers With Linux</em></span>), an occasional
presenter at
information security conferences and composer of the &ldquo;Network
Engineering Polka&rdquo;.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../144/toc144.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>