<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
VirtualBox: Bits and Bytes Masquerading as Machines</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Using virtualization to turn your ho-hum desktop into&#10;a computer cluster.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x204e580.0x2145ab0"></a>
VirtualBox: Bits and Bytes Masquerading as Machines</h1></div><div><div class="author"><h3 class="author">
Jon
 
Watson
</h3></div><div class="issuemoyr">Issue #166, February 2008</div></div><div><p>
Using virtualization to turn your ho-hum desktop into
a computer cluster.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2146240"></a></h2></div></div><p>
As our home computers become more robust, we can do more powerful things
with them. Virtualization isn't new; it's almost as old as computers
themselves, but the ability to run virtualization platforms on a typical
home computer is relatively new and becoming more exciting every day.
</p><p>
For the uninitiated, virtualization in the context of this article refers
to the ability to run a full-blown operating system within an application
running on an existing computer. For example, virtualization allows us to
run Windows XP in a window on a Linux desktop, a full-blown LAMP server
on a Windows machine, or BSD inside a Mac OS machine. The combinations
are endless, and any relatively modern personal computer is likely to be
beefy enough to handle it.
</p><p>
So why would you bother? Well, only those who haven't been exposed to
virtualization generally ask this question. Once the benefits and neato
factors of desktop virtualization become apparent, it's hard to stop the
ideas from flowing. In my opinion, the two major benefits of virtualization
are ease of backups and host system stability. If I want to figure out
how to set up a LAMP server, I have two choices: get my hands on another
physical machine or do it in a virtual machine. Either way will leave
me with a fully functional LAMP server, but the virtual machine costs me
nothing and is set up on my existing computer without making any system
changes to it.
</p><p>
Once my LAMP server is happily humming away, it would behoove me to
have some off-site backups of it. With a physical server, I would need
to have yet another machine of some kind perform off-site backups, and
bare-metal restores can be tricky if the entire machine melts down. With
a virtualized LAMP server, all I have to do is copy the files that the
virtual machine is composed of, burn them to CD/DVD and chuck it in a
drawer&mdash;cheap and easy.
</p><p>
Virtualizing requires two distinct components: a host machine and a
guest. The host machine is your desktop or laptop where the virtualization
software is installed. The more common virtualization applications on
the market these days are VMware, Win4Lin (Windows virtualization only),
VirtualBox and Parallels, with more offerings appearing every
day. Although many of these products also provide enterprise-level server
virtualization, in this article, I focus on the home enthusiast with a typical
Linux computer to get things rolling.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x21465b0"></a>
Having Fun with VirtualBox</h2></div></div><p>
It makes the most sense to use innotek's VirtualBox, because unlike the
other virtualization offerings, VirtualBox has a GPL'd Open Source Edition
(OSE). The closed-source edition has dual licensing, in that it is gratis
for personal and evaluation use but fee-bearing for enterprise use. The
OSE is licensed under the GNU GPLv2 but is missing some well-thought-out
functionality that is available in the non-GPL'd editions. The missing
functionality from the OSE includes:
</p><div class="orderedlist"><ol type="1"><li><p>
No RDP support&mdash;you cannot connect to VirtualBox virtual machines
from a remote location.
</p></li><li><p>
No USB support&mdash;USB devices won't work in the virtual machine.
</p></li><li><p>
No USB-over-RDP support (I guess that makes sense given the first
two limitations).
</p></li><li><p>
No shared folders&mdash;you will not be able to share data between the
host and guest machines.
</p></li><li><p>
No iSCSI initiator&mdash;SCSI disks cannot be used as virtual disks.
</p></li></ol></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2146a80"></a>
Installation of VirtualBox</h2></div></div><p>
VirtualBox downloads are available for Windows, OS X and a wide variety
of Linux distributions. I am running Ubuntu Gutsy Gibbon on my Dell
Inspiron 9400 (1.83GHz Core Duo with 1GB of RAM), so I installed the 13.6MB
virtualbox_1.5.2-25433_Ubuntu_gutsy_i386.deb. Note that the OSE is
available only in a tarball, but because I am installing VirtualBox
for personal and evaluation use, I am lazily installing the Debian
binary (Figure 1).
</p><div       class="mediaobject"><a href="9941f1.large.jpg"><img src="9941f1.jpg"></a><div class="caption"><p>
Figure 1. Installing the VirtualBox Gutsy Gibbon .deb Package
</p></div></div><p>
The Gutsy Gibbon VirtualBox has some dependencies, which Synaptic took
care of for me. If you run into dependency problems, ensure that you have
libxalan110 and libxerces27 installed. Also note that at the end of the
VirtualBox install, a dialog box containing instructions on how to set
the permissions of the /dev/vboxdrv file is displayed. Pay attention to those
instructions as you will need them later.
</p><p>
After installation, I found VirtualBox under my Ubuntu Menu&rarr;System
Tools slot.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2146df0"></a>
Creating a New Virtual Machine</h2></div></div><p>
Because I opted for the personal evaluation binary, I had to
accept the PELA and fill in a quick registration at first launch.
</p><p>
There are two parts to creating any virtual machine: the creation
of the virtual machine container and then the installation of the
OS into that container. To do the first part, start VirtualBox and
click the New icon. This opens up the New Virtual Machine Wizard
(Figure 2).
</p><div       class="mediaobject"><a href="9941f2.large.jpg"><img src="9941f2.jpg"></a><div class="caption"><p>
Figure 2. The VirtualBox New Virtual Machine Wizard
</p></div></div><p>
First, you must name your virtual machine. I know from experience that
I will create many, many virtual machines, so I have opted to name them
each as the OS and then its function. In this case, I want to see whether I
can run our podcasting rig out of a VirtualBox virtual machine, so I'm
going to install dyne:bolic into my virtual machine. Therefore, I 
name this virtual machine Dynebolic-Podcasting and select the Linux 2.6
kernel OS (Figure 3). 
</p><div       class="mediaobject"><a href="9941f3.large.jpg"><img src="9941f3.jpg"></a><div class="caption"><p>
Figure 3. Select the virtual machine OS and set the name.
</p></div></div><p>
Like a physical machine, a virtual machine needs some RAM. On the
next screen, the wizard suggests 256MB of RAM. However, because I know
that crunching a big Ogg file can take a system to its knees, I 
allocate 512MB to this virtual machine (Figure 4). 
</p><div       class="mediaobject"><a href="9941f4.large.jpg"><img src="9941f4.jpg"></a><div class="caption"><p>
Figure 4. Setting the RAM of the Virtual Machine
</p></div></div><p>
What does the virtual machine need next? Well, just like a regular
machine, it needs a hard drive. I know from experience that I can use
a CD/DVD ISO file (like my friendly dyne:bolic ISO) as the bootable
hard drive, but VirtualBox's new machine wizard doesn't allow for
that. I will be able to add my ISO later on, but not right now. So,
as counter-intuitive as it seems, simply click the Next button without
setting up any disks and acknowledge the error dialog that tries to
stop this folly (Figure 5). Click Finish, and <span   class="emphasis"><em>voil&agrave;</em></span>, you have
a shiny new dyne:bolic virtual container.
</p><div       class="mediaobject"><a href="9941f5.large.jpg"><img src="9941f5.jpg"></a><div class="caption"><p>
Figure 5. VirtualBox's Caution Dialog about Not Creating a Hard Disk
</p></div></div><p>
Sadly, this virtual machine will not boot, because I still don't have
a hard drive or other bootable media. I want this thing to boot the
dyne:bolic ISO image I have stored on my hard drive, so I have to mount
a virtual CD/DVD drive into my virtual machine. This is one area where
virtual and physical machines differ. If this were a physical machine, I
would not only have to attach a CD/DVD drive to the machine, but I also would
have to insert my dyne:bolic CD into the drive for the machine to
boot in to it. With a virtual machine, I merely point to the ISO image,
and VirtualBox is smart enough to understand that it is to boot from
it. To accomplish this rather unintuitive task, follow these steps from
the main VirtualBox screen:
</p><div class="orderedlist"><ol type="1"><li><p>
Highlight the virtual machine you just created.
</p></li><li><p>
Click the blue CD/DVD-ROM label in the right column.
</p></li><li><p>
Click the Mount CD/DVD Drive check box (Figure 6).
</p></li><li><p>
Click the ISO Image File check box.
</p></li><li><p>
Click the file folder browse icon next to the ISO Image File drop-down list box.
</p></li><li><p>
Click the Add button and browse for your ISO image (Figure 7).
</p></li></ol></div><div       class="mediaobject"><a href="9941f6.large.jpg"><img src="9941f6.jpg"></a><div class="caption"><p>
Figure 6. Create a Virtual CD/DVD ROM Drive
</p></div></div><div       class="mediaobject"><a href="9941f7.large.jpg"><img src="9941f7.jpg"></a><div class="caption"><p>
Figure 7. Use an ISO file from which to boot the virtual machine.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2540220"></a>
Creating a Hard Drive</h2></div></div><p>
Note that the screen from Step 2 above also provides the interface to add
all sorts of ports and storage devices to the virtual machine. I'm happy
running my dyne:bolic as a live CD, but if I wanted to install it into this
virtual machine, I would have to create a hard drive into which to install it.
</p><p>
There are two types of hard drives in the virtual world: those that take
up all the space they are allocated right off the bat, and those that
can grow into their maximum allocated size as needed. I'm a big
fan of the second type, because it allows me to allocate large amounts
of disk space to my virtual machines without fearing that I will lose all
that space from my host machine right away.
</p><p>
To create a growable hard disk, get yourself back to the main VirtualBox
interface and ensure that the virtual machine is shut down. Then, follow these steps:
</p><div class="orderedlist"><ol type="1"><li><p>
Highlight the virtual machine to which you want to add a drive.
</p></li><li><p>
Click the blue Hard Disks label in the right column.
</p></li><li><p>
To add a primary master drive, select the Primary Master check box.
</p></li><li><p>
Select the file folder browse icon next to the Primary Master check box.
</p></li><li><p>
Click the New button. 
</p></li><li><p>
Select the Dynamically expanding image check box, unless you have a
reason to select the Fixed-size image, and click the Next button.
</p></li><li><p>
I recommend naming your disk file(s) with the same name as the virtual
machine to which they belong. There are instances where you might want to
share disks between virtual machines, and therefore this naming convention
might not make sense, but for the most part, the &ldquo;one-disk-one-machine&rdquo;
philosophy works well.
</p></li><li><p>
Use the Image Size slider, or type in the desired disk
size (Figure 8).
</p></li><li><p>
Click the Next button and the Finish button, and you now have a disk
for your virtual machine.
</p></li></ol></div><div       class="mediaobject"><a href="9941f8.large.jpg"><img src="9941f8.jpg"></a><div class="caption"><p>
Figure 8. Add a hard disk to the virtual machine.
</p></div></div><p>
If you've done everything right, the main VirtualBox screen
will show your ISO under the CD/DVD-ROM label (remember, I didn't
actually create a hard disk for my machine, so it doesn't show in my
screenshot&mdash;Figure 9).
</p><div       class="mediaobject"><a href="9941f9.large.jpg"><img src="9941f9.jpg"></a><div class="caption"><p>
Figure 9. Newly Created Virtual Machine Overview
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2540e80"></a>
Turn Me On!</h2></div></div><p>
Let's turn this baby on and see what happens. To turn on your new virtual
machine, highlight it in the left pane of the VirtualBox interface,
and then click the Start button in the toolbar. Note the Auto capture
keyboard notification dialog. Essentially, it is notifying you that
once you click anywhere inside your running virtual machine, all your
keyboard keystrokes from that point on will be sent to the virtual
machine rather than to the host machine. This may not seem like a big deal,
but trying to shut down your machine or even resize a window when you
have no keyboard or mouse control of the host machine is really quite
difficult. In order to free your mouse and keyboard from the confines of
your virtual machine, you have to press the right-Ctrl key. You
can specify a different Auto capture escape key by going to
File&rarr;Preferences&rarr;General&rarr;Input, if the default right-Ctrl key doesn't suit you.
</p><p>
Your mileage may vary, but the next thing I encountered was another
dialog box full of doom and gloom. This one informed me that my logged-in user (jdw) wasn't part of the vboxusers group and therefore could
not access the /dev/vboxdrv file. It would seem intuitive to me to add
the user that is installing VirtualBox to the vboxusers group to avoid
this error message, but that isn't part of the installation process. To
do it manually on my Ubuntu box, I simply edit my /etc/group file to add
jdw to the vboxusers line and relog in (Figure 10).
</p><div       class="mediaobject"><a href="9941f10.large.jpg"><img src="9941f10.jpg"></a><div class="caption"><p>
Figure 10. Adding My User to the vboxusers Group
</p></div></div><p>
My new group membership is all I need to launch my virtual
machine successfully, and I am now running dyne:bolic in VirtualBox on my Ubuntu Gutsy
machine (Figure 11). I have good reasons for wanting to run
dyne:bolic in a virtual machine&mdash;primarily because dyne:bolic doesn't
like my actual video card, an ATI x1400, but it has no problems with the
innotek virtual VGA driver. I also get the added benefit of not having
to boot my system in dyne:bolic, so I retain access to my host machine
while I'm using it.
</p><div       class="mediaobject"><a href="9941f11.large.jpg"><img src="9941f11.jpg"></a><div class="caption"><p>
Figure 11. Dynebolic Running in a VirtualBox Machine on a Gutsy Gibbon Desktop
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2541400"></a>
Guest Additions</h2></div></div><p>
VirtualBox provides some applications called Guest Additions. If you've
ever used VMware, you've likely stumbled across VMware Tools. Guest
Additions are much the same thing in that they are installed into the
guest machine and provide some functionality, such as arbitrary window
size and better mouse control, to the guest session. You certainly
can run a VirtualBox virtual machine without Guest Additions installed,
but the experience is better with them.
</p><p>
Guest Additions are installed into the virtual machine itself rather
than onto the host machine. Therefore, for every virtual machine 
you have, you'll need to install the Guest Additions through the machine's
handy Install Guest Additions menu option in the Devices menu.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2541560"></a>
Snapshots</h2></div></div><p>
Earlier, I mentioned that one of the great benefits of using virtual
machines over physical machines is that a complete bare-metal backup
is as easy as file copy. There are other benefits in this area as well
though, such as snapshotting.
</p><p>
When a virtual machine is running, select Machine&rarr;Snapshot to take
a quick restore point for the machine. This is invaluable when you're
installing new software, reconfiguring the virtual machine or doing
something else dangerous. If you muck it up, you simply can shut down the
virtual machine, select the Snapshots tab and restore the machine
from any of the snapshots you've taken. To restore the machine to a
previous snapshot, right-click the desired snapshot and select Revert
to Current Snapshot (Figure 12).
</p><div       class="mediaobject"><a href="9941f12.large.jpg"><img src="9941f12.jpg"></a><div class="caption"><p>
Figure 12. Select a snapshot to restore.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x25418d0"></a>
Getting Help</h2></div></div><p>
VirtualBox comes with a surprisingly complete help manual. Pressing
F1 on any screen brings up the VirtualBox manual, although it
isn't context-sensitive. The help manual is well laid out and easy
to understand. There also are forums, IRC and a mailing list on the
VirtualBox site as well as a public bug tracker.
</p><p>
Additionally, there's a complete set of technical documents available on the
VirtualBox Web site that is aimed at developers and those who want to
contribute to the OSE version of the product.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2541a30"></a>
Your New Virtual World</h2></div></div><p>
Although the most common use of virtualization technologies is still
certainly in the enterprise space, there are enough desktop virtualization
applications out there now that a home user can join the fun. Whether
you need an OS to study for a certification, want to run an OS that
your host machine can't run directly (like me), want to run a server
but don't have another physical machine to use, or just plain-old want
to experiment, VirtualBox is a quick-and-easy way to jump into the fray.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x204e580.0x2541b38"></a></h2></div></div><div class="sidebar"><p class="title"><b>Resources</b></p><p>
Open Source VirtualBox and Other Editions:
<a href="http://www.virtualbox.org/wiki/Editions" target="_self">www.virtualbox.org/wiki/Editions</a>
</p><p>
Downloading VirtualBox: <a href="http://www.virtualbox.org/wiki/Downloads" target="_self">www.virtualbox.org/wiki/Downloads</a>
</p><p>
VirtualBox Community: <a href="http://www.virtualbox.org/wiki/Community" target="_self">www.virtualbox.org/wiki/Community</a>
</p></div></div></div>
<div class="authorblurb"><p>
Jon Watson is a CompTIA Linux+ certified Linux integration consultant. Jon
lives in a 143-year-old house in the beautiful Canadian maritime province
of Nova Scotia with his wife Kelly and their two dogs.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../166/toc166.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>