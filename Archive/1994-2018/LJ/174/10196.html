<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Load Me Up, Load Me Down
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;The second-generation HP Media Vault.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xc4d580.0xd44ac0"></a>
Load Me Up, Load Me Down
</h1></div><div><div class="author"><h3 class="author">
Dan
 
Sawyer
</h3></div><div class="issuemoyr">Issue #174, October 2008</div></div><div><p>
The second-generation HP Media Vault.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd45408"></a></h2></div></div><p>
The HP Media Vault 5150 is a Linux-based network-attached storage (NAS) device
that aims to be the end-all-be-all for home and small-office network file
management and media service. It boasts not only a large capacity (700GB
or 1.4TB depending on how you allocate it), it also has a hardware RAID-1
option and USB ports for attaching additional storage. Its internal
drive bays use SATA drives, and the internal capacity theoretically
is upgradable to the limit of SATA drive technology, and it hooks into your
network through Gigabit Ethernet. Running out of bandwidth, therefore, is
not in the cards.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd455c0"></a>
What It Does</h2></div></div><p>
The HP Media Vault runs an SMB server, serving up browsable shares to the
network. Due to its large capacity, it's very useful for a number of
purposes, and it comes outfitted with a number of helper applications
that allow home users to maximize the benefits of having such a
device around. These bundled applications allow users to run an
iTunes server, share photos on-line with automatic gallery generation,
expose selected directories to the Internet and stream media to
properly enabled appliances that hook up to TVs and stereos. In other
words, in addition to being an all-purpose backup server, this thing aims
to be your TiVo, your jukebox, your photo server, your document server
and your Web server, all rolled into one with an automated backup cherry
on top.
</p><p>
All this functionality is administrable through a handy-dandy suite of
programs bundled with the device that runs on any modern Windows box. It
makes efficient use of open-source programs for nearly all its features,
and it is generally a well-engineered little piece of technology. Certainly,
home brewers who are looking to create their own NAS appliances could
do worse than look at what HP has pulled off with this little
gadget.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd457d0"></a>
The Good</h2></div></div><p>
The Media Vault lives up to its hype rather handsomely.	It's pretty
easy to administer with the bundled software&mdash;easy enough that an
average computer user should have very little difficulty getting up and
running and secured. The documentation that ships with it is aimed
entirely at novice users, walking them step by step through the self-explanatory
configuration screens and leaving, as far as HP is concerned, nothing
to chance.
</p><p>
The automatic backup function is a particularly nice touch&mdash;although
underneath the hood, it's little more than an active cp script running
in the background, the interface on it is slick and should make data
protection miles easier for the average Joe. As someone who climbed out
of the hell of doing sysadmin work in my younger years, I must confess
that I think it's rather like giving condoms to teenagers&mdash;it's
better that they have the ability to protect themselves, but most of them
probably won't think of it when they're in the heat of the computing moment.
Still, we can hope.
</p><p>
The UPnP/DLNA server option, which is what allows the Media Vault to act as a
streaming server for set-top boxes, actually works only with a
limited number of devices, as the standard is pretty new. But, it seems
to work with those devices seamlessly. A number of programs also
receive DLNA streams, most particularly VLC and MythTV, which means
Linux-savvy home users can use the Media Vault as a streaming server all
on its own instead of configuring a separate streaming server for their
media automation systems.
</p><p>
The Media Vault ships in a completely unsecured state&mdash;no password is
required to log in or configure the device. To my mind, for a device
aimed squarely at the average Joe end of the market, this is the perfect
default. I've seen people I otherwise care for very much turn into
incomprehensible babbling masses when confronted with a factory-set admin
password&mdash;they generally don't know enough to look for a sentence
like &ldquo;factory default login&rdquo;. Of course, this is a double-edged
sword, as there's nothing actually compelling users to set a proper
password or to take the additional available steps to secure the box,
so there will doubtless be a number of unsecured servers coming on-line
in the coming months as the Media Vault is adopted by its core audience.
</p><p>
Attaching external storage to increase the capacity (or to back up) the
Media Vault is also dead easy. Simply plug in a hard drive, allocate it
with the administration utility, and assign it a mountpoint. Once that's
done, you're ready to rock and roll. The Media Vault supports ext3 and
FAT32 filesystems natively, and it supports NTFS on a read-only basis.
</p><p>
Finally, a number of nice little options are available, such as
control over hard drive spin-down intervals and LED brightness&mdash;both
of which are very nice if you decide to set up the device in your bedroom.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd45ae8"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Mounting It from Linux</b></p><p>
Using the Media Vault from a Linux box on a heterogeneous network is
dead easy, so long as you have the relevant Samba packages installed.
You'll need SMBFS support and Samba client support if you want to set
your Media Vault shares to mount to your filesystem at bootup. In order
to pull this off, I had to do a little detective work to discover the
share names to plug in to fstab.
</p><p>
I used <tt  >smbclient -L hpmediavault</tt> to grab the following shares list from
the Media Vault:


<pre     class="programlisting">
Domain=[HPMEDIAVAULT] OS=[Unix] Server=[Samba 3.0.25b]

        Sharename       Type      Comment
        ---------       ----      -------
        Photos          Disk      Default_Photos
        Music           Disk      Default_Music
        Videos          Disk      Default_Videos
        Backup          Disk      Default_Backup
        Documents       Disk      Default_Documents
        IPC$            IPC       IPC Service (HPMediaVault Server)
Domain=[HPMEDIAVAULT] OS=[Unix] Server=[Samba 3.0.25b]

        Server               Comment
        ---------            -------

        Workgroup            Master
        ---------            -------
</pre>
</p><p>
Because there isn't a default ubershare, you'll have to add one line to
your fstab for each share. So long as you have the proper Samba support
installed, from here on out it's very easy. For each share, add a line
as follows:


<pre     class="programlisting">
//hpmediavault/sharename /your/mountpoint/here smbfs 
 &#8618;username=username,password=password,user,defaults 0 0
</pre>
</p><p>
Note the use of the user-mountable flag&mdash;this is important if you
expect to be able to write to the share at all. Samba mounts are picky
about who mounted the drive, and most systems won't let users write to
a mounted smbfs share unless they mounted it themselves.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd45fb8"></a>
The Bad</h2></div></div><p>
That's not to say that all is wine and roses. There are a lot of niggling
little problems with the HP Media Vault that keep it just on this side
of perfect.
</p><p>
The first, and perhaps the most irritating, is that despite the easy
kernel-level support for NFS, HP has chosen to strip this functionality
from the Media Vault. The Media Vault <span   class="emphasis"><em>only</em></span> serves up files over Samba, and
although Samba is nice, it requires extra tweaking and software installation
for Linux and Mac clients compared to NFS. HP could have broadened its
market at virtually zero expense simply by leaving NFS in the system.
</p><p>
HP also has, alas, not organized its documentation in a way that's
particularly friendly to those of us who don't&mdash;or can't&mdash;use the
included administration software. This is a shame, as administering
all but the most advanced functions of the Media Vault is simple for
anyone with a Web browser and an SSH connection. With a little digging
around&mdash;and the help of the good folks at HP's Marketing
department&mdash;I found the Web admin panel, enabled SSH, and got the server up
and running. See the Configuration without Windows sidebar for instructions on how to configure your
Media Vault if you want to do it the old-fashioned way.
</p><p>
To get full functionality out of the server, you have to use HP's bundled
administration software, and this software doesn't play nice with most
operating systems. More to the point, it plays nice only with Windows
XP and Vista&mdash;it won't even install on Windows 2000 or older systems,
and it doesn't work with Wine. This is a problem if you're wanting
to use some of the more advanced newbie-friendly features, such as the
iTunes server or the auto-generating photo albums and video playlists.
</p><p>
However, if you're willing to go without those things, most everything
else can be accomplished from the Web admin panel. And, if you're
a better hacker than I am, you can configure the iTunes
server manually over SSH using the instructions on the Firefly home page
(<a href="http://www.fireflymediaserver.org" target="_self">www.fireflymediaserver.org</a>).
</p><p>
However, to my mind, the most egregious problem is that currently no
firmware restore exits, nor any hardware reset, nor are there any
operating system restore disks either bundled with the product or
available for download. This means that if you screw up the system,
you're screwed. And, as the root partition is writable, screwing this
thing up while you're hacking it is easy. One misstep, and you've bricked
the device, and there is no recourse short of shipping the item back to
HP, and it's unclear whether the repair would be covered under warranty.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd46380"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Configuration without Windows</b></p><p>
For those of you who, like me, don't keep Vista or XP machines around,
setting up the Media Vault is a bit more of an adventure. We simply don't
have the option of using the bundled software without borrowing someone
else's computer or breaking down and installing XP on machines that
we've previously kept sacrosanct from MS Product Activation. This is
how you set up all but the most advanced features of the HP Media Vault
using SSH and a Web browser.
</p><p>
The first thing you need to do, after plugging the Media Vault in to your
network and powering it on, is to find the IP address. As it comes set
up to grab a DHCP lease automatically, the easiest way to do this is to
log in to your router and find the most recent lease. Once you find the
address, pull up that address in your Web browser. The browser screen
is a fairly straightforward Webmin panel&mdash;it allows you to create
users, access levels and directories, and to enable DLNA streaming on
a per-directory basis.
</p><p>
In order to enable SSH access, you need to go into the System
section, press Edit, and set your admin user name and password. The
password you set becomes the root password for the box, and you now can log
in via SSH. The user name and password you set also become the login info
for the Web admin panel. The System section, by the way, is where
you can set the LED brightness level and the hard disk spindown interval.
While you're setting up access levels, you'll want to add a user (or
a few users) appropriate to your environment in the User screen.
Everyone gets access to the basic pre-allocated folders, and each user
can create his or her own folders that you can set as private or shared, both
through the Web admin panel and through regular permissions management.
</p><p>
The other thing you'll want to do immediately is to allocate the disks
on the Disks page. By default, the MV5150 comes with one of the
700GB disks allocated and the other unallocated. You have the choice
here to allocate the second disk as a RAID-1 mirror or to allocate it as
additional disk space, resulting in 1.4TB of total space. This page is
also where you can add external USB disks of the appropriate filesystem
types.
</p><p>
Once you plug it in, you can, with a bit of jiggerypokery, find the thing
with an SMB browser. It's actually non-obvious in some SMB browsing
software (including some versions of Windows), but direct access can be
had at smb://hpmediavault. The easy way to deal with this, of course,
is to set up your workgroup information in the Network tab of the
Web admin panel.
</p><p>
The last thing to do to get the system up and running is to set up the
Web server by enabling remote access in the Remote Access tab.
Annoyingly, it doesn't seem to work without a domain registration (free
for a year, costing money after that), but checking this off allows
the folders whose permissions you have set as browsable to be browsed
from the Internet through a handy PHP interface. Hacking this thing
so it'll serve up your documents without going through the activation
process is pretty simple: SSH into the box, create a symlink in the
/usr/htdocs folder to the /share/1000/ folder. You then can serve up
files at http://myserver'sipaddress/symlink/sharefoldername/filename.
</p><p>
The last tab you'll want to check out is the Backup tab at the far
right. This allows you to hook up a USB drive and do a selective
backup&mdash;direct copy, not compressed&mdash;of selected directories. This process
will wipe the destination drive, but it's nice to have the easy redundancy
option with the processing performed locally on the Media Vault rather
than clogging the network by copying between one remote share and another.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc4d580.0xd467a0"></a>
Conclusion</h2></div></div><p>
Despite my lengthy griping above, this is a seriously well-designed NAS.
HP has done its homework and designed a box that will hit its target
market right between the eyes. Unfortunately, it's not going to do more
than that, so despite the fact that I've been really impressed by it,
my buy recommendation is a tepid one.
</p><p>
For Linux users looking for a safely hackable NAS, it might be a bit
much. The lack of any system restore means that this box is fragile and
might not play nice if you prod it in the wrong place. It's likewise
priced on the high side for what it delivers to someone who isn't using
it from a Windows machine and doesn't need serious data redundancy.
</p><p>
For average home users who are big into Web 2.0 services, it likewise
should be a very useful item, saving a lot of time and making it even
easier for people to plug their lives in to the Internet or take the bother out of
managing their media collections over the home network.
</p><p>
For the price (almost $700), the HP Media Vault 5150 is in the no-man's
land between a great value and an overpriced toy. It's well-outfitted,
physically robust, well-designed and has a lot of great little features
that make it ideal for a small-office/home-office environment.
Particularly impressive are its easy backup features and its
extensibility. I personally have found it quite useful as
a footage server, storing recordings and raw video for projects I'm
working on in my studio and for streaming draft projects out to the
screening room for previews.
</p><p>
A subset of the Linux market will find this box well worth the price.
If it suits your needs, it should be an excellent addition to your
network. But, if you're not in the position to take advantage of the
Windows-only value-added features, and the data security that the RAID
and scheduled backups afford you isn't worth paying the premium for,
you may want to give this one a miss. Here's hoping HP continues to
build great Linux-based devices, and in the future leaves them a little
more open for those of us who like Linux on more than just our servers.
</p></div></div>
<div class="authorblurb"><p>
Dan Sawyer is the founder of ArtisticWhispers Productions (<a href="http://www.artisticwhispers.com" target="_self">www.artisticwhispers.com</a>), a small audio/video
studio in the San Francisco Bay Area. He has been an enthusiastic
advocate for free and open-source software since the late 1990s,
when he founded the Blenderwars filmmaking community (<a href="http://www.blenderwars.com" target="_self">www.blenderwars.com</a>). He currently is the host
of &ldquo;The Polyschizmatic Reprobates Hour&rdquo;, a cultural
commentary podcast, and &ldquo;Sculpting God&rdquo;, a science-fiction
anthology podcast. Author contact information is available at <a href="http://www.jdsawyer.net" target="_self">www.jdsawyer.net</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../174/toc174.html">Issue Table of Contents</a>
    <a class="link3" href="../174/10196.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>