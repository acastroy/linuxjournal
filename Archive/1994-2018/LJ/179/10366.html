<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Letters</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xcc1580.0xdb8ac0"></a>Letters</h1></div></div><div class="qandaset"><a name="N0xcc1580.0xdb9040"></a><h4 class="title"><a name="N0xcc1580.0xdb9040"></a>Clarification from Damballa</h4><p>
<span   class="emphasis"><em>This letter is in regard to Grzegorz Landecki's &ldquo;Detecting Botnets&rdquo; article from the
January 2009 issue of <span class="emphasis"><em>Linux Journal</em></span>, from Paul Royal,
Principal Researcher at Damballa, Inc.&mdash;Ed.</em></span>
</p><p>
As the
individual
who discovered the Kraken botnet, I wanted to clarify some inaccuracies
that were stated regarding its discovery and handling. In addition to these
clarifications, I would welcome any conversations about Damballa, its
processes and Kraken findings if Mr Landecki is interested in further
discussion. 
</p><p>
From the <span   class="emphasis"><em>Linux Journal</em></span> article:
</p><p>
&ldquo;To simplify, Damballa discovered (probably during a security audit) a new
malware with hard-coded addresses (URLs) for zombie control servers
(CCs&mdash;computers that manage tasks for zombie machines and all infected computers
report to them).&rdquo;
</p><p>
Damballa first discovered Kraken through network anomalies observed on a
DynDNS provider's network with which it collaborates to shut down C&amp;C
servers. Damballa originally thought Kraken was HacDef (a well-known type
of malware used by a botnet documented in 2006; see
<a href="http://www.avira.com/en/threats/section/fulldetails/id_vir/2900/bds_hacdef.fv.1.a.html" target="_self">www.avira.com/en/threats/section/fulldetails/id_vir/2900/bds_hacdef.fv.1.a.html</a>)
and did not have a malware sample for Kraken until late March 2008.
Damballa only discovered that the botnet was not HacDef after it located a
malware sample matching the network anomaly. That others in industry
thought the botnet was Bobax, an older botnet (and perhaps ancestor of
Kraken), speaks to the general difficulty of new botnet identification.
</p><p>From the article:
&ldquo;Damballa also found that some of those hard-coded addresses were not
registered in a DNS service (the botnet probably was tested at that time,
and the authors were preparing to launch it later).&rdquo;
</p><p>
Kraken malware does not use hard-coded domain names at all; it
autogenerates them. The algorithm used to generate domain names has been
documented by both ThreatExpert
(<a href="http://blog.threatexpert.com/2008/04/kraken-changes-tactics.html" target="_self">blog.threatexpert.com/2008/04/kraken-changes-tactics.html</a>) and
TippingPoint
(<a href="http://dvlabs.tippingpoint.com/blog/2008/04/28/owning-kraken-zombies" target="_self">dvlabs.tippingpoint.com/blog/2008/04/28/owning-kraken-zombies</a>).
</p><p>
From the article: &ldquo;Damballa registered those domains as its own and ended up controlling
quite a large botnet for research.&rdquo;
</p><p>
Damballa never &ldquo;controlled&rdquo; Kraken; because Kraken malware generates
domains, the botmasters simply registered domains that would be
subsequently autogenerated (Damballa could not register them all) and
resumed its operation.
</p><p>
From the article: &ldquo;It hasn't contacted any security company about the methods of infection
it discovered.&rdquo;
</p><p>
In early April 2008, Damballa released instructions for remediating
Kraken compromises
(<a href="http://www.damballa.com/downloads/brochures/Kraken_Remediation.pdf" target="_self">www.damballa.com/downloads/brochures/Kraken_Remediation.pdf</a>)
and a technical whitepaper/industry response
(<a href="http://www.damballa.com/downloads/press/Kraken_Response.pdf" target="_self">www.damballa.com/downloads/press/Kraken_Response.pdf</a>) that
included Kraken C&amp;C domains that companies/organizations could use to
prevent compromised systems from talking to the Kraken control
servers.
</p><p>
Damballa (who codeveloped and administrates the malfease malware
repository&mdash;<a href="http://www.malfease.oarci.net" target="_self">www.malfease.oarci.net</a>) also shared malware samples (that
could be downloaded by researchers/practitioners) with SANS ISC
(<a href="http://isc.sans.org/diary.html?storyid=4256" target="_self">isc.sans.org/diary.html?storyid=4256</a>) and OffensiveComputing
(<a href="http://www.offensivecomputing.net/?q=node/699" target="_self">www.offensivecomputing.net/?q=node/699</a>).
</p><p>
From the article: &ldquo;It hasn't published any details of the exploits used to any bugtrack, nor
has it contacted any vendors to alert them of the issue.&rdquo;
</p><p>
Kraken didn't use any exploit to propagate; there were no vendors to
contact. Like Storm, Kraken propagated through social engineering (e-mail
and instant message).

<br><br>&mdash;<br> 
Paul Royal  <br><br>
</p><a name="N0xcc1580.0xdb9e58"></a><h4 class="title"><a name="N0xcc1580.0xdb9e58"></a>Tech Tip Tuning</h4><p>
I like to read the Tech Tips, as I did with David S. Sinck's tip &ldquo;Treating Compressed
and Uncompressed Data Sources the Same&rdquo; (<span   class="emphasis"><em>LJ</em></span>, December
2008, page 56). Here are some
remarks and suggestions.
</p><p>
I strongly recommend using double quotes. The presented solution
silently
misses all files with one or more whitespaces in its name.
</p><p>
The only purpose of the line:

<pre     class="programlisting">
F=$(echo $1 | perl -pe 's/.gz$//')
</pre>
</p><p>
is to remove the last file extension from the filename. This is done with
Perl, an interpreter for a language much more powerful than Bash, a
subshell and a pipe. There's too much effort to remove a few characters (in every loop
cycle!). The first two lines of the function could be replaced by a
parameter substitution, which costs nearly nothing. So, with quoting, we
get the following:


<pre     class="programlisting">
function data_source ()
{
  local F=${1%.gz}           # remove file extension

  if [[ -f $F ]] ; then
    cat "${F}"
  elif [[ -f $F.gz ]] ; then
    gunzip --stdout "${F}.gz"
  fi
}    # -------  end of function data_source  -------

for file in * ; do
  data_source "$file" | ...
done
</pre>

<br><br>&mdash;<br> 
Fritz Mehner  <br><br>
</p><a name="N0xcc1580.0xdba3d8"></a><h4 class="title"><a name="N0xcc1580.0xdba3d8"></a>
Photo of the Month</h4><p>
Have a photo you'd like to share with <span   class="emphasis"><em>LJ</em></span> readers? Send
your submission to
<a href="mailto:info@linuxjournal.com">info@linuxjournal.com</a>. If we run yours in the magazine,
we'll send you
a free T-shirt.
</p><div       class="mediaobject"><a href="10366f1.large.jpg"><img src="10366f1.jpg"></a><div class="caption"><p>
Tux and Tuxina cake, submitted by David Backeberg, taken at his friend's
wedding.
</p></div></div></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../179/toc179.html">Issue Table of Contents</a>
    <a class="link3" href="../179/10366.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>