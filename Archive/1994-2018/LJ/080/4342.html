<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Elegance of Java and the Efficiency of C&mdash;It's Ada!</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Tennebo recommends taking a look at Ada.&#10;    "><meta name="keywords" content="Perl, C++, gnatchop, Ada, gnatmake, GNAT"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x28c9580.0x29c0ab0"></a>Elegance of Java and the Efficiency of C&mdash;It's Ada!</h1></div><div><div class="author"><h3 class="author">Frode Tennebo</h3></div><div class="issuemoyr">Issue #80, December 2000</div></div><div><p>
    Tennebo recommends taking a look at Ada.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x28c9580.0x29c1558"></a></h2></div></div><p>In his article &ldquo;Comparing Java
Implementations for Linux&rdquo;, Michael Hirsch
(<i  >LJ</i> August 2000) searches for &ldquo;a programming
language with the elegance of Java and the efficiency of C&rdquo;. This
language already exists and it's called Ada.
</p><p>The current version of Ada, Ada 95, is a revision of the Ada
standard (Ada 83 was the original ANSI/ISO standard). It was
standardized while C++ and Java were still in early childhood. Ada
is often considered a bulky, antiquated language without the
coolness of Java or the seriousness of C++. However, Ada is a
powerful and modern language.</p><p>Ada has all the features of Java in addition to some of its
own (such as generics and operator overloading. Actually, Ada
provides all the features of Java <span   class="emphasis"><em>and</em></span> C++
(except for direct support for multiple inheritance) in one
language, their web site (see Resources) provides a good comparison
of the languages. You can even build j-code applets from Ada
source. Thus, you have all the advantages of Java and more.</p><p>Ada is a strongly typed language which, if used correctly,
can lead to less ambiguous code and more maintainable programs. The
result is that errors can be detected easily at compile time
instead of at debug time. More information on the Ada language can
be found at their web site.</p><p>There are a number of Ada compiler vendors around, and you
can get one for virtually any platform which, again, can
cross-compile to (almost) any other platform. The most well known
vendors are Rational, Aonix, R. R. Software and Green Hill Software
(see Resources).</p><p>However, Michael Hirsch also wanted an open-source project.
In reply, GNAT from Ada Core Technologies is to Ada as gcc is to
C/C++, almost. GNAT is written almost entirely in Ada and uses the
gcc code generator. The public version of GNAT (see Resources for
site where you can download it) is distributed under the FSF
copyleft license. ACT also provides a nonpublic version of their
compiler under a support contract.</p><p>I have written the equivalent Ada program to Michael Hirsch's
Java and C++ programs as shown in Listing 1. As you can see, the
listing is highly readable and looks very much like both the Java
and C++ program. It is divided into three units, a package
specification (like the C header files), a package body and the
main program (a procedure). Ada has specific rules concerning what
goes in which unit, and GNAT enforces this by requiring each unit
to be in a separate file, where the file name must be the
package/procedure name postfixed with .ads for specification and
.adb for package/procedure.</p><p><a href="4342l1.html" target="_self">Listing 1. Ada Equivalent of Java
and C++ Programs</a></p><p>You can type in the example (or download it) into one file
and run the utility <span   class="bold"><b>gnatchop</b></span>,
which is included in the GNAT distribution. This will split the
file into the three required files with the respective filenames.
To compile and link, you can use the specially modified GNAT
version of gcc, but it's more practical to use the
<span   class="bold"><b>gnatmake</b></span> utility. Just type:
<b  >gnatmake perftest</b> and gnat will compile the
required units and then bind and link the main procedure.</p><p>Since I do not have the same hardware as the author, I have
performed the same Java and C++ benchmarks, in addition to the Ada
benchmark, on two Linux machines and a ten-inch Sun Ultra. The
results are shown in Table 1; the elapsed time is objects per
millisecond.</p><p>The Ada compilers used were Gnat 3.12p, Gnat 3.13p and JGNAT
1.0p (p = public). The latter two were just released at the time of
this writing . Please note that there are other Ada compilers that
produce executables that may run faster or slower than the GNAT
compiler.</p><p><a href="4342t1.html" target="_self">Table 1. Results of Ada, Java and
C++ Benchmarks</a></p><p>JGNAT is a peculiar beast, as it compiles Ada code into Java
byte-code which can, in turn, run on any JVM. As you can see, it is
only about 15% slower than the SUN JDK and JRE 1.2.01 is actually
faster! And that is for precisely the same code compiled with the
GNAT compiler, using the very first version of the JGNAT compiler!
This can only get better.</p><p>I tried running the JGNAT-compiled programs using
<span   class="bold"><b>kaffe</b></span> on Linux, but got:</p><pre     class="programlisting">
[ft@modesty jtest]$ ~/kaffe/bin/java perftest@bbKaffe: mem/gc-incremental.c:823: gcMalloc: Assertion &lt;\#145&gt;fidx &lt; nrTypes
&amp;&amp;
size != 0' failed.
</pre><p>This suggests a bug in kaffe.
</p><p>A small note on Ada in general and GNAT in particular: By
default, the compiler compiles in many of the runtime tests to
certify that everything goes smoothly. Therefore, if there's a
problem, it can make a controlled action to avoid premature program
termination. Usually, the action is to raise an exception. The
<b  >-gnatp</b> disables many of these tests and, hence,
makes the program run faster. I do not recommend doing this, but it
does provide for a better comparison with the C++ speeds.</p><p>For this particular test, Ada is about 19% slower on average
than C++. On the Sun platform, this is down to about 8% using a
comparable code generator (GNAT uses gcc 2.8.1 as its base). Note
that this is a <span   class="emphasis"><em>very</em></span> limited test, and it only
goes to show that Ada can produce running speeds comparable to C++.
In some cases, Ada will actually run faster than the C++
counterpart. My guess is that the difference will level out,
perhaps slightly in C++'s favour. The usual disclaimer
applies.</p><p>However, it is in development and, later, in maintenance that
the real savings can be harvested with Ada. Refer to
<a href="http://www.rational.com/products/whitepapers/337.jsp" target="_self">www.rational.com/products/whitepapers/337.jsp</a>
for a thorough comparison between Ada 83 and C.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x28c9580.0x29c2058"></a>Conclusion</h2></div></div><p>If you want a programming language with the elegance of Java
(and more) and the speed of C/C++--take a look at Ada. It will even
produce Java byte-code.</p><p><a href="4342s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="4342aa.jpg"></div>

        Frode Tenneb&oslash; (frodet@nvg.org) lives in
      Halden, Norway. He first encountered Linux in 1994 and has been a
      Linux enthusiast ever since. He holds a seat on a local LUG board.
      Currently he spends most of his spare time with his five-month-old
      baby girl, leaving less time for computers.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../080/toc080.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>