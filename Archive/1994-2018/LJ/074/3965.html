<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>PoPToP, a Secure and Free VPN Solution</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    When the expense of a remote access server is no longer&#10;    attractive, it's time to look at the solution offered by a&#10;    VPN.&#10;    "><meta name="keywords" content="PoPToP, VPN, PPTP, IPSec, network, remote, access"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1419580.0x1510ab0"></a>PoPToP, a Secure and Free VPN Solution</h1></div><div><div class="author"><h3 class="author">Matthew Ramsay</h3></div><div class="issuemoyr">Issue #74, June 2000</div></div><div><p>
    When the expense of a remote access server is no longer
    attractive, it's time to look at the solution offered by a
    VPN.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1511660"></a></h2></div></div><p>Traditionally, remote access for
employees has been through dedicated lines or a remote access
server (RAS). A RAS typically consists of a collection of modems
and telephone lines connected to a central machine. RAS can be
quite reliable and secure, but it is expensive in its setup and
long-distance-call costs. A Virtual Private Network (VPN) offers a
secure, flexible and cheap solution in place of RAS and dedicated
lines. PoPToP, the PPTP (point-to-point tunneling protocol) VPN
solution for Linux, is a free VPN solution that businesses can take
advantage of now.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1511768"></a>VPN</h2></div></div><p>A virtual private network is a private network capable of
communicating over the public Internet infrastructure with a
defined level of security. VPNs can exist between two or more
private networks, often referred to as a server-server VPN, or
between individual client machines and private networks, often
referred to as a client-server VPN (see Figure 1). VPNs overcome
the need for expensive dedicated lines or RAS dial in call and
setup costs.</p><div       class="mediaobject"><a href="3965f1.large.jpg"><img src="3965f1.jpg"></a><div class="caption"><p>
Figure 1. Example Client-Server VPN
</p></div></div><p>In Figure 1, the remote client is handed a real IP address
from their local ISP. This remote client can log into the VPN
server, and hence gain access to the private network behind the
firewall. The remote client can then browse and use other network
services on the private network as if it were a machine on that
network.</p><p>VPNs may also exist between multiple private networks
(server-server VPN). For example, suppose your company has an
R&amp;D office in Australia and a sales and marketing office in the
United States. Both locations have private networks that are
connected to the Internet (the method, modem, DSL or something
else, is transparent to the VPN). Traditionally, if the offices
wish to share files on their networks, they would either have to
e-mail the files to each other, dial in to each other or have some
form of dedicated link between them. VPNs offer a cost-effective
solution for joining these two networks seamlessly, without
compromising system security.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1511ad8"></a>Different Types of VPNs</h2></div></div><p>The most popular VPN technologies available today are PPTP
and IPsec. Much debate and analysis has occurred recently between
proponents of these competing VPN technologies. Both PPTP and IPsec
have an important role to play in VPN solutions. But neither PPTP
nor IPsec is without flaws.</p><p>PPTP is an open-documented standard published by the Internet
Engineering Task Force (IETF) as RFC 2637, available at
<a href="ftp://ftp.ietf.org/rfc/rfc2637.txt" target="_self">ftp.ietf.org/rfc/rfc2637.txt</a>.</p><p>The operation of PPTP as a VPN is performed by encapsulating
the point-to-point protocol (PPP) in IP and tunneling it through an
IP network. All communication, authentication and encryption is
handled almost exclusively by PPP, which currently supports PAP,
CHAP, MSCHAP and MSCHAPv2 authentication. PPP encryption is
performed through compressor modules, and available patches under
Linux allow PPP to support RC4-compatible 40-128-bit encryption.
Some people make the mistake of assuming that since PPTP uses PPP,
you need a modem. This is not the case. In fact, the connection
mechanism to the IP network is transparent to PPTP.</p><p>PPTP is widely deployed in both client and server forms due
to its default existence in Microsoft Windows platforms.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1511d40"></a>IPsec</h2></div></div><p>IPsec is a new series of authentication and encryption
security protocols that can be employed for sending data securely
over IP networks. IPsec offers encryption, authentication,
integrity and replay protection to network traffic. IPsec also
specifies a key management protocol for establishing encryption
keys. IPsec, like PPTP, is an open standard developed by the
IETF.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1511e48"></a>PPTP vs. IPsec</h2></div></div><p>PPTP is transparent to the authentication and encryption
mechanism. Microsoft's version of PPTP was recently upgraded to
include MSCHAPv2 and MPPE-enhanced (and more secure) security
protocols. Patches are available for the Linux PPP daemon that
allow PPTP solutions such as PoPToP to take advantage of
Microsoft's enhanced VPN security.</p><p>Bruce Schneier, Chief Technical Officer of Counterpane
Internet Security, Inc., and perhaps the chief guru of Internet
security, recently analyzed Microsoft's MSCHAPv2 and MPPE security
protocols. Schneier concluded that this release of MSCHAPv2 from
Microsoft addressed the major security weaknesses found in
MSCHAP.</p><p>IPsec was also recently analyzed by Schneier (with the help
of Niels Ferguson). In their analysis, they concluded that IPsec's
complexity effectively makes it impossible to implement a secure
solution. They believe IPsec will never result in a secure
operational system. They emphasize that although IPsec has its
flaws, it is a more secure solution than PPTP.</p><p>IPsec remains a new technology, and future improvements are
sure to enhance its security further and increase its
attractiveness to business. Additionally, with its default presence
in Windows 2000, IPsec will offer small to medium-sized businesses
a more secure and affordable solution.</p><p>Affordable PPTP VPN (with MSCHAPv2 and 40-128-bit RC4
encryption) is available now. With the countless Windows machines
already out there supporting PPTP VPN, the cost-effective solution
is obvious. Windows 98 has VPN client software as an install
option. Windows NT 4.0 comes with PPTP (server and client) by
default. Patches (Microsoft Dial-up Networking patch) exist for
upgrading Windows 95 machines to include a PPTP client. Windows
2000 has PPTP by default.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x15120b0"></a>The Free PoPToP</h2></div></div><p>PoPToP is the PPTP VPN server for Linux. Ports exist for
Solaris, OpenBSD, FreeBSD and others. PoPToP allows Linux servers
to function seamlessly in PPTP VPN environments, enabling
administrators to leverage the considerable benefits of both
Microsoft and Linux. The current release version of PoPToP supports
Windows 95, 98, NT and Windows 2000 PPTP clients, as well as the
Linux PPTP client.</p><p>PoPToP is a PPTP access concentrator (PAC) that employs an
enhanced GRE (generic routing encapsulation&mdash;protocol 47) mechanism
for carrying PPP packets, and a control channel (port 1723) for
PPTP control messages. The basic operation of PoPToP is to wrap PPP
packets up in IP and send them across the public Internet
infrastructure. At the other end of the connection, the PPP packets
are stripped from their IP packets and handed to the PPP daemon.
The operation is almost identical to a dial-in session, except the
PPP packets are wrapped in IP and sent over an IP network as
opposed to a generic phone line and modem configuration.</p><p>PoPToP can be set up to work with a patched PPP daemon to
support MSCHAPv2 authentication and RC4-compatible 40-128-bit
encryption. A Linux server running PoPToP can effectively replace a
Windows NT PPTP VPN server. However, PoPToP does not support PNS
operation, so it does not replace a Windows NT server when PNS is
required.</p><p>Another advantage of PoPToP (and PPTP in general) is that it
is transparent to the encryption and authentication mechanism.
Porting an alternate encryption algorithm (such as Blowfish) to a
PPP compressor module would not be a difficult task. The only issue
with developing your own encryption and authentication mechanism is
the simple fact that you will break generic Windows client support.
However, the Linux PPTP client is available under the GNU GPL and
will work seamlessly with any PPP changes.</p><p>Finally, PoPToP is simple. It has a tiny memory footprint and
has undergone performance tweaks. This makes PoPToP very attractive
to embedded platforms and edge networks. When teamed up with the
Linux PPTP client, solution providers can offer cheap VPN solutions
with their own defined security protocols.</p><p>PoPToP was originally pioneered by Moreton Bay
(<a href="http://www.moretonbay.com" target="_self">http://www.moretonbay.com/</a>)
in February 1999 for their eLIA (embedded Linux Internet appliance)
platform. It was released under the GNU GPL in April 1999, and has
since found widespread acceptance on standard Linux servers and
firewalls in both large production sites and small business and
home networks. PoPToP is in the current Debian &ldquo;potato&rdquo; code
freeze and SuSE 6.2.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x15123c8"></a>Setting Up PoPToP</h2></div></div><p>Setting up PoPToP with a standard PPP daemon (without
MSCHAPv2 or RC4-compatible encryption) is a painless task. Below is
a quick setup guide.</p><div class="itemizedlist"><ul type="disc"><li><p>Grab the latest stable version of PoPToP from
<a href="http://www.moretonbay.com/vpn/download_pptp.html" target="_self">www.moretonbay.com/vpn/download_pptp.html</a>.</p></li><li><p>Log in as root to install and run PoPToP.</p></li><li><p>If you downloaded the PoPToP v1.0.0 tar file and
stored it in /usr/local/src/, type the following commands:</p></li></ul></div><pre     class="programlisting">
        cd /usr/local/src/
        tar zxvf pptpd-1.0.0.tgz
        cd pptpd-1.0.0
        ./configure make
        make install
</pre><div class="itemizedlist"><ul type="disc"><li><p>If you downloaded the PoPToP RPM
(pptpd-1.0.0-1.i386.rpm), type the following:</p></li></ul></div><pre     class="programlisting">
        rpm --install pptpd-1.0.0-1.i386.rpm
</pre><div class="itemizedlist"><ul type="disc"><li><p>PoPToP's binaries are placed in /usr/local/sbin.
Check to make sure <span   class="bold"><b>pptpd</b></span> and
<span   class="bold"><b>pptpctrl</b></span> are there before
continuing.</p></li><li><p>Set up PoPToP configuration files. Example
configuration files are shown in Listings 1 and 2. This
configuration will use CHAP as the authentication mechanism. The
user login is &ldquo;billy&rdquo; and the password is &ldquo;bob&rdquo;.</p></li><li><p>Now that the configuration files are set up, you
are ready to launch PoPToP. Simply type
<b  >pptpd</b>.</p></li></ul></div><p><a href="3965l1.html" target="_self">Listing 1</a>
</p><p><a href="3965l2.html" target="_self">Listing 2</a></p><p>Any standard Windows client with PPTP VPN installed should
now be able to connect to your PoPToP-enabled VPN Linux server. On
Windows 98, you can install it via Control
Panel<b  >--&gt;</b>Add Remove
Programs<b  >--&gt;</b>Windows
Setup<b  >--&gt;</b>Communications<b  >--&gt;</b>Virtual
Private Networking.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1419580.0x1509860"></a>Conclusion</h2></div></div><p>Remote access for employees no longer needs to be an
expensive process. VPNs can easily replace dedicated lines or
remote access servers without compromising security. PPTP is one
VPN technology that is ready now. Although criticized in the past
for its security flaws, recent enhancements to the authentication
and encryption protocols have made PPTP an attractive solution to
business. PoPToP is the PPTP VPN solution for Linux that can take
advantage of MSCHAPv2 and RC4-compatible 40-128-bit encryption
available to the countless Windows client machines. PoPToP is
easily installed and is free. PoPToP is simple, and due to its
small memory footprint, very attractive to embedded platforms and
edge networks.</p><p><a href="3965s1.html" target="_self">Resources</a></p><p><a href="3965s2.html" target="_self">Glossary</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="3965aa.jpg"></div>

       email: <a href="mailto:matthewr@moreton.com.au">matthewr@moreton.com.au</a>
       </p><p>Matt Ramsay (matthewr@moreton.com.au) is a
      full-time, low-level Linux application hacker living in sunny
      Brisbane, Australia. In addition to PoPToP, he has also developed
      and released under the GNU GPL a &ldquo;micro&rdquo; DHCP server for Linux.
      His main professional focus is writing small and fast applications
      for embedded Linux systems.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../074/toc074.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>