<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Best of Technical Support</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Our experts answer your technical questions.&#10;    "><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x127c580.0x1373ab0"></a>Best of Technical Support</h1></div><div><div class="author"><h3 class="author">Various</h3></div><div class="issuemoyr">Issue #85, May 2001</div></div><div><p>
    Our experts answer your technical questions.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x13740e0"></a>PHP Can't Connect to MySQL</h2></div></div><p>I installed MySQL3 and PHP4 with an RPM package. Apache is
running well and the MySQL server is running well from the shell.
PHP4 also runs with the infophp() function call. But I can't
connect to the MySQL server. What's wrong?  &mdash;Haidar AM,
haidar@netexecutive.com</p><p>You did not mention it, but I am assuming that the phpinfo
script showed that you do have support for MySQL. If this is the
case, please check the MySQL table to make sure that the
user/password/host, localhost in this case, are correct.  &mdash;Mario
Neto, mneto@argo.com.br</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1374240"></a>Automating Keyboard Tasks</h2></div></div><p>I've been handed the task of automating various software
tasks for a company and a lot of it will entail emulating keyboard
input. How can I echo key commands from a script to a program? I've
not even been able to find a thorough list of what keys map to what
escape sequences. Can anyone help?  &mdash;Paul, tanx1@stlnet.com</p><p>Try the
<span   class="bold"><b>expect</b></span> command. <i  >Linux Journal</i> published an article about it a couple of months ago [That
would be the December 2000 issue, Mario&mdash;Ed.]. It comes with most
distributions and lets you write scripts so you can automate
interactive sessions.  &mdash;Mario Neto, mneto@argo.com.br</p><p>One simple method I use to call some programs from a script
is <b  >echo "y" | xyz</b> In this case I run xyz, which
will, after starting, get a &ldquo;y&rdquo; in response to its
question.  &mdash;Usman S. Ansari, uansari@yahoo.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1374500"></a>Can't Log in as Root</h2></div></div><p>For some reason I cannot log in as root at my local Linux box
(not remote login). I can log in as any user and then su to root.
Second, whenever I have to execute any commands like
<span   class="bold"><b>adduser</b></span>, I have to specify the
absolute path as to where the command lies such as
(/usr/sbin/adduser).  &mdash;Devraj Sen, devraj@trihedral.com</p><p>The file /etc/securetty is used as a list of terminals from
which root is allowed to log in. So, it is possible that the
entries for your console logins were removed. Simply put them back
in, i.e., to allow root to log in on the first console you should
have a line consisting of:</p><pre     class="programlisting">
tty1
</pre><p>The reason why your PATH isn't set up properly when
you use su is because it isn't being treated as a login shell. So,
none of the login files that pertain to root are being read. To
have them read, type <b  >su -</b> instead.  &mdash;Andy
Bradford, andyb@calderasystems.com
</p><p>As far as I can tell, most if not all, Red Hat releases have
been broken in so far as /sbin:/usr/sbin:/usr/local/sbin has never
been in root's path for various reasons. The quick way to fix that
is to simply add it to the PATH in /etc/profile. As you cannot log
in as root, this is not usual behavior. You should make sure root
has a valid shell, and that /etc/securetty still contains &ldquo;ttyx&rdquo;
lines. For more clues, type <b  >tail -f
/var/log/messages</b> and look at the output when you try to
log in as root from another console.  &mdash;Marc Merlin,
marc_bts@valinux.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1374870"></a>Updating the Shadow File</h2></div></div><p>What is the command for synchronizing/updating the shadow
file after I create a user account by manually editing the password
file? Also, how do I remove the suid bit from any process?  &mdash;Kedar,
kedar.potdar@imandiasia.com</p><p><span   class="bold"><b>pwconv</b></span> is the command for
synchronizing/updating the shadow file after creating a user
account.  &mdash;Usman S. Ansari, uansari@yahoo.com</p><p>To remove the suid bit use <b  >chmod -s
filename</b>.  &mdash;Marc Merlin, marc_bts@valinux.com</p><p>To protect against accidentally mangling /etc/passwd if
someone runs a utility that touches the file at the same time
you're editing it, use <span   class="bold"><b>vipw</b></span> any
time you edit /etc/passwd (it uses your chosen editor, not
necessarily <span   class="bold"><b>vi</b></span>.  &mdash;Don Marti,
info@linuxjournal.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1374be0"></a>Perl Delays Writes, Then Dies</h2></div></div><p>I have written a basic Perl program that reads a list of URLs
from a file, goes to the URL, looks for some information and then
writes that information to another file. It also writes entries to
a log file and stdout. I am using the LWP::Simple module. I note
the following strange behavior: 1) the log file is not written to
immediately&mdash;the OS seems to be caching write requests; and 2) the
program seems to die after 1-2 hours of perfectly normal operation,
but restarting it works fine.  &mdash;Dave Barter,
dave@phased.co.uk</p><p>Typing <b  >$| = 1</b> at the beginning of your
script will force your Perl program to do a flush after every print
or write (see man perlvar). As for why your program is dying, try
running top at the same time to see if it's hogging all your
memory. If so, rewrite it to forget about pages after it's done
with them. If you run your program unattended, you should be using
LWP::RobotUA, to respect webmasters' wishes about what parts of
their sites are open to robots.  &mdash;Don Marti,
info@linuxjournal.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1374d98"></a>Corrupted Root Filesystem</h2></div></div><p>I am trying to install Red Hat onto my Dell laptop using the
partition I created for it. The install runs successfully, but when
I try to load Linux it hangs up after these messages:</p><pre     class="programlisting">
checking root filesystem
/ was not cleanly unmounted, check forced
Setting filetype for entry log in /dev (174593) to 6
Unattached inode 82384
UNEXPECTED INCONSISTENCY; run fsck MANUALLY
(ie without -a or -p options)
An error occured during the filesystem check
Dropping you to a shell; the system will reboot
Give root password for maintenance
</pre><p>&mdash;Brian Weigner, brian.weigner@colorado.edu
</p><p>Seems your Linux root filesystem was corrupted somehow. You
actually need to get into single-user mode by issuing a
<span   class="bold"><b>linux s</b></span> command at the LILO prompt
and wait until you get the # root prompt. Type:</p><pre     class="programlisting">
e2fsck -r /dev/your-root-disk-device
</pre><p>This will go through the device and ask you what to
do with each error it finds. This will probably ask many questions
that should be answered. To properly answer all of them, some Linux
filesystem experience is a must. This is risky business on a real
production system. For now, since it is a fresh install and to make
it easy, answer yes to all the FIX?, and REPAIR? and REMOVE
unused/dirty stuff, questions. After you are done, try rebooting
your system. If that doesn't work, maybe your best bet is to
carefuly reinstall.  &mdash;Felipe E. Barousse Bou&eacute;,
fbarousse@piensa.com
</p><p>To prevent this from happening in the future, run
<b  >shutdown -h now</b> (as root) before you power
down.  &mdash;Don Marti, info@linuxjournal.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1375160"></a>FTP Users Go Ape! Virtual Hosts Fail!</h2></div></div><p>My FTP users are able to back past their home directory and
go right to /. They are using leach FTP, and it allows them to go
up levels even in their home directory.</p><p>Also, I have 20 virtual sites (by name, not IP) running on my
Apache server. A couple of times when adding a new virtual host, it
would not resolve until I moved it to the top of the list of
virtual hosts in httpd.conf. Am I out of virtual servers? The
computer is an AMD K6 200MHz with 64MB of RAM.  &mdash;Aaron,
aaron@x56.net</p><p>There is a hack in <span   class="bold"><b>wuftpd</b></span> to
prevent users from cd-ing up, but you are probably better off
installing proftpd if you aren't using that yet. It supports
chrooting users in their home directory or some other preset
directory. See:
<a href="http://www.proftpd.net" target="_self">http://www.proftpd.net/</a>.  &mdash;Marc
Merlin, marc_bts@valinux.com</p><p>You're not out of virtual hosts, but this configuration can
be tricky. Here are some things to check. Do any of the ServerName
or ServerAlias values in the virtual hosts before the broken one
match the broken one's name? If you have a ServerAlias
*.example.com and add warez.example.com, it won't work. Keep
everything with a * alias at the end. Do an
<span   class="bold"><b>nslookup</b></span> to make sure that the DNS
for all the virtual hosts works. Make sure that the NameVirtualHost
directive is before the corresponding VirtualHost sections. Read
<a href="http://httpd.apache.org/docs-2.0/vhosts/details.html" target="_self">httpd.apache.org/docs-2.0/vhosts/details.html</a>
and, of course, every webmaster's most-read and least-enjoyed
reading material, error_log.  &mdash;Don Marti,
info@linuxjournal.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x13754d0"></a>I Have No Dialtone, and I Must Dial</h2></div></div><p>I have a PCTEL internal modem, and I got the drivers from
linmodems.org and have installed them. The problem is the modem
keeps on dialing with the message NO DIALTONE. I was able to
connect only once and that was after trying for a long time. Also,
the transfer rate wasn't what I was expecting.  &mdash;Krishna,
as_krishna@hotmail.com</p><p>Try to see if adding X1 in your AT init string makes a
difference.  &mdash;Marc Merlin, marc_bts@valinux.com</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x127c580.0x1375630"></a>Spammers Fishing for Addresses</h2></div></div><p>Increasingly, I see spammers attempting to send mail to my
domains by simply trying a series of common first names (i.e.,
david@example.com, bill@example.com, mike@example.com, etc.) Is
there any automated method of shutting down the connection after X
failed addresses and, even better, adding their IP to sendmail's
access database?  &mdash;Waldo Jaquith, waldo@waldo.net</p><p>You could write a small Perl script that parses the reject
log, adds the IP to a blacklist and restarts sendmail when this
happens.  &mdash;Marc Merlin, marc_bts@valinux.com</p></div></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../085/toc085.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>