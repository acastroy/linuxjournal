<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Kinect with Linux
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Control Linux with a wave of your hand! Hook up a Kinect to your PC and&#10;help invent the user interface of the future.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xc34580.0xd2bac0"></a>
Kinect with Linux
</h1></div><div><div class="author"><h3 class="author">
Rick
 
Rogers
</h3></div><div class="issuemoyr">Issue #207, July 2011</div></div><div><p>
Control Linux with a wave of your hand! Hook up a Kinect to your PC and
help invent the user interface of the future.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd2c250"></a></h2></div></div><p>
<span   class="emphasis"><em>The Minority Report</em></span> has been in rotation on cable lately, and
you've probably seen the futuristic vision of Tom Cruise standing in
front of a large screen, manipulating information with waves of his hands.
That vision is a bit closer to reality, thanks in part to the economies
of scale of the game industry. I don't often have reason to sing the
praises of Microsoft, particularly not in a magazine devoted to Linux and
all things open. But one thing our friends in Redmond do very well is to
commoditize hardware. They've done just that with the Kinect by creating
it as a natural interface for the Xbox 360 game console. What's more,
they've allowed open-source developers to create drivers for the device,
and they've even allowed the third party who developed the technology, PrimeSense,
Inc., to release its own device drivers for Linux, Windows and OS X.
</p><div       class="mediaobject"><a href="11056f1.large.jpg"><img src="11056f1.jpg"></a><div class="caption"><p>
Figure 1. The Author, as Seen in Kinect's Depth View
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd2c618"></a>
Natural Interfaces</h2></div></div><p>
Computer interfaces that use &ldquo;natural&rdquo; interaction have been termed,
appropriately, natural user interfaces, or NUI. The implication is not
so much that the interface itself is natural (let's face it, there is no
natural, unlearned way to interact with a machine), but that the interface
is very easy to learn, and in that sense natural. Natural user interfaces
are a very active research topic, and a wide variety of prototypes have
been demonstrated. The list of projects exploring natural interfaces
and Kinect is ever-expanding. Here are some that have been ventured on
the Net:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Robotic vision systems.
</p></li><li><p>
Interior room mapping.
</p></li><li><p>
Light control with gestures.
</p></li><li><p>
Sign-language computer interfaces. 
</p></li><li><p>
Standardized gesture interfaces.
</p></li><li><p>
Music with gestures (including the floor piano from
<span   class="emphasis"><em>Toys</em></span>).
</p></li><li><p>
Virtual keyboards.
</p></li><li><p>
Instruction (such as dance, karate and tai chi).
</p></li><li><p>
Gesture-based presentations.
</p></li></ul></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd2ce58"></a>
The Kinect&mdash;Sensor Heaven</h2></div></div><p>
The Kinect is tightly packed with an array of sensors and specialized
devices to preprocess the information received. Communication between
the Kinect and the game console or Linux is through a single USB cable.
</p><p>
Several different estimates have been made of the cost to manufacture
Kinect, ranging from about $56 to $150. Whatever the real cost, we have
to hand it to Microsoft for reducing the cost of its original prototype
(reportedly $30,000) by at least two orders of magnitude to create a
viable commercial product.
</p><p>
You can view a complete teardown of the Kinect on YouTube (see Resources),
and inside you will find the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
A projector that projects a field of infrared beams, used to detect depth.
</p></li><li><p>
Two cameras (each 640x480):
a monochrome infrared camera that is used to detect the array of reflected
infrared beams (this is the information used to construct the image of
depth) and a color camera that can be used to capture snapshots or as a Webcam.
</p></li><li><p>
Four microphones.
</p></li><li><p>
A motor to tilt the sensor array up and down for best view of the scene.
</p></li><li><p>
An accelerometer to sense position.
</p></li><li><p>
Camera interfaces and preprocessors for the two cameras.
</p></li><li><p>
512MB of DDR memory and 8MB of Flash.
</p></li><li><p>
USB interfaces.
</p></li></ul></div><p>
The infrared beams are encoded, and as they are reflected off surfaces
in front of the sensor array and detected by the infrared camera,
a preprocessor in the Kinect calculates the distance from the array to
the reflecting surfaces. Proprietary software can use that information
to identify likely humans in the scene and the likely positions of their
arms and legs.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd2d698"></a>
Kinect Open Source</h2></div></div><p>
The short history of the Kinect and open source is interesting,
instructive, and it demonstrates the awesome power of open source:
</p><div class="itemizedlist"><ul type="disc"><li><p>
On November 4, 2010, Microsoft released the Kinect in the United States.
</p></li><li><p>
That same day, Adafruit Industries announced it would pay anyone
$1,000 for an open-source driver for the device on Windows or any other
operating system.
</p></li><li><p>
Hours later, Microsoft announced that it would not condone hacking of
any of its devices. Adafruit responded by raising the bounty to $2,000.
</p></li><li><p>
By Saturday, November 6, a hacker going by the name AlexP claimed to
have hacked the interface to the Kinect's motor. Microsoft said it
wasn't true. Adafruit raised the reward to $3,000.
</p></li><li><p>
By that Monday, AlexP had posted video proving his ability not
only to control the motor, but also to interface to the depth perception and
color camera on the Kinect. He could have chosen to release the code
and collect the prize, but instead, that Tuesday, he posted a message
saying he would release the code if $10,000 were contributed to fund
his further work.
</p></li><li><p>
Tuesday evening, Adafruit released a large dataset recorded by a
USB analyzer watching the data stream between the Kinect and Xbox.
Hackers worldwide started using the dataset to work out the details of
the interface.
</p></li><li><p>
On Wednesday, the Kinect was released in Europe. Hector Martin, near
Bilbao, Spain, purchased one that morning, and using the Adafruit
published data, was able to get it connected to his PC by noon.
The results were published on the libfreenect site, and the prize was won.
</p></li><li><p>
But the story doesn't stop there. By Friday of the same week, Microsoft
reconsidered its position on the open-source drivers. In a remarkable
bit of semantic derring-do, Microsoft said the Kinect had not been hacked
by its definition, and actually praised the developers expanding the
use of the device.
</p></li></ul></div><p>
In just a few days, the Open Source community had seized the opportunity
provided by Microsoft and created an open-source alternative that created
an explosion of possibilities for research into natural
interfaces.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd246b8"></a>
OpenKinect and OpenNI</h2></div></div><p>
The Adafruit contest had been hosted on a GitHub site called libfreenect.
Once the contest had been won, Josh Blake and some others founded a
community called OpenKinect. From their Web site (see Resources):
</p><div class="blockquote"><blockquote class="blockquote"><p>
OpenKinect is an open community of people interested in making use of
the amazing Xbox Kinect hardware with our PCs and other devices. We are
working on free, open-source libraries that will enable the Kinect to
be used with Windows, Linux and Mac.
</p><p>
The OpenKinect community consists of over 2,000 members contributing their
time and code to the Project. Our members have joined this Project with
the mission of creating the best possible suite of applications for the
Kinect. OpenKinect is a true &ldquo;open source&rdquo; community!
</p><p>
Our primary focus is currently the libfreenect software. Code contributed
to OpenKinect where possible is made available under an Apache20[sic]
or optional GPL2 license.
</p></blockquote></div><p>
Around the same time, a number of companies with interests in
commercializing natural interfaces formed a group called OpenNI.
According to their Web site (see Resources):
</p><div class="blockquote"><blockquote class="blockquote"><p>
The OpenNI organization is an industry-led, not-for-profit organization
formed to certify and promote the compatibility and interoperability
of Natural Interaction devices, applications and middleware. One of the
OpenNI organization's goals is to accelerate the introduction of Natural
Interaction applications into the marketplace.
</p></blockquote></div><p>
OpenNI offers its software under several different licenses&mdash;LGPL
for the open-source bits and just binaries for some proprietary parts
(like skeletal identification). The founders of OpenNI include:
</p><div class="itemizedlist"><ul type="disc"><li><p>
PrimeSense, Inc., the company that supplied Microsoft with the technology
for &ldquo;Project Natal&rdquo;, which became the Kinect.
</p></li><li><p>
Willow Garage, a company focused on hardware and software for personal
robotics.
</p></li><li><p>
SideKick, a game software company that develops motion-based games.
</p></li><li><p>
ASUS, the computer OEM, who is selling a different 3-D depth sensor
based on PrimeSense technology called X-tion Pro.
</p></li></ul></div><p>
In general, OpenKinect appears to be approaching NUI from the bottom
up, starting with the libfreenect driver and building on top of that,
all strictly open source. OpenNI has more of an architectural vision
for how NUI devices from different vendors can interoperate. There's
plenty of room for the two organizations to work together.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd24ea0"></a>
Try It Yourself</h2></div></div><p>
The drivers and demo software for Kinect are readily available, both
from OpenNI and from openkinect.org (see Resources). Installation on
Ubuntu 10.10 is particularly easy, as both organizations provide
prebuilt packages. If you're running a different Linux distro, RPMs and debs
also are available, along with ample build instructions, so you shouldn't
have a problem.
</p><p>
With the OpenKinect packages, you get some demo programs that show the
depth perception and color image capability of the Kinect. Utilities
are included to record the Kinect data stream and to emulate a Kinect
so the software can be used without having the hardware connected.
There also are language interfaces in various stages of development for the
following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Python.
</p></li><li><p>
Synchronous C interface (functions instead of callbacks).
</p></li><li><p>
ActionScript.
</p></li><li><p>
C++.
</p></li><li><p>
C#.
</p></li><li><p>
Java JNI.
</p></li><li><p>
Java JNA.
</p></li><li><p>
JavaScript.
</p></li><li><p>
Common Lisp.
</p></li></ul></div><p>
The OpenNI package has similar capabilities, and it includes detailed
documentation of the C/C++ interface to the underlying layers. The OpenNI
documentation and sample code is oriented toward Visual Studio, but most
of it also is applicable to gcc.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd25738"></a>
Reality Bites</h2></div></div><p>
Okay, wrong movie, but there are some not-so-obvious realities to using
Kinect with Linux. They might or might not affect your explorations:
</p><div class="orderedlist"><ol type="1"><li><p>
The USB connector on the Kinect device is nonstandard. That's okay if
you buy the Kinect as a standalone device. It comes with a power supply
and an adapter to use standard USB. If you buy the Kinect as part of
an Xbox bundle, you will need to buy the power supply/adapter separately.
</p></li><li><p>
The depth perception technology in Kinect works best at distances of
6&ndash;8 feet. It's not a mouse-and-keyboard distance interface,
it's a stand-across-the-room-and-wave interface.
</p></li><li><p>
The Kinect software is able to determine body position and infer
the positions of arms and legs, but it isn't able to do things like
individual finger resolution. That makes it difficult to do things like
sign-language interpretation.
</p></li></ol></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd25aa8"></a>
Let the Games Begin</h2></div></div><p>
So, now for $150 you can have open-source access to hardware that would
have cost you $30,000 a few years ago. What clever ideas can you come
up with for NUI?
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xc34580.0xd25bb0"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Resources</b></p><p>
OpenKinect: <a href="http://www.openkinect.org" target="_self">www.openkinect.org</a>
</p><p>
OpenNI: <a href="http://www.openni.org" target="_self">www.openni.org</a>
</p><p>
Kinect Teardown: <a href="http://www.technologyreview.com/video/?vid=644" target="_self">www.technologyreview.com/video/?vid=644</a>
</p></div></div></div>
<div class="authorblurb"><p>
Rick Rogers has been a professional embedded developer for more than 30 years.
Now specializing in mobile application software, when Rick isn't
writing software for a living, he's writing books and magazine articles like
this one. He welcomes feedback on the article at
<a href="mailto:portmobileapps@gmail.com">portmobileapps@gmail.com</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../207/toc207.html">Issue Table of Contents</a>
    <a class="link3" href="../207/11056.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>