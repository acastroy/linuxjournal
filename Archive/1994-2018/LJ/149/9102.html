<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Work the Shell</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Shell scripting and obsessive-compulsive perfectionism is almost a&#10;contradction in terms.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xd73580.0xe6aab0"></a>Work the Shell</h1></div><div><h3 class="subtitle"><i>When Is &ldquo;Good Enough&rdquo; Good Enough?</i></h3></div><div><div class="author"><h3 class="author">
Dave
 
Taylor
</h3></div><div class="issuemoyr">Issue #149, September 2006</div></div><div><p>
Shell scripting and obsessive-compulsive perfectionism is almost a
contradction in terms.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd73580.0xe6b3f8"></a></h2></div></div><p>
Last month marked the end of my series about writing a
<span   class="emphasis"><em>Blackjack</em></span> game
as a shell script, and I don't know about you, but I had a good time with
the development process and have even learned a bit more about the game
itself.  I received a number of fun e-mail messages from readers about the
column, but I also received one that was most thought provoking.
</p><p>
The author criticized me for using less-than-optimal algorithms for things
like my shuffle routine, for using poor scripting style and generally
questioned how much I really knew about shell script programming in the
first place.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd73580.0xe6b5b0"></a>
Another Day, Another Flame</h2></div></div><p>
Having lived on the Internet for almost 30 years now, I'm quite familiar
with flames and hostile e-mail, with people nit-picking, focusing on the
molecules of the leaf without ever even knowing there's a forest
ahead, but this message still got me thinking about the practice of
scripting and of programming in general.
</p><p>
To quote a colleague of mine, Ken McCarthy, what's a better strategy,
imperfect action or perfect inaction?
</p><p>
Although the Bourne Again Shell is remarkably capable and certainly has
all the basic programmatic structures of more sophisticated programming
languages, I think it's nonetheless fair to say that it's a lightweight,
even throw-away programming environment.  You don't write large, complex
or mission-critical applications as shell scripts, do you?
</p><p>
That's how I have always approached shell script writing&mdash;basically as
a fast prototyping environment.  You want to know how many lines are in
a file? Use something like:

<pre     class="programlisting">

lines=$(wc -l &lt; $filename)

</pre>
</p><p>
Is that the most elegant and efficient solution? Probably not.  Indeed,
if you're doing that to test whether the file has nonzero content, you
should be using the test command instead, but here's my point:
it doesn't really matter.
</p><p>
That's what I mean by imperfect action.  It's far, far better to get
going with your script, to build a sloppy prototype, to get it done,
than to tune, clean up, tweak, rewrite and optimize until it's 3am two
weeks after your deadline.  That's perfect inaction, right? The zeal to
wait and wait and tweak and prod until it really is perfect, by which
time you've missed your deadlines and goals.
</p><p>
So, when I received the criticism from this reader that I hadn't chosen the
best possible algorithms and wasn't using what he thought was an optimal
scripting technique, I was glad to see how he thought things should
be done.  But I also was unsurprised, as one of the greatest challenges
I believe facing software developers is learning that in many cases and
situations &ldquo;good enough&rdquo; really is, well, good enough.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd73580.0xe6b978"></a>
Writing a Shell Script Isn't Developing Software</h2></div></div><p>
Am I advocating that the next time you're writing the firmware for the
in-flight controller on the Boeing 777 you should cut corners, skip
testing and write crummy code so you can ship on time? Of course not.
But you know what? If you're writing a testing framework cron script that
will simply log the start of the test, invoke a series of MySQL queries
and log the end of the test, well, yeah, in that case, relatively crummy
code, code that works well enough, might just be exactly what's required.
</p><p>
I see this same perfectionist attitude with letters I occasionally
receive from people who have bought my <span   class="emphasis"><em>Wicked Cool Shell
Scripts</em></span>
book.  They haven't realized that writing a shell script is inherently
an exercise in rough prototyping (hence the absence of sophisticated
shell script development environments and testing frameworks), not a
programming world where perfect code is the digital holy grail.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd73580.0xe6bb30"></a>
The &ldquo;Not Good Enough&rdquo; Developer Crowd</h2></div></div><p>
I also think that these rather snobbish software developers who worship
elegance and dismiss software developed by people who are still stumbling
their way through programming are doing a significant disservice to the
world of computing.
</p><p>
Don't get me wrong, I appreciate an ingenious algorithm and snappy
implementation when I read code, but most of the real innovations in
software and applications come from the bubble gum and bailing wire
crowd anyway, from the rough prototypes and the &ldquo;barely
beta&rdquo; software
that works well enough to demonstrate concepts and get the community to
start experimenting anyway.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xd73580.0xe6bd40"></a>
So I Should Be Writing Sloppy Code?</h2></div></div><p>
Some of you doubtless are a bit confused by this point in my
column&mdash;puzzled that someone who is supposed to be teaching you tips and tricks
of shell script programming is actually advocating sloppy coding and
quick &ldquo;throw-away&rdquo; scripts.  I ask instead why you're surprised at the
idea that getting something out the door, solving the problem quickly
and reasonably well, is often better than wasting&mdash;yes,
wasting&mdash;time writing &ldquo;the perfect script&rdquo;?
</p><p>
This reminds me of a computer programming course I took many years ago
at UC San Diego.  Our challenge was to figure out the optimal sorting
algorithm for a given situation and write a program that implemented
it.  Just about everyone in the class thrashed about, but I pulled
out Knuth's <span   class="emphasis"><em>Art of Computer Programming</em></span>, picked out the algorithm
he recommended, and typed it in, with an appropriate citation.  I was
penalized for &ldquo;cheating&rdquo; and had to argue adamantly that
there was, in
fact, no better way to learn how to choose the best sorting algorithm than
to refer to the definitive work on the subject.  Finally, the professor
relented and gave me full credit.
</p><p>
Shell script programming is the same: shortcuts are always a good thing,
efficiency is a measure of how fast you can solve a problem, and although
tuning and tweaking can be rewarding as an intellectual exercise, 90%
of the time it just doesn't matter at the end of the day.
</p><p>
Think about that.  And ask yourself how you're working toward imperfect
action rather than being trapped trying to achieve perfect inaction.
</p><p>
Next month, we'll go back to the nuts and bolts of shell scripting.  But,
please, don't expect me to write perfect little scripts or use the
absolute best algorithm in the world for a given task.  Indeed, sometimes
my code will be inefficient, will spawn more subshells or child processes
than entirely necessary, or might even have unnecessary loops and
conditionals.  Maybe, just maybe, that's okay?
</p></div></div>
<div class="authorblurb"><p>
Dave Taylor is a 26-year veteran of UNIX, creator of The Elm Mail System,
and most recently author of both the best-selling <span   class="emphasis"><em>Wicked Cool
Shell
Scripts</em></span> and <span   class="emphasis"><em>Teach Yourself Unix in 24
Hours</em></span>, among his 16 technical
books.  His main Web site is at <a href="http://www.intuitive.com" target="_self">www.intuitive.com</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../149/toc149.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>