<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Point/Counterpoint
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;After focusing on the Web the past couple months, for this round, Kyle and Bill turn to&#10;something a little more local&mdash;Linux filesystems.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2470580.0x2567ac0"></a>
Point/Counterpoint
</h1></div><div><h3 class="subtitle"><i>
Ext3 vs. XFS
</i></h3></div><div><div class="authorgroup"><div class="author"><h3 class="author">
Kyle
 
Rankin
</h3></div><div class="author"><h3 class="author">
Bill
 
Childers
</h3></div><div class="issuemoyr">Issue #187, November 2009</div></div></div><div><p>
After focusing on the Web the past couple months, for this round, Kyle and Bill turn to
something a little more local&mdash;Linux filesystems.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2470580.0x2568618"></a></h2></div></div><p>
Unlike the Twitter-fest
that was the previous column, this time Bill will be able to talk in full
sentences&mdash;even if they are more than 140 characters! Stay tuned for
Kyle's
love of (and Bill's angst toward) XFS.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Okay, I admit I use ext3 in plenty of systems. It's an
all-around good filesystem, but when I need high performance, especially
with large files, I always turn to XFS.
</p><p>
<span   class="bold"><b>Bill:</b></span> That's fine and dandy when you're
running Debian or Ubuntu, but
what about a Red Hat box? And, no, CentOS, although cool, doesn't count here.
I'm talking the actual Crimson Fedora here&mdash;Red Hat. It doesn't support
XFS in its kernel at all, does it? So, you're forced to build your own
stuff, and then you're in for an admin headache.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Well, you already ruled out CentOS, but if you are stuck in a Red
Hat-like environment and want high performance, like XFS, you might
have to stray from the list of supported packages and either use CentOS or
a custom repository. In any case, it wouldn't be the first time an admin
had to make up for the limited set of supported packages in Red Hat.
</p><p>
<span   class="bold"><b>Bill:</b></span> Pop quiz, hotshot: does that break you out of the support matrix for
Red Hat?
</p><p>
<span   class="bold"><b>Kyle:</b></span> My understanding is that you would
pop out of support only for
problems that are directly related to the filesystem or kernel. I'll be
honest though, in all the years I've had Red Hat support, I can't think of
a time I legitimately needed it. I have, however, had plenty of situations
where a developer wanted to use the filesystem like a database and store
millions of files in huge nested directories&mdash;something XFS handles quite
well.
</p><p>
<span   class="bold"><b>Bill:</b></span> Shhh. You'll anger a possible advertiser. Didn't we engage them once
on a dm-mapper or ocfs issue or something? But yeah, that's a tangential
thing&mdash;just because you don't use the support doesn't mean you don't
need it. There's a reason you continue to pay that fee. And with respect
to developers using the filesystem as a database, we've both seen that.
XFS helps here, but redesigning your whole filesystem isn't necessarily a
fix for poor software architectural design. (I used the architectural word
in there&mdash;bonus points for me!)
</p><p>
<span   class="bold"><b>Kyle:</b></span> Yeah, yeah, put away your drafting table Mr Architect. We both know
how rarely a sysadmin can dictate how a developer solves a problem. In any
case, there isn't much of a redesign. In a Red Hat-based system, it's a
matter of a different kernel package (included with CentOS) and
reformatting a filesystem. With a Debian-based system, the
ability is already there. In any case, you don't have to format everything
with XFS, only the filesystems where it would benefit.
</p><p>
<span   class="bold"><b>Bill:</b></span> True. Speaking of ability, what about the ability to recover a
system when things go pear-shaped? I've never had any luck
<span   class="emphasis"><em>fixing</em></span> an XFS
filesystem&mdash;they've always gobbled my data. Ext3 may be slow, but I've
always been able to save something off a damaged filesystem.
</p><p>
<span   class="bold"><b>Kyle:</b></span> See, I've had the exact opposite experience. The one big advantage in
my mind to XFS is how well the recovery tools work. I've lost data on
basically every major filesystem out there from ReiserFS (let's not go
there) to ext2 and ext3 and yes, even XFS, but whenever I've needed to do
a recovery, the XFS recovery tools always have been successful, even when
the problem was related to a bad hard drive controller.
</p><p>
<span   class="bold"><b>Bill:</b></span> Well, I may be biased, as I
formatted my laptop with XFS at <span   class="emphasis"><em>your</em></span>
behest some years ago and watched as a fun bug gobbled all my data. I never
did recover that, if you recall.
</p><p>
<span   class="bold"><b>Kyle:</b></span> Like I said, I've had data gobbled by every filesystem. I'll also
note that I never was really bitten by that bug, but I do remember a
pretty nasty ext3 bug from a few years back that was so bad they actually
labeled the kernel as defective after the fact. I've used XFS on my
personal systems both for large file storage and even as the filesystem
for my own /home directory on my personal laptop now, without issue. The
fact is, I noticed a tangible difference on the speed of my system when I
moved to XFS.
</p><p>
<span   class="bold"><b>Bill:</b></span> I know you have. You have a halo effect about you with things like
that though. I have...the opposite effect. If it can break, I will break
it. I've always been able to recover from an ext3 explosion. For me, it's
not about the speed. The ext3 filesystem and tools are well known and have
been shipped in <span   class="emphasis"><em>everything</em></span>. I know if my machine
dies, I can move the disk
to another Linux box and be able to read the filesystem, or I can use a
&ldquo;standard&rdquo; recovery disk. Heck, there are even plugins for other OSes that
can read ext3. Try that with XFS.
</p><p>
<span   class="bold"><b>Kyle:</b></span> My standard recovery disc always
has been Knoppix [insert plug here],
and it always has worked just fine with XFS filesystems. I'm not saying
that XFS should be used for everything. There's a reason ext3 is the
default filesystem for most distributions. After all, it offers good
all-around performance for all kinds of filesystems. When you need high
performance for terabytes of large files or millions of small files
though, it's hard to beat XFS. Even formatting an XFS filesystem is
substantially faster than ext3.
</p><p>
<span   class="bold"><b>Bill:</b></span> I'm not arguing that XFS isn't
faster&mdash;it is, and by a large
margin. I don't think it's as safe, however.
</p><p>
<span   class="bold"><b>Kyle:</b></span> I think these days the biggest risk on any system isn't from
filesystem corruption. It's either from hard drive failure or from user
error. In either case, if you are that worried, you should have a solid,
tested backup system in place.
</p><p>
<span   class="bold"><b>Bill:</b></span> True, no filesystem or RAID is a substitute for a solid backup
method. That's something we <span   class="emphasis"><em>do</em></span> agree on.
</p><p>
<span   class="bold"><b>Kyle:</b></span> The bottom line for me is that whenever I reach the limits of ext3,
I know I have a solid, fast alternative in XFS. The XFS recovery tools
are excellent, and in my experience, they work well. Plus, it's been available in
Linux long enough to iron out any major bugs and is available in anything
from CentOS to Debian to Ubuntu. When I want an ordinary filesystem, I
choose ext3, but when I need speed, I choose XFS.
</p><p>
<span   class="bold"><b>Bill:</b></span> Except that XFS isn't available from Red Hat, and that's a
considerable installed base. Just because something is faster doesn't
necessarily mean it's the best long-term solution. XFS may be more
capable, but the downside of possibly falling out of a supportable
configuration at the enterprise level keeps me from deploying XFS on
anything but nonessential gear.
</p><p>
<span   class="emphasis"><em>Last minute note from Bill:</em></span> Just as we were readying this for print, Red
Hat announced that XFS will be in the Red Hat Enterprise 5.4 beta. My
arguments will be sent to /dev/null after 5.4 releases.
</p></div></div>
<div class="authorblurb"><p>
Kyle Rankin is a Senior Systems Administrator in the San Francisco Bay
Area
and the author of a number of books, including <span   class="emphasis"><em>Knoppix
Hacks</em></span> and <span   class="emphasis"><em>Ubuntu
Hacks</em></span> for O'Reilly Media. He is currently the president of
the
North Bay
Linux Users' Group.

</p><p>
Bill Childers is an IT Manager in Silicon Valley, where he lives with his
wife and two children. He enjoys Linux far too much, and he probably
should
get more sun from time to time. In his spare time, he does work with the
Gilroy Garlic Festival, but he does not smell like garlic.

</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../187/toc187.html">Issue Table of Contents</a>
    <a class="link3" href="../187/10555.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>