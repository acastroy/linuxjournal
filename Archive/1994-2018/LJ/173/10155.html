<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Simplifying Backups with Zmanda Recovery Manager
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;An easy-to-use yet comprehensive backup and recovery solution for MySQL&#10;databases is at the top of every DBA's wish list.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2574580.0x266bac0"></a>
Simplifying Backups with Zmanda Recovery Manager
</h1></div><div><div class="author"><h3 class="author">
Alolita
 
Sharma
</h3></div><div class="issuemoyr">Issue #173, September 2008</div></div><div><p>
An easy-to-use yet comprehensive backup and recovery solution for MySQL
databases is at the top of every DBA's wish list.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266c2a8"></a></h2></div></div><p>
Most modern enterprises process immense amounts of data as part of their
day-to-day operations. On-demand access to this data is critical, and most
enterprises invest heavily in relational database technologies to manage
their data. Cutting-edge technologies at cost-effective prices have led
many enterprises to adopt open-source databases such as MySQL. As a result,
MySQL has become a core component of many data management solutions.
</p><p>
Traditionally, backup of data stored in relational databases like MySQL
has been an art form, practiced by database administrators who have relied
on a mix of command-line wizardry, custom scripts and, sometimes, just
sheer luck. Successful data recovery often is seen as black magic, or
almost. Not surprisingly, most backup and recovery strategies emphasize
the backup phase, but they don't actually test whether data can be recovered
successfully when it's needed.
</p><p>
Zmanda, Inc., a startup based in Sunnyvale, California, aims to bring sanity
into the backup and recovery process of MySQL databases by incorporating
industry best practices in its product&mdash;Zmanda Recovery Manager (ZRM)
for MySQL. Zmanda's strong expertise in open-source backup and recovery
software comes from many years of work by the company's core engineers
on the award-winning Amanda open-source backup system, a project 
started at the University of Maryland back in 1991.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266c568"></a>
What Is the Zmanda Recovery Manager (ZRM)?</h2></div></div><p>
ZRM provides a comprehensive open-source solution for backup and recovery
of MySQL databases. ZRM eases day-to-day backup and recovery tasks with
its Web-based Zmanda Management Console (ZMC). The management console
integrates with the Zmanda Network to provide on-line documentation and
other support services for ZRM. Because it is open source and supports
common standards, as well as open data formats for backups, ZRM frees you
from vendor lock-in. ZRM's command-line interface (CLI) integrates well
into existing backup and recovery processes.
</p><div       class="mediaobject"><a href="10155f1.large.jpg"><img src="10155f1.jpg"></a><div class="caption"><p>
Figure 1. Summary of Backup Parameters in Zmanda Management
Console
</p></div></div><p>
Enabling advanced backup and recovery practices, ZRM provides Continuous
Data Protection (CDP) for MySQL by combining filesystem-level snapshots
along with data from MySQL binary logs. Filesystem snapshots help
reduce database server downtime, especially when working with large
databases. ZRM uses a flexible framework of plugins for snapshotting LVM,
NetApp SnapManager, Windows VSS, Veritas VxFS and Solaris ZFS. Plugins
for NetApp SnapManager and Veritas VxFS are sold separately.
</p><p>
Zmanda offers three versions of ZRM for MySQL: the ZRM Enterprise
edition, ZRM Cluster edition and ZRM Community edition. The
Enterprise edition includes a graphical installer, Zmanda Management
Console, command-line interface and plugin framework. Three levels
of support (Basic, Standard and Premium) are available for Enterprise
edition customers. An annual subscription with basic support starts at
$300 (US). Customers using the NDB storage engine with MySQL Cluster
can take advantage of the ZRM Cluster edition. The 
Community edition is a freely downloadable subset of the Enterprise
edition, licensed under the GNU GPLv2, which supports LVM snapshots but does
not include the ZMC and the graphical installer.
</p><div       class="mediaobject"><img src="10155f2.jpg"><div class="caption"><p>
Figure 2. The graphical installer makes setting up ZRM a
piece of cake.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266cae8"></a>
Review Environment</h2></div></div><p>
I evaluated the Zmanda Recovery Manager for MySQL Enterprise
edition version 2.2. The test platform (ZRM server) was Red Hat Enterprise
Linux 5.1 installed on a PC with an Intel Dual Core 3GHz processor,
4GB of system memory and a 750GB SATA hard disk. I installed MySQL
Community Server version 5.0.51a-0 locally on the ZRM server as well as
on another PC with Ubuntu 7.10 server installed. With this configuration,
I was able to test ZRM's ability to back up from and restore to local
and remote MySQL servers. Note that MySQL versions 4.1.x are also
supported by ZRM. Finally, I set up my test databases on a 50GB LVM
(Logical Volume Manager) partition to test ZRM's hot backup capabilities.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266cbf0"></a>
Installing ZRM</h2></div></div><p>
Zmanda provides installation packages for ZRM on Red Hat Enterprise Linux,
SUSE Linux Enterprise, Fedora, CentOS, Solaris and OpenSolaris. To
install ZRM, download the ZRM graphical installer binary executable
and ZRM license key file from the Zmanda Network site. The license key
file has to be placed in /etc/zmanda/zmanda_license. A full installation
of the ZRM Enterprise edition includes command-line tools, a MySQL server
instance for use by ZRM, an Apache Web server instance for ZMC and a PHP
5.2.x and Perl 5.8.x environment.
</p><p>
Getting ZRM up and running is easy, if you're familiar with a MySQL
environment on Linux. A couple minor but necessary post-installation
tasks included setting up sudo permissions for the mysql system user
and creating a MySQL server user account with the right privileges to
perform backups and restores.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266cd50"></a>
Zmanda Management Console</h2></div></div><p>
The ZMC is a Web-based interface that acts as a control panel for managing
the backup and recovery process end to end. Each major function (for example,
Backup, Monitor, Report, Admin and Restore) is represented by a tab and
corresponding panel in ZMC's interface. A key concept to understand
while using the ZMC is that of a &ldquo;backup set&rdquo;. A backup set defines
a group of databases or tables in a database on a MySQL server. Once a
backup set has been defined, a ZMC user can configure various actions for
that backup set. To help you get a feel for ZRM, the following sections
highlight ZRM functions accessible through the ZMC.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266ceb0"></a>
Backup</h2></div></div><p>
ZRM provides several ways to back up MySQL. Important factors to consider
when choosing the best way to back up a MySQL database include database
availability during backup and the size of your database.
</p><p>
Logical backup should be considered if you're looking for flexibility. A
logical backup captures the output of the mysqldump utility and supports
all MySQL storage engines except NDB. You can restore a logical backup
to a platform different from the original. For example, a backup of a
MySQL database running on an RHEL x86 system can be restored to a MySQL
database running on a Solaris Sparc system. However, the flexibility of
a logical backup comes at a price. MySQL tables are read-locked during
backup. Also, restoring a large database can be slow, as SQL statements
are used to re-create the database. Furthermore, the size of the backup
can be larger than the actual database or table being backed up.
</p><p>
Raw backups should be considered if you want minimal database downtime
or if your database size is really large. Raw backups can take advantage
of filesystem-level snapshots to shorten backup times. Also, the backup
size of a raw backup is the same as the size of the data being backed up,
but a raw backup is restrictive because it can be restored only to the
exact MySQL server version on the same kind of platform. If you have
a large database and/or high transaction volume, you should consider
using the quick snapshot option to reduce backup time further, because
the filesystem snapshot becomes the backup and is not copied to the ZRM
server. Note that on Linux, LVM snapshotting is supported only for local
MySQL backups.
</p><p>
ZRM makes it easy to run a mix of full or
incremental backups. Full
backups include all data in a database, whereas incremental backups capture
the changes since the last successful backup. Incremental backups require
that binary logging is enabled on the MySQL server.
</p><p>
If data security is a requirement, ZRM can utilize SSL for remote backups, and
it
can encrypt backup images using standard encryption tools, such
as GnuPG.
</p><p>
I tested ZRM's backup functionality by running variations of full and
incremental, logical and raw (with the quick snapshot option) backups
of a million-record database table. The backups completed without any
problems, and I was able to verify this using the summary report page
under the Report tab in the ZMC.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d1c8"></a>
Monitoring</h2></div></div><p>
ZRM's monitoring function presents valuable information about the
most recently run backup job as well as about currently running
jobs. Information includes how much time the backup took, backup size
and any warning or error messages. This feature was very
helpful when tracking the progress of long-running backup jobs.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d2d0"></a>
Reporting</h2></div></div><p>
ZRM provides excellent reports that analyze the details about backup and
restore jobs, including summary reports, custom reports, predefined
reports and data integrity reports. ZRM Enterprise edition provides nine
predefined reports and allows customized reporting using 30 preset data
fields. You can use ZRM's reporting data within other applications via
RSS feeds. You also can configure ZRM to send e-mail alerts about the
status of backup jobs.
</p><p>
I found the Backup Application Performance Report to be
quite useful, because it provides stats about the amount of time that tables
were read-locked and the total backup time. This information could help a DBA
schedule backups to avoid peak periods of database usage.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d430"></a>
Administration</h2></div></div><p>
ZMC's administration function lets you define and manage
users, manage backup sets, set up ZRM site defaults and customize ZMC
preferences. ZMC implements role-based access control where users can be
defined as an operator or an administrator. Administrators can manage
all backup sets on the ZRM server; however, operators can manage
only the backup sets they own.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d538"></a>
Recovery</h2></div></div><p>
ZRM simplifies the full or incremental recovery of lost data. Using ZMC,
you select a backup set to be restored and specify a MySQL server to
which to restore. If you want to verify your data manually after recovery,
ZMC provides an option to shut down the MySQL server after recovery
is complete.
</p><p>
Another option is point-in-time recovery, which lets
you restore data selectively. Using the Visual Log Analyzer in ZMC, you
can perform incremental recovery by specifying a given point in time or
a binary log position up to which you want to recover.
</p><p>
To test ZRM's recovery functionality, I successfully restored the backups
created from earlier tests. I also successfully restored the quick
snapshot raw backup image of my million-record table to my remote
MySQL server.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d6f0"></a>
Help</h2></div></div><p>
Even though the ZMC interface is relatively easy to understand, you
may need more information about a specific ZRM feature. Fortunately,
ZMC provides context-sensitive on-line documentation through the
Zmanda Network. Other helpful resources include the Zmanda Wiki, forums
and blogs. Zmanda's active on-line Community is helpful and responsive.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d7f8"></a>
A Star in the Making</h2></div></div><p>
Zmanda Recovery Manager provides a robust, open and cost-effective
backup and recovery solution for organizations relying on MySQL for
their critical data. ZRM simplifies an otherwise intricate process of
backup and recovery by managing complex open-source utilities through
its Web-based console.
</p><p>
As with any evolving product, there always is room for improvement. Here
are some of my suggestions: a smarter graphical installer that
automates post-install tasks done manually today; a more sophisticated
management console that enhances the user experience; snazzier graphical
reports (think Google Analytics); and a ZRM virtual appliance (VM image)
for easier deployment in virtualized environments.
</p><p>
Try out ZRM's open-source Community edition today. You'll see how
effortless MySQL backup and recovery can be.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x266d9b0"></a></h2></div></div><div class="sidebar"><p class="title"><b>
Q&amp;A with Zmanda</b></p><p>
We talked with Chander Kant, CEO and cofounder of Zmanda, as well as
Paddy Sreenivasan, VP of Engineering and cofounder of Zmanda, about ZRM,
open-source backup and growing an Open Source community.
</p><p>
<span   class="emphasis"><em>AS:</em></span> Why should customers look at Zmanda Recovery Manager and open source?
</p><p>
CK: Although products based on open source and open standards almost always
come with lower initial cost of acquisition, the greater benefit is
achieved over the life cycle of the deployment. Inherent freedom provided
by open products enables IT managers to lower the cost of
ongoing maintenance significantly. Let's say your organization is using an operating
system that is popular today, but becomes out of favor in a few years'
time. It is possible, actually probable, that a proprietary backup vendor
will withdraw support for this unprofitable operating system. This would
force you to make a choice between either using some ad hoc mechanism to
back up that system or to replace the system with a different OS&mdash;both
costly choices. Open Source communities are known to provide support
for older (and sometimes obscure) platforms. Furthermore, the source
code is available to compile or recompile the software for a particular
operating system.
</p><p>
Future profitability of proprietary software vendors depends on locking in
customers to their proprietary formats and components. For example,
if you use proprietary backup products to write to a tape, the only way
to recover data from that tape is to use the same (and in most cases,
the exact version of the) product. If you were restoring from the tape
seven years from now, you'd better have the specific version of the
product lying around with a valid license or be ready to pay a premium
price to recover your own data. In contrast, data backed up with Zmanda's
products is always in an open format. Customers can recover their data
even without using our products (of course, it is easier to recover if
they do use our products). Also, the data can be repurposed for other
applications (such as e-discovery).
</p><p>
<span   class="emphasis"><em>AS:</em></span> How did you come up with the idea of building an open-source database
backup solution?
</p><p>
CK: We are the leading open-source backup company. For any backup
company to be interesting for customers, you need a good database backup
story. For us, it was a clear choice: MySQL is the leading open-source
database&mdash;we had to be the core backup solution provider for MySQL.
</p><p>
<span   class="emphasis"><em>AS:</em></span> Why did you start Zmanda? How did you come up with the name?
</p><p>
CK: The company was founded around the Amanda open-source backup
community. But we always wanted to do more than Amanda (such as our ZRM
product line). So, we flipped A to Z and came up with Zmanda. Our
slogan is that we are the &ldquo;A to Z of Backup&rdquo;. 
</p><p>
<span   class="emphasis"><em>AS:</em></span> What are your plans to provide a VMware virtual image of ZRM?
</p><p>
CK: We are going to start offering a VM for the ZRM Community edition and
see how the adoption goes. We do think it makes a lot of sense for ZRM to be
shipped as a virtual appliance.
</p><p>
<span   class="emphasis"><em>AS:</em></span> Can you tell us what's on ZRM's road map?
</p><p>
CK: ZRM is growing in multiple directions. ZRM will be supported natively
on Windows in an upcoming release. Today, you can back up MySQL running on
Windows; however, you need a Linux server to run the ZRM core engine. Also,
ZRM will be expanded to support MySQL-based applications, such as SugarCRM,
MediaWiki and so on. So, not only will ZRM be able to back up the underlying
MySQL database, but it also will be able to back up the surrounding
environment&mdash;for example, a SugarCRM administrator simply can push one
button for overall backup and recovery.
</p><p>
<span   class="emphasis"><em>AS:</em></span> What Linux distributions are supported by ZRM today?
</p><p>
PS: ZRM supports practically all RPM-based distributions. We also
support other platforms like Mandriva and FreeBSD in our Community
edition. Although we do not have a graphical user interface and installer
for these platforms, we do provide default configurations that will
allow you to do backups right away.
</p><p>
<span   class="emphasis"><em>AS:</em></span> How large and active is ZRM's community?
</p><p>
PS: The ZRM community is a mix of thousands of developers
and end users. ZRM is written in Perl, and its architecture is
plugin-based. This encourages more contributions from MySQL DBAs. Our
engineers monitor forums actively, and usually you can expect a response
within a day. We see thousands of downloads each month, and the community
is active in suggesting features and answering questions. We have had
numerous contributions from ZRM users/developers.
</p><p>
Users or developers from the community can become involved with Zmanda in
many ways. They can contribute to the wiki, post or answer questions
on our on-line forums and, of course, contribute by trying the products,
providing QA feedback and patches.
</p><p>
<span   class="emphasis"><em>AS:</em></span> How often can users expect a release of ZRM Enterprise edition or the
ZRM Community edition?
</p><p>
PS: We do a release of the Enterprise edition once every 3&ndash;4
months. Usually a release has a combination of new features, new platforms
supported and bug fixes. On the other hand, the Community edition has
no fixed schedule. We have done 13 (major and minor) releases in about
24 months. Critical security bugs are fixed within 24 hours.
</p><p>
<span   class="emphasis"><em>AS:</em></span> What does Zmanda expect to gain by making an open-source Community
edition of ZRM freely available?
</p><p>
PS: We are an open-source company. We believe in bringing the best of open
source to the enterprise as well as contributing to open source to make
it enterprise-ready. We gain a good understanding of MySQL DBA work flows
and features needed. Of course, the Community edition is the proving
ground for our features. And, it helps us recruit good engineers.
</p><p>
We have made significant contributions to open source. Our contributions
are not just in development. We maintain source trees, a bug-tracking
system and documentation, and we help evangelize ZRM using Webinars,
presentations, whitepapers and contributing to books.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2574580.0x2664ef8"></a></h2></div></div><div class="sidebar"><p class="title"><b>Resources</b></p><p>
Zmanda Recovery Manager: <a href="http://www.zmanda.com/backup-mysql.html" target="_self">www.zmanda.com/backup-mysql.html</a>
</p><p>
Zmanda Network: <a href="http://network.zmanda.com" target="_self">network.zmanda.com</a>
</p><p>
ZRM Wiki: <a href="http://mysqlbackup.zmanda.com" target="_self">mysqlbackup.zmanda.com</a>
</p><p>
ZRM Forums: <a href="http://forums.zmanda.com" target="_self">forums.zmanda.com</a>
</p></div></div></div>
<div class="authorblurb"><p>
Alolita Sharma has been involved with open source since the early days
of Linux. As a software engineer and industry consultant, she promotes
innovation through open source. She is cofounder and CEO of Technetra
and OSI Board Member. She can be contacted at
<a href="mailto:alolita.sharma@gmail.com">alolita.sharma@gmail.com</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../173/toc173.html">Issue Table of Contents</a>
    <a class="link3" href="../173/10155.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>