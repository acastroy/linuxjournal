<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Android Programming with App Inventor
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Drag and drop your way to Android programming.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2a8b580.0x2b82ac0"></a>
Android Programming with App Inventor
</h1></div><div><div class="author"><h3 class="author">
Amit
 
Saha
</h3></div><div class="issuemoyr">Issue #217, May 2012</div></div><div><p>
Drag and drop your way to Android programming.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2b832a8"></a></h2></div></div><p>
MIT App Inventor, re-released as a beta service (as of March 5,
2012) by the MIT Center for Mobile Learning after taking over the project from Google,
is a visual programming language for developing applications for
the Android mobile computing platform. It is based on the concept of
blocks, and applications are designed by fitting together blocks of code
snippets. This may sound like a very childish way of programming, especially for
seasoned readers of <span   class="emphasis"><em>Linux Journal</em></span>. But then again,
App Inventor will tickle the child programmer in you and make you chuckle
at the ease with which you can develop applications for your Android
device. In this article, I describe how to use the camera on the Android
device, develop e-mail
and text-messaging-based applications and also show how to use location
sensors to retrieve your current geographical location. Let's get started.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2b834b8"></a>
Getting Started</h2></div></div><p>
App Inventor has minimum setup requirements and is completely
browser-based. You need a working Java installation on your system,
as it uses Java Web Start for its functioning. Point your browser
to <a href="http://appinventor.mit.edu" target="_self">appinventor.mit.edu</a>, and once you sign in with your Google
account, you should see a screen as shown in Figure 1. This is called
the Projects Page where you can see your existing projects and create
new ones.
</p><div       class="mediaobject"><a href="11205f1.large.jpg"><img src="11205f1.jpg"></a><div class="caption"><p>
Figure 1. App Inventor's Projects Page
</p></div></div><p>
Now, let's develop and deploy an Android application using
App Inventor and in the process learn the basic development-deployment
cycle. Create a New Project using the New Project button, and enter
a name for your project, say &ldquo;Project1&rdquo;. Now you should see the
Designer window for your project. The Designer window is composed of
four sub-components. The Palette on the leftmost side of the window is
the placeholder for all the available components for your project. The
Viewer is where the application will be designed by placing together
various components (this is where you design the user interface for your
application). The Components show the currently used components in your
project, and the Properties column is where you assign the properties
of the components.
</p><p>
First, let me briefly explain the notion of components. An App Inventor project
is made up of building blocks called components, such as a text label to
display text, a text box to take user inputs, a camera component to click
pictures and so on. Currently, you will see a few categories of
components&mdash;basic components, such as those for user input and display of text to
more specialized components, such as those for displaying media and
animations,
and components acting as an interface to the device sensors. A complete
reference for all the components is available at <a href="http://appinventor.mit.edu/learn/reference/index.html" target="_self">appinventor.mit.edu/learn/reference/index.html</a>. Components have
associated behavior, methods and properties. Some of the properties can
be set; whereas others can be only read.
</p><p>
In this first project, let's use the following components: Camera,
Button and Image. The code usually shows it better, but briefly here is
what you're going to do: clicking the button starts the camera on your
device, which you use to click a picture, which then is displayed using
the Image component. Here are the steps:
</p><div class="orderedlist"><ol type="1"><li><p>
Drag a Camera component from the palette to the Viewer. It should
show up under Non-visible components below the Viewer. By default,
it will be named as Camera1, which you can, of course, change to something
else.
</p></li><li><p>
Drag a Button to the Viewer, and from the Properties, change its
Text to &ldquo;Click&rdquo;.
</p></li><li><p>
Drag an Image component onto the Viewer.
</p></li><li><p>
You can play around with the Screen properties to set things
like title, background color and orientation. For the
purpose of this project, set the Title to &ldquo;Click!&rdquo;.
</p></li></ol></div><div       class="mediaobject"><a href="11205f2.large.jpg"><img src="11205f2.jpg"></a><div class="caption"><p>
Figure 2. User Interface for Project1
</p></div></div><p>
That completes the design of the user interface (Figure 2). Next,
let's program the components using Blocks.
</p><p>
Open the Blocks Editor, which should start downloading the JAR
file for the editor. It will ask you for the location of the App Inventor
setup commands if you have not installed them in the standard location
under /usr/google. The Blocks Editor for the current project will 
look like Figure 3. Going
back to the description for this project, the goal is to activate the device
camera when the button is clicked. This is done with the code block
&ldquo;When Button1.click&rdquo;, which you dragged from the Blocks pane on the left.
When the button is clicked, you want the device's camera to be activated,
so drag the &ldquo;call Camera1.TakePicture&rdquo; block inside the previous
block. Once the picture is taken, you will want it to be displayed using the
Image component. So, insert the block &ldquo;when
Camera1.AfterPicture&rdquo;
into the editor, and then set the &ldquo;Image1.Picture&rdquo; to the location of
the saved image.
</p><div       class="mediaobject"><a href="11205f3.large.jpg"><img src="11205f3.jpg"></a><div class="caption"><p>
Figure 3. Blocks Editor for Project1
</p></div></div><p>
Now that you have designed the user interface and programmed the
application's logic,
you're ready to test it. Go back to the Designer
window, and on the right, click on Package for Phone&rarr;Download to this
Computer. That should initiate the download of the Android package
(.apk file) for your project. Now, transfer this file to your Android
device, and install it. Then, try it out.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2b84328"></a>
A Peek under the Hood</h2></div></div><p>
Now you have designed and deployed your first Android application, and you have
used components (the camera component and the image components), assigned
them behavior and set properties. If you are familiar with the idea of
event-driven programming, you already will have realized that App Inventor
is an event-driven programming framework. The event can be the user
clicking a button or the reception of a text message. For example, when
the button is clicked, an event is said to have occurred, and in response
to this event, the camera is activated. Again, when the camera finishes
capturing a picture and saving it, the response code uses the image
location to display it using an image component.
</p><p>
Earlier, I mentioned that components have associated behavior, methods
and properties. You can find these for a component by clicking the
component in the Blocks Editor. For example, Figure 4 shows the method
available for the Camera component (Camera1.TakePicture) and the behavior
(Camera1.AfterPicture).
</p><div       class="mediaobject"><a href="11205f4.large.jpg"><img src="11205f4.jpg"></a><div class="caption"><p>
Figure 4. Blocks Available for the Camera Component
</p></div></div><p>
Besides the blocks associated with components, more fundamental
programming blocks are available: Math blocks, Logic blocks, Control blocks
and others. (I'll demonstrate using a few of these in one of the projects
later in this article.)
</p><p>
Now that you have a basic idea of developing applications using App Inventor,
let's look under the hood a bit, 
starting from the source. Download the source code for
&ldquo;Project1&rdquo;
by going to the Projects Page and selecting Project1 and clicking on
More Actions&rarr;Download Source. That should start downloading
the sources in a zip file. When you unzip the file, you will have
two directories: src and youngandroidproject. Under the src
directory, you will have a subdirectory called appinventor, which
houses the subdirectories, and then ai_droidery/Project1 (note that
&ldquo;droidery&rdquo; is my Google user name). In this directory, you will
see the source
files Screen1.blk, Screen1.scm and Screen1.yail. Screen1.blk is an XML-based
representation of the visual blocks that was created earlier;
Screen1.yail is an intermediate language based on the Scheme language
used by App Inventor, which is then fed to Kawa to create the Android
package for installation on Android devices. The Screen1.scm file is a
JSON representation of the components used in the project with details
about the components, such as the version information. If you are
keen to understand how App Inventor really works, you also may want to check
out App Inventor's source code (see Resources).
</p><p>
Next, let's move on to becoming familiar with sensors and some of the other
components available in App Inventor.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2b84850"></a>
Sensing the World Using Sensors</h2></div></div><p>
Sensors, true to their names, are the eyes and ears of your Android
device. They allow your device to sense the world around it. For
example, the location sensor on your device keeps track of your current
location information using your mobile and Wi-Fi signal information and
GPS data. Other sensors on your Android device include proximity
sensors and motion sensors. In this section, let's use the location
sensor on your Android device to write two simple applications that
can be used on their own or as a starting point for something more
useful and customized. In the process, you'll learn to make use of
a couple more App Inventor components.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2b84958"></a>
E-mail Your Current Location</h2></div></div><p>
Consider a not-so-fictional scenario when you might want to tell
your friend exactly where you are at the moment so that she can drive down
to meet you. Or, you simply may be lost. Either way, the Location Sensor
can help. Let's call this project &ldquo;LocationOnClickEmail&rdquo;. The
user interface for this project looks like the one shown in Figure 5. Besides the
basic components, such as text labels and buttons, add the
LocationSensor component (found under the Sensors category) and an
ActivityStarter component (found under the Other Stuff category). The
ActivityStarter component, which has been named
&ldquo;MailAppStarter&rdquo; will
be used to start the e-mail application on the Android device. For
details on the ActivityStarter Component, refer to
<a href="http://appinventor.mit.edu/learn/reference/other/activitystarter.html" target="_self">appinventor.mit.edu/learn/reference/other/activitystarter.html</a>.
</p><div       class="mediaobject"><a href="11205f5.large.jpg"><img src="11205f5.jpg"></a><div class="caption"><p>
Figure 5. User Interface for
the LocationOnClickEmail Project
</p></div></div><p>
Now you need to add the project logic using the Blocks Editor as
before. Figure 6 shows the final state of the Blocks Editor for this
project.
</p><div       class="mediaobject"><a href="11205f6.large.jpg"><img src="11205f6.jpg"></a><div class="caption"><p>
Figure 6. Final Blocks for
the LocationOnClickEmail Project
</p></div></div><p>
The application logic can be divided into two steps&mdash;obtaining the
location using the Location Sensor when the Get Location button
is clicked. This is done in the &ldquo;when GetLocationButton.Click&rdquo; code
block. When this button is clicked, the Location Sensor is enabled. Once
the Location Sensor has been able to obtain the location information,
it invokes the &ldquo;when LocationSensor1.LocationChanged&rdquo; method where the
text labels are updated with the location data. Next, when the Email
Location button is clicked, the MailAppStarter component's DataUri
property is set to start the mailing application. Here, the recipient
is set to &ldquo;droidery@gmail.com&rdquo;, the subject to &ldquo;My
Location&rdquo; and the
body of the message to the obtained address. The recipient and subject
can be changed in the mailer application on the device.
</p><p>
That completes the current project. For more details on using the Location
Sensor and the App Starter components, refer to the App Inventor Reference
(see Resources).
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2f7d3e8"></a>
Text-Messaging-based Location Sensor Application</h2></div></div><p>
In the last application, you initiated the location sending event. What
if you want to design an application that will run as a service, such
that when it receives a request via text message, it sends your current
location to the sender? Even with privacy being such a sensitive issue
in today's connected world, such an application can be useful if 
you want to make sure your not-so-grown-up kid isn't lost, for example.
In addition to the Location Sensor component, you will become familiar with the
Texting component in this application.
</p><p>
Here is the idea: on receipt of a text message with &ldquo;location&rdquo;
in its body, the application replies with the current location as
a text message. The actions taken upon receipt of a text message are
shown in Figure 7. This is the core logic for the application. In the
&ldquo;Texting1.MessageRecieved&rdquo; procedure, the
&ldquo;number&rdquo; and &ldquo;messageText&rdquo; are
available as arguments. If the &ldquo;messageText&rdquo; is
&ldquo;location&rdquo;, then check
whether the location has been obtained. If yes, then construct a reply using
the address and send the text; otherwise, send an error message back as the reply.
</p><div       class="mediaobject"><a href="11205f7.large.jpg"><img src="11205f7.jpg"></a><div class="caption"><p>
Figure 7. Action Taken When a Text
Message Is Received
</p></div></div><p>
The complete application, along with others, can be downloaded from <a href="https://bitbucket.org/amitksaha/articles_code/src" target="_self">https://bitbucket.org/amitksaha/articles_code/src</a>. You can upload the source
(.zip) archives to App Inventor directly and try out the applications 
after packaging them. In this article, I have strictly concentrated on using an
Android device for testing the applications. For basic uses, you also
can use the emulator that is available in App Inventor and also use a live
development methodology where you can install the application
directly to your device. See the App Inventor Web site to try
these out. I tested these applications on my Samsung Galaxy-SII
running Android 2.3, but I hope there won't be any issues with running
them on other devices running Android 2.2 and higher.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2f7da18"></a>
Looking Ahead</h2></div></div><p>
I started this article with the intention of having some fun
programming for the Android platform, and I hope it has been so thus far.
If you're interested in looking into App Inventor further, the first things
that you might want to check out, apart from
extending the projects to something more fun and useful, are the various
other components. Of special note is the Data Store component that allows
you to store data on the device, the Web components for interacting with
remote Web content, other Sensor components and Media components.
</p><p>
App Inventor is fun, but you might feel that although it's good as
a starting point, you would prefer a more traditional programming
language as you become more familiar with Android development. Instead of
completely throwing your App Inventor project away, consider
using the App Inventor Java Bridge to use your App Inventor components
while you write Android applications using the more traditional way of
programming in Java.
</p><p>
If you feel the need to run your own App Inventor service, the MIT
Center for Mobile Learning has made available the App Inventor JARs to
enable you to host your own service (see Resources).
</p><p>
If you want to keep exploring App Inventor itself, two excellent books are
available: David Wolber, Hal Abelson, Ellen Spertus and Liz Looney's
<span   class="emphasis"><em>App
Inventor: Create your own Android apps</em></span> (O'Reilly) and
Jason Tyler's <span   class="emphasis"><em>App Inventor for Android: Build Your Own
Apps&mdash;No Experience Required!</em></span> (Wiley).
</p><p>
If you enjoyed App Inventor, you might want to look at some other
tools for programming your Android device visually, such as DroidDraw and
Corona. And if you want to program Android visually on the device
itself, check out Catroid.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2a8b580.0x2f7dd30"></a></h2></div></div><div class="sidebar"><p class="title"><b>Resources</b></p><p>
MIT App Inventor: <a href="http://appinventor.mit.edu" target="_self">appinventor.mit.edu</a>
</p><p>
Setting Up Your Computer: <a href="http://appinventor.mit.edu/learn/setup/index.html" target="_self">appinventor.mit.edu/learn/setup/index.html</a>
</p><p>
App Inventor Reference: <a href="http://appinventor.mit.edu/learn/reference/index.html" target="_self">appinventor.mit.edu/learn/reference/index.html</a>
</p><p>
APK File Format: <a href="http://en.wikipedia.org/wiki/APK_%28file_format%29" target="_self">en.wikipedia.org/wiki/APK_%28file_format%29</a>
</p><p>
Under the Hood of App Inventor: <a href="http://googleresearch.blogspot.com/2009/08/under-hood-of-app-inventor-for-android.html" target="_self">googleresearch.blogspot.com/2009/08/under-hood-of-app-inventor-for-android.html</a>
</p><p>
App Inventor Open-Source Project: <a href="http://code.google.com/p/app-inventor-releases" target="_self">code.google.com/p/app-inventor-releases</a>
</p><p>
Activity Starter Component: <a href="http://appinventor.mit.edu/learn/reference/other/activitystarter.html" target="_self">appinventor.mit.edu/learn/reference/other/activitystarter.html</a>
</p><p>
App Inventor Java Bridge Project: <a href="http://groups.google.com/group/app-inventor-instructors/browse_thread/thread/10a64e64b7886afb" target="_self">groups.google.com/group/app-inventor-instructors/browse_thread/thread/10a64e64b7886afb</a>
</p><p>
Running Your Own App Inventor Service: <a href="http://appinventoredu.mit.edu/developers-blogs/andrew/2011/nov/running-your-own-app-inventor-service" target="_self">appinventoredu.mit.edu/developers-blogs/andrew/2011/nov/running-your-own-app-inventor-service</a>
</p><p>
App Inventor Course: <a href="http://sites.google.com/site/appinventorcourse" target="_self">sites.google.com/site/appinventorcourse</a>
</p><p>
&ldquo;Android App Development&rdquo; presentation by Peter McNeil:
<a href="http://www.cjugaustralia.org/September+2011" target="_self">www.cjugaustralia.org/September+2011</a>
</p><p>
Catroid Project: <a href="http://code.google.com/p/catroid" target="_self">code.google.com/p/catroid</a>
</p><p>
Code for This Article (available in the appinventor_article subdirectory):
<a href="https://bitbucket.org/amitksaha/articles_code/src" target="_self">https://bitbucket.org/amitksaha/articles_code/src</a>
</p></div></div></div>
<div class="authorblurb"><p>
Amit Saha is currently a PhD research student in the area of Evolutionary
Algorithms and Optimization. Like his random echoes 
show (<a href="http://echorand.me" target="_self">echorand.me</a>), he has been writing on myriad
Linux and open-source technologies for the past five years. Overall, he loves playing
around with a bit of this and a bit of that. He welcomes comments on
this article and beyond at <a href="mailto:amitsaha.in@gmail.com">amitsaha.in@gmail.com</a>.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../217/toc217.html">Issue Table of Contents</a>
    <a class="link3" href="../217/11205.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>