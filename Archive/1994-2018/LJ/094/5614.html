<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Observe, Mon Cher Ami...</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    This month, Marcel introduces Gqcam, xawtv and MASH, some&#10;    simple and fun tools to use with webcams, and Francois falls&#10;    in love.&#10;    "><meta name="keywords" content="SOHO, web, cam, gqcam, XawTV, video"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1632580.0x1729ab0"></a>Observe, Mon Cher Ami...</h1></div><div><div class="author"><h3 class="author">Marcel Gagn&eacute;</h3></div><div class="issuemoyr">Issue #94, February 2002</div></div><div><p>
    This month, Marcel introduces Gqcam, xawtv and MASH, some
    simple and fun tools to use with webcams, and Francois falls
    in love.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1632580.0x172a608"></a>Cooking with Linux</h2></div></div><p></p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1632580.0x172a710"></a>Observe, <span   class="emphasis"><em>Mon Cher
Ami</em></span></h2></div></div><p>This month Marcel introduces Gqcam, xawtv and MASH, some
simple and fun tools to use with webcams.</p><p>by Marcel Gagn&eacute;</p><p><span   class="emphasis"><em>M</em></span><span   class="emphasis"><em>on Dieu</em></span>! This is
terrible. Why did you not tell me, Fran&ccedil;ois? Surely it must
have been obvious to you when I was putting the menu together. I
must come up with something and quick, before our guests arrive.
Too late, Fran&ccedil;ois. They are here.</p><p><span   class="emphasis"><em>Bonjour</em></span>, <span   class="emphasis"><em>mes amis</em></span>.
Welcome to <span   class="emphasis"><em>Chez Marcel</em></span>, home of fine Linux
cooking. Fran&ccedil;ois, please, show our friends to their table.
Forgive me if I seem a bit distressed, but I have been caught off
guard today. You see, when Fran&ccedil;ois told me that the theme
of the issue would be SOHO, I thought, <span   class="emphasis"><em>mais</em></span>,
<span   class="emphasis"><em>c'est fantastique</em></span>! An issue featuring the
wonders of our solar system. Imagine my surprise when I learned
that SOHO, in this case, was Small Office/Home Office rather than
Solar and Heliospheric Observatory. Then, I started playing with
the words, you see. Observatory made me think of the technology for
observing the stars, like that wonderful telescope named after
Monsieur Hubble. And then I thought, but the true stars are this
restaurant's fine guests&mdash;you, <span   class="emphasis"><em>mes
amis</em></span>.</p><p>This brings us to tonight's menu. But first, we must have
<span   class="emphasis"><em>du vin</em></span>, <span   class="emphasis"><em>non</em></span>?
Fran&ccedil;ois, please bring up the 1998 Picadilly Valley
Chardonnay from the cellar for our guests.</p><p>In order to achieve the highest level of success with the
following recipes, a recent kernel is recommended highly. This is
particularly true because a number of inexpensive webcams that you
will find at your local electronics warehouse are USB devices. The
more recent the kernel, the more likely that device will be
supported. While taste-testing these recipes, I used a 2.4.9 kernel
and two different webcams, one based on the CPiA chipset, and the
other using a ov511 module.</p><p>The prevalent use for the webcam is on a web site, providing
glimpses into the life of the individual running the site. Some
sites provide a camera to reassure us that they are indeed working.
Others are there to let parents observe their children playing at
day care. The software that captures these images is sometimes
called a frame grabber.</p><p>Ah, Fran&ccedil;ois, you are back. Please pour for our
guests. Fran&ccedil;ois? Fran&ccedil;ois, I am talking to you. What
do you mean you did not hear me? Ah, I see. A beautiful and
mysterious lady is sitting at table 22. Pour the wine and then you
may introduce yourself. <span   class="emphasis"><em>Vite</em></span>!</p><p>Where was I? <span   class="emphasis"><em>Mais oui</em></span>, frame grabbers.
Gqcam is just such a package. With it you can set up a camera, keep
an eye on whatever needs watching and capture images at will. You
even can set it up to grab an ongoing sequence of images
automatically, at whatever interval you choose. To get started with
Gqcam, visit Cory Lueninghoener's web site
(<a href="http://cse.unl.edu/~cluening/gqcam" target="_self">cse.unl.edu/~cluening/gqcam</a>)
to pick up the latest source, then extract and build it:</p><pre     class="programlisting">
tar -xzvf gqcam-0.9.tar.gz
cd gqcam-0.9
make
</pre><p>You were waiting for something else,
<span   class="emphasis"><em>non</em></span>? There is no <b  >make
install</b> for this one, <span   class="emphasis"><em>mes amis</em></span>. You
can copy the final binary to /usr/local/bin manually, or wherever
you want to save the executable. You also can execute the program
directly from the build directory, if you wish, by typing
<b  >./gqcam &amp;</b>. You may find, as I did, that the
program looks to /dev/video by default. With the USB device, my
webcam was actually at /dev/video0 while /dev/video was a
directory. To get around this, I used the -v flag:
<pre     class="programlisting">
gqcam -v /dev/video0
</pre>


What you choose to observe with Gqcam is entirely up to you, but as
to what you can do with the program itself, allow me a few
suggestions. If you look at Figure 1, you'll see a shot of Gqcam in
action. While it is running, you can do some interesting things.
For instance, you can, at any time, click on the Snap Picture
button to capture a frame. You'll be given the option of saving it
in either PNG, PPM or JPEG format. If you were to click a number of
images quickly, you could assemble them into a movie of sorts.
<div       class="mediaobject"><img src="5614f1.jpg"><div class="caption"><p>
Figure 1. Gqcam Captures Our French Chef in a Casual Moment
</p></div></div>

</p><p>Of course, it is tedious, is it not, to be snapping pictures
of yourself continually. That's why Gqcam lets you set a timer.
Click on Camera, then select Set timer. You can choose a directory
where the image will be saved and an appropriate filename to save
that image to, something like /somedir/mypic.jpg. Set the timer for
one second and let it go. You'll end up with a number of images in
/somedir that have the filename mypic followed by a period, a date
and timestamp, and the .jpg extension. The fun part here is that
you can run this little movie with a simple command that is part of
the ImageMagick package (likely already installed on your
machine):</p><pre     class="programlisting">
animate mypic.*.jpg
</pre><p>Gqcam also can run directly from the command line, making it
fairly simple to set up a cron job that will capture frames at some
selected interval:
<pre     class="programlisting">
gqcam -v /dev/video0 -d /wwwdir/filename.png
</pre>


The -d option specifies a location to dump a captured image. The
default format for the image is PNG, but you can also use the -t
flag to specify JPEG as an override. Now, if I happen to be running
a web server somewhere, I could, when the mood takes me, snap a
current picture and, <span   class="emphasis"><em>voil&agrave;</em></span>, we are all
stars of the Internet, <span   class="emphasis"><em>non</em></span>? All you need now
is a simple web page to display the image, something like this:
<pre     class="programlisting">
&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;Cam Chez Marcel&lt;/title&gt;
&lt;/head&gt;
&lt;body bgcolor="White"&gt;
&lt;center&gt;
   &lt;h1&gt;Bienvenue! You are watching Cam Chez Marcel&lt;/h1&gt;
   &lt;img src="camsnap.png"&gt;
&lt;/center&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>


Another program that performs some of the same functions as Gqcam
is Gerd Knorr's xawtv. As its name implies, this is meant to
provide you with a means of viewing television programs (with the
appropriate hardware), but it also handles input from webcams. When
you feel that you've done something that warrants observation on a
regular basis (a video sales presentation, for instance), you may
decide that providing a video clip adds a certain something extra.
<span   class="bold"><b>xawtv</b></span> can give you that
capability. Start by visiting the web site at
<a href="http://bytesex.org/xawtv" target="_self">bytesex.org/xawtv</a> and
picking up the latest copy. From a work directory, extract the
source and build it:
<pre     class="programlisting">
tar -xzvf xawtv_3.64.tar.gz
cd xawtv-3.64
./configure
make
make install
</pre>


You run the program by typing <b  >xawtv &amp;</b> at the
command line. The program automatically sensed the location of my
camera in this case, so no additional settings were necessary. When
you right-click on the image, an options menu will appear that lets
you change the video settings, such as brightness and color. Like
Gqcam, you also can grab an image and save it in PPM or JPEG
format. What's more interesting to this discussion is the next menu
item.
</p><p>If you press R, a recording window appears. The default is to
save multiple images that you would then assemble using an external
program. You can, however, click on movie driver and choose raw
video data or an AVI format file. Choose AVI, select a filename to
save it to, then click on the start recording tab. When you have
the footage you want, click the tab again. (It actually says
start/stop.) If you have the xanim package loaded, you may choose
to play back what you recorded by clicking the tab immediately
below. Have a look at Figure 2 for a sample of a recording session
dialogue.</p><div       class="mediaobject"><a href="5614f2.large.jpg"><img src="5614f2.jpg"></a><div class="caption"><p>
Figure 2. Setting up an AVI Capture Session with xawtv
</p></div></div><p>Come closer, <span   class="emphasis"><em>mes amis</em></span>. Notice how
Fran&ccedil;ois looks a little uncomfortable. He is somewhat taken
with <span   class="emphasis"><em>la dame myst&eacute;rieuse</em></span> at table 22.
The poor boy is too shy to go talk to her in person. It is for my
faithful waiter and others like him that I present you with our
final recipe of the day.</p><p>When you want to be face to face, but distance (or other
circumstances) makes it difficult, then video conferencing is the
answer. This is where MASH comes into play. MASH is actually a
collection of tools produced by the Open MASH Consortium (created
by Larry Rowe and Steve McCanne). Their purpose was to create a
public domain toolkit for developing collaboration and streaming
applications. MASH stands for multimedia architecture that scales
across heterogenous environments. No, really. It is all
true.</p><p>If you feel so inclined, you can download the source and
build the package from scratch:</p><pre     class="programlisting">
tar -xzvf mash-src-5.1.5.tar.gz
cd mash-code
./build
</pre><p>The easiest method is to download the precompiled binary
package from the Open MASH web site at
<a href="http://www.openmash.org" target="_self">www.openmash.org</a>. Once
that is done, you merely extract the package and run the
installation script. Observe, <span   class="emphasis"><em>mes amis</em></span>:
<pre     class="programlisting">
tar -xzvf mash-bin-5.1.5-linux-gnu.tar.gz
cd mash-5.1.5
./setup.sh
</pre>


So simple, <span   class="emphasis"><em>non</em></span>? As I mentioned, this is a
collection of tools rather than a single program. The most
interesting one however, particularly for Fran&ccedil;ois, is vic,
the video-conferencing tool that allows for multiple users to
participate in video communication:
<pre     class="programlisting">
vic hostname/port_no
</pre>


For instance, if I wanted to connect to a machine called speedy on
my network on port 2002, I would issue the command like this:
<pre     class="programlisting">
vic speedy/2002
</pre>


You should see a small window pop up at this point with a simple
message, &ldquo;Waiting for video...&rdquo;, in the center of it. The video
you are waiting for, of course, is the young lady at table 22. For
the young ladies out there, it may well be Fran&ccedil;ois. Who
knows? While we wait for the other side of the connection, click
the Menu button. A control window will appear that gives you
control over many aspects of the current session. Look at the top
of that window and click on the Transmit button. Even without the
other side of the connection, you will see a small image of
yourself sitting behind your camera.
</p><p>Now, click on the small image. A somewhat larger session
image appears. When the person on the other end comes on-line,
their image will appear, and you can follow the same procedure to
detach a more appetizing view. Figure 3 shows Fran&ccedil;ois
talking to the mysterious lady using vic. As you can see from the
image, he even is afraid to let his own image be seen and has
provided an avatar of sorts. Poor Fran&ccedil;ois.</p><div       class="mediaobject"><img src="5614f3.jpg"><div class="caption"><p>
Figure 3. <span  class="emphasis"><em>Elle est une dame
myst&eacute;rieuse</em></span>.
</p></div></div><p>Like the other applications we have seen today, vic's video
control menu lets you modify a number of settings such as
brightness, contrast and color. You even can change the size of the
viewers by clicking on the Size button.</p><p>Once again, closing time approaches. Normally, I would ask my
waiter to provide you with a final top-up, but I fear,
<span   class="emphasis"><em>mes amis</em></span>, that it will be up to me to refill
your glasses this evening. Fran&ccedil;ois seems somewhat
preoccupied.</p><p><span   class="emphasis"><em>Ah</em></span>, <span   class="emphasis"><em>l'amour</em></span>.</p><p><a href="5614s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
        <div       class="mediaobject"><img src="5614aa.jpg"></div>

        <span   class="bold"><b>Marcel
      Gagn&eacute;</b></span>
      (<a href="mailto:mggagne@salmar.com">mggagne@salmar.com</a>)
      is president of Salmar Consulting, Inc., a systems integration and
      network consulting firm, and the author of Linux System
      Administration: A User's Guide, published by Addison-Wesley.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../094/toc094.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>