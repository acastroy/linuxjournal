<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Point-and-Click E-Mail Crypto</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Make secure e-mail a habit with easy GUI&#10;tools to send, receive and authenticate encrypted&#10;messages.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2224580.0x231bab0"></a>
Point-and-Click E-Mail Crypto</h1></div><div><div class="author"><h3 class="author">
Roy
 
Hoobler
</h3></div><div class="issuemoyr">Issue #129, January 2005</div></div><div><p>
Make secure e-mail a habit with easy GUI
tools to send, receive and authenticate encrypted
messages.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231c2f0"></a></h2></div></div><p>
I use a laptop with Linux, and I don't want
people reading my mail if the laptop falls into the
wrong hands. I've also had my e-mail monitored,
and I didn't want the network administrator to view
anything personal.
GnuPG offers good encryption and is available for all. With KDE's KGPG
and KMail, things are even easier.
This article explains how to use KGPG for e-mail and
file encryption. It may get a little complicated, but
by following this article, you should have everything
up and running within an hour or so. If you have
any questions, please write me&mdash;try out your new
secure e-mail if you like. My address is
in this article.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231c3f8"></a>
What Is GnuPG?</h2></div></div><p>
Gnu Privacy Guard (GnuPG) is an implementation of
the OpenPGP standard. These standards grew out
of the work done by Philip Zimmerman and his PGP
(Pretty Good Privacy) software. PGP has been around
since 1991 and is now proprietary software. However,
OpenPGP standards were established in 1997, and version
1.0 of GnuPG appeared in 1999.
</p><p>
GnuPG is all done through the command line and is
quite complex. Tools to simplify it for you are
available; this article covers KDE, KGPG
and KMail.
</p><p>
GnuPG and PGP are compatible. For those already using
PGP, if you use the IDEA algorithm, there is some more
work involved with switching to GnuPG; otherwise, there
shouldn't be a problem. If you need to communicate
with or replace PGP 2.x, see the on-line Resources
for this article.
</p><p>
It takes discipline to implement and enforce privacy
and security policies for an organization. I was in a
Military Intelligence unit back in my Army days, and
security was taken very seriously. If policies were
not followed, there were serious consequences. For
any organization, someone should be appointed as a
security manager and given the proper authority to
make sure guidelines are followed. Just like any
good practice (such as using CVS for code), once
people are trained to encrypt sensitive information,
it will become standard. Depending on the size of
the organization, it could take anywhere from a week to
a month of checking and training to get the policy
in place.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231c608"></a>
Creating Your Own Key</h2></div></div><p>
As an example, I'm going to encrypt a
message and send it from my work account to my
rhoobler@comcast.net mail account. Both accounts
are using KMail. Next, I send an encrypted reply
back to my work account. First, however, I set up
keys for the comcast.net account, so I have somewhere to
send it.
</p><p>
Once you install KGPG, you should have an icon on the
system tray. If not, you can launch it from a terminal
by typing <tt  >KGPG -k</tt>. The -k option is important to bring
up the user interface&mdash;the Key Management tool
(Figure 1). Without the -k option, KGPG runs as a service in the
background, and the system tray
icon appears. Clicking on the system tray icon
brings up the the user interface.
</p><div       class="mediaobject"><a href="7616f1.large.jpg"><img src="7616f1.jpg"></a><div class="caption"><p>
Figure 1. Use the Key Management tool to browse GnuPG keys by name or e-mail address.
</p></div></div><p>
First, I make a private and public key pair for my comcast.net e-mail
account. Inside the Key Management program, select the Keys&rarr;Generate
Key Pair menu item, which brings up a rather simple dialog box. Selecting
Expert Mode launches GnuPG in a terminal. For now, enter your
name, e-mail address and a comment using the dialog window. Depending on your
security policies, you can set when keys expire as well.
</p><p>
The next step is entering a passphrase for GnuPG. This
is very important. If you forget this, you won't be
able to read any messages, and KGPG prompts you
for a passphrase whenever you want to read anything.
Then wait a few seconds for GnuPG to make your
keys for you. As a safety measure, I also
suggest making a revocation certificate (name the
file something like rhooblerrev.asc). If your
system is ever stolen or compromised, you can send
out this certificate to let people know your public
key is void.
</p><p>
That's it. Now we have a public and private key for
rhoobler@comcast.net. Two things are left: exporting
the public key and optionally exporting the private
key. These keys are exported separately; for the
public key, I name the file rhoobler.asc and
for the private key, rhooblerprivate.asc. Beware:
if someone gets hold of your private key and
guesses your passphrase, the attacker can read encrypted mail for you
and cryptographically sign mail as you.
</p><p>
After exporting the private key and the
revocation keys, burn them to a CD-ROM and put it
in a safe or a safe-deposit box, then delete
the revocation (rhooblerrev.asc) and private key
(rhooblerprivate.asc) files from your hard drive.
</p><p>
GnuPG keeps the following files in each user's .gnupg directory.
All are read/writable only by the user:
</p><div class="itemizedlist"><ul type="disc"><li><p>
gpg.conf: general GPG configuration.
</p></li><li><p>
pubring.gpg: list of public keys.
</p></li><li><p>
secring.gpg: list of secure (private keys).
</p></li><li><p>
trustdb.gpg: database file that records who trusts whom.
</p></li></ul></div><p>
For convenience, now I export the public key for
rhoobler@comcast.net to a default keyserver. Using the
Key Management tool, select the key and right-click,
and then choose Export Public Key(s). Another simple dialog box comes up
with three options. I choose Default keyserver and then
OK. The keyserver can be configured in the Settings
menu, but by default it is subkeys.pgp.net, which
always has worked for me. You also can export it to
a file then e-mail it, or upload the key to your Web
site. There is nothing wrong with everyone knowing
your public key, but they should verify that it is
yours (more about this later). Having your public
key means they can encrypt files that only you will
be able to open.
</p><p>
So, now we can encrypt files and send encrypted e-mails.
But it works only if you have someone to
share this information with. For this article,
I went to my other workstation and set up another
set of keys for my business e-mail account, using
the same set of steps.
</p><p>
The next step is to import
the rhoobler@comcast.net public key by using the Key
Manager from the keyserver and selecting the globe icon or
File&rarr;Key Server Dialog from the menu. You can
type in the e-mail address and import the key. Before
fully using the key, select it from the main dialog
window then select Keys&rarr;Sign Keys from the menu.
</p><p>
If I wanted to set up a large group, I could create my own keyserver,
sign the keys and then distribute them. Another approach is for people
to e-mail their keys to others, then meet in a physical location and have
them verify and sign each other's keys. This builds the web of trust.
For example,
I've signed Bill's key and Bill has signed Kate's key. If I get mail
from Kate, her key can be added to my trust database.
</p><p>
Keys have a fingerprint, and if I am not sure whether a key
is authentic, I can look at the fingerprint and call the person to
verify it. The fingerprint can be found in the Key Manager by selecting
the key and then selecting Edit Key from the menu (Figure 2).
</p><div       class="mediaobject"><img src="7616f2.jpg"><div class="caption"><p>
Figure 2. To check the authenticity of mail, simply
call the sender and check the key fingerprint.
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231d1b8"></a>
Encrypting Files</h2></div></div><p>
KGPG is integrated nicely into KDE and KDE
applications. The most useful is the Konqueror
browser. Once KGPG is installed, you can right-click
on a document, and under the Actions menu, create an
encrypted version of the document. One of the options
is to shred the original, which makes a lot of sense
if keeping the unencrypted version is a problem.
When encrypting files, you can add multiple
keys for different people who can read the document.
If you shred the original file, make sure you include
your own key whenever you encrypt it. If I
use only my rhoobler@comcast.net key, I am the
only person that can decrypt the file.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231d2c0"></a>
Sending E-Mail</h2></div></div><p>
Finally, we are ready to send an encrypted e-mail. Using KMail (or
Kontact), type a message&mdash;I'll use rhoobler@comcast.net as the To: address.
Select the Lock icon (or
Options&rarr;Encrypt from the menu). When you click Send, a dialog
comes up. If you do not see the recipient's key, press the
refresh button. Also, if you didn't sign the key, it won't show up;
go back and sign it with the Key Management tool and then press the
refresh button. Finish typing the message and click Send.
</p><p>
With KMail, decrypting messages is built in. When you receive an encrypted
message, you are asked for your passphrase and the message opens.
If you are sending an encrypted message, if the e-mail address is in
your keyring, it is encrypted and sent automatically. You
also can send the message encrypted to several people at once, as long as
you have their public keys.
</p><p>
Another method is to encrypt the file with KGPG and send the encrypted
file as an attachment. KMail automatically decrypts the attachment
for viewing (select view not open). For Web-based e-mail clients,
you can download the file and decrypt or view it with Konqueror.
</p><p>
If you are using a Web-based e-mail client such as Yahoo mail, you can cut
and paste the encrypted messages from the clipboard to the KGPG editor
by right-clicking on the Tasks Tray icon, and then select decrypt clipboard.
The same holds true for encrypting messages.
</p><div       class="mediaobject"><img src="7616f3.jpg"><div class="caption"><p>
Figure 3. Decrypt Clipboard
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231d688"></a>
Signing E-Mail</h2></div></div><p>
More popular than encryption is signing e-mails. Of course, this doesn't
encrypt the text, but signing a message proves that it is from you.
If I sign all my e-mails, because it is policy, and you
get an e-mail from me that is not signed (or the signature doesn't match),
you can assume it is a fake and alert whoever needs to be notified.
</p><p>
With KMail, the e-mail message is color-coded to let you know if it is a signed
message and if the message came from a trusted source&mdash;yellow means
signed, and green means signed and trusted.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231d7e8"></a>
Creating Groups/Other Options</h2></div></div><p>
Another handy tool in KGPG is the ability to create groups of keys.
I could have an Administrative group that contains three or four keys.
When sending a message, I can select that group and send it out. Later,
if a recipient forwards the message to another person in the group, it
already will be ready to read.
</p><p>
One other thing, under Configure KGPG, use the
ASCII Armor option. It should be on by default. This
makes signatures and encryption in plain text, so
it is easy to mail, print and cut and paste.
Without ASCII Armor, some files will be binary and
may cause problems.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2224580.0x231d948"></a>
Summary</h2></div></div><p>
Time permitting, I'll try to decrypt and answer any
encrypted messages that may come in. Because KGPG is
included with KDE, it is included with most Linux
distributions. Setting up a few keys and testing it
yourself is only an hour or two worth of work.
</p><p>
With GnuPG and KGPG, using keys and encryption is a viable solution
if you need to tighten up security. In my career, a lot of attention
has been given to security for connections and transactions over SSL,
but little attention has been given to files and e-mail. With KDE, and
some effort, having secure e-mail is easy to set up. One idea to start
with is encrypting any e-mail you send to your manager or the owner of
the company. Another idea is to set up a private folder on the network
that stores only encrypted documents. Following these types of security
policies makes encryption easier to implement.
</p><p><span   class="bold"><b>Resources for this article:</b></span>
<a href="../129/7863.html" target="_self">/article/7863</a>.
</p></div></div>
<div class="authorblurb"><p>
Roy Hoobler is owner of Connect Computing, Inc. (<a href="http://www.connectcomputing.com" target="_self">www.connectcomputing.com</a>). As an
independent consultant with ten years of proprietary software experience,
his firm now focuses on helping small businesses to use Linux, as well as
implement open-source business applications.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../129/toc129.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>