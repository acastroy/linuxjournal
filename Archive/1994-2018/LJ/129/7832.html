<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Staying Current with Your Distribution's Security Updates</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;Keeping software up to date is the first lesson for&#10;beginning Linux administrators. Jeremy covers how to do it&#10;with the most popular update tools, click by click.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x14c6580.0x15bdab0"></a>
Staying Current with Your Distribution's Security Updates</h1></div><div><div class="author"><h3 class="author">
Jeremy
 
Turner
</h3></div><div class="issuemoyr">Issue #129, January 2005</div></div><div><p>
Keeping software up to date is the first lesson for
beginning Linux administrators. Jeremy covers how to do it
with the most popular update tools, click by click.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15be2f0"></a></h2></div></div><p>
One of the key elements of making and keeping Linux
a prime-time player in your desktop or server
environment is ensuring that it is current with
security patches. You take measures to address
security at the network and hardware levels, but
it takes only one security hole to compromise your
entire environment. All users, whether they are commercial,
nonprofit or home users, must know how to update
their systems and applications, and they must do so
regularly.
</p><p>
Two steps are key to keeping your system clean:
knowing when to update and actually performing
the updates. The first can be solved by monitoring
security bulletin mailing lists for your specific
distribution. The second can be solved in numerous
ways through graphical and command-line tools. Some
distributions also include auto-upgrading software
utilities that can help you monitor your system.
</p><p>
I admit that I use the terms update and
upgrade interchangeably when referring to
moving from one version of a software package to
another. These essentially mean the same thing. You
also want to be careful when updating software
so you do not install a version of a package
you did not intend to. Development versions of
packages usually carry a different version series. If
the version differs by too much, check for a different
update.
</p><p>
This article investigates both command-line and GUI
tools for keeping your Linux system up to date. We
specifically look at Debian 3.0 (Woody), Mandrake 10.0, SuSE 9.1 and
Fedora Core 2.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15be500"></a>
Knowing When to Update</h2></div></div><p>
So how do you know when you should update? One good
method is to subscribe to the security bulletins that
your distribution provides. The on-line Resources
provide URLs for the distributions covered in this article
here and their respective security mailing
lists. These usually are low-traffic mailing lists to
alert you of security-related patches or updates. They
also usually provide direct links for downloading
the updated packages and MD5 sums to ensure
you have a clean package. You manually can install
a package this way. You also might need to grab any
dependencies, if necessary.
</p><p>
Another method for knowing when to update is to
use a script or application that polls for any
updates. SuSE 9.1 and Fedora Core 2 include easy
methods for automatically updating your current
software with GUI tools. Debian and Mandrake also both
have easy GUI tools and can be scripted to download
packages in the middle of the night, letting you
upgrade later.
</p><p>
I must offer a word of caution on upgrading software
when no one is present to monitor the process. For
instance, I heavily configure the Apache Web server.
When I upgrade, it always asks me if I want to replace
my config files. I usually run <tt  >diff</tt> to see what the
changes will do, but I rarely let them overwrite my
config file. Make sure you note any changes in the
software versions that are upgrading if you have any
critical applications. Always back up your critical
application config files.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15be710"></a>
RPM-Based Distributions</h2></div></div><p>
The RPM command-line tool is a manual and dependable
method for upgrading your RPM security update. The
rpm command has a lot of switches for various options,
but for upgrading packages, you should run:

<pre     class="programlisting">
# rpm -Uv package.rpm
</pre>
</p><p>
For the RPM file, you can specify a local filename, or even an FTP or
HTTP location. If your security mailing list includes direct URLs for
package updates, command-line updating is very simple. For more
information on the rpm command-line tool, check out the RPM Web site or
the man page.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15be8c8"></a>
Debian-Based Distributions</h2></div></div><p>
Debian and other Debian-based distributions use dpkg as their package
management system. It used to stand for Debian GNU/Linux package
manager. The dpkg FAQ page states that it no longer stands for anything,
because it is used in non-Debian and non-Linux environments. This package
manager does the mid-level work for APT, the Advanced Packaging Tool, and
GUI tools such as Synaptic. Much like RPM, dpkg includes a plethora of
command-line switches, but we focus on the simple upgrade switch:

<pre     class="programlisting">
# dpkg -i package.deb
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15bea28"></a></h2></div></div><p>
The -i switch instructs dpkg to install the package. If a prior version
of the package exists, dpkg removes the prior version and installs
the newer version. Unlike rpm, dpkg requires wget or curl to download
the package before installing.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15beb30"></a>
Debian 3.0 (Woody)</h2></div></div><p>
Advanced Package Tool (APT) is where you probably
will do most of your command-line package management in
Debian. APT uses a list of repositories with available
packages. If there is a newer package version in
the repository's Package list, APT downloads the
package and hands the process over to dpkg.
First, make sure you have the security update source in your sources.conf
file. It should read:

<pre     class="programlisting">
deb http://security.debian.org/ stable/updates main
</pre>
</p><p>
Instead of the word stable, you might have woody instead, but either
will do. After editing the sources.conf file, you also need to update
your available package list. To update and then upgrade them,
run the apt-get two-step:

<pre     class="programlisting">
# apt-get update
# apt-get upgrade
</pre>
</p><p>
This upgrades only packages that do not require modifications
to other packages. To upgrade packages that do require some sort of
dependencies, run:

<pre     class="programlisting">
# apt-get update
# apt-get -u dist-upgrade
</pre>
</p><p>
The -u switch shows exactly which packages
will be upgraded, newly installed or
removed. You can set these lines to run from the
crontab and have your machine download, but not
install, the latest packages you need. A command
to put in your crontab file might look like:

<pre     class="programlisting">

(apt-get update &amp;&amp; apt-get -dy upgrade) \
| mail -s "`hostname` update" root

</pre>
</p><p>
This command downloads the list of the latest
packages and, if successful, downloads the packages
that need to be updated. It sends the results by e-mail
to the root user. Substitute your user name or e-mail
address as necessary. When you receive e-mail notifying
you that there are updates, you can run:

<pre     class="programlisting">
# apt-get upgrade
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15bef50"></a></h2></div></div><p>
This installs the previously downloaded packages allowing you to
be present at the console or terminal. Some package upgrades require
additional user input, so it may not be wise to run a completely automated
upgrade solution.
</p><p>
Available on the GUI side for Debian users, Synaptic is a complete
front end to dpkg. To run Synaptic, go to the Debian menu in your
desktop environment and select Apps&rarr;System&rarr;Synaptic Package
Manager. Synaptic works much the same as APT. To update your list of
available packages, click the Reload button at the top left of the
window. A window list of mirror locations updates you on the status
of the package list download. When Synaptic finishes downloading the
package lists, you can view all available upgrades. Packages that need
to be upgraded have a green box and an arrow pointing up. Newly
available packages have a yellow star on the box. Installed packages
have a green box, and not installed packages have a white box.
</p><p>
To download
and install all package updates, click the Apply button. You
then are prompted with a window detailing which packages will be upgraded,
installed, kept back or removed (Figure 1). Kept back means that the
package would require other dependencies that were not
stated specifically. Clicking Apply begins downloading the updates. Following
the download process, the updates will install in a terminal-like text
box, allowing you to answer questions if needed. When finished,
click the Close button (Figure 2).
</p><div       class="mediaobject"><a href="7832f1.large.jpg"><img src="7832f1.jpg"></a><div class="caption"><p>
Figure 1. Synaptic Showing the Applications to Be Modified
</p></div></div><div       class="mediaobject"><a href="7832f2.large.jpg"><img src="7832f2.jpg"></a><div class="caption"><p>
Figure 2. Synaptic after All Upgrades Have Been Performed
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15bf478"></a>
Mandrake 10.0</h2></div></div><p>
When installing Mandrake 10.0, one of the final steps before the first
login is to check for any critical updates. If you are installing this
distribution from scratch, this would be a great step. However, what
do you do now that Mandrake is installed, and you need a patch for a
security hole?
</p><p>
Mandrake 10.0 users have a nice GUI package management application called
rpmdrake. You can find it by clicking on the KDE star menu and selecting
System&rarr;Configuration&rarr;Packaging&rarr;Mandrake Update. You
also can run <tt  >rpmdrake</tt> as root on the command line. Answer a
couple of questions, and then you are presented with a list of packages
that need updating due to security updates (Figure 3). To update
all of them, click in the box on the All line, then press the Install
button, and grab your favorite beverage!
</p><div       class="mediaobject"><a href="7832f3.large.jpg"><img src="7832f3.jpg"></a><div class="caption"><p>
Figure 3. rpmdrake's List of Available Package Upgrades
</p></div></div><p>
After downloading and installing all updates, you are presented with a
dialog box letting you know everything has been installed. It's that easy.
</p><p>
The command-line urpmi package was installed with my stock installation
of Mandrake 10.0. urpmi acts much like APT, allowing you to use multiple
sources to update packages. These repositories can be accessed by CD-ROM,
a local RPM directory or an FTP or HTTP Internet source. For our purpose
of installing security updates, we want to run something
like the following command:

<pre     class="programlisting">
# urpmi.addmedia --update updates \
ftp://example.com/Mandrake10.0/RPMS \
with ../base/hdlist.cz
</pre>
</p><p>
This adds security updates from an FTP mirror to your list
of sources. You need to substitute the ftp:// URL with a real
mirror. The Web site Easy urpmi gives you a nice Web interface to choose
your nearest mirror, your architecture and from which source pools you'd like
to download updates.
</p><p>
To update the list of available packages and then install all package
updates, do the urpmi two-step:

<pre     class="programlisting">
# urpmi.update -a
# urpmi --auto-select
</pre>
</p><p>
You then are prompted to install the updated packages
and any dependencies, if necessary.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15bfa50"></a>
SuSE 9.1</h2></div></div><p>
SuSE 9.1 has a similar method for installing updates by
using the YaST2 Online Update (YOU) GUI tool. You can
find this by clicking on the SuSE icon, then System&rarr;YaST. After entering your root password, click on
Software and then Online Update. You can choose
your installation source or add a new server manually
(Figure 4). Additionally, you can configure YOU to
download and/or install updates automatically at a
specified time each day. Clicking Next downloads
information that tells you what packages need to be
updated. After this list is updated, we are presented
with the list of packages, a patch description and
disk usage (Figure 5). In the list of patches,
red lines denote security updates, blue lines denote
recommended updates and black lines are optional
updates. To perform the upgrade, click Accept. After
the updates are completed, click Finish, which configures a few system
services. In addition to the YOU system, you can use the rpm command from
the command line.
</p><div       class="mediaobject"><img src="7832f4.jpg"><div class="caption"><p>
Figure 4. YaST2 Online Update's Mirror Selection Process
</p></div></div><div       class="mediaobject"><a href="7832f5.large.jpg"><img src="7832f5.jpg"></a><div class="caption"><p>
Figure 5. YaST2 Online Update's List of Available Package Upgrades
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15b6758"></a>
Fedora Core 2</h2></div></div><p>
The Red Hat Update Agent, up2date, has been around for several Red Hat
versions and is present in Fedora Core 2. To check for new software
updates in Fedora Core 2, right-click on the red exclamation point in
the system tray and choose Check for updates. To download and install
the latest updates, right-click on the red exclamation point and choose
Launch up2date. You can choose the defaults. The first time you run
up2date, you are asked whether you want to install the Red
Hat GPG key signature. I chose yes on my system.
</p><p>
In the Channels menu, you can subscribe to two channels or repositories
where updates are kept, fedora-core-2 and updates-released-fc2. Channels
in up2date are similar to the repository in APT or urpmi. You are
asked to note any packages you want to skip. The package already
listed for me was a kernel upgrade. Clicking Forward gives you a
list of available software updates (Figure 6). To select all updates,
click the check box next to Select all packages.
</p><div       class="mediaobject"><img src="7832f6.jpg"><div class="caption"><p>
Figure 6. Up2date's List of Available Package Updates
</p></div></div><p>
Clicking Forward starts retrieving packages. Again, a break with
your favorite beverage will do nicely at this point. When the download process is
finished, click Forward to start the installation process. When the
installation process is finished, you are given a nice summary of exactly
what packages were installed and their versions (Figure 7).
</p><div       class="mediaobject"><img src="7832f7.jpg"><div class="caption"><p>
Figure 7. Up2date All Finished Downloading and Installing
</p></div></div><p>
Fedora Core 2 also is based on the RPM system, which allows you to use
the rpm command at a terminal.
</p><p>
Another package management front end that has received notoriety is the
Yellow dog Updater Modified, or Yum. Yum is much like APT, but it has several
differences that the author explains on the Yum Web site. In essence,
Yum acts like urpmi or APT in dealing with package repositories, and
then it hands the actual package installation off to RPM. The anaconda
installer uses Python bindings for RPM access, so you can count on the
Python support staying around.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x14c6580.0x15b6d30"></a>
Conclusion</h2></div></div><p>
There's a saying in baseball: &ldquo;You're only as good as your last
at-bat.&rdquo; The computer application of this principle is that your system
is only as secure as your last update. A fancy network firewall and
a magnetic-stripe server-room door key are good security steps, but
running an outdated version of Apache or OpenSSH can bring your systems
to a halt if you don't keep your Linux systems up to date.
</p><p><span   class="bold"><b>Resources for this article:</b></span>
<a href="../129/7862.html" target="_self">/article/7862</a>.
</p></div></div>
<div class="authorblurb"><p>
Jeremy Turner has been a Linux user for more than five years and has a passion
for helping users learn open-source software. He hacks PHP, sings
first tenor, watches too much baseball and checks his e-mail regularly
(<a href="mailto:jeremy@linuxwebguy.com">jeremy@linuxwebguy.com</a>).
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../129/toc129.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>