<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Messages - A Multi-Media Mailer</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    In this article, Terry Gliedt continues his tour through the&#10;    Andrew project&mdash;this time into a new area, multi-media mail.&#10;    "><meta name="keywords" content="mail, photos"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x213d580.0x2234ab0"></a>Messages - A Multi-Media Mailer</h1></div><div><div class="author"><h3 class="author">Terry Gliedt</h3></div><div class="issuemoyr">Issue #6, October 1994</div></div><div><p>
    In this article, Terry Gliedt continues his tour through the
    Andrew project&mdash;this time into a new area, multi-media mail.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x22353a0"></a>Introduction</h2></div></div><p>AUIS had its roots in 1982 when Carnegie Mellon University
and the IBM Corporation decided to jointly develop a campus
computing facility based on personal computers to replace the
time-sharing system then on campus. IBM provided not only generous
funding, but also some talented individuals and access to IBM
development programs.</p><p>The result was a graphical user interface we know as the
Andrew User Interface System and a file system, the Andrew File
System
(<a href="http://www.transarc.com/Product/AFS/FAQ/faq.html" target="_self">www.transarc.com/Product/AFS/FAQ/faq.html</a>).
The file system formed the basis of Transarc Corporation's
(<a href="http://www.transarc.com" target="_self">http://www.transarc.com/</a>)
<span   class="emphasis"><em>Distributed File System</em></span> (DFS) and is as part
of the Open System Foundation
(<a href="http://www.osf.org" target="_self">www.osf.org</a>)
software.</p><p>The Andrew Consortium
(<a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/atk-ftp/web/andrew-home.html" target="_self">www.cs.cmu.edu/afs/cs.cmu.edu/project/atk-ftp/web/andrew-home.html</a>),
composed of a number of corporations and universities, funds the
current development of AUIS. AUIS is available on a wide variety of
platforms including Linux, AIX, Solaris, Ultrix, HP UX as well as
others.</p><p>In early June, version 6.3 of the Andrew User Interface
System (AUIS) was released by the Andrew Consortium. This led to
the release of auis63L?-wp.tgz
(ftp://ftp.andrew.cmu.edu/pub/AUIS/bin-dist/linux) which contains
just a small portion of AUIS that is suitable as a word
processor.</p><p>Now another package has been released, auis63L?-mail.tgz, to
sunsite.unc.edu (ftp://sunsite.unc.edu/pub/Linux) in
/pub/Linux/X11/andrew. This package provides the Linux community a
powerful mail system which leverages the power of the tools we see
in the word processing package to provide multi-media mail.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x22357c0"></a>Multi-Media Mail</h2></div></div><p>Electronic mail is becoming enormously popular and common
these days, but most of the tools we use have hardly changed since
the earliest e-mail systems were invented. A major effort in the
Andrew project was the development of the Andrew Mail System (AMS)
and its mail reading tool, <b  >messages</b>. The
developers at CMU wanted a mailer which not only met the needs of
traditional mail systems, but could also be used for both public
and private bulletin boards. Today at CMU today one can follow over
7500 bulletin boards with <b  >messages</b>. The scale of
the data is a major factor in the design of
<b  >messages</b>.</p><p>Another goal for the developers of
<b  >messages</b> was to provide <span   class="emphasis"><em>the</em></span>
multi-media mail system. The AUIS data-stream was designed from its
inception to be mail-able. This means it uses only 7-bit ASCII data
which isn't &ldquo;too long&rdquo; for the various mail systems one might
encounter. From a technical standpoint, this design has worked
well.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x2235ad8"></a>MIME</h2></div></div><p>Early versions of <b  >messages</b> suffered from
the &ldquo;chicken-and-egg&rdquo; syndrome. Since there was no standard at the
time, most people were reluctant to use <b  >messages</b>
because not enough other people used it. On the other hand, if a
large number of people used it, then everyone would love to use
<b  >messages</b>. For instance, if telephones were very
uncommon and only 1% of people had one, your business would be
unlikely to install a telephone. On the other hand, no business
today would think of not having a telephone, since virtually
everyone has a telephone.</p><p>Everyone seemed to think <b  >messages</b> was
great&mdash;but at the time you could only send AUIS-mail to others who
used <b  >messages</b>. On large homogenous sites like
CMU, this worked fine. But how to convince the rest of the world to
convert?</p><p>After years of effort, the answer became obvious: you can't.
Not everyone was going to convert to
<b  >messages</b>--no matter how wonderful it might have
been. One of the principle architects of
<b  >messages</b>, Nathaniel Borenstein, decided to take
another tack. He proposed an architecture called MIME (Multipurpose
Internet Mail Extensions) that would allow one to send
non-traditional mail (like pictures) in an architected format.
Nathaniel retrofitted <b  >messages</b> to send mail in
MIME format instead of native Andrew Mail format. When receiving
MIME mail, he modified <b  >messages</b> to call a new
program, <b  >metamail</b>, to display non-text on your
machine. After demonstating that this all worked, Nathaniel
provided similar updates to several common mailers to support MIME
in the same manner.</p><p>For example, if I send mail using <b  >messages</b>
with a picture to someone who uses some other mailer on a SUN
workstation, the recipient's mailer might end up calling
<b  >xv</b> to display the picture. In a non-X
environment, perhaps some other tool might be called. Finally, if
the picture just cannot be displayed, then the mailer might
&ldquo;convert&rdquo; the picture into some text like &ldquo;a picture was provided
here, but cannot be displayed&rdquo;.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x2236108"></a>Messages</h2></div></div><p><b  >Messages</b> is actually just one part of a
larger system known as the Andrew Mail System. This system supports
reading and posting to bulletin boards and delivery between cells
in the Andrew File System. I will not discuss any of these topics
here, but rather just describe <b  >messages</b> as a
conventional mail user agent.</p><p>To view your mail, invoke the command
<b  >messages</b> from an <b  >xterm</b>
window. In Figure 1 you can see that the resulting
<b  >messages</b> window has three parts. The top window
shows a list of folders where you can save mail. The folder &ldquo;mail&rdquo;
is where your incoming mail is saved until you move it elsewhere or
delete it. When you use <b  >messages</b> the first time,
your only folder will be a mail folder. To begin, select a folder
(probably <span   class="bold"><b>mail</b></span>) by pointing to a
name and clicking with the left mouse button.</p><p>The middle window will now display a summary of the mail in
that folder. Select one of these and you'll see the summary line in
bold and, in the bottom window, the text of the message. In Figure
1 you will notice several things. The headers of the mail (From:,
To:, etc.) are show in bold. When you delete a piece of mail, the
summary line is changed to a smaller font, but the actual file is
not deleted until you explicitly delete it. More discerning eyes
will notice the scroll bar shows that there is something above the
<span   class="bold"><b>From:</b></span> line. This data is the
normal mail headers which you normally do not want to see. If you
look at the headers for this particular piece of mail, you'd see
that it has the lines:</p><pre     class="programlisting">
     MIME-Version: 1.0
     Content-Type: multipart/alternative;
        boundary="Interpart.Boundary.ohyS2z9z0001I1RlEF"
</pre><p>indicating this is MIME mail and consists of several parts.
If you look at the summary line for this mail, you'll notice the
phrase &ldquo;(60+1)&rdquo;, meaning the body consists of 60 characters and
contains one inset.</p><p>In the body of the mail, you can see the phrase &ldquo;Information
SuperHighway&rdquo; is in a larger bold font. MIME's metamail or another
low-end MIME reader would convert this to simple text on systems
which do not have font capabilities. On some systems the picture
might show up in a separate window. Since
<b  >messages</b> has all the capabilities of AUIS, the
text and images are shown in-line, as they were intended.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x22366e0"></a>Sending Mail</h2></div></div><p>To compose and send mail to someone, select
<span   class="emphasis"><em>Send/Post Message</em></span> on the
<b  >messages</b> menucard. This will present a window as
shown in Figure 2. In many ways, this is just another
<b  >ez</b> session. (<b  >ez</b> is the basic
editor in AUIS and was described in issue 4 of <i  >Linux Journal</i>.) In this particular example, I selected the
mail we saw in Figure 1 and then I selected <span   class="emphasis"><em>Reply to
Sender</em></span> on the <b  >messages</b> menucard. This
brought up the
<span   class="bold"><b>messages-send</b></span>
window with the <span   class="bold"><b>Subject:</b></span> and
<span   class="bold"><b>To:</b></span> fields already filled out. I
then selected the first sentence of the original mail (so it was
shown in reverse video) and then in the
<span   class="bold"><b>messages-send</b></span>
window, selected <span   class="emphasis"><em>Excerpt body</em></span> on the
<span   class="emphasis"><em>Other</em></span> menucard. This resulted in the indented
and italized <span   class="emphasis"><em>Excerpts</em></span> lines that you
see.</p><p>Had we not marked any text and simply selected this menu
card, the entire original message body would have been copied,
indented and italized.</p><p>Notice that the excerpted area may contain more than simple
text, for example the large, bolded
<span   class="bold"><b>Information SuperHighway</b></span>. In fact
we could have also included the image you saw in Figure 1. To send
the mail, select <span   class="emphasis"><em>Send/Post</em></span> on the
<span   class="emphasis"><em>messages-send</em></span> menucard. If the mail contains
multi-media (anything except simple plain ASCII text), you will be
prompted as shown in Figure 3. If you select <span   class="emphasis"><em>Remove
formatting and send</em></span>, <b  >messages</b> will do
some simple text conversion. The excerpt will have the font
information removed and the excerpt text itself will be prefixed
with &ldquo;&gt;&rdquo; as is common with many mail readers. As you can see in
Figure 3, you may choose to send the mail in the original AUIS
format or in MIME format. You can avoid the question altogether and
always send in MIME format with an entry in your
<b  >$HOME/preferences</b> file like this:</p><pre     class="programlisting">
     *.mailsendingformat: mime
</pre><p>Issue the command <b  >auishelp preferences</b> and
read about the
<span   class="emphasis"><em>mailsendingformat</em></span>
setting for more information.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x222d968"></a>Options</h2></div></div><p>Everyone wants to do mail their own way&mdash;and the same is true
with <b  >messages</b>. <b  >Messages</b> has
dozens of options you may set&mdash;so many that it provides its own
interface to setting and querying these. If you select
<span   class="emphasis"><em>Set Options</em></span> on the <span   class="emphasis"><em>Other</em></span>
menucard, <b  >messages</b> will present a list of the
options and their current setting. I'll bet as soon as you have
<b  >messages</b> working, it won't be long before you
will be poring through the options, trying them out.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x222dc80"></a>Compatibility with Other Mail Readers</h2></div></div><p>The designers chose to not keep the
<b  >messages</b> database compatible with that of other
Unix mail readers like <b  >elm</b>. In conventional Unix
mail user agents (e.g., <b  >mail</b>) when mail is
received, it is first stored in
<b  >/usr/spool/mail/$USER</b> as a simple &ldquo;flat&rdquo; file.
All the mail is mashed together in one physical file. It's up to
the mail reader to sort these out. This works fine when the file is
small, but when you have 100 pieces of multi-media mail, each 50K
in size, it starts getting unwieldy and slow.</p><p>Now when you invoke your mail reader (e.g.,
<b  >elm</b>), the reader shows you what is in
<b  >/usr/spool/mail/$USER</b>. When you save the mail to
a folder, the mail is appended to some file in
<b  >$HOME/Mail</b> (e.g. <b  >~/Mail/tpg</b>
in my case). Just as with the mail in
<b  >/usr/spool/mail</b>, this is also a simple file
containing many logical files (pieces of mail). It will suffer even
more from performance problems as you keep more and more mail
around. Most mail readers allow you to create separate folders for
categories of mail&mdash;but each still uses one monolithic file.</p><p>In the world where AUIS was developed, it is not unusual for
one to have hundreds of pieces of mail (and large multi-media mail
at that). So another, incompatible approach was taken.
<b  >Messages</b> keeps each individual piece of mail as
a <span   class="bold"><b>separate file</b></span> in a folder (i.e.,
directory) and builds an index so it can quickly show what's in the
folder. Each of these folders is kept in the directory
<b  >$HOME/.MESSAGES</b>.</p><p>The drawback to this approach is that you cannot directly
switch between <b  >elm</b>, for example, and
<b  >messages</b>. Any mail received by
<b  >messages</b> is not available in your next
<b  >elm</b> session. Similarly, mail you received in the
past with <b  >elm</b>, is not directly available in
<b  >messages</b>. However, that does not mean it cannot
be done&mdash;but you must do it &ldquo;manually&rdquo;. I have developed some
techiques to allow you to &ldquo;convert&rdquo; your <b  >elm</b>
mail for use in <b  >messages</b> and vice versa. I will
not describe these in detail, but rather direct you to read about
it in <b  >/usr/andrew/README.ez.mail</b> which is
created when you install the
<span   class="bold"><b>auis63L?-mail</b></span>
package.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x222e620"></a>Printing and Previewing</h2></div></div><p>Just as AUIS prints other text documents,
<b  >messages</b> will print your mail using PostScript.
In this version AUIS objects all generate <b  >troff</b>
output&mdash;along with copious amounts of embedded PostScript. The
<b  >troff</b> is then processed to generate the
necessary PostScript. The default print command will invoke a
shell, <b  >/usr/andrew/etc/atkprint</b>. The default
preview command calls the shell
<b  >/usr/andrew/etc/atkpreview</b>. Each of these shells
will invoke the <b  >groff</b> formatter to generate the
PostScript output. In <b  >atkpreview</b> the
<b  >groff</b> output is directed into
<b  >ghostview</b>.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x213d580.0x222ea40"></a>For More Information</h2></div></div><p>A mailing list is available at
<b  >info-andrew@andrew.cmu.edu</b> (mail to
<a href="mailto:info-andrew-request@andrew.cmu.edu">info-andrew-request@andrew.cmu.edu</a>
for subscriptions). The newsgroup comp.soft-sys.andrew is dedicated
to the discussion of AUIS. A World Wide Web home page can be found
at
<a href="http://www.cs.cmu.edu:/afs/cs.cmu.edu/project/atk-ftp/web/andrew-home.html" target="_self">www.cs.cmu.edu:/afs/cs.cmu.edu/project/atk-ftp/web/andrew-home.html</a>.
A book, <span   class="emphasis"><em>Multimedia Application Development with the
Andrew Toolkit</em></span>, has been published by Prentice-Hall
(ISBN 0-13-036633-1). An excellent tutorial is available from the
Consortium by sending mail to
<a href="mailto:info-andrew-request@andrew.cmu.edu">info-andrew-request@andrew.cmu.edu</a>
and asking about the manual, <span   class="emphasis"><em>A User's Guide to
AUIS</em></span>.</p></div></div>
<div class="authorblurb"><p>
           <span   class="bold"><b>Terry Gliedt</b></span>
           (<a href="mailto:tpg@mr.net">tpg@mr.net</a>)
           left Big Blue last year after spending over twenty years with IBM. Although he has worked with Un*x and AUIS for over
           six years, he is a relative newcomer to Linux. Terry does contract
           programming, teaches classes in C/C++ and Unix and writes the
           occasional technical document.
        </p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../006/toc006.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>