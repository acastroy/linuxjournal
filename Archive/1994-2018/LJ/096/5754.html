<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Linux Graphics Drivers</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="keywords" content="graphics, XFree86, Metro-X, Xi, Graphics, Accelerated-X, NVIDIA"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0xec2580.0xfb9ab0"></a>Linux Graphics Drivers</h1></div><div><div class="author"><h3 class="author">Robin Rowe</h3></div><div class="issuemoyr">Issue #96, April 2002</div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0xec2580.0xfba660"></a></h2></div></div><p>Linux graphics performance is affected by
your choice of graphics hardware, video driver and graphics
interface. Let's take a look at the open-source XFree86 server, the
commercial Xi server, ATI Fire GL workstation video card, NVIDIA
GeForce3 Titanium game video card and the Wacom tablet Linux
drivers.</p><p>XFree86 is the best known X server because almost every Linux
distribution includes it. This technology provides the X Window
System graphics underpinnings for most Linux desktop users. &ldquo;The
January 2002 XFree86 4.2 release included anti-aliased fonts, a lot
of bug fixes and many new drivers including the RADEON 8500 and
Matrox G550&rdquo;, says XFree86 President and Release Manager David
Dawes. Dawes is a board member and senior software architect at
Tungsten Graphics, a startup founded by some former VA Linux
employees to work on drivers, OpenGL API extensions and DRI.</p><div       class="mediaobject"><img src="5754f1.jpg"><div class="caption"><p>
ATI Fire GL 8700
</p></div></div><p>Luxi scalable fonts, both TrueType and Type 1, are part of
the 4.2 release. Bigelow &amp; Holmes, Inc. donated these new fonts
created in Ikarus digital format, and URW++ Design and Development
GmbH did the TrueType and Type 1 conversions.</p><p>XFree86 4.2.0 provides a partial implementation of the new X
Rendering Extension. Using simple compositing operators provided by
most hardware, Render can draw anti-aliased text and geometric
objects as well as perform translucent image overlays. Still to be
implemented are geometric primitives and affine transformation of
images. Just three applications have been modified to provide
anti-aliased text in 4.2.0: xterm, xditview and x11perf.</p><p>Several 4.2.0 enhancements affect Darwin Mac OS X. On Mac OS
X, a new rootless mode was added to allow X clients to display
windows on the Aqua desktop. XDarwin now supports Xinerama, the
capability to have windows span two monitors.</p><p>Asked what is at the top of his wish list for the next
version, Dawes says it will be making XFree86 easier to install.
&ldquo;We keep making progress on that. For 4.3, I'm planning to be
working on that myself.&rdquo;</p><p>Commercial X servers such as Metro-X and Xi Graphics offer
alternatives to XFree86. HP and IBM also produce proprietary X
servers, bundled with their workstations. Metro-X maker Metro Link
has shifted to the personal video recorder TV set-top box market.
&ldquo;Linux Metro-X is no longer in development, but is still
available&rdquo;, says CEO Morgan Von Esson. &ldquo;The $25,000 PVR SDK
market is our focus now.&rdquo; Metro Link is working with the ATI as a
technology partner on the ATI set-top HDTV reference platform.
Metro Link made a significant contribution to XFree86 4.x by
donating its runtime loader. That enables XFree86 to load drivers
dynamically, even on operating systems that do not support dynamic
link libraries.</p><div       class="mediaobject"><img src="5754f2.jpg"><div class="caption"><p>
PNY Verto NVIDIA GeForce3 Ti200
</p></div></div><p>Xi Graphics first released version 2.0 of its Accelerated-X
Summit X server in November of 2001 and has been adding support for
even more graphics cards since&mdash;now over 30 cards and laptops. The
XiG Accelerated-X server comes in models for desktop (DX), laptop
(LX), multihead (MX) and workstation (WX). &ldquo;The big appeal to our
product is lifetime support, performance and stability&rdquo;, says CEO
Dave Methvin. &ldquo;We support the concept of freeware, and we
contributed our Solaris laptop PCMCIA fixes as open source.
However, XFree86 doesn't offer the testing and support we can with
a commercial product.&rdquo; While still a student in Germany, XiG CTO
Thomas Roell ported the original X Consortium implementation to the
Intel x86 platform by himself and donated that to MIT (and thereby
later XFree86).</p><p>Accelerated-X features include the Color Magic color
management system, DualView for dual-head displays, Video Window
for high performance YUV display, Stereo 3-D viewing for shutter
glasses and Power Throttle to conserve power on laptops.
Accelerated-X can throttle the CPU using APCI and even turn off
components of the graphics hardware when not needed. Methvin says
that can add two hours of battery life to laptops over
XFree86.</p><p>For accelerated OpenGL, XiG utilizes a leaner API called XDA,
not DRI. &ldquo;DRI is way too big and complicated&rdquo;, says Methvin.
&ldquo;We've had some conflict with XFree86 about their design.&rdquo;
Installing Accelerated-X presents some challenges to XFree86 users
because the two systems don't like to coexist. Accelerated-X wrote
their own optimized implementation of OpenGL and recommends
uninstalling Mesa first to avoid installation conflicts. OpenGL
applications developers running Accelerated-X should download the
XiG OpenGL development kit to replace the XFree86-compatible Mesa
developer package.</p><div       class="mediaobject"><img src="5754f3.jpg"><div class="caption"><p>
The Wacom Cintiq ($1,900) combines a 15" LCD screen and a wireless
pen with 512 levels of pressure sensitivity. Linux-based animators
may draw directly on screen.
</p></div></div><p>XiG offers a free download of a time-limited evaluation copy.
In fact, you have to download the evaluation copy in order to buy
it. Until unlocked with a purchase key, Accelerated-X will only
operate for 25 minutes at a time. (You may restart it as many times
as you like.) DX models cost from $39 to $99, LX from $69 to $139,
MX from $129 to $249 and WX from $129 to $379. We installed the $99
DX RADEON Platinum edition.</p><p>The documentation was a little confusing mainly because we
had questions about what to do with XFree86 and Mesa, which we
already had installed.</p><p>Accelerated-X installation follows these steps:</p><div class="orderedlist"><ol type="1"><li><p>Disable graphical logins and exit the currently
running X server.</p></li><li><p><b  >su root</b>.</p></li><li><p>Remove or disable Mesa.</p></li><li><p>Remove or disable agpgart kernel module.</p></li><li><p>Install the Linux kernel source.</p></li><li><p>Install the X services module (XSVC) RPM.</p></li><li><p><b  >make xsvc</b>.</p></li><li><p><b  >make xsvctest</b>.</p></li><li><p>If necessary, make the kernel with appropriate
MTRR, AGPGART and SMP settings.</p></li><li><p>Install the Summit RPM.</p></li><li><p>Run <b  >Xsetup</b> to configure the
graphics board, monitor and mouse in text mode.</p></li><li><p>Run <b  >startx</b>.</p></li><li><p>Run <b  >Xsetup</b> again to configure
advanced options in graphics mode.</p></li></ol></div><p>We experienced a few extra hurdles because we were using
Debian, not Red Hat. We converted the RPM files to deb format using
<span   class="bold"><b>alien</b></span>. Our high-performance ASUS
A7A266 motherboard was unsupported, as xsvctext revealed, meaning
we didn't gain AGP acceleration. Probably because of the converted
deb files, we had to add the xsvc modutils alias manually and
create .xinitrc and .xserverrc files.
<pre     class="programlisting">
# vi /etc/modutils/aliases
.
.
alias char-major-10-175 agpgart
alias char-major-10-179 xsvc
.
.
tbird:/etc/modutils# update-modules
</pre>


We had to kill gpm and select MS IntelliMouse in Xsetup to get our
optical Logitech MouseMan Wheel mouse to work.
</p><p>XiG plans to continue to grow Accelerated-X as its primary
market. &ldquo;We're moving into the high-end workstation cards&rdquo;, says
Methvin. &ldquo;We're really impressed with the power of the new
high-performance cards. We just released a driver for 3DLabs
Wildcat II 5110.&rdquo; XiG OpenGL support is being upgraded from
version 1.2.1 to 1.3.</p><p>XiG doesn't support NVIDIA cards. &ldquo;We'd like to support
NVIDIA cards&rdquo;, says Methvin. &ldquo;But, NVIDIA won't provide the
specs. We have to content ourselves with writing faster drivers for
competitor ATI.&rdquo; Methvin's biggest complaint with the X Window
System is the number of desktop configurations to be supported.
&ldquo;GNOME is tied to XFree86 in ways that tend to break other X
servers, and there are just too many desktop window managers. I
think not having one standard desktop is holding back application
developers like Adobe from supporting Linux.&rdquo;</p><p>Graphics card manufacturer ATI acquired Fire GL Graphics and
their line of workstation graphics cards in April 2001. Workstation
cards such as the Fire GL are intended for 3-D animators and
engineers, not consumers. In other words you might play
<span   class="emphasis"><em>Quake</em></span> on a high-performance game card such as
the ATI RADEON, but a game designer would use an even
higher-performance Fire GL when creating the 3-D world for a game
or for special effects in motion pictures. What differentiates
these cards most is the OpenGL acceleration performance. Other
pro-Fire GL advantages include high frame rates in multiple
windows, double buffer overlay, dual-monitor support, plus greater
stability, reliability and technical support.</p><p>ATI kept intact the German Fire GL Linux driver team. The
Fire GL driver is a closed-source driver and probably always will
be. &ldquo;There are intellectual property and competition issues in
taking a closed driver to open source&rdquo;, says Director of
Workstations Ed Huang. &ldquo;We believe we have the fastest OpenGL
implementation for Linux and don't want to show competitors
how.&rdquo;</p><div       class="mediaobject"><a href="5754f4.large.jpg"><img src="5754f4.jpg"></a><div class="caption"><p>
XFree86 and MacGimp with a Mac OS X Finder window open showing the
two different window systems operating together.
</p></div></div><p>The Fire GL 2 and Fire GL 4 use the same closed-source
driver. ATI has taken a different strategy for the RADEON. It is an
open-source driver. The top-end Fire GL 4 costs about $1,500 (at
<a href="http://buy.com" target="_self">buy.com</a>) and the less-expensive
Fire GL costs about $725 (at
<a href="http://cdw.com" target="_self">cdw.com</a>). Two new Fire GL
models are replacing these. The Fire GL 8800 will be the first
ATI-developed Fire GL card since the acquisition, and the first
based on the RADEON chipset. This 128MB card, with about 50% better
performance than the Fire GL 4 in most applications, is expected to
cost less than $900. The Fire GL 8700, based on the RADEON 8800LE
chip with 64MB, replaces the Fire GL 2. It has about 50% better
performance than the GL 2 and should cost less than $400.</p><p>All the Fire GL cards use the same Linux driver. The Fire GL
driver (currently for XFree86 4.1.0 with libc 6.2) is available on
the ATI web site in .tgz or RPM format, about 5.5MB.</p><p>Graphics chip manufacturer NVIDIA's new high-performance game
card, the GeForce3 Titanium, is offered in Compaq, Dell, HP and IBM
PCs. Their graphics cards are also standard in all Apple desktops
and in the Microsoft XBox. NVIDIA has had a good year, with its
stock the best performer in the 2001 S&amp;P 500. The GeForce3
models include the Ti 200 (about $160), and the even
higher-performance Ti 500 (about $300). These feature fast
high-resolution anti-aliasing on the GPU (HRAA Quincunx), DVI out
and TV s-video out. For content creators, NVIDIA offers the even
higher-performance Quadro2-Pro card (about $615).</p><p>For Linux users perhaps the most interesting aspect of the
NVIDIA card is its unified driver architecture. &ldquo;We use the same
unified driver code for Linux and Windows for all cards&rdquo;, says
software VP Dwight Diercks. &ldquo;Our Linux driver is ready at the
launch of a new board just like our Windows driver. We release both
Windows and Linux drivers within 60 days of new graphics chips
being manufactured.&rdquo;</p><p>OpenGL 1.3 is fully implemented and shipping on all
platforms. &ldquo;Our unified driver architecture gives us a single
driver binary across all our cards&rdquo;, says director of OpenGL and
Linux workstations Nick Triantos. &ldquo;When we make a driver
performance optimization it applies to all our products. Other
companies supporting multiple drivers can't keep them
current.&rdquo;</p><p>Diercks says NVIDIA reuses as much driver code as they can.
&ldquo;The major internal difference is the OpenGL GLX layer for Linux
and the Wiggle layer for Windows. All the optimizations, new
features and extensions come to the Linux side without much work.&rdquo;
Nvdriver is a Linux kernel mode driver. The Windows driver is a VXD
miniport driver.</p><p>The Linux Nvdriver is a closed-source driver. There is also
an open-source NVIDIA driver offered as part of XFree86. The
open-source driver has the important 2-D functionality (accelerated
video, DVD playback and monitor detection), but OpenGL 3-D
acceleration was lost when the XFree86 architecture changed in
4.x.</p><p>Led by architect Mark Voikavich, NVIDIA has a team of ten
engineers supporting Linux. Although Microsoft's proprietary
DirectX protocol obviously isn't part of the Linux driver, all the
other driver features are in Linux. &ldquo;Linux has full TwinView
dual-head support&rdquo;, says Diercks. &ldquo;Linux laptops have multihead
technology for monitor output for presentations. The user can drag
windows between screens.&rdquo; The Linux driver is actually a little
leaner than the Windows driver because it doesn't have to duplicate
functionality offered in OpenGL and DirectX. Depending upon
configuration, the Linux driver can have faster performance than
the Windows version.</p><p>NVIDIA works closely with the XFree86 Project. &ldquo;In the
future we're looking at more support for laptop features, such as
hotkeys to move windows dynamically between displays&rdquo;, says
Triantos. &ldquo;There's no interface in X to make a window appear on
just one screen.&rdquo; Another feature missing in X is a mechanism to
do screen captures of accelerated windows. In Windows there is a
callback hook to the driver, but to capture an accelerated screen
in Linux requires help from the application, such as pressing the
F11 key in <span   class="emphasis"><em>Quake</em></span> to do an OpenGL glReadPixels
screen capture. Because accelerated windows blow a hole in the
desktop to write to, it takes extra effort to capture them instead
of a solid black window.</p><p>NVIDIA recently released their Personal Cinema graphics card
to compete with the ATI AIW RADEON. &ldquo;Personal Cinema provides
video editing and video capture, but those features aren't
available in the Linux driver&rdquo;, says Diercks. &ldquo;We're interested,
but not sure there is enough of a demand there for Linux.&rdquo; The ATI
AIW RADEON, on the other hand, has a new Video4Linux driver for
video capture.</p><p>NVIDIA uses Linux extensively in their chip development. &ldquo;We
use Red Hat 6.2 Linux on a 1,500 server computing farm&rdquo;, says
Diercks. &ldquo;Our engineers test the progress of our chip designs with
that.&rdquo;</p><div       class="mediaobject"><a href="5754f5.large.jpg"><img src="5754f5.jpg"></a><div class="caption"><p>
The XiG Xsetup configuration tool enables quick adjustment of color
temperature using the Color Correction Wizard.
</p></div></div><p>Not all graphics-related Linux drivers are for video. Wacom
tablets are popular with GIMP users and with motion picture
animators working on Linux workstations. XFree86 developer Frederic
Lepied is responsible for the Wacom Linux drivers. &ldquo;In my previous
job, we needed to access the Solaris X server through a tablet, and
the protocol for the Wacom IV devices was available from Wacom's
web site&rdquo;, says Lepied. &ldquo;I later ported my Solaris Wacom driver
to Linux XFree86. Making the XInput extension work in XFree86 is
how I became an XFree86 developer.&rdquo;</p><p>Linux Wacom driver development started in 1995. Lepied is the
only developer, but he receives contributions from many people. The
development is a continuous effort to support the new models.
Lepied's work is supported by Wacom, but sponsored by his employer
MandrakeSoft. Lepied is a team manager and developer of the
Mandrake Linux distribution. The open-source Linux Wacom driver
supports Wacom IV, Wacom V and USB protocols.</p><p><a href="5754s1.html" target="_self">Resources</a></p></div></div>
<div class="authorblurb"><p>
       email: <a href="mailto:Robin.Rowe@MovieEditor.com">Robin.Rowe@MovieEditor.com</a>
       </p><p><span   class="bold"><b>Robin
      Rowe</b></span>
      (<a href="mailto:robin.rowe@movieeditor.com">robin.rowe@movieeditor.com</a>)
      is a partner in MovieEditor.com, a technology company that creates
      internet and broadcast video applications. He has written for
      <span   class="emphasis"><em>Dr. Dobb's Journal</em></span>, the <span   class="emphasis"><em>C++ Report</em></span>, the
      <span   class="emphasis"><em>C/C++ Users Journal</em></span> and <span   class="emphasis"><em>Data Based
      Advisor</em></span>.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../096/toc096.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>