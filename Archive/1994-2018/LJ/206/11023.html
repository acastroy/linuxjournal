<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Tiny Core Linux
</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;If you want to go&#10;back to those great old days of really lightweight Linux, give Tiny&#10;Core Linux a try and relive the joy of a bare-bones system.&#10;"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x2132580.0x2229ac0"></a>
Tiny Core Linux
</h1></div><div><div class="author"><h3 class="author">
Joey
 
Bernard
</h3></div><div class="issuemoyr">Issue #206, June 2011</div></div><div><p>
If you want to go
back to those great old days of really lightweight Linux, give Tiny
Core Linux a try and relive the joy of a bare-bones system.
</p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2132580.0x222a250"></a></h2></div></div><p>
Several projects exist that purport to be small, run-in-memory
distributions. The most popular probably is Puppy Linux. Puppy
has spawned several variations, and I have used it several times myself
on older machines. But, I have discovered one that bowled
me over completely&mdash;Tiny Core Linux. This distribution is a totally different
beast and fills what I think is as of yet an unfilled category.
</p><p>
To start, Tiny Core is tiny&mdash;<span   class="emphasis"><em>really</em></span> tiny. The full desktop
version weighs in at approximately 10MB&mdash;this is for a full graphical
desktop. Not many other options can deliver
something like this. People of a certain age may remember projects like
Tom's root/boot, or muLinux. Tiny Core fits somewhere in between those older
floppy-based projects and &ldquo;heavier&rdquo; small distributions like Puppy. 
</p><p>
Along with this full version, there is an even more stripped-down version called
Micro Core, which weighs in at less than 7MB. This version provides a
command-line interface for all of you text aficionados. Tiny Core is designed
to be run completely, or partially, from RAM. This means the system
can be very fast and responsive. You also can set up the system 
so that it is loaded fresh on every boot, which reduces the probability
of cruft working itself into your system dramatically.
</p><p>
To get Tiny Core, download it as an ISO image, which can be burned to a CD or copied
to a USB device. Basically, you can put it on anything bootable. When you boot
it up, you get the full desktop in a matter of a few seconds&mdash;in a virtual
machine on my Mac, it takes less than five seconds (Figure 1).
</p><div       class="mediaobject"><a href="11023f1.large.jpg"><img src="11023f1.jpg"></a><div class="caption"><p>
Figure 1. You are greeted with a nice, clean desktop on bootup.
</p></div></div><p>
The default gives you a window manager (flwm, the Fast Light Window
Manager), a set of custom tools and a
terminal (aterm). Everything else is available as an installable package, using
its own custom package system called the AppBrowser (Figure 2). At the time
of this writing,
3,170 packages are available. Packages are being added constantly,
and there are very clear instructions on how to create and add your own
packages. 
</p><p>
When you boot Tiny Core, you initially are dumped at a boot prompt
(Figure 3). If you don't do anything, it times out and places you on the
desktop. However, you can use boot codes, which have the form of
<tt  >tinycore option1 option2 ...</tt>. Some of these boot
codes include:
</p><div class="itemizedlist"><ul type="disc"><li><p>
<tt  >tce={hda1|sda1}</tt> &mdash; specify restore TCE apps directory.
</p></li><li><p>
<tt  >waitusb=X</tt> &mdash; wait X seconds for slow USB devices.
</p></li><li><p>
<tt  >swapfile{=hda1}</tt> &mdash; scan for or specify a swap partition.
</p></li><li><p>
<tt  >base</tt> &mdash; skip TCE and load only the base system.
</p></li><li><p>
<tt  >xsetup</tt> &mdash; prompt user for Xvesa setup.
</p></li><li><p>
<tt  >text</tt> &mdash; start up in text mode.
</p></li><li><p>
<tt  >{cron|syslog}</tt> &mdash; start various d&aelig;mons at
boot time.
</p></li><li><p>
<tt  >host=XXXX</tt> &mdash; set hostname to XXXX.
</p></li><li><p>
<tt  >noautologin</tt> &mdash; skip automatic login.
</p></li><li><p>
<tt  >desktop=xyz</tt> &mdash; use alternate window manager.
</p></li></ul></div><div       class="mediaobject"><a href="11023f2.large.jpg"><img src="11023f2.jpg"></a><div class="caption"><p>
Figure 2. The packages available to you are listed after clicking on Connect.
</p></div></div><div       class="mediaobject"><a href="11023f3.large.jpg"><img src="11023f3.jpg"></a><div class="caption"><p>
Figure 3. On bootup, you are greeted with a prompt where you can enter
options to control your system setup.
</p></div></div><p>
Many other options are available. You can find them on the Tiny
Core Wiki or list them during bootup. By default, you're
logged in as user tc automatically and end up at the desktop with flwm as
the window manager.
</p><p>
One of Tiny Core's features is that you get a fresh system on
every boot. But, what if you want to save settings over a reboot?
What are your options? In Tiny Core, you have the option to back up any
necessary files at shutdown and have them be recovered automatically on
boot. These files are saved to the file mydata.tgz. By default, the system
saves all the files and directories that exist under /home/tc. 
</p><p>
You
can control what's actually backed up and what's ignored by using
the files /opt/.filetool.lst and /opt/.xfiletool.lst. In .filetool.lst,
you can add any files you want included in the backup. The file
.xfiletool.lst contains a list of files to exclude from the backup. This
backed-up home directory resides in RAM, so if you have a lot of files
in your home directory, they will take up precious RAM. Also, as your
home directory gets bigger and bigger, the startup and shutdown times
grow as those files are being backed up and restored. 
</p><p>
Another option is
to create a persistent home directory. You can tell Tiny Core
where to find this with the boot code <tt  >home=xxx</tt>, where xxx is the device
partition storing your home directory (for example, sda1 for the first
partition on the first drive). If you want to put the home directory
inside a subdirectory, you can hand this in with:

<pre     class="programlisting">
home=xxx/yyy
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2132580.0x222b958"></a></h2></div></div><p>
where yyy is the subdirectory name.
</p><p>
This gives you a really fast basic desktop, which is fine for everyday
use. But, what if you want to adjust the distribution for some special
case? To figure out how you can personalize it, let's take a step
back and look at how Tiny Core is put together and how it works. Then
you'll see how to change the system to suit your application. 
</p><p>
The core
part of the system is stored in a compressed filesystem that gets
copied to RAM. Any extra applications are mounted from wherever they
are stored as loopback devices, by default. They can be selected to be
actually copied to RAM along with the core system, if you prefer. The
advantage of this &ldquo;run from RAM&rdquo; system is that once the system has
finished booting, you can remove the storage media.
</p><p>
In the first case, let's assume you have the system booting from a
USB device that you don't need to remove. Then, you have two options on
how to set up the system. The first, mount mode, is to create a directory
called tce on the USB device. In this directory, you can dump packages
for all the applications you want to have available. These then are
mounted as loopback devices. You can use a utility called appsaudit
to maintain those packages. You have the choice of having
those packages mounted at boot time, or you can have them
mounted &ldquo;on demand&rdquo; (Figure 4). The other option is called copy
mode. In copy mode, Tiny Core actually takes the contents of the package
files and copies them all into RAM. This costs a bit more in boot time,
but then the entire system is, again, running from RAM, so you get the
expected speed-up once everything boots. You actually can control
which packages are copied into RAM on an individual basis through the
configuration file copy2fs.lst. The system can use this file to decide
what is copied and what is mounted.
</p><div       class="mediaobject"><a href="11023f4.large.jpg"><img src="11023f4.jpg"></a><div class="caption"><p>
Figure 4. Maintaining your installed packages is made simpler with a GUI
application.
</p></div></div><p>
These aren't the only methods available if you want to make
a tailored distribution. Because Tiny Core is under the GPL, you can
grab the source code and mess around as much as you please. You 
actually can just remaster the ISO to add in any extra packages you need
for your application. In the ISO, there is a gzipped cpio archive named
tinycore.gz. This file contains the core filesystem that is mounted
in RAM when Tiny Core boots. You can do this work on any Linux box or
even from within Tiny Core. If you want to do it in Tiny Core, you
need to install a few extra packages before you start: advcomp.tcz and
mkisofs-tools.tcz. Once you have all the tools you'll need, you can
mount the ISO image:

<pre     class="programlisting">
sudo mount tinycore.iso /mnt -o loop,ro
</pre>
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x2132580.0x2624128"></a></h2></div></div><p>
where /mnt is the directory to which you want to mount. You also need a
directory into which you can extract the Tiny Core filesystem, which for
this piece, let's call it /temp/extract. To get the files, you need
to execute the following:

<pre     class="programlisting">
cp -a /mnt/boot /temp
cd /temp/extract
zcat /temp/boot/tinycore.gz | sudo cpio -i -H newc -d
</pre>
</p><p>
Once this command is done, you can go ahead and change files, add new
ones or delete others. This way, you can add extra binaries (such as for a point-of-sale application) directly as part of the system. If
you want to be able to handle special hardware, where you'll need a new
kernel module, you can add it to the filesystem. But, then
you'll need to run this:

<pre     class="programlisting">
sudo depmod -b /temp/extract 2.6.29.1-tinycore
</pre>
</p><p>
You also may need to add new shared libraries to provide support for
any new binaries you install. If you do, run this:

<pre     class="programlisting">
sudo ldconfig -r /temp/extract
</pre>
</p><p>
Once you've finished creating a personalized filesystem for Tiny Core,
you need to get it ready to use. The first step is to pack the filesystem
back up into a gzipped cpio archive. Run the commands:

<pre     class="programlisting">
cd /temp/extract find | sudo cpio -o -H newc | 
 &#8618;gzip -2 &gt; /temp/tinycore.gz
cd ..  advdef -z4 tinycore.gz
</pre>
</p><p>
This will give you a brand-spanking-new core file. If you are using a
system other than a CD from which to boot (like some form of hard drive),
you simply need to copy tinycore.gz and the kernel to that device. 
</p><p>
If you
want to create a new ISO image that you can use over and over again,
execute the following commands:


<pre     class="programlisting">
cd /temp
mv tinycore.gz boot
mkdir newiso
mv boot newiso
mkisofs -l -J -R -V TC-custom -no-emul-boot \
   -boot-load-size 4 -boot-info-table \
   -b boot/isolinux/isolinux.bin \
   -c boot/isolinux/boot.cat -o TC-remastered.iso newiso
rm -rf newiso
</pre>
</p><p>
You now have a nice new ISO that you can put to work.
</p><p>
This kind of task happens often enough that the Tiny Core team has put
together a GUI application that helps simplify these steps called
ezremaster. Install it using the AppBrowser. This way, all
the required dependencies also will be installed. You also need
either to have the ISO available or a CD mounted. Once you've done all
of these steps, open up a terminal and run
<tt  >ezremaster</tt>
from the command line, and you should see what's shown in Figure 5. Here you can point
it to the locations it needs, and you should end up with what's shown in Figure 6. From
there, you can set all kinds of options to customize your ISO image. The
sections available are:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Boot codes.
</p></li><li><p>
Display settings and mydata.tgz backup.
</p></li><li><p>
Security settings and users.
</p></li><li><p>
Which services would you like enabled?
</p></li><li><p>
Network settings.
</p></li><li><p>
Window manager, core elements and Xorg settings.
</p></li><li><p>
ISOLINUX settings and 64-bit kernel.
</p></li><li><p>
Startup and shutdown scripts.
</p></li><li><p>
Extension installation.
</p></li></ul></div><div       class="mediaobject"><a href="11023f5.large.jpg"><img src="11023f5.jpg"></a><div class="caption"><p>
Figure 5. The first step when using ezremaster is setting paths for the
source files and a working directory.
</p></div></div><div       class="mediaobject"><a href="11023f6.large.jpg"><img src="11023f6.jpg"></a><div class="caption"><p>
Figure 6. You can set default boot codes to save you extra typing on each
boot.
</p></div></div><p>
Once you have finished all of these steps, move on to &ldquo;Remaster step
#1&rdquo;,
where the filesystem for the new ISO is created. Once that step is
done,
move on to the last step, &ldquo;Remaster step #2&rdquo;, where the actual ISO
image is created. It ends up in the temporary directory you defined in
the first screen. Now you're ready to deploy your awesome customized
Linux on the world.
</p><p>
Be sure to check out the Tiny Core
Web site and Wiki for more information (<a href="http://www.tinycorelinux.com" target="_self">www.tinycorelinux.com</a>).
There is also a very active forum at the main site where people
always are happy to answer questions. Hopefully, this project can give
you a quick start for generating your own custom distributions for your
smaller projects.
</p></div></div>
<div class="authorblurb"><p>
When Joey Bernard isn't debugging scientific code or sorting out problems on
the clusters at the university, he's working on refinishing furniture
or playing with his boys in the backyard. He might call himself a
renaissance man, but that sounds a little too presumptuous. Just call
him a well-rounded geek.
</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../206/toc206.html">Issue Table of Contents</a>
    <a class="link3" href="../206/11023.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>