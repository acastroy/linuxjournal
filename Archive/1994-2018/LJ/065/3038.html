<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>The 19th Century Meets the 21st</title><link rel="stylesheet" href="../css/archive.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.57.0"><meta name="description" content="&#10;    Mr. Murphy describes how he set up frame-relay service for&#10;    the old Brooklyn apartment where he lives.&#10;    "><meta name="keywords" content="DSL"><link rel="stylesheet" href="../../css/archive.css" type="text/css"><script type="text/javascript" src="../../js/archive.js"></script><script type="text/javascript" src="../../js/highlight.js"></script></head><body onload="search_highlight();">
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  <div class="article" lang="en"><div class="titlepage"><div><h1 class="title"><a name="N0x1e44580.0x1f3bab0"></a>The 19th Century Meets the 21st</h1></div><div><div class="author"><h3 class="author">Paul Murphy</h3></div><div class="issuemoyr">Issue #65, September 1999</div></div><div><p>
    Mr. Murphy describes how he set up frame-relay service for
    the old Brooklyn apartment where he lives.
    </p></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3c2f0"></a></h2></div></div><p>I live at the foot of the Brooklyn
Bridge, in a 150-year-old building that used to be the headquarters
of the Brooklyn Railroad. Before the bridge was built, barges and
ferries docked along the piers. Trains brought people and goods
into Brooklyn and beyond. The bridge killed the ferries, the
railroad and, eventually, the neighborhood&mdash;the heart of Brooklyn
in Walt Whitman's day.
</p><p>After a century of decline, the neighborhood, Fulton Ferry
Landing, is being reclaimed by artists and people like me who work
anywhere, thanks to the Internet. Disconnected for a hundred years,
due to a network of roads that ignored it, Fulton Ferry Landing
changed little. Today, it is quickly being reconnected to the rest
of the planet, as a result of the most efficient transportation
network ever devised.</p><div       class="mediaobject"><img src="3038f1.jpg"><div class="caption"><p>
Figure 1. View of Brooklyn Bridge from Apartment Window
</p></div></div><p>Wall Street&mdash;just across the river&mdash;is one of the most
<span   class="emphasis"><em>wired</em></span> neighborhoods on the planet. The rest of
New York, however, lags behind most of North America in terms of
connectivity options: few cable modems, little DSL, and ISDN being
more expensive than digital leased lines. Most people make do with
a modem. After seven years of dial-up access, I decided I could no
longer wait for the dissolution of our local telephone and cable
monopolies&mdash;it was taking too long.</p><p>Thanks to Linux, some volunteer work and a bit of luck, the
old headquarters of the Brooklyn Railroad is now one of the most
wired old buildings on the planet. Each apartment has two data
ports connected to a router in the basement. The router is
connected to the Internet through a digital leased line. We now
have high-speed connectivity, 24 hours a day, for less than it used
to cost us to maintain dial-up accounts.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3c710"></a>Why Wire?</h2></div></div><p>A few months ago, I asked the building's residents to let me
wire the building with CAT5 in order to set up a building network,
because it made sense both economically and organizationally.
Sharing resources, after all, is the whole point of packet switched
networking&mdash;<span   class="emphasis"><em>not</em></span> wiring an apartment building
is perverse.</p><p>Three years ago, I used to walk into many businesses that had
each desktop computer connected to the Internet through a dial-up
connection. Today, most of those businesses have connected their
entire intranet to the Internet though a single, large pipe.
Dial-up connections are expensive and inefficient; no IT
organization would dream of setting things up that way. Apartment
building dwellers, however, have barely begun to question the way
they approach the problem. Although they enjoy high-speed,
permanent connectivity at work, they don't question the AOL dial-up
ritual at home.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3c8c8"></a>Costs</h2></div></div><p>To date, no one is offering residential network management
service. If you want a building network, you will need an on-site
expert to set up and maintain it.</p><p>In the U.S., the local telephone company is responsible for
wires to the building. Residents are responsible for wires in their
apartment. The building owner is responsible for the wiring within
the rest of the building. I suspect it will take at least another
two to three years for people to realize that IP is as fundamental
as telephone service. At that point, they will start making noise
about wiring capable of carrying data from the basement to their
apartments. Network equipment vendors will start building and
pricing hardware for this market, and of course, residential
network management companies will be formed. In the meantime, we
have to plan and build everything ourselves.</p><p>My building was not prepared to provide a network
infrastructure. I guessed that trying to convince a majority of the
shareholders to do so would be a waste of time, so I offered to pay
for it all and resell the service to anyone who wanted it. Everyone
with a computer has joined. While I would have preferred not to
absorb all up-front costs, I have enjoyed the privilege of making
decisions without running them by a committee.</p><p>The most significant up-front costs are the wiring, the
router and the computer providing name, mail and web services.
Running CAT5 wires from each apartment to a central hub&mdash;in our
case, the basement&mdash;is never going to be cheap. In most cases,
however, it will cost far less than it cost me. The age of the
building worked against me.</p><p>In the early 20th century, services were run as if they would
never require replacement. Electrical wires were buried in plaster
walls. Telephones were wired directly to the building's exterior.
Telephone jacks were a 1950s innovation, an early example of
plug-and-play. Today, architects frequently design electrical
systems to be accessible without the help of a demolition crew.
Those who are truly forward-thinking will design easily accessible,
parallel conduits: one for electricity and one for data. Today,
&ldquo;data&rdquo; usually consists of telephone and cable television wires.
Tomorrow, those two will be joined by computer network wires, which
soon enough will also carry telephone and television data.</p><p>In our building, nothing is straightforward. Throughout the
years, conduits have been run through the wood and concrete floors
to carry electrical, telephone, intercom and cable TV wiring. None
were large enough to accommodate additional wires. Running a new
conduit was estimated to cost almost $1000 per apartment. That
expense was impossible to justify at that time.</p><div       class="mediaobject"><img src="3038f2.jpg"><div class="caption"><p>
Figure 2. View of New York from Apartment Window
</p></div></div><p>While I was mulling over what to do about this network wiring
problem, another arose. The building ran out of telephone wires.
Whoever did the capacity planning when the central wires were
installed never considered fax lines, dial-up lines and two or
three voice lines per unit. Also, the wires were old&mdash;many broke
due to corrosion and many were static-filled. Clearly, I had
another project on my hands.</p><p>Actually, I was lucky the building reached the end of its
telephone network lifetime when it did. Any earlier, and I would
not have had the foresight to run network lines in parallel with
the new telephone lines. Any later, and I would probably have
invested in a high-speed solution for myself and would not even
have considered doing the work on a communal scale. The incremental
cost of running the network wires was negligible, so I decided to
go ahead and do it.</p><p>The great irony, of course, is that everyone has now canceled
the lines they had for their dial-up service. Under the old system,
we would now have plenty of lines.</p><p>Besides the wiring, the router and central computer turned
out to be the other big cost in this sort of operation.</p><p>The router is expensive because each apartment needs its own
subnet. I asked Cisco what they sold that could do the job. They
literally answered that buying a router from them would cost me
&ldquo;both arms and both legs&rdquo;. They did, however, suggest a &ldquo;cheap&rdquo;
alternative: a low-end router and a switch, a solution that would
have cost me about $3,500. I was not willing to spend half that
much to solve this piece of the puzzle. I was fairly sure I could
build what I needed using Linux.</p><p>My neighbor, a Linux guru, assured me I could. Before long,
he and I had done the research and mapped out a strategy that
worked.</p><p>The hardware we needed was free. Businesses all over town
have mountains of 486s gathering dust in their storerooms. They are
<span   class="emphasis"><em>thrilled</em></span> to give them away! As you know, the
operating system we decided to use was also freely
available.</p><p>Since our router was going to be a general purpose computer,
we decided to run all of the shared services on the same computer.
This simplified a lot of management issues. It also made disaster
recovery relatively straightforward. We built a second, identical
machine that can be swapped in for the first at a moment's notice.
This sort of approach is practical only if a single machine is
involved.</p><div       class="mediaobject"><img src="3038f3.jpg"><div class="caption"><p>
Figure 3. Apartment Building
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3d210"></a>Architecture</h2></div></div><p>At the start of the project, I had one overriding goal: keep
the architecture as simple as possible. I could not guarantee a
networking wizard would be available when things failed. In fact,
our backup system administrator is a 12-year old resident who knows
little about computers; I figured she would be easier to train than
most adults. Knowing I was going to have to write thorough
documentation about everything I implemented helped me stick to my
goal.</p><p>We knew Linux could support multiple Ethernet interfaces. We
were not sure where to find a card with Linux drivers that could
interface with our DSU. A bit of Net research turned up a Canadian
vendor, Sangoma Technologies, that seemed to be selling exactly
what we needed. Five minutes on the phone with one of their Linux
guys convinced me their WAN pipe product would do the job. At $550,
it was the most expensive piece of hardware I had to buy, and it
certainly beat Cisco's &ldquo;cheap&rdquo; solution.</p><p>I now had all the pieces: a frame-relay line from the
outside, a DSU, a router, a hub, a general purpose computer, wires
and a willing alpha tester. I just had to work out the
details.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3d3c8"></a>Network Topology</h2></div></div><p>We originally planned to isolate each apartment behind an
Ethernet interface. Of course, that seemed ridiculous for those
with a single Windows 95 box. We then considered putting all the
single machine apartments on their own segment. This presented an
evolutionary problem. Whenever anyone bought a second machine, we
would have to change IP addresses, physical connectivity, etc. We
were stuck between over- and under-engineering the network, until
my neighbor remembered some work he'd done earlier for a client in
Atlanta.</p><p>He remembered Linux supports something called Ethernet
aliasing. This allows a single interface to support multiple
networks. For example, a single Ethernet card can be configured to
support ten apartments, each of which is assigned its own subnet.
This turned out to be the perfect compromise. We could logically
isolate each apartment without having to use many Ethernet cards
and several computers.</p><p>If an apartment grows into needing more thorough isolation,
we can <span   class="emphasis"><em>upgrade</em></span> it to its own Ethernet board!
By the time all available slots are used in our current 486, it
will have to be replaced in order to deal with the Y2K issue. By
then, maybe the router vendors will be selling solutions with more
down-to-earth prices.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3d5d8"></a>Security</h2></div></div><p>When I first began discussing the network idea with other
residents, security seemed to be at the top of their list of
concerns.</p><p>We worked out a few security schemes using proxy and
masquerading facilities. Whatever we ultimately decided to do had
to be configurable on an interface-by-interface basis. I personally
wanted access to my computers from the outside world. Luckily,
Linux supports that sort of granular security.</p><p>One day, I happened to mention the various options to a
relatively computer-savvy neighbor who runs a local area network in
her apartment. She was horrified that I would consider implementing
a security scheme at the building level. She wanted control over
her own security so that she could access her machines from
anywhere on the Net. After a bit of discussion, we realized the
original requests for high security were all from people who used
Windows 95 to dial up through AOL.</p><p>It turns out the concerns were the result of alarmist
articles in the local papers&mdash;security threat articles fail to put
the subject in perspective. The least savvy are most easily
frightened, even though they are least at risk since they use
operating systems with few services that can be abused.</p><p>Having come to that realization and remembering our &ldquo;keep it
simple&rdquo; goal, we decided to leave security up to the individual
apartment. After all, AOL does not provide any special security to
the lone PC connecting through its network.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3d840"></a>Name Services</h2></div></div><p>We toyed with the idea of allowing everyone to register their
own domains, but finally decided against it as this would have
created too much work. Instead, we registered a domain for our
building, 8OldFulton.com, which is related to our physical address.
This is one of the few cases in which I think geographic addressing
of any kind makes sense. Given the choices we made, the
administrative burden of adding a machine or cluster of machines is
relatively light.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3d948"></a>Mail Service</h2></div></div><p>Mail service is not yet settled. At the moment, we run a POP3
server, because it is essentially administration-free. POP3 is not,
however, particularly friendly for people who travel a lot or use
multiple computers. Therefore, it is very likely I will eventually
bring up an IMAP4 or web-based mail server.</p><p>Anyone who wants a more flexible e-mail system immediately in
place needs to set up and maintain their own.</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f3daa8"></a>Web Service</h2></div></div><p>It is tempting to offer web hosting services for everyone in
the building. This would, however, run counter to our &ldquo;keep it
simple&rdquo; goal. Although there is little complicated about allowing
people to set up and maintain home pages, the peripheral support
involved is potentially significant. As people become more
sophisticated and web development and management software becomes
easier to use, my policy will probably change.</p><p>Currently, the web server we run serves only private building
information: contact information, bylaws, house rules, meeting
minutes, etc. I am sure some public information (e.g., directions)
will eventually find its way onto the server.</p><p>As with special mail servers, anyone wanting to run their own
web server is free to do so, on their network segment.</p><div       class="mediaobject"><img src="3038f4.jpg"><div class="caption"><p>
Figure 4. Apartment Building Showing Proximity of Bridge
</p></div></div></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f346a8"></a>Implementation Issues</h2></div></div><p>I find it hard to quantify the difficulty involved in setting
up the network. My neighbor and I both have done quite a bit of
UNIX system administration. Tasks that seem easy to us, like
configuring sendmail or name service, might require quite a bit
more effort for a beginner. Luckily, the Linux community is
extremely supportive. Before embarking on a project like this one,
anyone unfamiliar with system administration should make sure they
know how to deal with the following issues:</p><div class="itemizedlist"><ul type="disc"><li><p>kernel recompilation (for WAN pipe support)</p></li><li><p>interface configuration</p></li><li><p>routing</p></li><li><p>name service</p></li><li><p>sendmail</p></li><li><p>HTTP server setup</p></li></ul></div><p>We found the most difficult task was setting up the WAN pipe.
Because it is not a common router, the telephone company and ISP
tend to blame it for every problem&mdash;Sangoma is used to this. They
ship excellent debugging tools with their hardware, and their
installation support personnel are top notch.
</p></div><div class="simplesect" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N0x1e44580.0x1f34c80"></a>The Future</h2></div></div><p>Having the network in place is a great first step. We now
have something very solid to build on. Immediately, we all had
better Internet access.</p><p>We are currently evaluating the purchase of a RaQ from Cobalt
Networks. It would provide a more flexible e-mail system and would
allow each apartment to maintain its own web site. Under the hood,
the RaQ runs on Linux, of course!</p><p>Within a few months, I suspect most people will have given up
their fax lines. They were often justified because they were shared
with the computer. Now that they are stand alone, it probably makes
more sense to use the JFax or efax services. It is cheaper (JFax)
or free (efax), and more flexible than a dedicated phone
line.</p><p>When we can buy IP telephones that look and act like
telephones, we will buy them. I can easily imagine this building
buying no local lines from Bell Atlantic within five years. Between
IP telephones and the incredible calling plans offered by our
national cellular providers, local lines might not make any
sense.</p><p>Installing a building security camera will now cost us about
$800&mdash;the price of an IP camera.</p><p>We will likely bump the network up from 10BASE-T to 100BASE-T
within the next two years. I suspect a gigabit network will become
necessary once we all start using net-based video broadcasts. If
that turns out to be impossible over copper, we will run fiber
through the old telephone wire conduits. The wire was left in place
so that it would be easy to pull the fiber.</p><p><a href="3038s1.html" target="_self">Acknowledgments</a></p></div></div>
<div class="authorblurb"><p>
      <span   class="bold"><b>Paul Murphy</b></span>
      spent almost ten years writing
      software on Wall Street. Today he is a technical partner at
      Brushfire, a venture capital firm he helped found in 1997. He has
      advocated free software throughout his career, much to the dismay
      of his employers. In his spare time he rides motorcycles, plays the
      violin and raises trouble-free children. He can be reached at
      murphy@brushfire.com.</p></div>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../065/toc065.html">Issue Table of Contents</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body></html>