<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
  <title>An Introduction to Using Linux as a Multipurpose Firewall</title>
<link rel="stylesheet" href="../../css/archive.css" type="text/css" />
</head>

<body>
  <div class="headerdiv">
    <a href="../../index.html">
      <img class="topimg" src="../../images/CD_HeaderBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="tophrdiv">
  </div>
  
  <div id="top_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <h4>Listing 4. Local Startup File /etc/rc.d/rc.local</h4>

  <p>This file is used to automatically start up or set various settings that are not part of the normal Linux distribution. It is here that you set up the firewall specific settings, such as IP forwarding and the firewall rules.</p>
  <pre>
#!/bin/sh
# /etc/rc.d/rc.local: Local system initialization
# script.
# Put any local setup commands in here:
# Turn on Kernel IP forwarding
echo "1" &gt; /proc/sys/net/ipv4/ip_forward
# Set default policy forwarding packets to DENY
ipchains -P forward DENY
# Append a rule to forward our packets out of our
# local network, masquerading the IP addresses of
# our local LAN with the Internet IP address of the
# Firewall.
ipchains -A forward -j MASQ -s 192.168.0.0/24 -d 0.0.0.0/0
# start up Real Audio Pass thru
insmod /lib/modules/2.2.9/ipv4/ip_masq_raudio.o
# start up FTP Pass thru
insmod /lib/modules/2.2.9/ipv4/ip_masq_ftp.o
# start up IRC Pass thru
insmod /lib/modules/2.2.9/ipv4/ip_masq_irc.o
</pre>

  <div class="toclinks">
    <a class="link1" href="../tocindex.html">Archive Index</a>
    <a class="link2" href="../071/toc071.html">Issue Table of Contents</a>
    <a class="link3" href="../071/3546.html">Article</a>
  </div>
  <div class="bottomhrdiv">
  </div>
  
  <div id="bottom_search">
  <table class="page_search" summary="">
    <tr>
      <td valign="top" align="left">
        <p class="small_shutdown"><a href="/.exit">Shutdown Archive web server</a></p>
      </td>
      <td valign="top" align="right">
        <form method="get" action="/zoom/search.cgi">
          <input type="hidden" name="zoom_sort" value="0" />
          <input type="hidden" name="zoom_xml" value="0" />
          <input type="hidden" name="zoom_per_page" value="10" />
          <input type="hidden" name="zoom_and" value="1" />
          Search: <input type="text" name="zoom_query" size="20" value="" class="zoom_searchbox" />
          <input type="submit" value="Submit" />
        </form>
      </td>
    </tr>
  </table>
  </div>
  
  <div class="footerdiv">
    <a href="../../index.html">
      <img class="bottomimg" src="../../images/CD_FooterBanner.png" alt="LJ Archive"/>
    </a>
  </div>
  
  <div class="copyright">
    Copyright &copy; 1994 - 2018 <cite>Linux Journal</cite>.  All rights reserved.
  </div>
  </body>
</html>
<!--
## vim: tabstop=2: shiftwidth=2: expandtab:
## kate: tab-width 2; indent-width 2; replace-tabs true;
-->
